{
    "file_contents": {
        "client/src/components/ui/toggle.tsx": {
            "content": "import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n",
            "size_bytes": 1527
        },
        "tailwind.config.ts": {
            "content": "import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n        heading: [\"Poppins\", \"Inter\", \"sans-serif\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n",
            "size_bytes": 4112
        },
        "client/src/components/ui/hover-card.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n",
            "size_bytes": 1251
        },
        "client/src/components/ui/alert.tsx": {
            "content": "import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n",
            "size_bytes": 1584
        },
        "client/src/components/landing/Features.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { GraduationCap, TrendingUp, BarChart3, Headphones } from \"lucide-react\";\n\nexport function Features() {\n  const { t } = useLanguage();\n\n  const features = [\n    {\n      icon: GraduationCap,\n      title: t(\"features.expert.title\"),\n      description: t(\"features.expert.desc\"),\n    },\n    {\n      icon: TrendingUp,\n      title: t(\"features.live.title\"),\n      description: t(\"features.live.desc\"),\n    },\n    {\n      icon: BarChart3,\n      title: t(\"features.progress.title\"),\n      description: t(\"features.progress.desc\"),\n    },\n    {\n      icon: Headphones,\n      title: t(\"features.support.title\"),\n      description: t(\"features.support.desc\"),\n    },\n  ];\n\n  return (\n    <section className=\"py-24 bg-muted/30\">\n      <div className=\"container mx-auto px-6\">\n        <h2\n          className=\"text-3xl md:text-4xl font-heading font-bold text-center text-foreground mb-12\"\n          data-testid=\"text-features-title\"\n        >\n          {t(\"features.title\")}\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {features.map((feature, index) => (\n            <Card\n              key={index}\n              className=\"hover-elevate active-elevate-2 transition-all\"\n              data-testid={`card-feature-${index}`}\n            >\n              <CardContent className=\"p-6\">\n                <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                  <feature.icon className=\"h-6 w-6 text-primary\" />\n                </div>\n                <h3 className=\"text-xl font-semibold text-foreground mb-2\">\n                  {feature.title}\n                </h3>\n                <p className=\"text-muted-foreground\">{feature.description}</p>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n",
            "size_bytes": 1957
        },
        "server/routes.ts": {
            "content": "import type { Express, Request, Response, NextFunction } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport { insertCourseSchema, insertLessonSchema, insertPaymentSchema, insertProgressSchema, insertUserSchema, users } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport bcrypt from \"bcrypt\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport { randomUUID } from \"crypto\";\nimport fs from \"fs\";\nimport { db } from \"./db\";\nimport { eq } from \"drizzle-orm\";\nimport {\n  generateUniqueFilename,\n  ensureDir,\n  getCourseUploadDir,\n  cleanupCourseDir,\n  validateMimeType,\n  validateFileSize,\n  MAX_THUMBNAIL_SIZE,\n  MAX_VIDEO_SIZE,\n  ALLOWED_IMAGE_TYPES,\n  ALLOWED_VIDEO_TYPES,\n} from \"./uploadHelpers\";\nimport express from \"express\";\nimport { HLSConverter } from \"./hlsUtils\";\nimport crypto from \"crypto\";\n\n// Simple slugify function\nfunction slugify(text: string): string {\n  return text\n    .toLowerCase()\n    .trim()\n    .replace(/[^\\w\\s-]/g, '')\n    .replace(/\\s+/g, '-')\n    .replace(/-+/g, '-');\n}\n\n// Auth middleware\nasync function requireAdmin(req: Request, res: Response, next: NextFunction) {\n  const userId = (req.session as any)?.userId;\n  if (!userId) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n  \n  const user = await storage.getUser(userId);\n  if (!user || user.role !== \"admin\") {\n    return res.status(403).json({ message: \"Forbidden - Admin access required\" });\n  }\n  next();\n}\n\n// Role-based access middleware\nasync function requireAdminRole(req: Request, res: Response, next: NextFunction) {\n  const userId = (req.session as any)?.userId;\n  if (!userId) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n  const user = await storage.getUser(userId);\n  if (!user || (user.role !== \"admin\" && user.role !== \"manager\" && user.role !== \"support\")) {\n    return res.status(403).json({ message: \"Forbidden - Admin role required\" });\n  }\n  (req as any).user = user;\n  next();\n}\n\n// Support/Manager specific access check\nasync function requireSupportRole(req: Request, res: Response, next: NextFunction) {\n  const userId = (req.session as any)?.userId;\n  if (!userId) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n  const user = await storage.getUser(userId);\n  if (!user || (user.role !== \"support\" && user.role !== \"admin\")) {\n    return res.status(403).json({ message: \"Forbidden - Support role required\" });\n  }\n  (req as any).user = user;\n  next();\n}\n\n// Log helper\nasync function logAdminAction(userId: string, action: string, page: string, description: string, details?: any) {\n  try {\n    const user = await storage.getUser(userId);\n    const adminName = user ? `${user.firstName} ${user.lastName}` : \"Unknown\";\n    const adminEmail = user?.email || \"unknown@example.com\";\n    \n    console.log(\"üìù [ADMIN LOG] Recording action:\", {\n      adminId: userId,\n      adminName,\n      adminEmail,\n      action,\n      page,\n      description,\n      details,\n      timestamp: new Date().toISOString(),\n    });\n    \n    const log = await storage.createAdminLog({\n      adminId: userId,\n      adminName,\n      adminEmail,\n      action,\n      page,\n      description,\n      details,\n    });\n    \n    console.log(\"‚úÖ [ADMIN LOG] Successfully saved:\", log);\n  } catch (error) {\n    console.error(\"‚ùå [ADMIN LOG] Failed to log admin action:\", error);\n  }\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Setup Replit Auth with session management\n  await setupAuth(app);\n\n  // Ensure uploads directory exists\n  const uploadDir = path.join(process.cwd(), \"uploads\");\n  if (!fs.existsSync(uploadDir)) {\n    fs.mkdirSync(uploadDir, { recursive: true });\n  }\n\n  // File upload configuration with security\n  const upload = multer({\n    storage: multer.diskStorage({\n      destination: (_req, _file, cb) => {\n        cb(null, uploadDir);\n      },\n      filename: (_req, file, cb) => {\n        const sanitizedExt = path.extname(file.originalname).toLowerCase().replace(/[^a-z0-9.]/g, '');\n        if (!sanitizedExt.match(/^\\.(jpg|jpeg|png|pdf)$/)) {\n          return cb(new Error(\"Invalid file extension\"), \"\");\n        }\n        const uniqueName = `${randomUUID()}${sanitizedExt}`;\n        cb(null, uniqueName);\n      },\n    }),\n    limits: {\n      fileSize: 10 * 1024 * 1024, // 10MB limit\n    },\n    fileFilter: (_req, file, cb) => {\n      const allowedTypes = /^(image\\/(jpeg|png)|application\\/pdf)$/;\n      if (!allowedTypes.test(file.mimetype)) {\n        return cb(new Error(\"Only JPEG, PNG images and PDF files are allowed\"));\n      }\n      const extname = /\\.(jpg|jpeg|png|pdf)$/i.test(file.originalname);\n      if (!extname) {\n        return cb(new Error(\"Invalid file extension\"));\n      }\n      cb(null, true);\n    },\n  });\n\n  // Register endpoint\n  app.post(\"/api/auth/register\", async (req, res) => {\n    try {\n      // Validate input with Zod\n      const registerData = insertUserSchema.safeParse({\n        ...req.body,\n        password: req.body.password, // Zod schema expects password field\n      });\n\n      if (!registerData.success) {\n        return res.status(400).json({ \n          message: \"Validation failed\", \n          errors: registerData.error.errors \n        });\n      }\n\n      const { email, password, firstName, lastName, phone, referredBy } = registerData.data;\n      \n      // Check if user already exists\n      const existingUser = await storage.getUserByEmail(email);\n      if (existingUser) {\n        return res.status(400).json({ message: \"User already exists\" });\n      }\n\n      // Create user\n      const user = await storage.createUser({\n        email,\n        password,\n        firstName,\n        lastName,\n        phone,\n        referredBy,\n      });\n\n      // Regenerate session to prevent session fixation\n      req.session.regenerate((err) => {\n        if (err) {\n          console.error(\"Session regeneration error:\", err);\n          return res.status(500).json({ message: \"Registration failed\" });\n        }\n\n        // Store user in session\n        (req.session as any).userId = user.id;\n        \n        res.json({ \n          message: \"Registration successful\", \n          user: {\n            id: user.id,\n            email: user.email,\n            firstName: user.firstName,\n            lastName: user.lastName,\n            role: user.role,\n          }\n        });\n      });\n    } catch (error) {\n      console.error(\"Error during registration:\", error);\n      res.status(500).json({ message: \"Registration failed\" });\n    }\n  });\n\n  // Login endpoint\n  app.post(\"/api/auth\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n\n      // Validate input\n      if (!email || !password) {\n        return res.status(400).json({ message: \"Email and password are required\" });\n      }\n      \n      // Validate credentials\n      const user = await storage.validateUserPassword(email, password);\n      if (!user) {\n        return res.status(401).json({ message: \"Invalid email or password\" });\n      }\n\n      // Regenerate session to prevent session fixation\n      req.session.regenerate((err) => {\n        if (err) {\n          console.error(\"Session regeneration error:\", err);\n          return res.status(500).json({ message: \"Login failed\" });\n        }\n\n        // Store user in session\n        (req.session as any).userId = user.id;\n        \n        res.json({ \n          message: \"Login successful\", \n          user: {\n            id: user.id,\n            email: user.email,\n            firstName: user.firstName,\n            lastName: user.lastName,\n            role: user.role,\n          }\n        });\n      });\n    } catch (error) {\n      console.error(\"Error during login:\", error);\n      res.status(500).json({ message: \"Login failed\" });\n    }\n  });\n\n  // Logout endpoint\n  app.post(\"/api/auth/logout\", (req, res) => {\n    req.session.destroy((err) => {\n      if (err) {\n        return res.status(500).json({ message: \"Logout failed\" });\n      }\n      res.json({ message: \"Logout successful\" });\n    });\n  });\n\n  // Get current user endpoint\n  app.get(\"/api/auth/user\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      // Strip sensitive fields before sending to client\n      const { passwordHash, ...safeUser } = user;\n      res.json(safeUser);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // Validate referral code\n  app.get(\"/api/referral/validate/:code\", async (req, res) => {\n    try {\n      const user = await storage.getUserByReferralCode(req.params.code);\n      if (user) {\n        res.json({ valid: true, referrerName: `${user.firstName} ${user.lastName}` });\n      } else {\n        res.json({ valid: false });\n      }\n    } catch (error) {\n      console.error(\"Error validating referral code:\", error);\n      res.status(500).json({ message: \"Failed to validate referral code\" });\n    }\n  });\n\n  // Serve uploaded files with authentication\n  app.use(\"/uploads\", isAuthenticated, express.static(uploadDir));\n\n  // Public routes\n  app.get(\"/api/courses\", async (_req, res) => {\n    const courses = await storage.getAllCourses();\n    \n    // Add lesson count to each course\n    const coursesWithCounts = await Promise.all(\n      courses.map(async (course) => {\n        const lessons = await storage.getLessonsByCourse(course.id);\n        return {\n          ...course,\n          lessonCount: lessons.length,\n        };\n      })\n    );\n    \n    res.json(coursesWithCounts);\n  });\n\n  app.get(\"/api/courses/:id\", async (req, res) => {\n    const course = await storage.getCourse(req.params.id);\n    if (!course) {\n      return res.status(404).json({ message: \"Course not found\" });\n    }\n    res.json(course);\n  });\n\n  app.post(\"/api/courses/:id/increment-views\", async (req, res) => {\n    try {\n      const course = await storage.getCourse(req.params.id);\n      if (!course) {\n        return res.status(404).json({ message: \"Course not found\" });\n      }\n      \n      const updated = await storage.updateCourse(req.params.id, {\n        viewsCount: (course.viewsCount || 0) + 1,\n      });\n      \n      res.json(updated);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/courses/:id/lessons\", async (req, res) => {\n    const lessons = await storage.getLessonsByCourse(req.params.id);\n    res.json(lessons);\n  });\n\n  app.get(\"/api/courses/:id/meetings\", async (req, res) => {\n    const meetings = await storage.getCourseMeetings(req.params.id);\n    const isAuth = ((req.session as any)?.userId !== undefined);\n    const userId = isAuth ? (req.session as any)?.userId : null;\n    const user = userId ? await storage.getUser(userId) : null;\n    const hasActiveSubscription = user?.subscriptionStatus === \"active\";\n    \n    // Sanitize meetings - remove Zoom links for unauthorized users\n    const sanitizedMeetings = meetings.map(meeting => {\n      const canAccess = !meeting.isPaidOnly || (isAuth && hasActiveSubscription);\n      \n      if (canAccess) {\n        return meeting;\n      } else {\n        // Remove Zoom link for unauthorized users\n        const { zoomLink, ...sanitizedMeeting } = meeting;\n        return sanitizedMeeting;\n      }\n    });\n    \n    res.json(sanitizedMeetings);\n  });\n\n  app.get(\"/api/subscription-plans\", async (_req, res) => {\n    const plans = await storage.getAllSubscriptionPlans();\n    res.json(plans);\n  });\n\n  app.get(\"/api/subscription-plans/:id\", async (req, res) => {\n    const plan = await storage.getSubscriptionPlan(req.params.id);\n    if (!plan) {\n      return res.status(404).json({ message: \"Plan not found\" });\n    }\n    res.json(plan);\n  });\n\n  // Admin pricing routes\n  app.post(\"/api/admin/subscription-plans\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const { nameEn, nameAr, descriptionEn, descriptionAr, price, durationDays, featuresEn, featuresAr, isPopular } = req.body;\n      const plan = await storage.createSubscriptionPlan({\n        nameEn, nameAr, descriptionEn, descriptionAr,\n        price: parseFloat(price).toString(),\n        durationDays: parseInt(durationDays),\n        featuresEn: featuresEn || [],\n        featuresAr: featuresAr || [],\n        isPopular: isPopular || false,\n      });\n      const userId = (req.session as any)?.userId;\n      await logAdminAction(userId, \"create\", \"pricing\", `Created subscription plan: ${nameEn} - $${price}`);\n      res.json(plan);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message || \"Failed to create plan\" });\n    }\n  });\n\n  app.patch(\"/api/admin/subscription-plans/:id\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const { nameEn, nameAr, descriptionEn, descriptionAr, price, durationDays, featuresEn, featuresAr, isPopular } = req.body;\n      const plan = await storage.updateSubscriptionPlan(req.params.id, {\n        nameEn, nameAr, descriptionEn, descriptionAr,\n        price: price ? parseFloat(price).toString() : undefined,\n        durationDays: durationDays ? parseInt(durationDays) : undefined,\n        featuresEn: featuresEn || undefined,\n        featuresAr: featuresAr || undefined,\n        isPopular: isPopular !== undefined ? isPopular : undefined,\n      });\n      const userId = (req.session as any)?.userId;\n      await logAdminAction(userId, \"update\", \"pricing\", `Updated subscription plan: ${nameEn || \"Plan\"}`);\n      res.json(plan);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message || \"Failed to update plan\" });\n    }\n  });\n\n  app.delete(\"/api/admin/subscription-plans/:id\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const plan = await storage.getSubscriptionPlan(req.params.id);\n      await storage.deleteSubscriptionPlan(req.params.id);\n      const userId = (req.session as any)?.userId;\n      await logAdminAction(userId, \"delete\", \"pricing\", `Deleted subscription plan: ${plan?.nameEn || req.params.id}`);\n      res.json({ message: \"Plan deleted successfully\" });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message || \"Failed to delete plan\" });\n    }\n  });\n\n  app.get(\"/api/testimonials\", async (_req, res) => {\n    const testimonials = await storage.getAllTestimonials();\n    res.json(testimonials);\n  });\n\n  // Get stats for landing page\n  app.get(\"/api/stats\", async (_req, res) => {\n    try {\n      const stats = await storage.getStats();\n      res.json(stats);\n    } catch (error) {\n      console.error(\"Error fetching stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch stats\" });\n    }\n  });\n\n  // Get all upcoming meetings (for News page)\n  // Returns sanitized meetings - Zoom links only visible to authenticated users with active subscriptions\n  app.get(\"/api/meetings\", async (req, res) => {\n    const meetings = await storage.getAllMeetings();\n    const isAuth = ((req.session as any)?.userId !== undefined);\n    const userId = isAuth ? (req.session as any)?.userId : null;\n    const user = userId ? await storage.getUser(userId) : null;\n    const hasActiveSubscription = user?.subscriptionStatus === \"active\";\n    \n    // Sanitize meetings - remove Zoom links for unauthorized users\n    const sanitizedMeetings = meetings.map(meeting => {\n      const canAccess = !meeting.isPaidOnly || (isAuth && hasActiveSubscription);\n      \n      if (canAccess) {\n        return meeting;\n      } else {\n        // Remove Zoom link for unauthorized users\n        const { zoomLink, ...sanitizedMeeting } = meeting;\n        return sanitizedMeeting;\n      }\n    });\n    \n    res.json(sanitizedMeetings);\n  });\n\n  // Market data (crypto, stocks, commodities, forex)\n  app.get(\"/api/market/data\", async (_req, res) => {\n    try {\n      const response = await fetch(\n        \"https://api.binance.com/api/v3/ticker/24hr?symbols=[%22BTCUSDT%22,%22ETHUSDT%22,%22BNBUSDT%22]\"\n      );\n      \n      let cryptoData = [];\n      if (response.ok) {\n        const data = await response.json();\n        cryptoData = data.map((item: any) => ({\n          type: \"crypto\",\n          symbol: item.symbol.replace(\"USDT\", \"\"),\n          name: item.symbol.replace(\"USDT\", \"\"),\n          price: parseFloat(item.lastPrice),\n          change24h: parseFloat(item.priceChangePercent),\n        }));\n      }\n      \n      const fallbackData = [\n        { type: \"crypto\", symbol: \"BTC\", name: \"Bitcoin\", price: 43250.50, change24h: 2.45 },\n        { type: \"crypto\", symbol: \"ETH\", name: \"Ethereum\", price: 2275.30, change24h: 1.82 },\n        { type: \"crypto\", symbol: \"BNB\", name: \"Binance Coin\", price: 315.75, change24h: -0.65 },\n        { type: \"stock\", symbol: \"AAPL\", name: \"Apple\", price: 228.45, change24h: 1.23 },\n        { type: \"stock\", symbol: \"GOOGL\", name: \"Google\", price: 156.78, change24h: -0.45 },\n        { type: \"stock\", symbol: \"MSFT\", name: \"Microsoft\", price: 423.19, change24h: 2.11 },\n        { type: \"commodity\", symbol: \"GOLD\", name: \"Gold\", price: 2045.50, change24h: 0.67 },\n        { type: \"forex\", symbol: \"EUR/USD\", name: \"Euro\", price: 1.0895, change24h: 0.32 },\n        { type: \"forex\", symbol: \"GBP/USD\", name: \"Pound\", price: 1.2750, change24h: -0.15 },\n        { type: \"forex\", symbol: \"USD/JPY\", name: \"Yen\", price: 148.65, change24h: 0.89 },\n      ];\n      \n      const marketData = cryptoData.length > 0 ? [...cryptoData, ...fallbackData.slice(3)] : fallbackData;\n      res.json(marketData);\n    } catch (error) {\n      console.error(\"Error fetching market data:\", error);\n      const fallbackData = [\n        { type: \"crypto\", symbol: \"BTC\", name: \"Bitcoin\", price: 43250.50, change24h: 2.45 },\n        { type: \"crypto\", symbol: \"ETH\", name: \"Ethereum\", price: 2275.30, change24h: 1.82 },\n        { type: \"crypto\", symbol: \"BNB\", name: \"Binance Coin\", price: 315.75, change24h: -0.65 },\n        { type: \"stock\", symbol: \"AAPL\", name: \"Apple\", price: 228.45, change24h: 1.23 },\n        { type: \"stock\", symbol: \"GOOGL\", name: \"Google\", price: 156.78, change24h: -0.45 },\n        { type: \"stock\", symbol: \"MSFT\", name: \"Microsoft\", price: 423.19, change24h: 2.11 },\n        { type: \"commodity\", symbol: \"GOLD\", name: \"Gold\", price: 2045.50, change24h: 0.67 },\n        { type: \"forex\", symbol: \"EUR/USD\", name: \"Euro\", price: 1.0895, change24h: 0.32 },\n        { type: \"forex\", symbol: \"GBP/USD\", name: \"Pound\", price: 1.2750, change24h: -0.15 },\n        { type: \"forex\", symbol: \"USD/JPY\", name: \"Yen\", price: 148.65, change24h: 0.89 },\n      ];\n      res.json(fallbackData);\n    }\n  });\n\n  // Crypto prices from Binance API\n  app.get(\"/api/crypto/prices\", async (_req, res) => {\n    try {\n      const response = await fetch(\n        \"https://api.binance.com/api/v3/ticker/24hr?symbols=[%22BTCUSDT%22,%22ETHUSDT%22,%22BNBUSDT%22]\"\n      );\n      \n      if (!response.ok) {\n        console.warn(`Binance API returned ${response.status}, using fallback data`);\n        const fallbackPrices = [\n          { symbol: \"BTC\", price: 43250.50, change24h: 2.45 },\n          { symbol: \"ETH\", price: 2275.30, change24h: 1.82 },\n          { symbol: \"BNB\", price: 315.75, change24h: -0.65 },\n        ];\n        return res.json(fallbackPrices);\n      }\n      \n      const data = await response.json();\n      \n      const prices = data.map((item: any) => ({\n        symbol: item.symbol.replace(\"USDT\", \"\"),\n        price: parseFloat(item.lastPrice),\n        change24h: parseFloat(item.priceChangePercent),\n      }));\n      \n      res.json(prices);\n    } catch (error) {\n      console.error(\"Error fetching crypto prices:\", error);\n      const fallbackPrices = [\n        { symbol: \"BTC\", price: 43250.50, change24h: 2.45 },\n        { symbol: \"ETH\", price: 2275.30, change24h: 1.82 },\n        { symbol: \"BNB\", price: 315.75, change24h: -0.65 },\n      ];\n      res.json(fallbackPrices);\n    }\n  });\n\n  // Protected routes\n  app.get(\"/api/user/subscription\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const subscription = await storage.getUserSubscription(userId);\n      \n      if (!subscription) {\n        return res.json(null);\n      }\n      \n      const plan = await storage.getSubscriptionPlan(subscription.planId);\n      \n      res.json({\n        ...subscription,\n        plan: plan || null,\n      });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/user/progress\", isAuthenticated, async (req, res) => {\n    const progress = await storage.getUserProgress((req.session as any)?.userId);\n    res.json(progress);\n  });\n\n  app.get(\"/api/progress/:courseId\", isAuthenticated, async (req, res) => {\n    const progress = await storage.getCourseProgress((req.session as any)?.userId, req.params.courseId);\n    res.json(progress);\n  });\n\n  app.post(\"/api/progress\", isAuthenticated, async (req, res) => {\n    try {\n      const validated = insertProgressSchema.parse({\n        ...req.body,\n        userId: (req.session as any)?.userId,\n      });\n      \n      const progress = await storage.upsertProgress(validated);\n      res.json(progress);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // Update watch progress (for sequential video tracking)\n  app.patch(\"/api/progress/:lessonId/watch\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const { lessonId } = req.params;\n      const { watchProgress, courseId } = req.body;\n      \n      // Get lesson to check duration\n      const lesson = await storage.getLesson(lessonId);\n      if (!lesson) {\n        return res.status(404).json({ message: \"Lesson not found\" });\n      }\n      \n      // Calculate if video is completed (watched at least 95% of duration)\n      const completed = lesson.duration ? watchProgress >= (lesson.duration * 0.95) : false;\n      \n      const progressData = {\n        userId,\n        lessonId,\n        courseId: courseId || lesson.courseId,\n        completed,\n        watchProgress,\n        completedAt: completed ? new Date() : undefined,\n      };\n      \n      const progress = await storage.upsertProgress(progressData);\n      res.json(progress);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/payments\", isAuthenticated, (req, res) => {\n    upload.single(\"proofImage\")(req, res, async (err) => {\n      if (err instanceof multer.MulterError) {\n        if (err.code === \"LIMIT_FILE_SIZE\") {\n          return res.status(400).json({ message: \"File size exceeds 10MB limit\" });\n        }\n        return res.status(400).json({ message: `Upload error: ${err.message}` });\n      } else if (err) {\n        return res.status(400).json({ message: err.message });\n      }\n      \n      try {\n        const userId = (req.session as any)?.userId;\n        const proofImageUrl = req.file ? `/uploads/${req.file.filename}` : null;\n        \n        const validated = insertPaymentSchema.parse({\n          userId,\n          planId: req.body.planId,\n          amount: req.body.amount,\n          currency: req.body.currency || \"USD\",\n          method: req.body.method,\n          status: \"pending\",\n          proofImageUrl,\n        });\n\n        if (!validated.planId) {\n          return res.status(400).json({ message: \"Plan ID is required\" });\n        }\n\n        const plan = await storage.getSubscriptionPlan(validated.planId);\n        if (!plan) {\n          return res.status(400).json({ message: \"Invalid subscription plan\" });\n        }\n\n        const existingSubscription = await storage.getUserSubscription(userId);\n        if (!existingSubscription || existingSubscription.status !== \"pending\") {\n          const endDate = new Date();\n          endDate.setDate(endDate.getDate() + plan.durationDays);\n\n          await storage.createSubscription({\n            userId,\n            planId: validated.planId,\n            status: \"pending\",\n            startDate: new Date(),\n            endDate,\n          });\n        }\n\n        const payment = await storage.createPayment(validated);\n        res.json(payment);\n      } catch (error: any) {\n        res.status(400).json({ message: error.message });\n      }\n    });\n  });\n\n  // File upload endpoint with error handling\n  app.post(\"/api/upload\", isAuthenticated, (req, res) => {\n    upload.single(\"file\")(req, res, (err) => {\n      if (err instanceof multer.MulterError) {\n        if (err.code === \"LIMIT_FILE_SIZE\") {\n          return res.status(400).json({ message: \"File size exceeds 10MB limit\" });\n        }\n        return res.status(400).json({ message: `Upload error: ${err.message}` });\n      } else if (err) {\n        return res.status(400).json({ message: err.message });\n      }\n      \n      if (!req.file) {\n        return res.status(400).json({ message: \"No file uploaded\" });\n      }\n      \n      res.json({\n        url: `/uploads/${req.file.filename}`,\n        filename: req.file.filename,\n        originalName: path.basename(req.file.originalname),\n      });\n    });\n  });\n\n  // Admin routes\n  app.get(\"/api/admin/stats\", isAuthenticated, requireAdmin, async (_req, res) => {\n    const users = await storage.getAllUsers();\n    const courses = await storage.getAllCourses();\n    const payments = await storage.getAllPayments();\n\n    const approvedPayments = payments.filter(p => p.status === \"approved\");\n    const totalRevenue = approvedPayments.reduce(\n      (sum, p) => sum + parseFloat(p.amount),\n      0\n    );\n\n    const activeSubscriptions = users.filter(\n      u => u.subscriptionStatus === \"active\"\n    ).length;\n\n    const recentPayments = payments\n      .filter(p => p.status === \"approved\")\n      .slice(0, 6)\n      .map(p => ({\n        month: new Date(p.createdAt!).toLocaleDateString(\"en\", { month: \"short\" }),\n        amount: parseFloat(p.amount),\n      }));\n\n    res.json({\n      totalUsers: users.length,\n      totalCourses: courses.length,\n      totalRevenue,\n      activeSubscriptions,\n      recentPayments,\n    });\n  });\n\n  // Admin analytics endpoint\n  app.get(\"/api/admin/analytics\", isAuthenticated, requireAdmin, async (_req, res) => {\n    try {\n      const analytics = await storage.getAnalytics();\n      res.json(analytics);\n    } catch (error) {\n      console.error(\"Error fetching analytics:\", error);\n      res.status(500).json({ message: \"Failed to fetch analytics\" });\n    }\n  });\n\n  // Payment Settings routes\n  app.get(\"/api/payment-settings\", async (_req, res) => {\n    try {\n      const settings = await storage.getPaymentSettings();\n      res.json(settings || {});\n    } catch (error) {\n      console.error(\"Error fetching payment settings:\", error);\n      res.status(500).json({ message: \"Failed to fetch payment settings\" });\n    }\n  });\n\n  app.post(\"/api/admin/payment-settings\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      const settings = await storage.upsertPaymentSettings(req.body);\n      res.json(settings);\n    } catch (error: any) {\n      console.error(\"Error updating payment settings:\", error);\n      res.status(500).json({ message: error.message || \"Failed to update payment settings\" });\n    }\n  });\n\n  app.get(\"/api/admin/users\", isAuthenticated, requireAdminRole, async (_req, res) => {\n    const users = await storage.getAllUsers();\n    res.json(users);\n  });\n\n  // Create user by admin or manager\n  app.post(\"/api/admin/users/create\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const { firstName, lastName, email, password, phone, role } = req.body;\n      const adminId = (req.session as any)?.userId;\n\n      // Validate required fields\n      if (!firstName || !lastName || !email || !password) {\n        return res.status(400).json({ message: \"First name, last name, email, and password are required\" });\n      }\n\n      // Validate role\n      if (role && ![\"user\", \"support\", \"manager\", \"admin\"].includes(role)) {\n        return res.status(400).json({ message: \"Invalid role\" });\n      }\n\n      // Check if user already exists\n      const existingUser = await storage.getUserByEmail(email);\n      if (existingUser) {\n        return res.status(400).json({ message: \"User already exists with this email\" });\n      }\n\n      // Create user with specified role\n      const user = await storage.createUser({\n        email,\n        password,\n        firstName,\n        lastName,\n        phone: phone || \"\",\n      });\n\n      // Update role if specified\n      if (role && role !== \"user\") {\n        await storage.updateUser(user.id, { role });\n      }\n\n      // Log admin action\n      await logAdminAction(adminId, \"create-user\", \"users\", `Created new user ${user.firstName} ${user.lastName} with role: ${role || 'user'}`, {\n        userId: user.id,\n        email: user.email,\n        role: role || \"user\",\n      });\n\n      res.json({\n        message: \"User created successfully\",\n        user: {\n          id: user.id,\n          email: user.email,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          role: user.role,\n        },\n      });\n    } catch (error: any) {\n      console.error(\"Error creating user:\", error);\n      res.status(500).json({ message: error.message || \"Failed to create user\" });\n    }\n  });\n\n  app.patch(\"/api/admin/users/:id/deactivate\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const currentUserId = (req.session as any)?.userId;\n      const currentUser = await storage.getUser(currentUserId);\n      const targetUser = await storage.getUser(id);\n      \n      if (!targetUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      if (currentUserId === id) {\n        return res.status(400).json({ message: \"You cannot deactivate your own account\" });\n      }\n      \n      // Role hierarchy check\n      if (currentUser?.role === \"support\") {\n        // Support can only deactivate regular users\n        if (targetUser.role !== \"user\") {\n          return res.status(403).json({ message: \"Support can only deactivate user accounts\" });\n        }\n      } else if (currentUser?.role === \"manager\") {\n        // Manager can deactivate support and users, but not admin or other managers\n        if (targetUser.role === \"admin\" || targetUser.role === \"manager\") {\n          return res.status(403).json({ message: \"Manager cannot deactivate admin or manager accounts\" });\n        }\n      }\n      // Admin can deactivate anyone\n      \n      const user = await storage.deactivateUser(id);\n      await logAdminAction(currentUserId, \"deactivate\", \"users\", `Deactivated user account ${id} (${targetUser.role})`);\n      res.json(user);\n    } catch (error: any) {\n      console.error(\"Error deactivating user:\", error);\n      res.status(500).json({ message: error.message || \"Failed to deactivate user\" });\n    }\n  });\n\n  app.patch(\"/api/admin/users/:id/activate\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const userId = (req.session as any)?.userId;\n      const currentUser = await storage.getUser(userId);\n      const targetUser = await storage.getUser(id);\n      \n      if (!targetUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      if (!userId) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n      \n      // Role hierarchy check\n      if (currentUser?.role === \"support\") {\n        // Support can only activate regular users\n        if (targetUser.role !== \"user\") {\n          return res.status(403).json({ message: \"Support can only activate user accounts\" });\n        }\n      } else if (currentUser?.role === \"manager\") {\n        // Manager can activate support and users, but not admin or other managers\n        if (targetUser.role === \"admin\" || targetUser.role === \"manager\") {\n          return res.status(403).json({ message: \"Manager cannot activate admin or manager accounts\" });\n        }\n      }\n      // Admin can activate anyone\n      \n      const user = await storage.activateUser(id);\n      await logAdminAction(userId, \"activate\", \"users\", `Activated user account ${id} (${targetUser.role})`);\n      res.json(user);\n    } catch (error: any) {\n      console.error(\"Error activating user:\", error);\n      res.status(500).json({ message: error.message || \"Failed to activate user\" });\n    }\n  });\n\n  app.delete(\"/api/admin/users/:id\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const currentUserId = (req.session as any)?.userId;\n      const currentUser = await storage.getUser(currentUserId);\n      const targetUser = await storage.getUser(id);\n      \n      if (!targetUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      if (currentUserId === id) {\n        return res.status(400).json({ message: \"You cannot delete your own account\" });\n      }\n      \n      // Role hierarchy check\n      if (currentUser?.role === \"support\") {\n        // Support can only delete regular users\n        if (targetUser.role !== \"user\") {\n          return res.status(403).json({ message: \"Support can only delete user accounts\" });\n        }\n      } else if (currentUser?.role === \"manager\") {\n        // Manager can delete support and users, but not admin or other managers\n        if (targetUser.role === \"admin\" || targetUser.role === \"manager\") {\n          return res.status(403).json({ message: \"Manager cannot delete admin or manager accounts\" });\n        }\n      }\n      // Admin can delete anyone\n      \n      await storage.deleteUser(id);\n      await logAdminAction(currentUserId, \"delete\", \"users\", `Deleted user account ${id} (${targetUser.role})`);\n      res.json({ message: \"User deleted successfully\" });\n    } catch (error: any) {\n      console.error(\"Error deleting user:\", error);\n      res.status(500).json({ message: error.message || \"Failed to delete user\" });\n    }\n  });\n\n  app.patch(\"/api/admin/users/:id/cancel-subscription\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const userId = (req.session as any)?.userId;\n      \n      if (!userId) {\n        return res.status(401).json({ message: \"Unauthorized\" });\n      }\n      \n      const targetUser = await storage.getUser(id);\n      if (!targetUser) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      if (!targetUser.subscriptionStatus || targetUser.subscriptionStatus === \"none\" || targetUser.subscriptionStatus === \"cancelled\") {\n        return res.status(400).json({ message: \"User does not have an active subscription\" });\n      }\n      \n      const user = await storage.cancelUserSubscription(id);\n      await logAdminAction(userId, \"cancel\", \"subscriptions\", `Cancelled subscription for user ${targetUser.firstName} ${targetUser.lastName}`);\n      res.json(user);\n    } catch (error: any) {\n      console.error(\"Error cancelling subscription:\", error);\n      res.status(500).json({ message: error.message || \"Failed to cancel subscription\" });\n    }\n  });\n\n  app.get(\"/api/admin/courses\", isAuthenticated, requireAdmin, async (_req, res) => {\n    const courses = await storage.getAllCourses();\n    res.json(courses);\n  });\n\n  // Configure multer for course uploads (thumbnail + videos)\n  const courseUpload = multer({\n    storage: multer.diskStorage({\n      destination: (_req, _file, cb) => {\n        const tempDir = path.join(process.cwd(), \"uploads\", \"temp\");\n        ensureDir(tempDir);\n        cb(null, tempDir);\n      },\n      filename: (_req, file, cb) => {\n        const uniqueName = generateUniqueFilename(file.originalname, file.fieldname);\n        cb(null, uniqueName);\n      },\n    }),\n    limits: {\n      fileSize: MAX_VIDEO_SIZE, // Max 2GB for videos\n      files: 20, // Max 20 files total (1 thumbnail + up to 19 lesson videos)\n    },\n    fileFilter: (_req, file, cb) => {\n      if (file.fieldname === \"thumbnail\") {\n        if (!validateMimeType(file.mimetype, ALLOWED_IMAGE_TYPES)) {\n          return cb(new Error(\"Invalid thumbnail format. Only JPEG, PNG, and WebP are allowed.\"));\n        }\n      } else if (file.fieldname.startsWith(\"lessonVideo_\")) {\n        if (!validateMimeType(file.mimetype, ALLOWED_VIDEO_TYPES)) {\n          return cb(new Error(\"Invalid video format. Only MP4, WebM, and MOV are allowed.\"));\n        }\n      }\n      cb(null, true);\n    },\n  });\n\n  app.post(\"/api/admin/courses\", isAuthenticated, requireAdmin, (req, res) => {\n    courseUpload.fields([\n      { name: \"thumbnail\", maxCount: 1 },\n      { name: \"lessonVideos\", maxCount: 20 },\n    ])(req, res, async (err) => {\n      if (err instanceof multer.MulterError) {\n        if (err.code === \"LIMIT_FILE_SIZE\") {\n          return res.status(400).json({ message: \"File size exceeds 2GB limit\" });\n        }\n        if (err.code === \"LIMIT_FILE_COUNT\") {\n          return res.status(400).json({ message: \"Too many files uploaded\" });\n        }\n        return res.status(400).json({ message: `Upload error: ${err.message}` });\n      }\n      if (err) {\n        return res.status(400).json({ message: err.message });\n      }\n\n      const files = req.files as { [fieldname: string]: Express.Multer.File[] };\n      const uploadedFiles: string[] = [];\n      let courseId: string | null = null;\n\n      try {\n        // Validate thumbnail size if provided\n        if (files.thumbnail && files.thumbnail[0]) {\n          if (!validateFileSize(files.thumbnail[0].size, MAX_THUMBNAIL_SIZE)) {\n            throw new Error(\"Thumbnail size exceeds 5MB limit\");\n          }\n          uploadedFiles.push(files.thumbnail[0].path);\n        }\n\n        // Validate lesson video sizes if provided\n        if (files.lessonVideos) {\n          for (const video of files.lessonVideos) {\n            if (!validateFileSize(video.size, MAX_VIDEO_SIZE)) {\n              throw new Error(`Video ${video.originalname} exceeds 2GB limit`);\n            }\n            uploadedFiles.push(video.path);\n          }\n        }\n\n        // Parse and validate course data\n        const courseData = {\n          ...req.body,\n          level: parseInt(req.body.level),\n          price: req.body.price, // Keep as string for decimal field\n          duration: parseInt(req.body.duration),\n          isFree: req.body.isFree === \"true\" || req.body.isFree === true,\n          requiredPlanId: req.body.requiredPlanId || null,\n        };\n\n        const validated = insertCourseSchema.parse(courseData);\n\n        // Create course in database\n        const course = await storage.createCourse(validated);\n        courseId = course.id;\n\n        // Move thumbnail to final destination if uploaded\n        if (files.thumbnail && files.thumbnail[0] && courseId) {\n          const thumbnailFile = files.thumbnail[0];\n          const courseDir = getCourseUploadDir(courseId);\n          const thumbnailDir = path.join(courseDir, \"thumbnails\");\n          ensureDir(thumbnailDir);\n          \n          const finalPath = path.join(thumbnailDir, generateUniqueFilename(thumbnailFile.originalname, \"thumbnail\"));\n          fs.renameSync(thumbnailFile.path, finalPath);\n          \n          // Update course with thumbnail path\n          await storage.updateCourse(courseId, {\n            thumbnailUrl: `/uploads/courses/${courseId}/thumbnails/${path.basename(finalPath)}`,\n          });\n        }\n\n        const userId = (req.session as any)?.userId;\n        await logAdminAction(userId, \"create\", \"courses\", `Created new course: ${validated.titleEn}`);\n        res.json(course);\n      } catch (error: any) {\n        // Cleanup uploaded files on error\n        for (const filePath of uploadedFiles) {\n          try {\n            if (fs.existsSync(filePath)) {\n              fs.unlinkSync(filePath);\n            }\n          } catch {}\n        }\n\n        // Cleanup course directory if created\n        if (courseId) {\n          await cleanupCourseDir(courseId);\n          // Optionally delete the course from database if it was created\n          try {\n            await storage.deleteCourse(courseId);\n          } catch {}\n        }\n\n        res.status(400).json({ message: error.message || \"Failed to create course\" });\n      }\n    });\n  });\n\n  app.patch(\"/api/admin/courses/:id\", isAuthenticated, requireAdmin, (req, res) => {\n    courseUpload.fields([\n      { name: \"thumbnail\", maxCount: 1 },\n    ])(req, res, async (err) => {\n      if (err instanceof multer.MulterError) {\n        if (err.code === \"LIMIT_FILE_SIZE\") {\n          return res.status(400).json({ message: \"File size exceeds 2GB limit\" });\n        }\n        return res.status(400).json({ message: `Upload error: ${err.message}` });\n      }\n      if (err) {\n        return res.status(400).json({ message: err.message });\n      }\n\n      const files = req.files as { [fieldname: string]: Express.Multer.File[] };\n      const uploadedFiles: string[] = [];\n\n      try {\n        const currentCourse = await storage.getCourse(req.params.id);\n        if (!currentCourse) {\n          return res.status(404).json({ message: \"Course not found\" });\n        }\n\n        if (files.thumbnail && files.thumbnail[0]) {\n          if (!validateFileSize(files.thumbnail[0].size, MAX_THUMBNAIL_SIZE)) {\n            throw new Error(\"Thumbnail size exceeds 5MB limit\");\n          }\n          uploadedFiles.push(files.thumbnail[0].path);\n        }\n\n        const courseData: any = {\n          titleEn: req.body.titleEn,\n          titleAr: req.body.titleAr,\n          descriptionEn: req.body.descriptionEn || null,\n          descriptionAr: req.body.descriptionAr || null,\n          instructorEn: req.body.instructorEn || null,\n          instructorAr: req.body.instructorAr || null,\n          level: req.body.level ? parseInt(req.body.level) : undefined,\n          price: req.body.price || undefined,\n          duration: req.body.duration ? parseInt(req.body.duration) : undefined,\n          isFree: req.body.isFree === \"true\" || req.body.isFree === true,\n          requiredPlanId: req.body.requiredPlanId === \"null\" || req.body.requiredPlanId === \"\" ? null : req.body.requiredPlanId,\n          language: req.body.language || \"en\",\n        };\n\n        if (files.thumbnail && files.thumbnail[0]) {\n          const thumbnailFile = files.thumbnail[0];\n          const courseDir = getCourseUploadDir(req.params.id);\n          const thumbnailDir = path.join(courseDir, \"thumbnails\");\n          ensureDir(thumbnailDir);\n          \n          const extension = path.extname(thumbnailFile.originalname);\n          const newFilename = `${Date.now()}-${slugify(req.body.titleEn || \"course\")}${extension}`;\n          const finalPath = path.join(thumbnailDir, newFilename);\n          \n          fs.renameSync(thumbnailFile.path, finalPath);\n          \n          courseData.thumbnailUrl = `/uploads/courses/${req.params.id}/thumbnails/${newFilename}`;\n        } else {\n          courseData.thumbnailUrl = currentCourse.thumbnailUrl;\n        }\n\n        const course = await storage.updateCourse(req.params.id, courseData);\n        const userId = (req.session as any)?.userId;\n        await logAdminAction(userId, \"update\", \"courses\", `Updated course: ${courseData.titleEn}`);\n        res.json(course);\n      } catch (error: any) {\n        uploadedFiles.forEach(file => {\n          try {\n            if (fs.existsSync(file)) {\n              fs.unlinkSync(file);\n            }\n          } catch {}\n        });\n\n        res.status(400).json({ message: error.message || \"Failed to update course\" });\n      }\n    });\n  });\n\n  app.delete(\"/api/admin/courses/:id\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      const course = await storage.getCourse(req.params.id);\n      await storage.deleteCourse(req.params.id);\n      const userId = (req.session as any)?.userId;\n      await logAdminAction(userId, \"delete\", \"courses\", `Deleted course: ${course?.titleEn || req.params.id}`);\n      res.json({ message: \"Course deleted\" });\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // Configure multer for lesson video uploads\n  const lessonUpload = multer({\n    storage: multer.diskStorage({\n      destination: (_req, _file, cb) => {\n        const tempDir = path.join(process.cwd(), \"uploads\", \"temp\");\n        ensureDir(tempDir);\n        cb(null, tempDir);\n      },\n      filename: (_req, file, cb) => {\n        const uniqueName = generateUniqueFilename(file.originalname, \"video\");\n        cb(null, uniqueName);\n      },\n    }),\n    limits: {\n      fileSize: MAX_VIDEO_SIZE, // Max 2GB\n    },\n    fileFilter: (_req, file, cb) => {\n      if (!validateMimeType(file.mimetype, ALLOWED_VIDEO_TYPES)) {\n        return cb(new Error(\"Invalid video format. Only MP4, WebM, and MOV are allowed.\"));\n      }\n      cb(null, true);\n    },\n  });\n\n  app.post(\"/api/admin/lessons\", isAuthenticated, requireAdmin, (req, res) => {\n    lessonUpload.single(\"video\")(req, res, async (err) => {\n      if (err instanceof multer.MulterError) {\n        if (err.code === \"LIMIT_FILE_SIZE\") {\n          return res.status(400).json({ message: \"Video size exceeds 2GB limit\" });\n        }\n        return res.status(400).json({ message: `Upload error: ${err.message}` });\n      }\n      if (err) {\n        return res.status(400).json({ message: err.message });\n      }\n\n      const videoFile = req.file;\n      let uploadedFilePath: string | null = null;\n      let lessonId: string | null = null;\n      let lessonCourseId: string | null = null;\n\n      try {\n        // Validate video size if provided\n        if (videoFile) {\n          if (!validateFileSize(videoFile.size, MAX_VIDEO_SIZE)) {\n            throw new Error(\"Video size exceeds 2GB limit\");\n          }\n          uploadedFilePath = videoFile.path;\n        }\n\n        // Parse and validate lesson data\n        const lessonData = {\n          ...req.body,\n          duration: parseInt(req.body.duration),\n          order: parseInt(req.body.order),\n          requiresPrevious: req.body.requiresPrevious === \"true\" || req.body.requiresPrevious === true,\n          isFree: req.body.isFree === \"true\" || req.body.isFree === true,\n        };\n\n        const validated = insertLessonSchema.parse(lessonData);\n        lessonCourseId = validated.courseId;\n\n        // Create lesson in database\n        const lesson = await storage.createLesson(validated);\n        lessonId = lesson.id;\n\n        // Move video to final destination if uploaded\n        if (videoFile && lessonId && validated.courseId) {\n          const courseDir = getCourseUploadDir(validated.courseId);\n          const videoDir = path.join(courseDir, \"videos\", lessonId);\n          ensureDir(videoDir);\n          \n          const finalPath = path.join(videoDir, generateUniqueFilename(videoFile.originalname, \"lesson\"));\n          fs.renameSync(videoFile.path, finalPath);\n          \n          // Update lesson with video paths\n          await storage.updateLesson(lessonId, {\n            videoUrl: `/uploads/courses/${validated.courseId}/videos/${lessonId}/${path.basename(finalPath)}`,\n            videoFilePath: finalPath,\n          });\n        }\n\n        const userId = (req.session as any)?.userId;\n        await logAdminAction(userId, \"create\", \"lessons\", `Created new lesson: ${validated.titleEn}`);\n        res.json(lesson);\n      } catch (error: any) {\n        // Comprehensive cleanup on error - clean up temp file\n        if (uploadedFilePath && fs.existsSync(uploadedFilePath)) {\n          try {\n            fs.unlinkSync(uploadedFilePath);\n          } catch {}\n        }\n        \n        // Clean up final video directory if lesson was created\n        if (lessonId && lessonCourseId) {\n          const videoDir = path.join(getCourseUploadDir(lessonCourseId), \"videos\", lessonId);\n          if (fs.existsSync(videoDir)) {\n            try {\n              fs.rmSync(videoDir, { recursive: true, force: true });\n            } catch {}\n          }\n        }\n\n        // Delete the lesson from database if it was created\n        if (lessonId) {\n          try {\n            await storage.deleteLesson(lessonId);\n          } catch {}\n        }\n\n        res.status(400).json({ message: error.message || \"Failed to create lesson\" });\n      }\n    });\n  });\n\n  app.delete(\"/api/admin/lessons/:id\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      const lesson = await storage.getLesson(req.params.id);\n      await storage.deleteLesson(req.params.id);\n      const userId = (req.session as any)?.userId;\n      await logAdminAction(userId, \"delete\", \"lessons\", `Deleted lesson: ${lesson?.titleEn || req.params.id}`);\n      res.json({ message: \"Lesson deleted\" });\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // PDF Resource upload\n  const resourceUpload = multer({\n    storage: multer.diskStorage({\n      destination: (_req, _file, cb) => {\n        const dir = path.join(process.cwd(), \"uploads\", \"resources\");\n        ensureDir(dir);\n        cb(null, dir);\n      },\n      filename: (_req, file, cb) => {\n        cb(null, generateUniqueFilename(file.originalname, \"resource\"));\n      },\n    }),\n    limits: { fileSize: 100 * 1024 * 1024 },\n    fileFilter: (_req, file, cb) => {\n      const allowedTypes = [\"application/pdf\", \"image/jpeg\", \"image/png\", \"application/msword\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"];\n      if (!allowedTypes.includes(file.mimetype)) {\n        return cb(new Error(\"Only PDF, images, and documents are allowed\"));\n      }\n      cb(null, true);\n    },\n  });\n\n  // Course Resources Routes\n  app.get(\"/api/courses/:courseId/resources\", async (req, res) => {\n    try {\n      const resources = await storage.getCourseResources(req.params.courseId);\n      res.json(resources);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/admin/courses/:courseId/resources\", isAuthenticated, requireAdmin, (req, res) => {\n    resourceUpload.single(\"file\")(req, res, async (err) => {\n      if (err instanceof multer.MulterError) {\n        if (err.code === \"LIMIT_FILE_SIZE\") {\n          return res.status(400).json({ message: \"File size exceeds 100MB limit\" });\n        }\n        return res.status(400).json({ message: `Upload error: ${err.message}` });\n      }\n      if (err) {\n        return res.status(400).json({ message: err.message });\n      }\n\n      try {\n        const { courseId } = req.params;\n        const { titleEn, titleAr, descriptionEn, descriptionAr, resourceType } = req.body;\n        const file = req.file;\n\n        if (!titleEn || !titleAr) {\n          if (file) fs.unlinkSync(file.path);\n          return res.status(400).json({ message: \"Title is required\" });\n        }\n\n        if (resourceType === \"link\") {\n          const { linkUrl } = req.body;\n          if (!linkUrl) {\n            if (file) fs.unlinkSync(file.path);\n            return res.status(400).json({ message: \"Link URL is required\" });\n          }\n          const resource = await storage.createCourseResource({\n            courseId,\n            titleEn,\n            titleAr,\n            descriptionEn: descriptionEn || \"\",\n            descriptionAr: descriptionAr || \"\",\n            fileUrl: linkUrl,\n            fileName: titleEn,\n            fileType: \"link\",\n            fileSize: 0,\n            order: 0,\n          });\n          return res.json(resource);\n        }\n\n        if (!file) {\n          return res.status(400).json({ message: \"File is required for file upload\" });\n        }\n\n        const resourceDir = path.join(process.cwd(), \"uploads\", \"resources\", courseId);\n        ensureDir(resourceDir);\n        const finalPath = path.join(resourceDir, path.basename(file.path));\n        fs.renameSync(file.path, finalPath);\n\n        const resource = await storage.createCourseResource({\n          courseId,\n          titleEn,\n          titleAr,\n          descriptionEn: descriptionEn || \"\",\n          descriptionAr: descriptionAr || \"\",\n          fileUrl: `/uploads/resources/${courseId}/${path.basename(finalPath)}`,\n          fileName: file.originalname,\n          fileType: file.mimetype,\n          fileSize: file.size,\n          order: 0,\n        });\n\n        res.json(resource);\n      } catch (error: any) {\n        if (req.file && fs.existsSync(req.file.path)) {\n          try {\n            fs.unlinkSync(req.file.path);\n          } catch {}\n        }\n        res.status(400).json({ message: error.message });\n      }\n    });\n  });\n\n  app.post(\"/api/admin/courses/:courseId/resources/link\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      const { courseId } = req.params;\n      const { titleEn, titleAr, descriptionEn, descriptionAr, linkUrl } = req.body;\n\n      const resource = await storage.createCourseResource({\n        courseId,\n        titleEn,\n        titleAr,\n        descriptionEn: descriptionEn || \"\",\n        descriptionAr: descriptionAr || \"\",\n        fileUrl: linkUrl,\n        fileName: titleEn,\n        fileType: \"link\",\n        fileSize: 0,\n        order: 0,\n      });\n      res.json(resource);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/admin/course-resources/:id\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      const resource = await storage.updateCourseResource(req.params.id, {\n        ...req.body,\n        updatedAt: new Date(),\n      });\n      res.json(resource);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/admin/course-resources/:id\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      await storage.deleteCourseResource(req.params.id);\n      res.json({ message: \"Resource deleted successfully\" });\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/admin/payments\", isAuthenticated, requireAdminRole, async (_req, res) => {\n    const payments = await storage.getAllPayments();\n    res.json(payments);\n  });\n\n  app.patch(\"/api/admin/payments/:id\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const payment = await storage.updatePayment(req.params.id, {\n        status: req.body.status,\n      });\n\n      if (req.body.status === \"approved\") {\n        // Get the user being paid for\n        const user = await storage.getUser(payment.userId);\n        \n        await storage.updateUser(payment.userId, {\n          subscriptionStatus: \"active\",\n        });\n\n        const subscription = await storage.getUserSubscription(payment.userId);\n        if (subscription) {\n          await storage.updateSubscription(subscription.id, {\n            status: \"active\",\n          });\n        }\n\n        // Credit referrer with $10 if user was referred\n        if (user && user.referredBy) {\n          const referrer = await storage.getUserByReferralCode(user.referredBy);\n          if (referrer) {\n            await storage.addReferralEarnings(referrer.id, payment.userId, 10);\n            console.log(`Credited $10 to referrer ${referrer.email} for referral of ${user.email}`);\n          }\n        }\n      }\n\n      res.json(payment);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/admin/meetings\", isAuthenticated, requireAdmin, async (_req, res) => {\n    const meetings = await storage.getAllMeetings();\n    res.json(meetings);\n  });\n\n  app.post(\"/api/admin/meetings\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      // Convert scheduledAt string to Date object\n      const meetingData = {\n        ...req.body,\n        scheduledAt: new Date(req.body.scheduledAt),\n        courseId: req.body.courseId || null,\n      };\n      \n      const meeting = await storage.createMeeting(meetingData);\n      res.json(meeting);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/admin/meetings/:id\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      // Convert scheduledAt string to Date object if provided\n      const updateData = {\n        ...req.body,\n      };\n      \n      if (req.body.scheduledAt) {\n        updateData.scheduledAt = new Date(req.body.scheduledAt);\n      }\n      \n      if (req.body.courseId !== undefined) {\n        updateData.courseId = req.body.courseId || null;\n      }\n      \n      const meeting = await storage.updateMeeting(req.params.id, updateData);\n      res.json(meeting);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.delete(\"/api/admin/meetings/:id\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      await storage.deleteMeeting(req.params.id);\n      res.json({ message: \"Meeting deleted\" });\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // Settings API (for social links, etc.)\n  app.get(\"/api/settings\", async (_req, res) => {\n    try {\n      const settings = await storage.getAllSettings();\n      res.json(settings);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/settings\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      const settingsSchema = z.object({\n        settings: z.array(z.object({\n          key: z.string().min(1),\n          value: z.string(),\n        })),\n      });\n      \n      const { settings: settingsArray } = settingsSchema.parse(req.body);\n      \n      const updated = await Promise.all(\n        settingsArray.map(async (setting) => {\n          return await storage.upsertSetting(setting.key, setting.value);\n        })\n      );\n      \n      res.json(updated);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // User Profile & Settings API\n  app.patch(\"/api/user/profile\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      \n      const profileSchema = z.object({\n        firstName: z.string().min(1),\n        lastName: z.string().min(1),\n        phone: z.string().optional(),\n      });\n      \n      const validated = profileSchema.parse(req.body);\n      \n      const updated = await storage.updateUser(userId, validated);\n      \n      res.json(updated);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  app.patch(\"/api/user/password\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      \n      const passwordSchema = z.object({\n        currentPassword: z.string().min(6),\n        newPassword: z.string().min(6),\n      });\n      \n      const { currentPassword, newPassword } = passwordSchema.parse(req.body);\n      \n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      const isValid = await bcrypt.compare(currentPassword, user.passwordHash);\n      if (!isValid) {\n        return res.status(401).json({ message: \"Current password is incorrect\" });\n      }\n      \n      const hashedPassword = await bcrypt.hash(newPassword, 10);\n      await storage.updateUser(userId, { passwordHash: hashedPassword });\n      \n      res.json({ message: \"Password updated successfully\" });\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // User Subscription API\n  app.get(\"/api/user/subscription\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const subscription = await storage.getUserSubscription(userId);\n      \n      if (!subscription) {\n        return res.json(null);\n      }\n      \n      const plan = subscription.planId \n        ? await storage.getSubscriptionPlan(subscription.planId)\n        : null;\n      \n      res.json({ ...subscription, plan });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // User Reviews API\n  app.get(\"/api/user/reviews\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const user = await storage.getUser(userId);\n      \n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      const allTestimonials = await storage.getAllTestimonials();\n      const userReviews = allTestimonials.filter(\n        t => t.userId === userId\n      );\n      \n      res.json(userReviews);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/user/reviews\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      \n      const reviewSchema = z.object({\n        rating: z.number().min(1).max(5),\n        content: z.string().min(10).max(1000),\n      });\n      \n      const { rating, content } = reviewSchema.parse(req.body);\n      \n      const user = await storage.getUser(userId);\n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n      \n      const testimonial = await storage.createTestimonial({\n        nameEn: `${user.firstName} ${user.lastName}`,\n        nameAr: `${user.firstName} ${user.lastName}`,\n        roleEn: \"Student\",\n        roleAr: \"ÿ∑ÿßŸÑÿ®\",\n        contentEn: content,\n        contentAr: content,\n        rating,\n        userId,\n        isActive: false, // Requires admin approval\n      });\n      \n      res.json(testimonial);\n    } catch (error: any) {\n      res.status(400).json({ message: error.message });\n    }\n  });\n\n  // Referral API endpoints\n  app.get(\"/api/referral/stats\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const user = await storage.getUser(userId);\n      \n      if (!user) {\n        return res.status(404).json({ message: \"User not found\" });\n      }\n\n      const stats = await storage.getReferralStats(userId);\n      \n      // Get referrals with user details\n      const referrals = await db\n        .select()\n        .from(users)\n        .where(user.referralCode ? eq(users.referredBy, user.referralCode) : undefined)\n        .then(result => user.referralCode ? result : []);\n\n      res.json({\n        code: user.referralCode,\n        count: stats.count,\n        earnings: stats.earnings,\n        referrals: referrals.map(u => ({\n          id: u.id,\n          firstName: u.firstName,\n          lastName: u.lastName,\n          email: u.email,\n          subscriptionStatus: u.subscriptionStatus,\n          createdAt: u.createdAt,\n        })),\n        transactions: stats.transactions,\n      });\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/referral/process-earnings\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const { referrerId, referredUserId, amount } = req.body;\n\n      if (!referrerId || !referredUserId) {\n        return res.status(400).json({ message: \"Missing referrer or referred user\" });\n      }\n\n      const transaction = await storage.addReferralEarnings(referrerId, referredUserId, amount || 10);\n      res.json(transaction);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Withdrawal endpoints\n  app.post(\"/api/withdrawals/request\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const { amount, walletAddress, chain } = req.body;\n\n      // Validate minimum withdrawal amount\n      if (parseFloat(amount) < 100) {\n        return res.status(400).json({ message: \"Minimum withdrawal amount is $100\" });\n      }\n\n      // Check user's current earnings\n      const user = await storage.getUser(userId);\n      if (!user || parseFloat(user.referralEarnings || \"0\") < parseFloat(amount)) {\n        return res.status(400).json({ message: \"Insufficient balance\" });\n      }\n\n      const withdrawal = await storage.createWithdrawalRequest({\n        userId,\n        amount,\n        walletAddress,\n        chain,\n      });\n\n      res.json(withdrawal);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/withdrawals/user\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const withdrawals = await storage.getUserWithdrawals(userId);\n      res.json(withdrawals);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.get(\"/api/withdrawals/admin\", requireAdminRole, async (req, res) => {\n    try {\n      const withdrawals = await storage.getAllWithdrawalRequests();\n      \n      // Get user details for each withdrawal\n      const withUserDetails = await Promise.all(\n        withdrawals.map(async (w) => {\n          const user = await storage.getUser(w.userId);\n          return {\n            ...w,\n            userName: `${user?.firstName} ${user?.lastName}`,\n            userEmail: user?.email,\n            referralCode: user?.referralCode,\n            referralCount: user?.referralCount || 0,\n            referralEarnings: user?.referralEarnings || \"0\",\n            phone: user?.phone,\n            subscriptionStatus: user?.subscriptionStatus,\n          };\n        })\n      );\n\n      res.json(withUserDetails);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Admin Logs endpoints (Admin only)\n  app.get(\"/api/admin/logs\", isAuthenticated, requireAdmin, async (req, res) => {\n    try {\n      const { startDate, endDate } = req.query;\n      const userId = (req.session as any)?.userId;\n      const user = await storage.getUser(userId);\n      \n      console.log(\"üìä [LOGS API] Fetching logs for user:\", {\n        userId,\n        userName: user ? `${user.firstName} ${user.lastName}` : \"Unknown\",\n        startDate,\n        endDate,\n        timestamp: new Date().toISOString(),\n      });\n      \n      let logs;\n      \n      if (startDate && endDate) {\n        const start = new Date(startDate as string);\n        const end = new Date(endDate as string);\n        end.setHours(23, 59, 59, 999);\n        console.log(\"üìÖ [LOGS API] Date range query:\", { start, end });\n        logs = await storage.getAdminLogsByDateRange(start, end);\n      } else {\n        console.log(\"üìã [LOGS API] Fetching all logs (no date range)\");\n        logs = await storage.getAllAdminLogs();\n      }\n      \n      console.log(`‚úÖ [LOGS API] Retrieved ${logs?.length || 0} logs`, logs?.slice(0, 2));\n      res.json(logs);\n    } catch (error: any) {\n      console.error(\"‚ùå [LOGS API] Error fetching logs:\", error);\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Update user role endpoint (admin only)\n  app.patch(\"/api/admin/users/:id\", isAuthenticated, requireAdminRole, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { role } = req.body;\n      const userId = (req.session as any)?.userId;\n\n      if (![\"user\", \"support\", \"manager\", \"admin\"].includes(role)) {\n        return res.status(400).json({ message: \"Invalid role\" });\n      }\n\n      const user = await storage.updateUser(id, { role });\n      await logAdminAction(userId, \"update-role\", \"users\", `Updated user role to ${role}`, { userId: id, role });\n      res.json(user);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/withdrawals/:id/approve\", requireAdminRole, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { adminNotes } = req.body;\n      const userId = (req.session as any)?.userId;\n\n      const withdrawal = await storage.approveWithdrawal(id, adminNotes);\n      await logAdminAction(userId, \"approve\", \"withdrawals\", `Approved withdrawal request ${id}`);\n      res.json(withdrawal);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  app.post(\"/api/withdrawals/:id/reject\", requireAdminRole, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const { adminNotes } = req.body;\n      const userId = (req.session as any)?.userId;\n\n      const withdrawal = await storage.rejectWithdrawal(id, adminNotes);\n      await logAdminAction(userId, \"reject\", \"withdrawals\", `Rejected withdrawal request ${id}`);\n      res.json(withdrawal);\n    } catch (error: any) {\n      res.status(500).json({ message: error.message });\n    }\n  });\n\n  // Secure video streaming endpoint with authentication (no URL exposure)\n  app.get(\"/api/videos/:lessonId/stream\", isAuthenticated, async (req, res) => {\n    try {\n      const userId = (req.session as any)?.userId;\n      const { lessonId } = req.params;\n\n      // Get lesson details\n      const lesson = await storage.getLesson(lessonId);\n      if (!lesson) {\n        return res.status(404).send(\"Not found\");\n      }\n\n      // Check user subscription/access\n      const user = await storage.getUser(userId);\n      const userSub = await storage.getUserSubscription(userId);\n\n      // Allow access if user has active subscription or is admin\n      const hasAccess = user?.role === \"admin\" || userSub?.status === \"active\";\n      if (!hasAccess) {\n        return res.status(403).send(\"Forbidden\");\n      }\n\n      // Stream video directly (no JSON response with URL)\n      if (lesson.videoFilePath && fs.existsSync(lesson.videoFilePath)) {\n        // Security headers - MAXIMUM protection against downloading\n        res.setHeader(\"Content-Type\", \"video/mp4\");\n        res.setHeader(\"Accept-Ranges\", \"bytes\"); // Allow range requests for seeking\n        res.setHeader(\"Content-Security-Policy\", \"default-src 'self'; media-src 'self'; img-src 'self'\");\n        res.setHeader(\"X-Content-Type-Options\", \"nosniff\");\n        res.setHeader(\"Cache-Control\", \"no-cache, no-store, must-revalidate, private, max-age=0\");\n        res.setHeader(\"Pragma\", \"no-cache\");\n        res.setHeader(\"Expires\", \"0\");\n        res.setHeader(\"X-Frame-Options\", \"DENY\");\n        res.setHeader(\"X-XSS-Protection\", \"1; mode=block\");\n        res.setHeader(\"Referrer-Policy\", \"no-referrer\");\n        res.setHeader(\"Permissions-Policy\", \"camera=(), microphone=(), geolocation=()\");\n        // Critical: Set to inline and hide filename from browser UI\n        res.setHeader(\"Content-Disposition\", \"inline\");\n        \n        // Get file size for range request support\n        const stat = fs.statSync(lesson.videoFilePath);\n        const fileSize = stat.size;\n        const range = req.headers.range;\n\n        if (range) {\n          // Handle range requests for seeking (required for video player)\n          const parts = range.replace(/bytes=/, \"\").split(\"-\");\n          const start = parseInt(parts[0], 10);\n          const end = parts[1] ? parseInt(parts[1], 10) : fileSize - 1;\n\n          if (start >= fileSize) {\n            res.status(416).send(\"Range Not Satisfiable\");\n            return;\n          }\n\n          res.status(206);\n          res.setHeader(\"Content-Range\", `bytes ${start}-${end}/${fileSize}`);\n          res.setHeader(\"Content-Length\", end - start + 1);\n\n          const stream = fs.createReadStream(lesson.videoFilePath, { start, end });\n          stream.pipe(res);\n        } else {\n          // Stream full video\n          res.setHeader(\"Content-Length\", fileSize);\n          const stream = fs.createReadStream(lesson.videoFilePath);\n          stream.pipe(res);\n        }\n      } else {\n        res.status(404).send(\"Video not found\");\n      }\n    } catch (error: any) {\n      console.error(\"Video streaming error:\", error);\n      res.status(500).send(\"Server error\");\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n",
            "size_bytes": 72018
        },
        "client/src/components/ui/collapsible.tsx": {
            "content": "\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n",
            "size_bytes": 329
        },
        "client/src/components/ui/calendar.tsx": {
            "content": "import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n",
            "size_bytes": 2695
        },
        "server/vite.ts": {
            "content": "import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n",
            "size_bytes": 2263
        },
        "client/src/pages/Services.tsx": {
            "content": "import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { BookOpen, Video, Calendar, LineChart, Users, Shield } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Link } from \"wouter\";\n\nexport default function Services() {\n  const { language } = useLanguage();\n\n  const services = [\n    {\n      icon: BookOpen,\n      title: language === \"ar\" ? \"ÿØŸàÿ±ÿßÿ™ ÿ¥ÿßŸÖŸÑÿ©\" : \"Comprehensive Courses\",\n      description:\n        language === \"ar\"\n          ? \"ÿØŸàÿ±ÿßÿ™ ŸÖŸÜÿ∏ŸÖÿ© ÿ®ÿπŸÜÿßŸäÿ© ÿ™ÿ∫ÿ∑Ÿä ÿ¨ŸÖŸäÿπ ÿ¨ŸàÿßŸÜÿ® ÿ™ÿØÿßŸàŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©\"\n          : \"Carefully structured courses covering all aspects of cryptocurrency trading\",\n      features: [\n        language === \"ar\" ? \"ŸÖÿ≠ÿ™ŸàŸâ ÿπÿßŸÑŸä ÿßŸÑÿ¨ŸàÿØÿ©\" : \"High-quality content\",\n        language === \"ar\" ? \"ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ŸÖŸÜÿ™ÿ∏ŸÖÿ©\" : \"Regular updates\",\n        language === \"ar\" ? \"ÿ£ŸÖÿ´ŸÑÿ© ÿπŸÖŸÑŸäÿ©\" : \"Practical examples\",\n      ],\n    },\n    {\n      icon: Video,\n      title: language === \"ar\" ? \"ŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿ™ÿπŸÑŸäŸÖŸäÿ©\" : \"Educational Videos\",\n      description:\n        language === \"ar\"\n          ? \"ŸÅŸäÿØŸäŸàŸáÿßÿ™ ÿπÿßŸÑŸäÿ© ÿßŸÑÿ¨ŸàÿØÿ© ŸÖÿπ ÿ¥ÿ±ÿ≠ ŸÖŸÅÿµŸÑ Ÿàÿ£ŸÖÿ´ŸÑÿ© ŸàÿßŸÇÿπŸäÿ©\"\n          : \"High-quality videos with detailed explanations and real-world examples\",\n      features: [\n        language === \"ar\" ? \"ÿØŸÇÿ© ÿπÿßŸÑŸäÿ©\" : \"High definition\",\n        language === \"ar\" ? \"ÿ™ÿ±ÿ¨ŸÖÿ© ÿ´ŸÜÿßÿ¶Ÿäÿ©\" : \"Bilingual subtitles\",\n        language === \"ar\" ? \"ŸàÿµŸàŸÑ ŸÖÿØŸâ ÿßŸÑÿ≠Ÿäÿßÿ©\" : \"Lifetime access\",\n      ],\n    },\n    {\n      icon: Calendar,\n      title: language === \"ar\" ? \"ÿ¨ŸÑÿ≥ÿßÿ™ Zoom ŸÖÿ®ÿßÿ¥ÿ±ÿ©\" : \"Live Zoom Sessions\",\n      description:\n        language === \"ar\"\n          ? \"ÿ¨ŸÑÿ≥ÿßÿ™ ÿ™ŸÅÿßÿπŸÑŸäÿ© ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÖÿπ ÿßŸÑŸÖÿØÿ±ÿ®ŸäŸÜ ŸÑŸÑÿ•ÿ¨ÿßÿ®ÿ© ÿπŸÑŸâ ÿ£ÿ≥ÿ¶ŸÑÿ™ŸÉ\"\n          : \"Interactive live sessions with instructors to answer your questions\",\n      features: [\n        language === \"ar\" ? \"ÿ™ŸÅÿßÿπŸÑ ŸÖÿ®ÿßÿ¥ÿ±\" : \"Direct interaction\",\n        language === \"ar\" ? \"ÿ£ÿ≥ÿ¶ŸÑÿ© Ÿàÿ£ÿ¨Ÿàÿ®ÿ©\" : \"Q&A sessions\",\n        language === \"ar\" ? \"ÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™ ŸÖÿ™ÿßÿ≠ÿ©\" : \"Recordings available\",\n      ],\n    },\n    {\n      icon: LineChart,\n      title: language === \"ar\" ? \"ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ≥ŸàŸÇ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±\" : \"Live Market Analysis\",\n      description:\n        language === \"ar\"\n          ? \"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≥ŸàŸÇ ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÅÿπŸÑŸä Ÿàÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ŸÖŸÜ ÿßŸÑÿÆÿ®ÿ±ÿßÿ°\"\n          : \"Real-time market data and expert analysis\",\n      features: [\n        language === \"ar\" ? \"ÿ£ÿ≥ÿπÿßÿ± ŸÖÿ®ÿßÿ¥ÿ±ÿ©\" : \"Live prices\",\n        language === \"ar\" ? \"ÿ™ŸÜÿ®ŸäŸáÿßÿ™\" : \"Alerts\",\n        language === \"ar\" ? \"ÿ±ÿ§Ÿâ ÿßŸÑÿÆÿ®ÿ±ÿßÿ°\" : \"Expert insights\",\n      ],\n    },\n    {\n      icon: Users,\n      title: language === \"ar\" ? \"ŸÖÿ¨ÿ™ŸÖÿπ ŸÜÿ¥ÿ∑\" : \"Active Community\",\n      description:\n        language === \"ar\"\n          ? \"ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ŸÖÿ¨ÿ™ŸÖÿπ ŸÖŸÜ ÿßŸÑŸÖÿ™ÿØÿßŸàŸÑŸäŸÜ ÿßŸÑŸÖÿ™ÿ≠ŸÖÿ≥ŸäŸÜ Ÿàÿ¥ÿßÿ±ŸÉ ÿßŸÑÿÆÿ®ÿ±ÿßÿ™\"\n          : \"Join a community of passionate traders and share experiences\",\n      features: [\n        language === \"ar\" ? \"ŸÖŸÜÿ™ÿØŸäÿßÿ™ ŸÜŸÇÿßÿ¥\" : \"Discussion forums\",\n        language === \"ar\" ? \"ŸÖÿ¥ÿßÿ±ŸÉÿ© ÿßŸÑÿ£ŸÅŸÉÿßÿ±\" : \"Idea sharing\",\n        language === \"ar\" ? \"ÿØÿπŸÖ ÿßŸÑÿ£ŸÇÿ±ÿßŸÜ\" : \"Peer support\",\n      ],\n    },\n    {\n      icon: Shield,\n      title: language === \"ar\" ? \"ÿØÿπŸÖ ŸÖÿÆÿµÿµ\" : \"Dedicated Support\",\n      description:\n        language === \"ar\"\n          ? \"ŸÅÿ±ŸäŸÇ ÿØÿπŸÖ ŸÖÿ™ÿßÿ≠ ÿπŸÑŸâ ŸÖÿØÿßÿ± ÿßŸÑÿ≥ÿßÿπÿ© ŸÑŸÖÿ≥ÿßÿπÿØÿ™ŸÉ\"\n          : \"24/7 support team available to help you\",\n      features: [\n        language === \"ar\" ? \"ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿ≥ÿ±Ÿäÿπÿ©\" : \"Quick response\",\n        language === \"ar\" ? \"ÿØÿπŸÖ ŸÅŸÜŸä\" : \"Technical support\",\n        language === \"ar\" ? \"ÿ•ÿ±ÿ¥ÿßÿØ ÿ¥ÿÆÿµŸä\" : \"Personal guidance\",\n      ],\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20\">\n        {/* Hero Section */}\n        <section className=\"py-24 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-3xl mx-auto text-center\">\n              <h1\n                className=\"text-4xl md:text-5xl font-heading font-bold text-foreground mb-6\"\n                data-testid=\"text-services-title\"\n              >\n                {language === \"ar\" ? \"ÿÆÿØŸÖÿßÿ™ŸÜÿß\" : \"Our Services\"}\n              </h1>\n              <p className=\"text-lg text-muted-foreground leading-relaxed\">\n                {language === \"ar\"\n                  ? \"ŸÜŸÇÿØŸÖ ŸÖÿ¨ŸÖŸàÿπÿ© ÿ¥ÿßŸÖŸÑÿ© ŸÖŸÜ ÿßŸÑÿÆÿØŸÖÿßÿ™ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ© ÿßŸÑŸÖÿµŸÖŸÖÿ© ŸÑŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿπŸÑŸâ ÿ•ÿ™ŸÇÿßŸÜ ÿ™ÿØÿßŸàŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©\"\n                  : \"We offer a comprehensive range of educational services designed to help you master cryptocurrency trading\"}\n              </p>\n            </div>\n          </div>\n        </section>\n\n        {/* Services Grid */}\n        <section className=\"py-24\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {services.map((service, index) => (\n                <Card\n                  key={index}\n                  className=\"hover-elevate active-elevate-2 transition-all\"\n                  data-testid={`card-service-${index}`}\n                >\n                  <CardHeader>\n                    <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                      <service.icon className=\"h-6 w-6 text-primary\" />\n                    </div>\n                    <CardTitle className=\"text-xl\">{service.title}</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <p className=\"text-muted-foreground mb-4\">\n                      {service.description}\n                    </p>\n                    <ul className=\"space-y-2\">\n                      {service.features.map((feature, i) => (\n                        <li\n                          key={i}\n                          className=\"flex items-center gap-2 text-sm text-muted-foreground\"\n                        >\n                          <div className=\"w-1.5 h-1.5 rounded-full bg-primary\" />\n                          {feature}\n                        </li>\n                      ))}\n                    </ul>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        {/* CTA Section */}\n        <section className=\"py-24 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-3xl mx-auto text-center\">\n              <h2 className=\"text-3xl md:text-4xl font-heading font-bold text-foreground mb-6\">\n                {language === \"ar\"\n                  ? \"ÿ¨ÿßŸáÿ≤ ŸÑŸÑÿ®ÿØÿ°ÿü\"\n                  : \"Ready to Get Started?\"}\n              </h2>\n              <p className=\"text-lg text-muted-foreground mb-8\">\n                {language === \"ar\"\n                  ? \"ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ÿ¢ŸÑÿßŸÅ ÿßŸÑÿ∑ŸÑÿßÿ® ÿßŸÑÿ∞ŸäŸÜ Ÿäÿ≠ŸàŸÑŸàŸÜ ÿ≠Ÿäÿßÿ™ŸáŸÖ ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿßŸÑÿ™ÿπŸÑŸäŸÖ ÿßŸÑŸÖŸáŸÜŸä\"\n                  : \"Join thousands of students transforming their lives through professional education\"}\n              </p>\n              <Button asChild size=\"lg\">\n                <Link href=\"/courses\">\n                  <a data-testid=\"button-services-cta\">\n                    {language === \"ar\"\n                      ? \"ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑÿØŸàÿ±ÿßÿ™\"\n                      : \"Explore Courses\"}\n                  </a>\n                </Link>\n              </Button>\n            </div>\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 7955
        },
        "client/src/App.tsx": {
            "content": "import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { LanguageProvider } from \"@/lib/i18n\";\nimport { ThemeProvider } from \"@/lib/theme\";\nimport \"@/i18n/config\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport NotFound from \"@/pages/not-found\";\nimport Landing from \"@/pages/Landing\";\nimport About from \"@/pages/About\";\nimport Services from \"@/pages/Services\";\nimport Contact from \"@/pages/Contact\";\nimport Pricing from \"@/pages/Pricing\";\nimport Courses from \"@/pages/Courses\";\nimport CourseDetail from \"@/pages/CourseDetail\";\nimport CoursePreview from \"@/pages/CoursePreview\";\nimport News from \"@/pages/News\";\nimport DashboardNew from \"@/pages/DashboardNew\";\nimport Subscribe from \"@/pages/Subscribe\";\nimport Auth from \"@/pages/Auth\";\nimport AdminLayout from \"@/pages/admin/AdminLayout\";\nimport AdminDashboard from \"@/pages/admin/AdminDashboard\";\nimport AdminUsers from \"@/pages/admin/AdminUsers\";\nimport AdminCourses from \"@/pages/admin/AdminCourses\";\nimport AdminPayments from \"@/pages/admin/AdminPayments\";\nimport AdminSettings from \"@/pages/admin/AdminSettings\";\nimport AdminMeetings from \"@/pages/admin/AdminMeetings\";\nimport AdminAnalytics from \"@/pages/admin/AdminAnalytics\";\nimport AdminWithdrawals from \"@/pages/admin/AdminWithdrawals\";\nimport AdminPricing from \"@/pages/admin/AdminPricing\";\nimport AdminLogs from \"@/pages/admin/AdminLogs\";\nimport AdminRoles from \"@/pages/admin/AdminRoles\";\n\nfunction Router() {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  return (\n    <Switch>\n      {/* Public Routes */}\n      <Route path=\"/\" component={Landing} />\n      <Route path=\"/auth\" component={Auth} />\n      <Route path=\"/about\" component={About} />\n      <Route path=\"/services\" component={Services} />\n      <Route path=\"/contact\" component={Contact} />\n      <Route path=\"/pricing\" component={Pricing} />\n      <Route path=\"/courses\" component={Courses} />\n      <Route path=\"/preview/:id\" component={CoursePreview} />\n      <Route path=\"/course/:id\" component={CourseDetail} />\n      <Route path=\"/news\" component={News} />\n\n      {/* Protected Routes */}\n      {isAuthenticated && (\n        <>\n          <Route path=\"/dashboard\" component={DashboardNew} />\n          <Route path=\"/subscribe/:planId?\" component={Subscribe} />\n\n          {/* Admin Routes */}\n          <Route path=\"/admin\">\n            {() => {\n              // Redirect /admin to /admin/dashboard\n              window.location.href = \"/admin/dashboard\";\n              return null;\n            }}\n          </Route>\n          <Route path=\"/admin/dashboard\">\n            {() => (\n              <AdminLayout>\n                <AdminDashboard />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/users\">\n            {() => (\n              <AdminLayout>\n                <AdminUsers />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/courses\">\n            {() => (\n              <AdminLayout>\n                <AdminCourses />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/payments\">\n            {() => (\n              <AdminLayout>\n                <AdminPayments />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/analytics\">\n            {() => (\n              <AdminLayout>\n                <AdminAnalytics />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/meetings\">\n            {() => (\n              <AdminLayout>\n                <AdminMeetings />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/pricing\">\n            {() => (\n              <AdminLayout>\n                <AdminPricing />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/settings\">\n            {() => (\n              <AdminLayout>\n                <AdminSettings />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/withdrawals\">\n            {() => (\n              <AdminLayout>\n                <AdminWithdrawals />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/logs\">\n            {() => (\n              <AdminLayout>\n                <AdminLogs />\n              </AdminLayout>\n            )}\n          </Route>\n          <Route path=\"/admin/roles\">\n            {() => (\n              <AdminLayout>\n                <AdminRoles />\n              </AdminLayout>\n            )}\n          </Route>\n        </>\n      )}\n\n      {/* Fallback to 404 */}\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nexport default function App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider>\n        <LanguageProvider>\n          <TooltipProvider>\n            <Toaster />\n            <Router />\n          </TooltipProvider>\n        </LanguageProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n",
            "size_bytes": 5201
        },
        "client/src/components/ui/form.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n",
            "size_bytes": 4120
        },
        "client/src/components/ui/checkbox.tsx": {
            "content": "import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n",
            "size_bytes": 1056
        },
        "client/src/components/ui/pagination.tsx": {
            "content": "import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n",
            "size_bytes": 2751
        },
        "client/src/components/ui/resizable.tsx": {
            "content": "\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n",
            "size_bytes": 1723
        },
        "client/src/components/ui/drawer.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n",
            "size_bytes": 3021
        },
        "client/src/lib/theme.tsx": {
            "content": "import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\n\ntype Theme = \"light\" | \"dark\";\n\ninterface ThemeContextType {\n  theme: Theme;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: ReactNode }) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    const saved = localStorage.getItem(\"theme\");\n    return (saved === \"dark\" || saved === \"light\" ? saved : \"light\") as Theme;\n  });\n\n  useEffect(() => {\n    localStorage.setItem(\"theme\", theme);\n    if (theme === \"dark\") {\n      document.documentElement.classList.add(\"dark\");\n    } else {\n      document.documentElement.classList.remove(\"dark\");\n    }\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme((prev) => (prev === \"light\" ? \"dark\" : \"light\"));\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (!context) {\n    throw new Error(\"useTheme must be used within ThemeProvider\");\n  }\n  return context;\n}\n",
            "size_bytes": 1168
        },
        "shared/schema.ts": {
            "content": "import { sql } from \"drizzle-orm\";\nimport { relations } from \"drizzle-orm\";\nimport {\n  pgTable,\n  varchar,\n  text,\n  timestamp,\n  integer,\n  boolean,\n  jsonb,\n  index,\n  decimal,\n} from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table (required for Replit Auth)\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)]\n);\n\n// Users table\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").notNull().unique(),\n  passwordHash: varchar(\"password_hash\").notNull(),\n  firstName: varchar(\"first_name\").notNull(),\n  lastName: varchar(\"last_name\").notNull(),\n  phone: varchar(\"phone\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  role: varchar(\"role\", { length: 20 }).notNull().default(\"user\"),\n  subscriptionStatus: varchar(\"subscription_status\", { length: 20 }).default(\"none\"),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  referralCode: varchar(\"referral_code\", { length: 8 }).unique(),\n  referredBy: varchar(\"referred_by\", { length: 8 }),\n  referralCount: integer(\"referral_count\").default(0),\n  referralEarnings: decimal(\"referral_earnings\", { precision: 10, scale: 2 }).default(\"0\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  passwordHash: true,\n  createdAt: true,\n  updatedAt: true,\n  referralCode: true,\n}).extend({\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n  firstName: z.string().min(1, \"First name is required\"),\n  lastName: z.string().min(1, \"Last name is required\"),\n  phone: z.string().min(1, \"Phone number is required\"),\n  referredBy: z.string().optional(),\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\n\n// Referral Transactions table\nexport const referralTransactions = pgTable(\"referral_transactions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  referrerId: varchar(\"referrer_id\").notNull().references(() => users.id),\n  referredUserId: varchar(\"referred_user_id\").notNull().references(() => users.id),\n  amount: decimal(\"amount\", { precision: 10, scale: 2 }).notNull().default(\"10\"),\n  status: varchar(\"status\", { length: 20 }).default(\"pending\"), // pending, completed\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertReferralTransactionSchema = createInsertSchema(referralTransactions).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertReferralTransaction = z.infer<typeof insertReferralTransactionSchema>;\nexport type ReferralTransaction = typeof referralTransactions.$inferSelect;\n\n// Withdrawal Requests table\nexport const withdrawalRequests = pgTable(\"withdrawal_requests\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  amount: decimal(\"amount\", { precision: 10, scale: 2 }).notNull(),\n  walletAddress: varchar(\"wallet_address\").notNull(),\n  chain: varchar(\"chain\", { length: 50 }).notNull(), // ethereum, polygon, bsc, etc\n  status: varchar(\"status\", { length: 20 }).default(\"pending\"), // pending, approved, rejected, completed\n  adminNotes: text(\"admin_notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  approvedAt: timestamp(\"approved_at\"),\n});\n\nexport const insertWithdrawalRequestSchema = createInsertSchema(withdrawalRequests).omit({\n  id: true,\n  createdAt: true,\n  approvedAt: true,\n  status: true,\n  adminNotes: true,\n});\nexport type InsertWithdrawalRequest = z.infer<typeof insertWithdrawalRequestSchema>;\nexport type WithdrawalRequest = typeof withdrawalRequests.$inferSelect;\n\n// Subscription Plans\nexport const subscriptionPlans = pgTable(\"subscription_plans\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  nameEn: varchar(\"name_en\").notNull(),\n  nameAr: varchar(\"name_ar\").notNull(),\n  descriptionEn: text(\"description_en\"),\n  descriptionAr: text(\"description_ar\"),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n  durationDays: integer(\"duration_days\").notNull(),\n  featuresEn: text(\"features_en\").array(),\n  featuresAr: text(\"features_ar\").array(),\n  isPopular: boolean(\"is_popular\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertSubscriptionPlanSchema = createInsertSchema(subscriptionPlans).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertSubscriptionPlan = z.infer<typeof insertSubscriptionPlanSchema>;\nexport type SubscriptionPlan = typeof subscriptionPlans.$inferSelect;\n\n// Courses\nexport const courses = pgTable(\"courses\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  titleEn: varchar(\"title_en\").notNull(),\n  titleAr: varchar(\"title_ar\").notNull(),\n  descriptionEn: text(\"description_en\"),\n  descriptionAr: text(\"description_ar\"),\n  level: integer(\"level\").notNull(),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).default(\"0\"),\n  isFree: boolean(\"is_free\").default(false),\n  requiredPlanId: varchar(\"required_plan_id\").references(() => subscriptionPlans.id),\n  thumbnailUrl: varchar(\"thumbnail_url\"),\n  instructorEn: varchar(\"instructor_en\"),\n  instructorAr: varchar(\"instructor_ar\"),\n  duration: integer(\"duration\"),\n  language: varchar(\"language\").default(\"en\"),\n  viewsCount: integer(\"views_count\").default(0),\n  hasCertificate: boolean(\"has_certificate\").default(false),\n  isPublished: boolean(\"is_published\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertCourseSchema = createInsertSchema(courses).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\nexport type InsertCourse = z.infer<typeof insertCourseSchema>;\nexport type Course = typeof courses.$inferSelect;\n\n// Lessons\nexport const lessons = pgTable(\"lessons\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  courseId: varchar(\"course_id\").notNull().references(() => courses.id, { onDelete: \"cascade\" }),\n  titleEn: varchar(\"title_en\").notNull(),\n  titleAr: varchar(\"title_ar\").notNull(),\n  descriptionEn: text(\"description_en\"),\n  descriptionAr: text(\"description_ar\"),\n  videoUrl: varchar(\"video_url\"),\n  videoFilePath: varchar(\"video_file_path\"),\n  thumbnailUrl: varchar(\"thumbnail_url\"),\n  duration: integer(\"duration\"),\n  order: integer(\"order\").notNull(),\n  requiresPrevious: boolean(\"requires_previous\").default(true),\n  isFree: boolean(\"is_free\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertLessonSchema = createInsertSchema(lessons).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n}).extend({\n  videoUrl: z.string().url(\"Must be a valid URL\").optional().or(z.literal(\"\")),\n  videoFilePath: z.string().optional(),\n  titleEn: z.string().min(1, \"English title is required\"),\n  titleAr: z.string().min(1, \"Arabic title is required\"),\n});\nexport type InsertLesson = z.infer<typeof insertLessonSchema>;\nexport type Lesson = typeof lessons.$inferSelect;\n\n// Course Resources (ŸÖŸàÿßÿ±ÿØ ÿßŸÑÿØŸàÿ±ÿ©)\nexport const courseResources = pgTable(\"course_resources\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  courseId: varchar(\"course_id\").notNull().references(() => courses.id, { onDelete: \"cascade\" }),\n  titleEn: varchar(\"title_en\").notNull(),\n  titleAr: varchar(\"title_ar\").notNull(),\n  descriptionEn: text(\"description_en\"),\n  descriptionAr: text(\"description_ar\"),\n  fileUrl: varchar(\"file_url\").notNull(),\n  fileName: varchar(\"file_name\").notNull(),\n  fileType: varchar(\"file_type\").notNull(),\n  fileSize: integer(\"file_size\"),\n  order: integer(\"order\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertCourseResourceSchema = createInsertSchema(courseResources).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\nexport type InsertCourseResource = z.infer<typeof insertCourseResourceSchema>;\nexport type CourseResource = typeof courseResources.$inferSelect;\n\n// Subscriptions\nexport const subscriptions = pgTable(\"subscriptions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  planId: varchar(\"plan_id\").notNull().references(() => subscriptionPlans.id),\n  status: varchar(\"status\", { length: 20 }).notNull().default(\"pending\"),\n  startDate: timestamp(\"start_date\"),\n  endDate: timestamp(\"end_date\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertSubscriptionSchema = createInsertSchema(subscriptions).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertSubscription = z.infer<typeof insertSubscriptionSchema>;\nexport type Subscription = typeof subscriptions.$inferSelect;\n\n// Payments\nexport const payments = pgTable(\"payments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  userName: varchar(\"user_name\"),\n  userEmail: varchar(\"user_email\"),\n  subscriptionId: varchar(\"subscription_id\").references(() => subscriptions.id),\n  planId: varchar(\"plan_id\").references(() => subscriptionPlans.id),\n  amount: decimal(\"amount\", { precision: 10, scale: 2 }).notNull(),\n  method: varchar(\"method\", { length: 20 }).notNull(),\n  currency: varchar(\"currency\", { length: 10 }).default(\"USD\"),\n  proofImageUrl: varchar(\"proof_image_url\"),\n  walletAddress: varchar(\"wallet_address\"),\n  transactionHash: varchar(\"transaction_hash\"),\n  status: varchar(\"status\", { length: 20 }).notNull().default(\"pending\"),\n  adminNotes: text(\"admin_notes\"),\n  reviewedBy: varchar(\"reviewed_by\").references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  reviewedAt: timestamp(\"reviewed_at\"),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertPaymentSchema = createInsertSchema(payments).omit({\n  id: true,\n  createdAt: true,\n  reviewedAt: true,\n  updatedAt: true,\n  reviewedBy: true,\n});\nexport type InsertPayment = z.infer<typeof insertPaymentSchema>;\nexport type Payment = typeof payments.$inferSelect;\n\n// Progress tracking\nexport const progress = pgTable(\"progress\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  lessonId: varchar(\"lesson_id\").notNull().references(() => lessons.id, { onDelete: \"cascade\" }),\n  courseId: varchar(\"course_id\").notNull().references(() => courses.id, { onDelete: \"cascade\" }),\n  completed: boolean(\"completed\").default(false),\n  watchProgress: integer(\"watch_progress\").default(0),\n  completedAt: timestamp(\"completed_at\"),\n  lastAccessedAt: timestamp(\"last_accessed_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertProgressSchema = createInsertSchema(progress).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertProgress = z.infer<typeof insertProgressSchema>;\nexport type Progress = typeof progress.$inferSelect;\n\n// Zoom Meetings\nexport const meetings = pgTable(\"meetings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  courseId: varchar(\"course_id\").references(() => courses.id, { onDelete: \"cascade\" }),\n  titleEn: varchar(\"title_en\").notNull(),\n  titleAr: varchar(\"title_ar\").notNull(),\n  descriptionEn: text(\"description_en\"),\n  descriptionAr: text(\"description_ar\"),\n  scheduledAt: timestamp(\"scheduled_at\").notNull(),\n  zoomLink: varchar(\"zoom_link\").notNull(),\n  duration: integer(\"duration\").notNull(),\n  isPaidOnly: boolean(\"is_paid_only\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertMeetingSchema = createInsertSchema(meetings).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertMeeting = z.infer<typeof insertMeetingSchema>;\nexport type Meeting = typeof meetings.$inferSelect;\n\n// Testimonials\nexport const testimonials = pgTable(\"testimonials\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  nameEn: varchar(\"name_en\").notNull(),\n  nameAr: varchar(\"name_ar\").notNull(),\n  roleEn: varchar(\"role_en\"),\n  roleAr: varchar(\"role_ar\"),\n  contentEn: text(\"content_en\").notNull(),\n  contentAr: text(\"content_ar\").notNull(),\n  rating: integer(\"rating\").notNull().default(5),\n  imageUrl: varchar(\"image_url\"),\n  userId: varchar(\"user_id\").references(() => users.id),\n  isActive: boolean(\"is_active\").default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertTestimonialSchema = createInsertSchema(testimonials).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertTestimonial = z.infer<typeof insertTestimonialSchema>;\nexport type Testimonial = typeof testimonials.$inferSelect;\n\n// Settings table for platform configuration\nexport const settings = pgTable(\"settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  key: varchar(\"key\").notNull().unique(),\n  value: text(\"value\"),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertSettingSchema = createInsertSchema(settings).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport type Setting = typeof settings.$inferSelect;\nexport type InsertSetting = z.infer<typeof insertSettingSchema>;\n\n// Payment Settings (Admin configurable)\nexport const paymentSettings = pgTable(\"payment_settings\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  bankName: varchar(\"bank_name\"),\n  accountNumber: varchar(\"account_number\"),\n  accountHolderName: varchar(\"account_holder_name\"),\n  iban: varchar(\"iban\"),\n  swiftCode: varchar(\"swift_code\"),\n  bankAddress: text(\"bank_address\"),\n  btcAddress: varchar(\"btc_address\"),\n  ethAddress: varchar(\"eth_address\"),\n  usdtAddress: varchar(\"usdt_address\"),\n  usdtNetwork: varchar(\"usdt_network\").default(\"TRC20\"),\n  paymentInstructionsEn: text(\"payment_instructions_en\"),\n  paymentInstructionsAr: text(\"payment_instructions_ar\"),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport const insertPaymentSettingsSchema = createInsertSchema(paymentSettings).omit({\n  id: true,\n  updatedAt: true,\n});\nexport type InsertPaymentSettings = z.infer<typeof insertPaymentSettingsSchema>;\nexport type PaymentSettings = typeof paymentSettings.$inferSelect;\n\n// Relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  subscriptions: many(subscriptions),\n  payments: many(payments),\n  progress: many(progress),\n}));\n\nexport const coursesRelations = relations(courses, ({ many }) => ({\n  lessons: many(lessons),\n  meetings: many(meetings),\n  progress: many(progress),\n}));\n\nexport const lessonsRelations = relations(lessons, ({ one, many }) => ({\n  course: one(courses, {\n    fields: [lessons.courseId],\n    references: [courses.id],\n  }),\n  progress: many(progress),\n}));\n\nexport const subscriptionsRelations = relations(subscriptions, ({ one, many }) => ({\n  user: one(users, {\n    fields: [subscriptions.userId],\n    references: [users.id],\n  }),\n  plan: one(subscriptionPlans, {\n    fields: [subscriptions.planId],\n    references: [subscriptionPlans.id],\n  }),\n  payments: many(payments),\n}));\n\nexport const paymentsRelations = relations(payments, ({ one }) => ({\n  user: one(users, {\n    fields: [payments.userId],\n    references: [users.id],\n  }),\n  subscription: one(subscriptions, {\n    fields: [payments.subscriptionId],\n    references: [subscriptions.id],\n  }),\n}));\n\nexport const progressRelations = relations(progress, ({ one }) => ({\n  user: one(users, {\n    fields: [progress.userId],\n    references: [users.id],\n  }),\n  lesson: one(lessons, {\n    fields: [progress.lessonId],\n    references: [lessons.id],\n  }),\n  course: one(courses, {\n    fields: [progress.courseId],\n    references: [courses.id],\n  }),\n}));\n\nexport const meetingsRelations = relations(meetings, ({ one }) => ({\n  course: one(courses, {\n    fields: [meetings.courseId],\n    references: [courses.id],\n  }),\n}));\n\n// Admin Logs table\nexport const adminLogs = pgTable(\"admin_logs\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  adminId: varchar(\"admin_id\").notNull().references(() => users.id),\n  adminName: varchar(\"admin_name\", { length: 255 }).notNull(),\n  adminEmail: varchar(\"admin_email\", { length: 255 }).notNull(),\n  action: varchar(\"action\", { length: 100 }).notNull(), // create, update, delete, approve, reject, etc\n  page: varchar(\"page\", { length: 100 }).notNull(), // payments, users, withdrawals, courses, pricing, etc\n  description: text(\"description\"),\n  details: jsonb(\"details\"), // Store JSON details of what was changed\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertAdminLogSchema = createInsertSchema(adminLogs).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertAdminLog = z.infer<typeof insertAdminLogSchema>;\nexport type AdminLog = typeof adminLogs.$inferSelect & { adminName: string; adminEmail: string };\n",
            "size_bytes": 17444
        },
        "client/src/components/ui/popover.tsx": {
            "content": "import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n",
            "size_bytes": 1280
        },
        "server/seed.ts": {
            "content": "import { db } from \"./db\";\nimport { subscriptionPlans, courses, lessons } from \"@shared/schema\";\n\nasync function seed() {\n  console.log(\"Seeding database...\");\n\n  // Seed subscription plans\n  await db.insert(subscriptionPlans).values([\n    {\n      nameEn: \"Basic\",\n      nameAr: \"ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©\",\n      descriptionEn: \"Perfect for beginners starting their trading journey\",\n      descriptionAr: \"ŸÖÿ´ÿßŸÑŸä ŸÑŸÑŸÖÿ®ÿ™ÿØÿ¶ŸäŸÜ ÿßŸÑÿ∞ŸäŸÜ Ÿäÿ®ÿØÿ£ŸàŸÜ ÿ±ÿ≠ŸÑÿ™ŸáŸÖ ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿäÿ©\",\n      price: \"29.99\",\n      durationDays: 30,\n      featuresEn: [\"Access to Level 1 courses\", \"Community forum access\", \"Email support\"],\n      featuresAr: [\"ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿØŸàÿ±ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 1\", \"ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ŸÖŸÜÿ™ÿØŸâ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ\", \"ÿØÿπŸÖ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\"],\n      isPopular: false,\n    },\n    {\n      nameEn: \"Professional\",\n      nameAr: \"ÿßŸÑŸÖÿ≠ÿ™ÿ±ŸÅ\",\n      descriptionEn: \"For serious traders who want to master the market\",\n      descriptionAr: \"ŸÑŸÑŸÖÿ™ÿØÿßŸàŸÑŸäŸÜ ÿßŸÑÿ¨ÿßÿØŸäŸÜ ÿßŸÑÿ∞ŸäŸÜ Ÿäÿ±ŸäÿØŸàŸÜ ÿ•ÿ™ŸÇÿßŸÜ ÿßŸÑÿ≥ŸàŸÇ\",\n      price: \"79.99\",\n      durationDays: 30,\n      featuresEn: [\n        \"Access to all Level 1 & 2 courses\",\n        \"Weekly live Zoom sessions\",\n        \"Priority support\",\n        \"Trading signals\",\n        \"Community forum access\"\n      ],\n      featuresAr: [\n        \"ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿ¨ŸÖŸäÿπ ÿØŸàÿ±ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 1 Ÿà 2\",\n        \"ÿ¨ŸÑÿ≥ÿßÿ™ Zoom ŸÖÿ®ÿßÿ¥ÿ±ÿ© ÿ£ÿ≥ÿ®ŸàÿπŸäÿ©\",\n        \"ÿØÿπŸÖ ÿ∞Ÿà ÿ£ŸàŸÑŸàŸäÿ©\",\n        \"ÿ•ÿ¥ÿßÿ±ÿßÿ™ ÿßŸÑÿ™ÿØÿßŸàŸÑ\",\n        \"ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ŸÖŸÜÿ™ÿØŸâ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ\"\n      ],\n      isPopular: true,\n    },\n    {\n      nameEn: \"Elite\",\n      nameAr: \"ÿßŸÑŸÜÿÆÿ®ÿ©\",\n      descriptionEn: \"Ultimate package for professional traders\",\n      descriptionAr: \"ÿßŸÑÿ®ÿßŸÇÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ© ŸÑŸÑŸÖÿ™ÿØÿßŸàŸÑŸäŸÜ ÿßŸÑŸÖÿ≠ÿ™ÿ±ŸÅŸäŸÜ\",\n      price: \"149.99\",\n      durationDays: 30,\n      featuresEn: [\n        \"Access to all courses (Levels 1, 2, 3)\",\n        \"Daily live Zoom sessions\",\n        \"1-on-1 mentoring\",\n        \"Premium trading signals\",\n        \"Exclusive market analysis\",\n        \"Lifetime community access\"\n      ],\n      featuresAr: [\n        \"ÿßŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿ¨ŸÖŸäÿπ ÿßŸÑÿØŸàÿ±ÿßÿ™ (ÿßŸÑŸÖÿ≥ÿ™ŸàŸäÿßÿ™ 1 Ÿà 2 Ÿà 3)\",\n        \"ÿ¨ŸÑÿ≥ÿßÿ™ Zoom ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸäŸàŸÖŸäÿ©\",\n        \"ÿ•ÿ±ÿ¥ÿßÿØ ŸÅÿ±ÿØŸä\",\n        \"ÿ•ÿ¥ÿßÿ±ÿßÿ™ ÿ™ÿØÿßŸàŸÑ ŸÖÿ™ŸÖŸäÿ≤ÿ©\",\n        \"ÿ™ÿ≠ŸÑŸäŸÑ ÿ≠ÿµÿ±Ÿä ŸÑŸÑÿ≥ŸàŸÇ\",\n        \"ŸàÿµŸàŸÑ ŸÖÿØŸâ ÿßŸÑÿ≠Ÿäÿßÿ© ŸÑŸÑŸÖÿ¨ÿ™ŸÖÿπ\"\n      ],\n      isPopular: false,\n    },\n  ]);\n\n  // Seed courses\n  const [course1] = await db.insert(courses).values([\n    {\n      titleEn: \"Cryptocurrency Trading Fundamentals\",\n      titleAr: \"ÿ£ÿ≥ÿßÿ≥Ÿäÿßÿ™ ÿ™ÿØÿßŸàŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©\",\n      descriptionEn: \"Learn the basics of cryptocurrency trading, market analysis, and risk management\",\n      descriptionAr: \"ÿ™ÿπŸÑŸÖ ÿ£ÿ≥ÿßÿ≥Ÿäÿßÿ™ ÿ™ÿØÿßŸàŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ© Ÿàÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ≥ŸàŸÇ Ÿàÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿÆÿßÿ∑ÿ±\",\n      level: 1,\n      price: \"0\",\n      isFree: true,\n      instructorEn: \"John Smith\",\n      instructorAr: \"ÿ¨ŸàŸÜ ÿ≥ŸÖŸäÿ´\",\n      duration: 8,\n    },\n  ]).returning();\n\n  const [course2] = await db.insert(courses).values([\n    {\n      titleEn: \"Advanced Technical Analysis\",\n      titleAr: \"ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÅŸÜŸä ÿßŸÑŸÖÿ™ŸÇÿØŸÖ\",\n      descriptionEn: \"Master advanced charting techniques and technical indicators\",\n      descriptionAr: \"ÿ•ÿ™ŸÇÿßŸÜ ÿ™ŸÇŸÜŸäÿßÿ™ ÿßŸÑÿ±ÿ≥ŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸä ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ© ŸàÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑŸÅŸÜŸäÿ©\",\n      level: 2,\n      price: \"49.99\",\n      isFree: false,\n      instructorEn: \"Sarah Johnson\",\n      instructorAr: \"ÿ≥ÿßÿ±ÿ© ÿ¨ŸàŸÜÿ≥ŸàŸÜ\",\n      duration: 12,\n    },\n  ]).returning();\n\n  const [course3] = await db.insert(courses).values([\n    {\n      titleEn: \"Professional Trading Strategies\",\n      titleAr: \"ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ÿßŸÑÿ™ÿØÿßŸàŸÑ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ©\",\n      descriptionEn: \"Learn professional trading strategies used by institutional traders\",\n      descriptionAr: \"ÿ™ÿπŸÑŸÖ ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ÿßŸÑÿ™ÿØÿßŸàŸÑ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖÿ© ŸÖŸÜ ŸÇÿ®ŸÑ ÿßŸÑŸÖÿ™ÿØÿßŸàŸÑŸäŸÜ ÿßŸÑŸÖÿ§ÿ≥ÿ≥ŸäŸäŸÜ\",\n      level: 3,\n      price: \"99.99\",\n      isFree: false,\n      instructorEn: \"Michael Chen\",\n      instructorAr: \"ŸÖÿßŸäŸÉŸÑ ÿ™ÿ¥ŸäŸÜ\",\n      duration: 16,\n    },\n  ]).returning();\n\n  // Seed lessons for course 1\n  await db.insert(lessons).values([\n    {\n      courseId: course1.id,\n      titleEn: \"Introduction to Cryptocurrency\",\n      titleAr: \"ŸÖŸÇÿØŸÖÿ© ÿ•ŸÑŸâ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©\",\n      descriptionEn: \"Understanding what cryptocurrency is and how it works\",\n      descriptionAr: \"ŸÅŸáŸÖ ŸÖÿß ŸáŸä ÿßŸÑÿπŸÖŸÑÿ© ÿßŸÑÿ±ŸÇŸÖŸäÿ© ŸàŸÉŸäŸÅ ÿ™ÿπŸÖŸÑ\",\n      videoUrl: \"https://www.youtube.com/watch?v=SSo_EIwHSd4\",\n      duration: 45,\n      order: 1,\n      requiresPrevious: false,\n      isFree: true,\n    },\n    {\n      courseId: course1.id,\n      titleEn: \"Setting Up Your Trading Account\",\n      titleAr: \"ÿ•ÿπÿØÿßÿØ ÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ™ÿØÿßŸàŸÑ ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ\",\n      descriptionEn: \"Step-by-step guide to setting up your first trading account\",\n      descriptionAr: \"ÿØŸÑŸäŸÑ ÿÆÿ∑Ÿàÿ© ÿ®ÿÆÿ∑Ÿàÿ© ŸÑÿ•ÿπÿØÿßÿØ ÿ£ŸàŸÑ ÿ≠ÿ≥ÿßÿ® ÿ™ÿØÿßŸàŸÑ ŸÑŸÉ\",\n      videoUrl: \"https://www.youtube.com/watch?v=1YyAzVmP9jQ\",\n      duration: 30,\n      order: 2,\n      requiresPrevious: true,\n      isFree: true,\n    },\n    {\n      courseId: course1.id,\n      titleEn: \"Understanding Market Orders\",\n      titleAr: \"ŸÅŸáŸÖ ÿ£ŸàÿßŸÖÿ± ÿßŸÑÿ≥ŸàŸÇ\",\n      descriptionEn: \"Learn about different types of market orders and when to use them\",\n      descriptionAr: \"ÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ÿ£ŸÜŸàÿßÿπ ŸÖÿÆÿ™ŸÑŸÅÿ© ŸÖŸÜ ÿ£ŸàÿßŸÖÿ± ÿßŸÑÿ≥ŸàŸÇ ŸàŸÖÿ™Ÿâ ÿ™ÿ≥ÿ™ÿÆÿØŸÖŸáÿß\",\n      videoUrl: \"https://www.youtube.com/watch?v=gXMPl7k9v5g\",\n      duration: 40,\n      order: 3,\n      requiresPrevious: true,\n      isFree: true,\n    },\n  ]);\n\n  // Seed lessons for course 2\n  await db.insert(lessons).values([\n    {\n      courseId: course2.id,\n      titleEn: \"Chart Patterns and Trends\",\n      titleAr: \"ÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ±ÿ≥ŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸä ŸàÿßŸÑÿßÿ™ÿ¨ÿßŸáÿßÿ™\",\n      descriptionEn: \"Identify and trade using chart patterns\",\n      descriptionAr: \"ÿ™ÿ≠ÿØŸäÿØ ŸàÿßŸÑÿ™ÿØÿßŸàŸÑ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ±ÿ≥ŸÖ ÿßŸÑÿ®ŸäÿßŸÜŸä\",\n      videoUrl: \"https://www.youtube.com/watch?v=GfQofTbvxFE\",\n      duration: 50,\n      order: 1,\n      requiresPrevious: false,\n      isFree: false,\n    },\n    {\n      courseId: course2.id,\n      titleEn: \"Technical Indicators Deep Dive\",\n      titleAr: \"ÿßŸÑÿ∫Ÿàÿµ ÿßŸÑÿπŸÖŸäŸÇ ŸÅŸä ÿßŸÑŸÖÿ§ÿ¥ÿ±ÿßÿ™ ÿßŸÑŸÅŸÜŸäÿ©\",\n      descriptionEn: \"Master RSI, MACD, Bollinger Bands and more\",\n      descriptionAr: \"ÿ•ÿ™ŸÇÿßŸÜ RSI Ÿà MACD Ÿà Bollinger Bands ŸàÿßŸÑŸÖÿ≤ŸäÿØ\",\n      videoUrl: \"https://www.youtube.com/watch?v=nuDlrOMinOk\",\n      duration: 60,\n      order: 2,\n      requiresPrevious: true,\n      isFree: false,\n    },\n  ]);\n\n  // Seed lessons for course 3\n  await db.insert(lessons).values([\n    {\n      courseId: course3.id,\n      titleEn: \"Algorithmic Trading Basics\",\n      titleAr: \"ÿ£ÿ≥ÿßÿ≥Ÿäÿßÿ™ ÿßŸÑÿ™ÿØÿßŸàŸÑ ÿßŸÑÿÆŸàÿßÿ±ÿ≤ŸÖŸä\",\n      descriptionEn: \"Introduction to automated trading strategies\",\n      descriptionAr: \"ŸÖŸÇÿØŸÖÿ© ŸÑÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ÿßŸÑÿ™ÿØÿßŸàŸÑ ÿßŸÑÿ¢ŸÑŸä\",\n      videoUrl: \"https://www.youtube.com/watch?v=p_tpQSY1aTs\",\n      duration: 70,\n      order: 1,\n      requiresPrevious: false,\n      isFree: false,\n    },\n    {\n      courseId: course3.id,\n      titleEn: \"Risk Management for Professionals\",\n      titleAr: \"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿÆÿßÿ∑ÿ± ŸÑŸÑŸÖÿ≠ÿ™ÿ±ŸÅŸäŸÜ\",\n      descriptionEn: \"Advanced risk management techniques\",\n      descriptionAr: \"ÿ™ŸÇŸÜŸäÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ© ŸÑÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿÆÿßÿ∑ÿ±\",\n      videoUrl: \"https://www.youtube.com/watch?v=XnATmWzHR0Q\",\n      duration: 65,\n      order: 2,\n      requiresPrevious: true,\n      isFree: false,\n    },\n  ]);\n\n  console.log(\"Database seeded successfully!\");\n}\n\nseed()\n  .catch((error) => {\n    console.error(\"Error seeding database:\", error);\n    process.exit(1);\n  })\n  .finally(() => {\n    process.exit(0);\n  });\n",
            "size_bytes": 8065
        },
        "client/src/lib/i18n.tsx": {
            "content": "import { createContext, useContext, useState, useEffect, ReactNode } from \"react\";\n\nexport type Language = \"en\" | \"ar\";\n\ninterface LanguageContextType {\n  language: Language;\n  setLanguage: (lang: Language) => void;\n  t: (key: string) => string;\n}\n\nconst LanguageContext = createContext<LanguageContextType | undefined>(undefined);\n\nconst translations: Record<Language, Record<string, string>> = {\n  en: {\n    // Navigation\n    \"nav.home\": \"Home\",\n    \"nav.about\": \"About\",\n    \"nav.services\": \"Services\",\n    \"nav.courses\": \"Courses\",\n    \"nav.pricing\": \"Pricing\",\n    \"nav.contact\": \"Contact\",\n    \"nav.login\": \"Login\",\n    \"nav.logout\": \"Logout\",\n    \"nav.dashboard\": \"Dashboard\",\n    \"nav.admin\": \"Admin Panel\",\n    \n    // Hero\n    \"hero.title\": \"Master Cryptocurrency Trading\",\n    \"hero.subtitle\": \"Learn from industry experts and transform your trading journey with comprehensive courses and live market analysis\",\n    \"hero.cta.primary\": \"Start Learning\",\n    \"hero.cta.secondary\": \"Explore Courses\",\n    \n    // Features\n    \"features.title\": \"Why Choose Leed Academy\",\n    \"features.expert.title\": \"Expert Instructors\",\n    \"features.expert.desc\": \"Learn from certified professionals with years of trading experience\",\n    \"features.live.title\": \"Live Market Data\",\n    \"features.live.desc\": \"Real-time cryptocurrency prices and market analysis\",\n    \"features.progress.title\": \"Track Progress\",\n    \"features.progress.desc\": \"Monitor your learning journey with detailed analytics\",\n    \"features.support.title\": \"24/7 Support\",\n    \"features.support.desc\": \"Get help whenever you need it from our dedicated team\",\n    \n    // Testimonials\n    \"testimonials.title\": \"What Our Students Say\",\n    \n    // Courses\n    \"courses.title\": \"Our Courses\",\n    \"courses.level\": \"Level\",\n    \"courses.free\": \"Free\",\n    \"courses.locked\": \"Locked\",\n    \"courses.enrolled\": \"Enrolled\",\n    \"courses.lessons\": \"Lessons\",\n    \"courses.hours\": \"Hours\",\n    \"courses.enroll\": \"Enroll Now\",\n    \"courses.continue\": \"Continue Learning\",\n    \"courses.filter.all\": \"All Courses\",\n    \"courses.filter.free\": \"Free\",\n    \"courses.filter.level\": \"Level\",\n    \n    // Pricing\n    \"pricing.title\": \"Choose Your Plan\",\n    \"pricing.monthly\": \"Monthly\",\n    \"pricing.popular\": \"Most Popular\",\n    \"pricing.select\": \"Select Plan\",\n    \"pricing.features\": \"Features\",\n    \n    // Contact\n    \"contact.title\": \"Get In Touch\",\n    \"contact.name\": \"Name\",\n    \"contact.email\": \"Email\",\n    \"contact.message\": \"Message\",\n    \"contact.send\": \"Send Message\",\n    \n    // Dashboard\n    \"dashboard.welcome\": \"Welcome back\",\n    \"dashboard.stats.enrolled\": \"Enrolled Courses\",\n    \"dashboard.stats.completed\": \"Completed\",\n    \"dashboard.stats.hours\": \"Hours Watched\",\n    \"dashboard.stats.progress\": \"Overall Progress\",\n    \"dashboard.my-courses\": \"My Courses\",\n    \"dashboard.continue-learning\": \"Continue Learning\",\n    \n    // Subscription\n    \"subscription.choose-plan\": \"Choose a Plan\",\n    \"subscription.payment-method\": \"Payment Method\",\n    \"subscription.upload-proof\": \"Upload Proof\",\n    \"subscription.crypto\": \"Cryptocurrency\",\n    \"subscription.bank\": \"Bank Transfer\",\n    \"subscription.submit\": \"Submit Payment\",\n    \"subscription.pending\": \"Payment Pending\",\n    \"subscription.title\": \"My Subscription\",\n    \"subscription.current-plan\": \"Current Plan\",\n    \"subscription.status\": \"Status\",\n    \"subscription.status.active\": \"Active\",\n    \"subscription.status.pending\": \"Pending Approval\",\n    \"subscription.status.expired\": \"Expired\",\n    \"subscription.status.inactive\": \"Inactive\",\n    \"subscription.expires\": \"Expires\",\n    \"subscription.expired-on\": \"Expired on\",\n    \"subscription.started\": \"Started\",\n    \"subscription.upgrade\": \"Upgrade Plan\",\n    \"subscription.change\": \"Change Plan\",\n    \"subscription.no-subscription\": \"No Active Subscription\",\n    \"subscription.no-subscription-desc\": \"You don't have an active subscription yet. Choose a plan to unlock premium courses and features.\",\n    \"subscription.view-plans\": \"View Plans\",\n    \n    // Admin\n    \"admin.dashboard\": \"Dashboard\",\n    \"admin.users\": \"Users\",\n    \"admin.courses\": \"Courses\",\n    \"admin.payments\": \"Payments\",\n    \"admin.analytics\": \"Analytics\",\n    \"admin.meetings\": \"Zoom Meetings\",\n    \"admin.settings\": \"Settings\",\n    \"admin.create-course\": \"Create Course\",\n    \"admin.create-lesson\": \"Create Lesson\",\n    \"admin.approve\": \"Approve\",\n    \"admin.reject\": \"Reject\",\n    \n    // Common\n    \"common.save\": \"Save\",\n    \"common.cancel\": \"Cancel\",\n    \"common.delete\": \"Delete\",\n    \"common.edit\": \"Edit\",\n    \"common.loading\": \"Loading...\",\n    \"common.error\": \"An error occurred\",\n    \"common.success\": \"Success\",\n  },\n  ar: {\n    // Navigation\n    \"nav.home\": \"ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\",\n    \"nav.about\": \"ŸÖŸÜ ŸÜÿ≠ŸÜ\",\n    \"nav.services\": \"ÿßŸÑÿÆÿØŸÖÿßÿ™\",\n    \"nav.courses\": \"ÿßŸÑÿØŸàÿ±ÿßÿ™\",\n    \"nav.pricing\": \"ÿßŸÑÿ£ÿ≥ÿπÿßÿ±\",\n    \"nav.contact\": \"ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß\",\n    \"nav.login\": \"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ\",\n    \"nav.logout\": \"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\",\n    \"nav.dashboard\": \"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ\",\n    \"nav.admin\": \"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©\",\n    \n    // Hero\n    \"hero.title\": \"ÿßÿ≠ÿ™ÿ±ŸÅ ÿ™ÿØÿßŸàŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©\",\n    \"hero.subtitle\": \"ÿ™ÿπŸÑŸÖ ŸÖŸÜ ÿÆÿ®ÿ±ÿßÿ° ÿßŸÑÿµŸÜÿßÿπÿ© Ÿàÿ≠ŸàŸÑ ÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ™ÿØÿßŸàŸÑ ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÉ ŸÖÿπ ÿØŸàÿ±ÿßÿ™ ÿ¥ÿßŸÖŸÑÿ© Ÿàÿ™ÿ≠ŸÑŸäŸÑ ŸÖÿ®ÿßÿ¥ÿ± ŸÑŸÑÿ≥ŸàŸÇ\",\n    \"hero.cta.primary\": \"ÿßÿ®ÿØÿ£ ÿßŸÑÿ™ÿπŸÑŸÖ\",\n    \"hero.cta.secondary\": \"ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑÿØŸàÿ±ÿßÿ™\",\n    \n    // Features\n    \"features.title\": \"ŸÑŸÖÿßÿ∞ÿß ÿ™ÿÆÿ™ÿßÿ± Leed Academy\",\n    \"features.expert.title\": \"ŸÖÿØÿ±ÿ®ŸàŸÜ ÿÆÿ®ÿ±ÿßÿ°\",\n    \"features.expert.desc\": \"ÿ™ÿπŸÑŸÖ ŸÖŸÜ ŸÖÿ≠ÿ™ÿ±ŸÅŸäŸÜ ŸÖÿπÿ™ŸÖÿØŸäŸÜ ÿ®ÿ≥ŸÜŸàÿßÿ™ ŸÖŸÜ ÿßŸÑÿÆÿ®ÿ±ÿ© ŸÅŸä ÿßŸÑÿ™ÿØÿßŸàŸÑ\",\n    \"features.live.title\": \"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ≥ŸàŸÇ ÿßŸÑŸÖÿ®ÿßÿ¥ÿ±ÿ©\",\n    \"features.live.desc\": \"ÿ£ÿ≥ÿπÿßÿ± ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ© ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÅÿπŸÑŸä Ÿàÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ≥ŸàŸÇ\",\n    \"features.progress.title\": \"ÿ™ÿ™ÿ®ÿπ ÿßŸÑÿ™ŸÇÿØŸÖ\",\n    \"features.progress.desc\": \"ÿ±ÿßŸÇÿ® ÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÉ ÿ®ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ŸÖŸÅÿµŸÑÿ©\",\n    \"features.support.title\": \"ÿØÿπŸÖ ÿπŸÑŸâ ŸÖÿØÿßÿ± ÿßŸÑÿ≥ÿßÿπÿ©\",\n    \"features.support.desc\": \"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÖÿ™Ÿâ ÿßÿ≠ÿ™ÿ¨ÿ™Ÿáÿß ŸÖŸÜ ŸÅÿ±ŸäŸÇŸÜÿß ÿßŸÑŸÖÿÆÿµÿµ\",\n    \n    // Testimonials\n    \"testimonials.title\": \"ŸÖÿßÿ∞ÿß ŸäŸÇŸàŸÑ ÿ∑ŸÑÿßÿ®ŸÜÿß\",\n    \n    // Courses\n    \"courses.title\": \"ÿØŸàÿ±ÿßÿ™ŸÜÿß\",\n    \"courses.level\": \"ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ\",\n    \"courses.free\": \"ŸÖÿ¨ÿßŸÜŸä\",\n    \"courses.locked\": \"ŸÖŸÇŸÅŸÑ\",\n    \"courses.enrolled\": \"ŸÖÿ≥ÿ¨ŸÑ\",\n    \"courses.lessons\": \"ÿØÿ±Ÿàÿ≥\",\n    \"courses.hours\": \"ÿ≥ÿßÿπÿßÿ™\",\n    \"courses.enroll\": \"ÿ≥ÿ¨ŸÑ ÿßŸÑÿ¢ŸÜ\",\n    \"courses.continue\": \"ŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑÿ™ÿπŸÑŸÖ\",\n    \"courses.filter.all\": \"ÿ¨ŸÖŸäÿπ ÿßŸÑÿØŸàÿ±ÿßÿ™\",\n    \"courses.filter.free\": \"ŸÖÿ¨ÿßŸÜŸä\",\n    \"courses.filter.level\": \"ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ\",\n    \n    // Pricing\n    \"pricing.title\": \"ÿßÿÆÿ™ÿ± ÿÆÿ∑ÿ™ŸÉ\",\n    \"pricing.monthly\": \"ÿ¥Ÿáÿ±Ÿä\",\n    \"pricing.popular\": \"ÿßŸÑÿ£ŸÉÿ´ÿ± ÿ¥ÿπÿ®Ÿäÿ©\",\n    \"pricing.select\": \"ÿßÿÆÿ™ÿ± ÿßŸÑÿÆÿ∑ÿ©\",\n    \"pricing.features\": \"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™\",\n    \n    // Contact\n    \"contact.title\": \"ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß\",\n    \"contact.name\": \"ÿßŸÑÿßÿ≥ŸÖ\",\n    \"contact.email\": \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\",\n    \"contact.message\": \"ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©\",\n    \"contact.send\": \"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ©\",\n    \n    // Dashboard\n    \"dashboard.welcome\": \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉ\",\n    \"dashboard.stats.enrolled\": \"ÿßŸÑÿØŸàÿ±ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ¨ŸÑÿ©\",\n    \"dashboard.stats.completed\": \"ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©\",\n    \"dashboard.stats.hours\": \"ÿ≥ÿßÿπÿßÿ™ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿ©\",\n    \"dashboard.stats.progress\": \"ÿßŸÑÿ™ŸÇÿØŸÖ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä\",\n    \"dashboard.my-courses\": \"ÿØŸàÿ±ÿßÿ™Ÿä\",\n    \"dashboard.continue-learning\": \"ŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑÿ™ÿπŸÑŸÖ\",\n    \n    // Subscription\n    \"subscription.choose-plan\": \"ÿßÿÆÿ™ÿ± ÿÆÿ∑ÿ©\",\n    \"subscription.payment-method\": \"ÿ∑ÿ±ŸäŸÇÿ© ÿßŸÑÿØŸÅÿπ\",\n    \"subscription.upload-proof\": \"ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ•ÿ´ÿ®ÿßÿ™\",\n    \"subscription.crypto\": \"ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©\",\n    \"subscription.bank\": \"ÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜŸÉŸä\",\n    \"subscription.submit\": \"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿØŸÅÿπ\",\n    \"subscription.pending\": \"ÿßŸÑÿØŸÅÿπ ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±\",\n    \"subscription.title\": \"ÿßÿ¥ÿ™ÿ±ÿßŸÉŸä\",\n    \"subscription.current-plan\": \"ÿßŸÑÿÆÿ∑ÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©\",\n    \"subscription.status\": \"ÿßŸÑÿ≠ÿßŸÑÿ©\",\n    \"subscription.status.active\": \"ŸÜÿ¥ÿ∑\",\n    \"subscription.status.pending\": \"ŸÇŸäÿØ ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©\",\n    \"subscription.status.expired\": \"ŸÖŸÜÿ™ŸáŸä\",\n    \"subscription.status.inactive\": \"ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑\",\n    \"subscription.expires\": \"ŸäŸÜÿ™ŸáŸä\",\n    \"subscription.expired-on\": \"ÿßŸÜÿ™ŸáŸâ ŸÅŸä\",\n    \"subscription.started\": \"ÿ®ÿØÿ£\",\n    \"subscription.upgrade\": \"ÿ™ÿ±ŸÇŸäÿ© ÿßŸÑÿÆÿ∑ÿ©\",\n    \"subscription.change\": \"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿÆÿ∑ÿ©\",\n    \"subscription.no-subscription\": \"ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÜÿ¥ÿ∑\",\n    \"subscription.no-subscription-desc\": \"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÜÿ¥ÿ∑ ÿ≠ÿ™Ÿâ ÿßŸÑÿ¢ŸÜ. ÿßÿÆÿ™ÿ± ÿÆÿ∑ÿ© ŸÑŸÅÿ™ÿ≠ ÿßŸÑÿØŸàÿ±ÿßÿ™ ŸàÿßŸÑŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©.\",\n    \"subscription.view-plans\": \"ÿπÿ±ÿ∂ ÿßŸÑÿÆÿ∑ÿ∑\",\n    \n    // Admin\n    \"admin.dashboard\": \"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ\",\n    \"admin.users\": \"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸàŸÜ\",\n    \"admin.courses\": \"ÿßŸÑÿØŸàÿ±ÿßÿ™\",\n    \"admin.payments\": \"ÿßŸÑŸÖÿØŸÅŸàÿπÿßÿ™\",\n    \"admin.analytics\": \"ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™\",\n    \"admin.meetings\": \"ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ Zoom\",\n    \"admin.settings\": \"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™\",\n    \"admin.create-course\": \"ÿ•ŸÜÿ¥ÿßÿ° ÿØŸàÿ±ÿ©\",\n    \"admin.create-lesson\": \"ÿ•ŸÜÿ¥ÿßÿ° ÿØÿ±ÿ≥\",\n    \"admin.approve\": \"ŸÇÿ®ŸàŸÑ\",\n    \"admin.reject\": \"ÿ±ŸÅÿ∂\",\n    \n    // Common\n    \"common.save\": \"ÿ≠ŸÅÿ∏\",\n    \"common.cancel\": \"ÿ•ŸÑÿ∫ÿßÿ°\",\n    \"common.delete\": \"ÿ≠ÿ∞ŸÅ\",\n    \"common.edit\": \"ÿ™ÿπÿØŸäŸÑ\",\n    \"common.loading\": \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...\",\n    \"common.error\": \"ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£\",\n    \"common.success\": \"ŸÜÿ¨ÿ≠\",\n  },\n};\n\nexport function LanguageProvider({ children }: { children: ReactNode }) {\n  const [language, setLanguageState] = useState<Language>(() => {\n    const saved = localStorage.getItem(\"language\");\n    return (saved === \"ar\" || saved === \"en\" ? saved : \"en\") as Language;\n  });\n\n  useEffect(() => {\n    localStorage.setItem(\"language\", language);\n    document.documentElement.lang = language;\n    document.documentElement.dir = language === \"ar\" ? \"rtl\" : \"ltr\";\n    \n    // Set language class on body for font styling\n    if (language === \"ar\") {\n      document.body.classList.add(\"lang-ar\");\n      document.body.classList.remove(\"lang-en\");\n    } else {\n      document.body.classList.add(\"lang-en\");\n      document.body.classList.remove(\"lang-ar\");\n    }\n  }, [language]);\n\n  const setLanguage = (lang: Language) => {\n    setLanguageState(lang);\n  };\n\n  const t = (key: string): string => {\n    return translations[language][key] || key;\n  };\n\n  return (\n    <LanguageContext.Provider value={{ language, setLanguage, t }}>\n      {children}\n    </LanguageContext.Provider>\n  );\n}\n\nexport function useLanguage() {\n  const context = useContext(LanguageContext);\n  if (!context) {\n    throw new Error(\"useLanguage must be used within LanguageProvider\");\n  }\n  return context;\n}\n",
            "size_bytes": 11137
        },
        "client/src/pages/not-found.tsx": {
            "content": "import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
            "size_bytes": 711
        },
        "client/src/components/ui/switch.tsx": {
            "content": "import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n",
            "size_bytes": 1139
        },
        "client/src/pages/About.tsx": {
            "content": "import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Target, Users, Award, TrendingUp } from \"lucide-react\";\n\nexport default function About() {\n  const { language } = useLanguage();\n\n  const values = [\n    {\n      icon: Target,\n      title: language === \"ar\" ? \"ŸÖŸáŸÖÿ™ŸÜÿß\" : \"Our Mission\",\n      description:\n        language === \"ar\"\n          ? \"ÿ™ŸÖŸÉŸäŸÜ ÿßŸÑŸÖÿ™ÿØÿßŸàŸÑŸäŸÜ ÿ®ÿßŸÑŸÖÿπÿ±ŸÅÿ© ŸàÿßŸÑŸÖŸáÿßÿ±ÿßÿ™ ÿßŸÑŸÑÿßÿ≤ŸÖÿ© ŸÑŸÑŸÜÿ¨ÿßÿ≠ ŸÅŸä ÿ£ÿ≥ŸàÿßŸÇ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©\"\n          : \"Empowering traders with the knowledge and skills needed to succeed in cryptocurrency markets\",\n    },\n    {\n      icon: Users,\n      title: language === \"ar\" ? \"ŸÅÿ±ŸäŸÇŸÜÿß\" : \"Our Team\",\n      description:\n        language === \"ar\"\n          ? \"ÿÆÿ®ÿ±ÿßÿ° ŸÖÿ™ÿÆÿµÿµŸàŸÜ ÿ®ÿ≥ŸÜŸàÿßÿ™ ŸÖŸÜ ÿßŸÑÿÆÿ®ÿ±ÿ© ŸÅŸä ÿßŸÑÿ™ÿØÿßŸàŸÑ ŸàÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÖÿßŸÑŸä\"\n          : \"Specialized experts with years of experience in trading and financial analysis\",\n    },\n    {\n      icon: Award,\n      title: language === \"ar\" ? \"ÿßŸÑÿ™ŸÖŸäÿ≤\" : \"Excellence\",\n      description:\n        language === \"ar\"\n          ? \"ŸÜŸÑÿ™ÿ≤ŸÖ ÿ®ÿ™ŸÇÿØŸäŸÖ ÿ£ÿπŸÑŸâ ÿ¨ŸàÿØÿ© ŸÖŸÜ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸä ŸàÿßŸÑÿØÿπŸÖ\"\n          : \"Committed to delivering the highest quality educational content and support\",\n    },\n    {\n      icon: TrendingUp,\n      title: language === \"ar\" ? \"ÿßŸÑŸÜŸÖŸà\" : \"Growth\",\n      description:\n        language === \"ar\"\n          ? \"ŸÜÿ≥ÿßÿπÿØ ÿ∑ŸÑÿßÿ®ŸÜÿß ÿπŸÑŸâ ÿßŸÑŸÜŸÖŸà ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ± Ÿàÿ™ÿ≠ŸÇŸäŸÇ ÿ£ŸáÿØÿßŸÅŸáŸÖ ÿßŸÑŸÖÿßŸÑŸäÿ©\"\n          : \"Helping our students grow continuously and achieve their financial goals\",\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20\">\n        {/* Hero Section */}\n        <section className=\"py-24 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-3xl mx-auto text-center\">\n              <h1\n                className=\"text-4xl md:text-5xl font-heading font-bold text-foreground mb-6\"\n                data-testid=\"text-about-title\"\n              >\n                {language === \"ar\" ? \"ŸÖŸÜ ŸÜÿ≠ŸÜ\" : \"About Us\"}\n              </h1>\n              <p className=\"text-lg text-muted-foreground leading-relaxed\" data-testid=\"text-about-description\">\n                {language === \"ar\"\n                  ? \"Leed Academy ŸáŸä ŸÖŸÜÿµÿ© ÿ™ÿπŸÑŸäŸÖŸäÿ© ÿ±ÿßÿ¶ÿØÿ© ŸÖÿ™ÿÆÿµÿµÿ© ŸÅŸä ÿ™ÿπŸÑŸäŸÖ ÿ™ÿØÿßŸàŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©. ŸÜÿ≠ŸÜ ŸÜÿ§ŸÖŸÜ ÿ®ÿ£ŸÜ ÿßŸÑÿ™ÿπŸÑŸäŸÖ ÿßŸÑÿ¨ŸäÿØ ŸáŸà ŸÖŸÅÿ™ÿßÿ≠ ÿßŸÑŸÜÿ¨ÿßÿ≠ ŸÅŸä ÿπÿßŸÑŸÖ ÿßŸÑÿ™ÿØÿßŸàŸÑ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿ± ÿ®ÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±.\"\n                  : \"Leed Academy is a leading educational platform specialized in cryptocurrency trading education. We believe that quality education is the key to success in the ever-evolving world of trading.\"}\n              </p>\n            </div>\n          </div>\n        </section>\n\n        {/* Values Section */}\n        <section className=\"py-24\">\n          <div className=\"container mx-auto px-6\">\n            <h2 className=\"text-3xl md:text-4xl font-heading font-bold text-center text-foreground mb-12\">\n              {language === \"ar\" ? \"ŸÇŸäŸÖŸÜÿß\" : \"Our Values\"}\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {values.map((value, index) => (\n                <Card\n                  key={index}\n                  className=\"hover-elevate active-elevate-2 transition-all\"\n                  data-testid={`card-value-${index}`}\n                >\n                  <CardContent className=\"p-6\">\n                    <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4\">\n                      <value.icon className=\"h-6 w-6 text-primary\" />\n                    </div>\n                    <h3 className=\"text-xl font-semibold text-foreground mb-2\">\n                      {value.title}\n                    </h3>\n                    <p className=\"text-muted-foreground\">{value.description}</p>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        {/* Story Section */}\n        <section className=\"py-24 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-4xl mx-auto\">\n              <h2 className=\"text-3xl md:text-4xl font-heading font-bold text-foreground mb-8\">\n                {language === \"ar\" ? \"ŸÇÿµÿ™ŸÜÿß\" : \"Our Story\"}\n              </h2>\n              <div className=\"space-y-6 text-muted-foreground leading-relaxed\">\n                <p>\n                  {language === \"ar\"\n                    ? \"ÿ™ÿ£ÿ≥ÿ≥ÿ™ Leed Academy ŸÖŸÜ ŸÇÿ®ŸÑ ŸÖÿ¨ŸÖŸàÿπÿ© ŸÖŸÜ ÿßŸÑŸÖÿ™ÿØÿßŸàŸÑŸäŸÜ ÿßŸÑŸÖÿ≠ÿ™ÿ±ŸÅŸäŸÜ ÿßŸÑÿ∞ŸäŸÜ ÿ£ÿ±ÿßÿØŸàÿß ŸÖÿ¥ÿßÿ±ŸÉÿ© ŸÖÿπÿ±ŸÅÿ™ŸáŸÖ ŸàÿÆÿ®ÿ±ÿ™ŸáŸÖ ŸÖÿπ ÿßŸÑŸÖÿ™ÿØÿßŸàŸÑŸäŸÜ ÿßŸÑÿ∑ŸÖŸàÿ≠ŸäŸÜ ŸÅŸä ÿ¨ŸÖŸäÿπ ÿ£ŸÜÿ≠ÿßÿ° ÿßŸÑÿπÿßŸÑŸÖ. ŸÑŸÇÿØ ÿ±ÿ£ŸäŸÜÿß ÿßŸÑÿ≠ÿßÿ¨ÿ© ÿ•ŸÑŸâ ŸÖŸÜÿµÿ© ÿ™ÿπŸÑŸäŸÖŸäÿ© ÿ¥ÿßŸÖŸÑÿ© ÿ™ÿ¨ŸÖÿπ ÿ®ŸäŸÜ ÿßŸÑÿ™ÿπŸÑŸäŸÖ ÿßŸÑŸÜÿ∏ÿ±Ÿä ŸàÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿπŸÖŸÑŸä.\"\n                    : \"Leed Academy was founded by a group of professional traders who wanted to share their knowledge and experience with aspiring traders worldwide. We saw the need for a comprehensive educational platform that combines theoretical education with practical application.\"}\n                </p>\n                <p>\n                  {language === \"ar\"\n                    ? \"ÿßŸÑŸäŸàŸÖÿå ŸÜŸÅÿÆÿ± ÿ®ÿÆÿØŸÖÿ© ÿ¢ŸÑÿßŸÅ ÿßŸÑÿ∑ŸÑÿßÿ® ŸÖŸÜ ŸÖÿÆÿ™ŸÑŸÅ ÿ£ŸÜÿ≠ÿßÿ° ÿßŸÑÿπÿßŸÑŸÖÿå ŸàŸÜŸÇÿØŸÖ ÿØŸàÿ±ÿßÿ™ ŸÖÿ™ÿÆÿµÿµÿ© ŸÅŸä ÿ¨ŸÖŸäÿπ ÿ¨ŸàÿßŸÜÿ® ÿ™ÿØÿßŸàŸÑ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©ÿå ŸÖŸÜ ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿßÿ™ ÿ•ŸÑŸâ ÿßŸÑÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©.\"\n                    : \"Today, we're proud to serve thousands of students from around the world, offering specialized courses in all aspects of cryptocurrency trading, from fundamentals to advanced strategies.\"}\n                </p>\n              </div>\n            </div>\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 6270
        },
        "client/src/pages/admin/AdminLayout.tsx": {
            "content": "import { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { AdminSidebar } from \"@/components/admin/AdminSidebar\";\nimport { useTheme } from \"@/lib/theme\";\nimport { Button } from \"@/components/ui/button\";\nimport { Moon, Sun } from \"lucide-react\";\nimport { ReactNode } from \"react\";\n\ninterface AdminLayoutProps {\n  children: ReactNode;\n}\n\nexport default function AdminLayout({ children }: AdminLayoutProps) {\n  const { theme, toggleTheme } = useTheme();\n\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full\">\n        <AdminSidebar />\n        <div className=\"flex flex-col flex-1 relative z-0\">\n          <header className=\"sticky top-0 z-20 flex items-center justify-between p-4 border-b border-border bg-background\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={toggleTheme}\n              data-testid=\"button-theme-toggle\"\n            >\n              {theme === \"dark\" ? (\n                <Sun className=\"h-5 w-5\" />\n              ) : (\n                <Moon className=\"h-5 w-5\" />\n              )}\n            </Button>\n          </header>\n          <main className=\"flex-1 overflow-auto bg-background\">{children}</main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n",
            "size_bytes": 1477
        },
        "client/src/components/ui/textarea.tsx": {
            "content": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n",
            "size_bytes": 689
        },
        "client/src/components/ui/tooltip.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n",
            "size_bytes": 1209
        },
        "client/src/components/ui/input.tsx": {
            "content": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n",
            "size_bytes": 844
        },
        "server/index.ts": {
            "content": "import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"‚Ä¶\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n",
            "size_bytes": 2210
        },
        "client/src/pages/Pricing.tsx": {
            "content": "import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Check } from \"lucide-react\";\nimport type { SubscriptionPlan } from \"@shared/schema\";\nimport { Link } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport default function Pricing() {\n  const { t, language } = useLanguage();\n  const { isAuthenticated } = useAuth();\n\n  const { data: plans, isLoading } = useQuery<SubscriptionPlan[]>({\n    queryKey: [\"/api/subscription-plans\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <Header />\n        <main className=\"pt-20\">\n          <div className=\"container mx-auto px-6 py-24\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n              {[1, 2, 3].map((i) => (\n                <Card key={i}>\n                  <CardContent className=\"p-8\">\n                    <div className=\"h-64 bg-muted animate-pulse rounded-lg\" />\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20\">\n        {/* Hero Section */}\n        <section className=\"py-24 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-3xl mx-auto text-center\">\n              <h1\n                className=\"text-4xl md:text-5xl font-heading font-bold text-foreground mb-6\"\n                data-testid=\"text-pricing-title\"\n              >\n                {t(\"pricing.title\")}\n              </h1>\n              <p className=\"text-lg text-muted-foreground leading-relaxed\">\n                {language === \"ar\"\n                  ? \"ÿßÿÆÿ™ÿ± ÿßŸÑÿÆÿ∑ÿ© ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑŸÉ Ÿàÿßÿ®ÿØÿ£ ÿ±ÿ≠ŸÑÿ™ŸÉ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ© ÿßŸÑŸäŸàŸÖ\"\n                  : \"Choose the plan that's right for you and start your learning journey today\"}\n              </p>\n            </div>\n          </div>\n        </section>\n\n        {/* Pricing Cards */}\n        <section className=\"py-24\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto\">\n              {plans?.map((plan, index) => (\n                <Card\n                  key={plan.id}\n                  className={`hover-elevate active-elevate-2 transition-all ${\n                    plan.isPopular ? \"border-primary border-2\" : \"\"\n                  }`}\n                  data-testid={`card-pricing-plan-${index}`}\n                >\n                  <CardHeader>\n                    {plan.isPopular && (\n                      <Badge className=\"w-fit mb-2\" data-testid=\"badge-popular\">\n                        {t(\"pricing.popular\")}\n                      </Badge>\n                    )}\n                    <CardTitle className=\"text-2xl\">\n                      {language === \"ar\" ? plan.nameAr : plan.nameEn}\n                    </CardTitle>\n                    <div className=\"mt-4\">\n                      <span className=\"text-4xl font-bold text-foreground\">\n                        ${plan.price}\n                      </span>\n                      <span className=\"text-muted-foreground\">\n                        /{t(\"pricing.monthly\")}\n                      </span>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <p className=\"text-muted-foreground mb-6\">\n                      {language === \"ar\" ? plan.descriptionAr : plan.descriptionEn}\n                    </p>\n                    <ul className=\"space-y-3 mb-6\">\n                      {(language === \"ar\"\n                        ? plan.featuresAr\n                        : plan.featuresEn\n                      )?.map((feature, i) => (\n                        <li key={i} className=\"flex items-start gap-3\">\n                          <Check className=\"h-5 w-5 text-primary flex-shrink-0 mt-0.5\" />\n                          <span className=\"text-sm text-foreground\">\n                            {feature}\n                          </span>\n                        </li>\n                      ))}\n                    </ul>\n                    <Button\n                      asChild\n                      className=\"w-full\"\n                      variant={plan.isPopular ? \"default\" : \"outline\"}\n                    >\n                      {isAuthenticated ? (\n                        <Link href={`/subscribe/${plan.id}`}>\n                          <a data-testid={`button-select-plan-${index}`}>{t(\"pricing.select\")}</a>\n                        </Link>\n                      ) : (\n                        <a href=\"/api/login\" data-testid={`button-select-plan-${index}`}>{t(\"nav.login\")}</a>\n                      )}\n                    </Button>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 5298
        },
        "client/src/components/ui/skeleton.tsx": {
            "content": "import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n",
            "size_bytes": 261
        },
        "client/src/components/landing/CryptoTicker.tsx": {
            "content": "import { useQuery } from \"@tanstack/react-query\";\nimport { TrendingUp, TrendingDown } from \"lucide-react\";\nimport { Card } from \"@/components/ui/card\";\n\ninterface CryptoPrice {\n  symbol: string;\n  price: string;\n  change24h: number;\n}\n\nexport function CryptoTicker() {\n  const { data: prices, isLoading } = useQuery<CryptoPrice[]>({\n    queryKey: [\"/api/crypto/prices\"],\n    refetchInterval: 10000,\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"bg-muted/30 border-y border-border py-4\">\n        <div className=\"container mx-auto px-6\">\n          <div className=\"flex justify-center gap-4\">\n            {[1, 2, 3].map((i) => (\n              <div\n                key={i}\n                className=\"h-12 w-32 bg-muted rounded-lg animate-pulse\"\n              />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-muted/30 border-y border-border py-4\">\n      <div className=\"container mx-auto px-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {prices?.map((crypto) => (\n            <Card\n              key={crypto.symbol}\n              className=\"p-4 hover-elevate\"\n              data-testid={`crypto-${crypto.symbol.toLowerCase()}`}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm font-medium text-muted-foreground\">\n                    {crypto.symbol}\n                  </p>\n                  <p className=\"text-xl font-bold text-foreground\">\n                    ${parseFloat(crypto.price).toLocaleString(undefined, {\n                      minimumFractionDigits: 2,\n                      maximumFractionDigits: 2,\n                    })}\n                  </p>\n                </div>\n                <div\n                  className={`flex items-center gap-1 px-2 py-1 rounded-full text-sm font-medium ${\n                    crypto.change24h >= 0\n                      ? \"bg-green-500/10 text-green-600 dark:text-green-400\"\n                      : \"bg-red-500/10 text-red-600 dark:text-red-400\"\n                  }`}\n                >\n                  {crypto.change24h >= 0 ? (\n                    <TrendingUp className=\"h-4 w-4\" />\n                  ) : (\n                    <TrendingDown className=\"h-4 w-4\" />\n                  )}\n                  <span>{Math.abs(crypto.change24h).toFixed(2)}%</span>\n                </div>\n              </div>\n            </Card>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n",
            "size_bytes": 2526
        },
        "client/src/components/layout/Footer.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Link } from \"wouter\";\nimport { Facebook, Twitter, Linkedin, Instagram } from \"lucide-react\";\n\nexport function Footer() {\n  const { t, language } = useLanguage();\n  const currentYear = new Date().getFullYear();\n\n  return (\n    <footer className=\"bg-card border-t border-card-border mt-24\">\n      <div className=\"container mx-auto px-6 py-12\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n          {/* Brand */}\n          <div>\n            <h3 className=\"text-xl font-heading font-bold text-foreground mb-4\">\n              Leed Academy\n            </h3>\n            <p className=\"text-muted-foreground text-sm\">\n              {language === \"en\"\n                ? \"Empowering traders with professional education and real-time market insights.\"\n                : \"ÿ™ŸÖŸÉŸäŸÜ ÿßŸÑŸÖÿ™ÿØÿßŸàŸÑŸäŸÜ ÿ®ÿßŸÑÿ™ÿπŸÑŸäŸÖ ÿßŸÑŸÖŸáŸÜŸä Ÿàÿ±ÿ§Ÿâ ÿßŸÑÿ≥ŸàŸÇ ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÅÿπŸÑŸä.\"}\n            </p>\n          </div>\n\n          {/* Quick Links */}\n          <div>\n            <h4 className=\"font-semibold text-foreground mb-4\">\n              {language === \"en\" ? \"Quick Links\" : \"ÿ±Ÿàÿßÿ®ÿ∑ ÿ≥ÿ±Ÿäÿπÿ©\"}\n            </h4>\n            <ul className=\"space-y-2\">\n              <li>\n                <Link \n                  href=\"/about\" \n                  className=\"text-muted-foreground hover:text-primary transition-colors text-sm\" \n                  data-testid=\"footer-link-about\"\n                >\n                  {t(\"nav.about\")}\n                </Link>\n              </li>\n              <li>\n                <Link \n                  href=\"/courses\" \n                  className=\"text-muted-foreground hover:text-primary transition-colors text-sm\" \n                  data-testid=\"footer-link-courses\"\n                >\n                  {t(\"nav.courses\")}\n                </Link>\n              </li>\n              <li>\n                <Link \n                  href=\"/pricing\" \n                  className=\"text-muted-foreground hover:text-primary transition-colors text-sm\" \n                  data-testid=\"footer-link-pricing\"\n                >\n                  {t(\"nav.pricing\")}\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          {/* Support */}\n          <div>\n            <h4 className=\"font-semibold text-foreground mb-4\">\n              {language === \"en\" ? \"Support\" : \"ÿßŸÑÿØÿπŸÖ\"}\n            </h4>\n            <ul className=\"space-y-2\">\n              <li>\n                <Link \n                  href=\"/contact\" \n                  className=\"text-muted-foreground hover:text-primary transition-colors text-sm\" \n                  data-testid=\"footer-link-contact\"\n                >\n                  {t(\"nav.contact\")}\n                </Link>\n              </li>\n              <li>\n                <a\n                  href=\"#\"\n                  className=\"text-muted-foreground hover:text-primary transition-colors text-sm\"\n                  data-testid=\"footer-link-faq\"\n                >\n                  {language === \"en\" ? \"FAQ\" : \"ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑÿ¥ÿßÿ¶ÿπÿ©\"}\n                </a>\n              </li>\n              <li>\n                <a\n                  href=\"#\"\n                  className=\"text-muted-foreground hover:text-primary transition-colors text-sm\"\n                  data-testid=\"footer-link-terms\"\n                >\n                  {language === \"en\" ? \"Terms of Service\" : \"ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿÆÿØŸÖÿ©\"}\n                </a>\n              </li>\n            </ul>\n          </div>\n\n          {/* Social */}\n          <div>\n            <h4 className=\"font-semibold text-foreground mb-4\">\n              {language === \"en\" ? \"Connect\" : \"ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß\"}\n            </h4>\n            <div className=\"flex gap-3\">\n              <a\n                href=\"#\"\n                className=\"p-2 rounded-lg bg-muted hover-elevate active-elevate-2\"\n                aria-label=\"Facebook\"\n                data-testid=\"link-social-facebook\"\n              >\n                <Facebook className=\"h-5 w-5 text-muted-foreground\" />\n              </a>\n              <a\n                href=\"#\"\n                className=\"p-2 rounded-lg bg-muted hover-elevate active-elevate-2\"\n                aria-label=\"Twitter\"\n                data-testid=\"link-social-twitter\"\n              >\n                <Twitter className=\"h-5 w-5 text-muted-foreground\" />\n              </a>\n              <a\n                href=\"#\"\n                className=\"p-2 rounded-lg bg-muted hover-elevate active-elevate-2\"\n                aria-label=\"LinkedIn\"\n                data-testid=\"link-social-linkedin\"\n              >\n                <Linkedin className=\"h-5 w-5 text-muted-foreground\" />\n              </a>\n              <a\n                href=\"#\"\n                className=\"p-2 rounded-lg bg-muted hover-elevate active-elevate-2\"\n                aria-label=\"Instagram\"\n                data-testid=\"link-social-instagram\"\n              >\n                <Instagram className=\"h-5 w-5 text-muted-foreground\" />\n              </a>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"border-t border-border mt-8 pt-8 text-center\">\n          <p className=\"text-sm text-muted-foreground\">\n            ¬© {currentYear} TradeMaster Academy.{\" \"}\n            {language === \"en\" ? \"All rights reserved.\" : \"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÇ ŸÖÿ≠ŸÅŸàÿ∏ÿ©.\"}\n          </p>\n        </div>\n      </div>\n    </footer>\n  );\n}\n",
            "size_bytes": 5446
        },
        "client/src/components/ui/accordion.tsx": {
            "content": "import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n",
            "size_bytes": 1977
        },
        "client/src/components/ui/table.tsx": {
            "content": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n",
            "size_bytes": 2765
        },
        "client/src/pages/Courses.tsx": {
            "content": "import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Clock, BookOpen, Lock, CheckCircle2, Eye } from \"lucide-react\";\nimport type { Course } from \"@shared/schema\";\nimport { Link } from \"wouter\";\nimport { useState } from \"react\";\nimport level1Image from \"@assets/generated_images/Level_1_course_thumbnail_58124b24.png\";\nimport level2Image from \"@assets/generated_images/Level_2_course_thumbnail_6fc26317.png\";\nimport level3Image from \"@assets/generated_images/Level_3_course_thumbnail_442d6b44.png\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport default function Courses() {\n  const { t, language } = useLanguage();\n  const { user, isAuthenticated } = useAuth();\n  const [filterLevel, setFilterLevel] = useState<number | null>(null);\n  const [filterFree, setFilterFree] = useState<boolean | null>(null);\n\n  const { data: courses, isLoading } = useQuery<Course[]>({\n    queryKey: [\"/api/courses\"],\n  });\n\n  const levelImages: Record<number, string> = {\n    1: level1Image,\n    2: level2Image,\n    3: level3Image,\n  };\n\n  const filteredCourses = courses?.filter((course) => {\n    if (filterLevel !== null && course.level !== filterLevel) return false;\n    if (filterFree !== null && course.isFree !== filterFree) return false;\n    return true;\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <Header />\n        <main className=\"pt-20\">\n          <div className=\"container mx-auto px-6 py-24\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {[1, 2, 3, 4, 5, 6].map((i) => (\n                <Card key={i}>\n                  <div className=\"h-48 bg-muted animate-pulse\" />\n                  <CardContent className=\"p-6\">\n                    <div className=\"h-32 bg-muted animate-pulse rounded-lg\" />\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20\">\n        {/* Hero Section */}\n        <section className=\"py-24 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-3xl mx-auto text-center\">\n              <h1\n                className=\"text-4xl md:text-5xl font-heading font-bold text-foreground mb-6\"\n                data-testid=\"text-courses-title\"\n              >\n                {t(\"courses.title\")}\n              </h1>\n              <p className=\"text-lg text-muted-foreground leading-relaxed\">\n                {language === \"ar\"\n                  ? \"ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿØŸàÿ±ÿßÿ™ŸÜÿß ÿßŸÑÿ¥ÿßŸÖŸÑÿ© ŸàÿßÿÆÿ™ÿ± ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑŸÖŸÜÿßÿ≥ÿ® ŸÑŸÉ\"\n                  : \"Explore our comprehensive courses and choose the level that's right for you\"}\n              </p>\n            </div>\n          </div>\n        </section>\n\n        {/* Filters */}\n        <section className=\"py-8 border-b border-border\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"flex flex-wrap items-center gap-4\">\n              <Button\n                variant={filterLevel === null && filterFree === null ? \"default\" : \"outline\"}\n                onClick={() => {\n                  setFilterLevel(null);\n                  setFilterFree(null);\n                }}\n                data-testid=\"button-filter-all\"\n              >\n                {t(\"courses.filter.all\")}\n              </Button>\n              <Button\n                variant={filterFree === true ? \"default\" : \"outline\"}\n                onClick={() => {\n                  setFilterFree(filterFree === true ? null : true);\n                  setFilterLevel(null);\n                }}\n                data-testid=\"button-filter-free\"\n              >\n                {t(\"courses.filter.free\")}\n              </Button>\n              {[1, 2, 3].map((level) => (\n                <Button\n                  key={level}\n                  variant={filterLevel === level ? \"default\" : \"outline\"}\n                  onClick={() => {\n                    setFilterLevel(filterLevel === level ? null : level);\n                    setFilterFree(null);\n                  }}\n                  data-testid={`button-filter-level-${level}`}\n                >\n                  {t(\"courses.filter.level\")} {level}\n                </Button>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        {/* Courses Grid */}\n        <section className=\"py-24\">\n          <div className=\"container mx-auto px-6\">\n            {filteredCourses && filteredCourses.length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n                {filteredCourses.map((course) => {\n                  const isLocked = !course.isFree && user?.subscriptionStatus !== \"active\";\n\n                  return (\n                    <Card\n                      key={course.id}\n                      className=\"hover-elevate active-elevate-2 transition-all overflow-hidden\"\n                      data-testid={`card-course-${course.id}`}\n                    >\n                      <div className=\"relative h-48 overflow-hidden\">\n                        <img\n                          src={course.thumbnailUrl || levelImages[course.level]}\n                          alt={language === \"ar\" ? course.titleAr : course.titleEn}\n                          className=\"w-full h-full object-cover\"\n                          onError={(e) => {\n                            const target = e.target as HTMLImageElement;\n                            if (course.thumbnailUrl && target.src !== levelImages[course.level]) {\n                              target.src = levelImages[course.level];\n                            }\n                          }}\n                        />\n                        <div className=\"absolute top-4 left-4 flex gap-2\">\n                          {course.isFree && (\n                            <Badge\n                              className=\"bg-green-500 text-white\"\n                              data-testid=\"badge-free\"\n                            >\n                              {t(\"courses.free\")}\n                            </Badge>\n                          )}\n                          <Badge data-testid={`badge-level-${course.level}`}>\n                            {t(\"courses.level\")} {course.level}\n                          </Badge>\n                        </div>\n                        {isLocked && (\n                          <div className=\"absolute inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center\">\n                            <Lock className=\"h-12 w-12 text-muted-foreground\" />\n                          </div>\n                        )}\n                      </div>\n                      <CardContent className=\"p-6\">\n                        <h3 className=\"text-xl font-semibold text-foreground mb-2\">\n                          {language === \"ar\" ? course.titleAr : course.titleEn}\n                        </h3>\n                        <p className=\"text-muted-foreground text-sm mb-4 line-clamp-2\">\n                          {language === \"ar\"\n                            ? course.descriptionAr\n                            : course.descriptionEn}\n                        </p>\n                        <div className=\"flex items-center gap-4 text-sm text-muted-foreground mb-4\">\n                          <div className=\"flex items-center gap-1\">\n                            <BookOpen className=\"h-4 w-4\" />\n                            <span data-testid={`text-lesson-count-${course.id}`}>\n                              {(course as any).lessonCount || 0} {t(\"courses.lessons\")}\n                            </span>\n                          </div>\n                          <div className=\"flex items-center gap-1\">\n                            <Clock className=\"h-4 w-4\" />\n                            <span data-testid={`text-duration-${course.id}`}>\n                              {course.duration || 8} {t(\"courses.hours\")}\n                            </span>\n                          </div>\n                        </div>\n                        {isAuthenticated ? (\n                          <Button\n                            asChild\n                            className=\"w-full\"\n                            disabled={isLocked}\n                          >\n                            <Link \n                              href={`/preview/${course.id}`}\n                              className=\"flex items-center justify-center gap-2\" \n                              data-testid={`button-view-course-${course.id}`}\n                            >\n                              {isLocked ? (\n                                <>\n                                  <Lock className=\"h-4 w-4\" />\n                                  {t(\"courses.locked\")}\n                                </>\n                              ) : (\n                                <>\n                                  <Eye className=\"h-4 w-4\" />\n                                  {language === \"ar\" ? \"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿØŸàÿ±ÿ©\" : \"View Course\"}\n                                </>\n                              )}\n                            </Link>\n                          </Button>\n                        ) : (\n                          <Button\n                            asChild\n                            className=\"w-full\"\n                          >\n                            <Link \n                              href={`/preview/${course.id}`}\n                              data-testid={`button-enroll-${course.id}`}\n                            >\n                              {language === \"ar\" ? \"ŸÖÿπÿßŸäŸÜÿ© ÿßŸÑÿØŸàÿ±ÿ©\" : \"Preview Course\"}\n                            </Link>\n                          </Button>\n                        )}\n                      </CardContent>\n                    </Card>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"text-center py-12\">\n                <p className=\"text-muted-foreground\">\n                  {language === \"ar\"\n                    ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿØŸàÿ±ÿßÿ™ ŸÖÿ™ÿßÿ≠ÿ© ÿ≠ÿßŸÑŸäÿßŸã\"\n                    : \"No courses available\"}\n                </p>\n              </div>\n            )}\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 10694
        },
        "client/src/main.tsx": {
            "content": "import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n",
            "size_bytes": 157
        },
        "client/src/components/ui/select.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n",
            "size_bytes": 5741
        },
        "client/src/components/ui/separator.tsx": {
            "content": "import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n",
            "size_bytes": 756
        },
        "client/src/pages/Subscribe.tsx": {
            "content": "import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useRoute } from \"wouter\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { Wallet, Building2, Upload, CheckCircle2 } from \"lucide-react\";\nimport type { SubscriptionPlan, PaymentSettings } from \"@shared/schema\";\nimport { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useEffect } from \"react\";\n\nexport default function Subscribe() {\n  const [, params] = useRoute(\"/subscribe/:planId\");\n  const { t, language } = useLanguage();\n  const { user, isAuthenticated, isLoading: authLoading } = useAuth();\n  const { toast } = useToast();\n  const [step, setStep] = useState(1);\n  const [paymentMethod, setPaymentMethod] = useState<\"crypto\" | \"bank\">(\"crypto\");\n  const [proofFile, setProofFile] = useState<File | null>(null);\n\n  useEffect(() => {\n    if (!authLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n    }\n  }, [isAuthenticated, authLoading, toast]);\n\n  const { data: plan } = useQuery<SubscriptionPlan>({\n    queryKey: [\"/api/subscription-plans\", params?.planId],\n    enabled: !!params?.planId && isAuthenticated,\n  });\n\n  const { data: paymentSettings } = useQuery<PaymentSettings>({\n    queryKey: [\"/api/payment-settings\"],\n    enabled: isAuthenticated,\n  });\n\n  const submitPaymentMutation = useMutation({\n    mutationFn: async (data: FormData) => {\n      const res = await fetch(\"/api/payments\", {\n        method: \"POST\",\n        body: data,\n        credentials: \"include\",\n      });\n      \n      if (!res.ok) {\n        const error = await res.json().catch(() => ({ message: \"Failed to submit payment\" }));\n        throw new Error(error.message || \"Failed to submit payment\");\n      }\n      \n      // Handle empty response or JSON response\n      const contentType = res.headers.get(\"content-type\");\n      if (contentType && contentType.includes(\"application/json\")) {\n        return res.json();\n      }\n      return undefined;\n    },\n    onSuccess: () => {\n      setStep(3);\n      toast({\n        title: t(\"common.success\"),\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿØŸÅÿπ ÿ®ŸÜÿ¨ÿßÿ≠. ÿ≥ŸÜŸÇŸàŸÖ ÿ®ŸÖÿ±ÿßÿ¨ÿπÿ™Ÿá ŸÇÿ±Ÿäÿ®ÿßŸã.\"\n            : \"Payment proof submitted successfully. We'll review it soon.\",\n      });\n    },\n    onError: (error: Error) => {\n      toast({\n        title: t(\"common.error\"),\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    const formData = new FormData(e.currentTarget);\n    formData.append(\"planId\", params?.planId || \"\");\n    formData.append(\"method\", paymentMethod);\n    formData.append(\"amount\", plan?.price || \"0\");\n\n    if (proofFile) {\n      formData.append(\"proofImage\", proofFile);\n    }\n\n    submitPaymentMutation.mutate(formData);\n  };\n\n  if (authLoading || !isAuthenticated || !plan) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <Header />\n        <main className=\"pt-20\">\n          <div className=\"container mx-auto px-6 py-24\">\n            <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20\">\n        <section className=\"py-24\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-3xl mx-auto\">\n              {/* Progress Indicator */}\n              <div className=\"mb-12\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  {[1, 2, 3].map((s) => (\n                    <div\n                      key={s}\n                      className={`flex-1 h-2 rounded-full mx-1 ${\n                        s <= step ? \"bg-primary\" : \"bg-muted\"\n                      }`}\n                    />\n                  ))}\n                </div>\n                <div className=\"flex justify-between text-sm\">\n                  <span className={step >= 1 ? \"text-foreground\" : \"text-muted-foreground\"}>\n                    {t(\"subscription.choose-plan\")}\n                  </span>\n                  <span className={step >= 2 ? \"text-foreground\" : \"text-muted-foreground\"}>\n                    {t(\"subscription.payment-method\")}\n                  </span>\n                  <span className={step >= 3 ? \"text-foreground\" : \"text-muted-foreground\"}>\n                    {t(\"subscription.upload-proof\")}\n                  </span>\n                </div>\n              </div>\n\n              {/* Step 1: Plan Overview */}\n              {step === 1 && (\n                <Card data-testid=\"card-plan-overview\">\n                  <CardHeader>\n                    <CardTitle className=\"text-2xl\">\n                      {language === \"ar\" ? plan.nameAr : plan.nameEn}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-6\">\n                      <div>\n                        <div className=\"text-4xl font-bold text-foreground mb-2\">\n                          ${plan.price}\n                        </div>\n                        <p className=\"text-muted-foreground\">\n                          {language === \"ar\" ? plan.descriptionAr : plan.descriptionEn}\n                        </p>\n                      </div>\n                      <Button\n                        onClick={() => setStep(2)}\n                        size=\"lg\"\n                        className=\"w-full\"\n                        data-testid=\"button-next-step\"\n                      >\n                        {language === \"ar\" ? \"ÿßŸÑÿ™ÿßŸÑŸä\" : \"Next\"}\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n\n              {/* Step 2: Payment Method & Upload */}\n              {step === 2 && (\n                <Card data-testid=\"card-payment-method\">\n                  <CardHeader>\n                    <CardTitle className=\"text-2xl\">\n                      {t(\"subscription.payment-method\")}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\n                      <RadioGroup\n                        value={paymentMethod}\n                        onValueChange={(value) =>\n                          setPaymentMethod(value as \"crypto\" | \"bank\")\n                        }\n                        data-testid=\"radio-payment-method\"\n                      >\n                        <div className=\"flex items-center space-x-2 p-4 rounded-lg border hover-elevate active-elevate-2\">\n                          <RadioGroupItem value=\"crypto\" id=\"crypto\" />\n                          <Label\n                            htmlFor=\"crypto\"\n                            className=\"flex items-center gap-3 flex-1 cursor-pointer\"\n                          >\n                            <Wallet className=\"h-5 w-5 text-primary\" />\n                            <div>\n                              <p className=\"font-medium text-foreground\">\n                                {t(\"subscription.crypto\")}\n                              </p>\n                              <p className=\"text-sm text-muted-foreground\">\n                                BTC, ETH, USDT\n                              </p>\n                            </div>\n                          </Label>\n                        </div>\n\n                        <div className=\"flex items-center space-x-2 p-4 rounded-lg border hover-elevate active-elevate-2\">\n                          <RadioGroupItem value=\"bank\" id=\"bank\" />\n                          <Label\n                            htmlFor=\"bank\"\n                            className=\"flex items-center gap-3 flex-1 cursor-pointer\"\n                          >\n                            <Building2 className=\"h-5 w-5 text-primary\" />\n                            <div>\n                              <p className=\"font-medium text-foreground\">\n                                {t(\"subscription.bank\")}\n                              </p>\n                              <p className=\"text-sm text-muted-foreground\">\n                                {language === \"ar\"\n                                  ? \"ÿ™ÿ≠ŸàŸäŸÑ ŸÖÿµÿ±ŸÅŸä\"\n                                  : \"Wire transfer\"}\n                              </p>\n                            </div>\n                          </Label>\n                        </div>\n                      </RadioGroup>\n\n                      {paymentMethod === \"crypto\" && paymentSettings && (\n                        <div className=\"space-y-4\">\n                          <div className=\"bg-primary/5 border border-primary/20 p-6 rounded-lg space-y-4\">\n                            <h3 className=\"font-semibold text-foreground mb-4\">\n                              {language === \"ar\" ? \"ÿπŸÜÿßŸàŸäŸÜ ÿßŸÑŸÖÿ≠ÿßŸÅÿ∏\" : \"Wallet Addresses\"}\n                            </h3>\n                            \n                            {paymentSettings.btcAddress && (\n                              <div>\n                                <Label className=\"text-sm font-medium text-foreground\">Bitcoin (BTC)</Label>\n                                <div className=\"flex items-center gap-2 mt-1\">\n                                  <code className=\"flex-1 bg-background/50 px-3 py-2 rounded text-sm border\">\n                                    {paymentSettings.btcAddress}\n                                  </code>\n                                  <Button\n                                    type=\"button\"\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => {\n                                      navigator.clipboard.writeText(paymentSettings.btcAddress || \"\");\n                                      toast({ title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ\" : \"Copied\" });\n                                    }}\n                                    data-testid=\"button-copy-btc\"\n                                  >\n                                    {language === \"ar\" ? \"ŸÜÿ≥ÿÆ\" : \"Copy\"}\n                                  </Button>\n                                </div>\n                              </div>\n                            )}\n\n                            {paymentSettings.ethAddress && (\n                              <div>\n                                <Label className=\"text-sm font-medium text-foreground\">Ethereum (ETH)</Label>\n                                <div className=\"flex items-center gap-2 mt-1\">\n                                  <code className=\"flex-1 bg-background/50 px-3 py-2 rounded text-sm border\">\n                                    {paymentSettings.ethAddress}\n                                  </code>\n                                  <Button\n                                    type=\"button\"\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => {\n                                      navigator.clipboard.writeText(paymentSettings.ethAddress || \"\");\n                                      toast({ title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ\" : \"Copied\" });\n                                    }}\n                                    data-testid=\"button-copy-eth\"\n                                  >\n                                    {language === \"ar\" ? \"ŸÜÿ≥ÿÆ\" : \"Copy\"}\n                                  </Button>\n                                </div>\n                              </div>\n                            )}\n\n                            {paymentSettings.usdtAddress && (\n                              <div>\n                                <Label className=\"text-sm font-medium text-foreground\">\n                                  USDT ({paymentSettings.usdtNetwork || \"TRC20\"})\n                                </Label>\n                                <div className=\"flex items-center gap-2 mt-1\">\n                                  <code className=\"flex-1 bg-background/50 px-3 py-2 rounded text-sm border\">\n                                    {paymentSettings.usdtAddress}\n                                  </code>\n                                  <Button\n                                    type=\"button\"\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    onClick={() => {\n                                      navigator.clipboard.writeText(paymentSettings.usdtAddress || \"\");\n                                      toast({ title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ\" : \"Copied\" });\n                                    }}\n                                    data-testid=\"button-copy-usdt\"\n                                  >\n                                    {language === \"ar\" ? \"ŸÜÿ≥ÿÆ\" : \"Copy\"}\n                                  </Button>\n                                </div>\n                              </div>\n                            )}\n\n                            {paymentSettings.paymentInstructionsEn && (\n                              <div className=\"mt-4 pt-4 border-t border-border\">\n                                <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\n                                  {language === \"ar\" \n                                    ? paymentSettings.paymentInstructionsAr \n                                    : paymentSettings.paymentInstructionsEn}\n                                </p>\n                              </div>\n                            )}\n                          </div>\n\n                          <div className=\"bg-muted/30 p-4 rounded-lg\">\n                            <Label className=\"text-sm font-medium text-foreground mb-2 block\">\n                              {language === \"ar\" ? \"ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© ÿßŸÑÿ™Ÿä ÿ£ÿ±ÿ≥ŸÑÿ™ ŸÖŸÜŸáÿß\" : \"Your Wallet Address (Sender)\"}\n                            </Label>\n                            <Input\n                              name=\"walletAddress\"\n                              placeholder=\"0x...\"\n                              required\n                              data-testid=\"input-wallet-address\"\n                            />\n                            <p className=\"text-xs text-muted-foreground mt-1\">\n                              {language === \"ar\" \n                                ? \"ÿ£ÿØÿÆŸÑ ÿπŸÜŸàÿßŸÜ ŸÖÿ≠ŸÅÿ∏ÿ™ŸÉ ÿßŸÑÿ™Ÿä ÿ£ÿ±ÿ≥ŸÑÿ™ ŸÖŸÜŸáÿß ÿßŸÑÿØŸÅÿπ ŸÑŸÑÿ™ÿ≠ŸÇŸÇ\"\n                                : \"Enter your wallet address used for payment verification\"}\n                            </p>\n                          </div>\n                        </div>\n                      )}\n\n                      {paymentMethod === \"bank\" && paymentSettings && (\n                        <div className=\"bg-primary/5 border border-primary/20 p-6 rounded-lg space-y-4\">\n                          <h3 className=\"font-semibold text-foreground mb-4\">\n                            {language === \"ar\" ? \"ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿßŸÑÿ®ŸÜŸÉŸä\" : \"Bank Account Information\"}\n                          </h3>\n\n                          {paymentSettings.bankName && (\n                            <div>\n                              <Label className=\"text-sm font-medium text-muted-foreground\">\n                                {language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿßŸÑÿ®ŸÜŸÉ\" : \"Bank Name\"}\n                              </Label>\n                              <p className=\"text-foreground font-medium\">{paymentSettings.bankName}</p>\n                            </div>\n                          )}\n\n                          {paymentSettings.accountHolderName && (\n                            <div>\n                              <Label className=\"text-sm font-medium text-muted-foreground\">\n                                {language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿµÿßÿ≠ÿ® ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Account Holder\"}\n                              </Label>\n                              <p className=\"text-foreground font-medium\">{paymentSettings.accountHolderName}</p>\n                            </div>\n                          )}\n\n                          {paymentSettings.accountNumber && (\n                            <div>\n                              <Label className=\"text-sm font-medium text-muted-foreground\">\n                                {language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Account Number\"}\n                              </Label>\n                              <p className=\"text-foreground font-medium\">{paymentSettings.accountNumber}</p>\n                            </div>\n                          )}\n\n                          {paymentSettings.iban && (\n                            <div>\n                              <Label className=\"text-sm font-medium text-muted-foreground\">IBAN</Label>\n                              <div className=\"flex items-center gap-2\">\n                                <code className=\"flex-1 bg-background/50 px-3 py-2 rounded text-sm border\">\n                                  {paymentSettings.iban}\n                                </code>\n                                <Button\n                                  type=\"button\"\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => {\n                                    navigator.clipboard.writeText(paymentSettings.iban || \"\");\n                                    toast({ title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ\" : \"Copied\" });\n                                  }}\n                                  data-testid=\"button-copy-iban\"\n                                >\n                                  {language === \"ar\" ? \"ŸÜÿ≥ÿÆ\" : \"Copy\"}\n                                </Button>\n                              </div>\n                            </div>\n                          )}\n\n                          {paymentSettings.swiftCode && (\n                            <div>\n                              <Label className=\"text-sm font-medium text-muted-foreground\">SWIFT/BIC</Label>\n                              <p className=\"text-foreground font-medium\">{paymentSettings.swiftCode}</p>\n                            </div>\n                          )}\n\n                          {paymentSettings.bankAddress && (\n                            <div>\n                              <Label className=\"text-sm font-medium text-muted-foreground\">\n                                {language === \"ar\" ? \"ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ®ŸÜŸÉ\" : \"Bank Address\"}\n                              </Label>\n                              <p className=\"text-foreground text-sm\">{paymentSettings.bankAddress}</p>\n                            </div>\n                          )}\n\n                          {paymentSettings.paymentInstructionsEn && (\n                            <div className=\"mt-4 pt-4 border-t border-border\">\n                              <p className=\"text-sm text-muted-foreground whitespace-pre-line\">\n                                {language === \"ar\" \n                                  ? paymentSettings.paymentInstructionsAr \n                                  : paymentSettings.paymentInstructionsEn}\n                              </p>\n                            </div>\n                          )}\n                        </div>\n                      )}\n\n                      <div>\n                        <Label className=\"text-sm font-medium text-foreground mb-2 block\">\n                          {t(\"subscription.upload-proof\")}\n                        </Label>\n                        <div className=\"border-2 border-dashed border-border rounded-lg p-8 text-center hover-elevate active-elevate-2 transition-all\">\n                          <Upload className=\"h-10 w-10 text-muted-foreground mx-auto mb-3\" />\n                          <input\n                            type=\"file\"\n                            accept=\"image/*\"\n                            onChange={(e) => setProofFile(e.target.files?.[0] || null)}\n                            className=\"hidden\"\n                            id=\"proof-upload\"\n                            required\n                            data-testid=\"input-proof-upload\"\n                          />\n                          <Label\n                            htmlFor=\"proof-upload\"\n                            className=\"cursor-pointer text-sm text-muted-foreground\"\n                          >\n                            {proofFile\n                              ? proofFile.name\n                              : language === \"ar\"\n                                ? \"ÿßÿ∂ÿ∫ÿ∑ ŸÑÿ™ÿ≠ŸÖŸäŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿØŸÅÿπ\"\n                                : \"Click to upload payment proof\"}\n                          </Label>\n                        </div>\n                      </div>\n\n                      <div className=\"flex gap-4\">\n                        <Button\n                          type=\"button\"\n                          variant=\"outline\"\n                          onClick={() => setStep(1)}\n                          className=\"flex-1\"\n                          data-testid=\"button-back\"\n                        >\n                          {language === \"ar\" ? \"ÿ±ÿ¨Ÿàÿπ\" : \"Back\"}\n                        </Button>\n                        <Button\n                          type=\"submit\"\n                          disabled={submitPaymentMutation.isPending}\n                          className=\"flex-1\"\n                          data-testid=\"button-submit-payment\"\n                        >\n                          {submitPaymentMutation.isPending\n                            ? t(\"common.loading\")\n                            : t(\"subscription.submit\")}\n                        </Button>\n                      </div>\n                    </form>\n                  </CardContent>\n                </Card>\n              )}\n\n              {/* Step 3: Success */}\n              {step === 3 && (\n                <Card data-testid=\"card-success\">\n                  <CardContent className=\"p-12 text-center\">\n                    <div className=\"w-16 h-16 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-6\">\n                      <CheckCircle2 className=\"h-10 w-10 text-green-500\" />\n                    </div>\n                    <h2 className=\"text-2xl font-bold text-foreground mb-4\">\n                      {language === \"ar\"\n                        ? \"ÿ™ŸÖ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ ÿ®ŸÜÿ¨ÿßÿ≠!\"\n                        : \"Successfully Submitted!\"}\n                    </h2>\n                    <p className=\"text-muted-foreground mb-8\">\n                      {language === \"ar\"\n                        ? \"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿØŸÅÿπ ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ. ÿ≥ŸÜŸÇŸàŸÖ ÿ®ŸÖÿ±ÿßÿ¨ÿπÿ™Ÿá Ÿàÿ•ÿÆÿ∑ÿßÿ±ŸÉ ŸÇÿ±Ÿäÿ®ÿßŸã.\"\n                        : \"Your payment proof has been submitted. We'll review it and notify you soon.\"}\n                    </p>\n                    <Button asChild>\n                      <a href=\"/dashboard\" data-testid=\"button-dashboard\">\n                        {language === \"ar\"\n                          ? \"ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ\"\n                          : \"Go to Dashboard\"}\n                      </a>\n                    </Button>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 24229
        },
        "client/src/components/ui/chart.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n",
            "size_bytes": 10481
        },
        "client/src/components/ui/carousel.tsx": {
            "content": "import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n",
            "size_bytes": 6210
        },
        "client/src/pages/admin/AdminPayments.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Input } from \"@/components/ui/input\";\nimport { Check, X, Eye } from \"lucide-react\";\nimport type { Payment } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState } from \"react\";\n\nexport default function AdminPayments() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  const [methodFilter, setMethodFilter] = useState<string>(\"all\");\n  const [searchFilter, setSearchFilter] = useState<string>(\"\");\n\n  const { data: payments, isLoading } = useQuery<Payment[]>({\n    queryKey: [\"/api/admin/payments\"],\n  });\n\n  const filteredPayments = payments?.filter((payment) => {\n    const matchStatus = statusFilter === \"all\" || !statusFilter || payment.status === statusFilter;\n    const matchMethod = methodFilter === \"all\" || !methodFilter || payment.method === methodFilter;\n    const searchLower = searchFilter.toLowerCase();\n    const matchSearch =\n      !searchFilter ||\n      payment.userName?.toLowerCase().includes(searchLower) ||\n      payment.userEmail?.toLowerCase().includes(searchLower) ||\n      payment.id.toLowerCase().includes(searchLower);\n    return matchStatus && matchMethod && matchSearch;\n  });\n\n  const updatePaymentMutation = useMutation({\n    mutationFn: async ({\n      paymentId,\n      status,\n    }: {\n      paymentId: string;\n      status: string;\n    }) => {\n      return await apiRequest(\"PATCH\", `/api/admin/payments/${paymentId}`, {\n        status,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/payments\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\" : \"Updated\",\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿØŸÅÿπ\"\n            : \"Payment status updated successfully\",\n      });\n    },\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n      <h1\n        className=\"text-3xl font-heading font-bold text-foreground mb-8\"\n        data-testid=\"text-admin-payments-title\"\n      >\n        {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿØŸÅŸàÿπÿßÿ™\" : \"Payment Management\"}\n      </h1>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>\n            {language === \"ar\" ? \"ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿØŸÅŸàÿπÿßÿ™\" : \"All Payments\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <Input\n              placeholder={language === \"ar\" ? \"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿßÿ≥ŸÖ ÿ£Ÿà ÿßŸÑÿ®ÿ±ŸäÿØ...\" : \"Search by name or email...\"}\n              value={searchFilter}\n              onChange={(e) => setSearchFilter(e.target.value)}\n              data-testid=\"input-search-payments\"\n            />\n            <Select value={statusFilter} onValueChange={setStatusFilter}>\n              <SelectTrigger data-testid=\"select-status-filter\">\n                <SelectValue placeholder={language === \"ar\" ? \"ŸÉŸÑ ÿßŸÑÿ≠ÿßŸÑÿßÿ™\" : \"All Status\"} />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">{language === \"ar\" ? \"ŸÉŸÑ ÿßŸÑÿ≠ÿßŸÑÿßÿ™\" : \"All Status\"}</SelectItem>\n                <SelectItem value=\"pending\">{language === \"ar\" ? \"ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±\" : \"Pending\"}</SelectItem>\n                <SelectItem value=\"approved\">{language === \"ar\" ? \"ŸÖŸàÿßŸÅŸÇ ÿπŸÑŸäŸá\" : \"Approved\"}</SelectItem>\n                <SelectItem value=\"rejected\">{language === \"ar\" ? \"ŸÖÿ±ŸÅŸàÿ∂\" : \"Rejected\"}</SelectItem>\n              </SelectContent>\n            </Select>\n            <Select value={methodFilter} onValueChange={setMethodFilter}>\n              <SelectTrigger data-testid=\"select-method-filter\">\n                <SelectValue placeholder={language === \"ar\" ? \"ŸÉŸÑ ÿßŸÑÿ∑ÿ±ŸÇ\" : \"All Methods\"} />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">{language === \"ar\" ? \"ŸÉŸÑ ÿßŸÑÿ∑ÿ±ŸÇ\" : \"All Methods\"}</SelectItem>\n                <SelectItem value=\"bank_transfer\">{language === \"ar\" ? \"ÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜŸÉŸä\" : \"Bank Transfer\"}</SelectItem>\n                <SelectItem value=\"crypto\">{language === \"ar\" ? \"ÿπŸÖŸÑÿßÿ™ ÿ±ŸÇŸÖŸäÿ©\" : \"Crypto\"}</SelectItem>\n              </SelectContent>\n            </Select>\n            {(searchFilter) && (\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setStatusFilter(\"all\");\n                  setMethodFilter(\"all\");\n                  setSearchFilter(\"\");\n                }}\n                data-testid=\"button-clear-filters\"\n              >\n                {language === \"ar\" ? \"ŸÖÿ≥ÿ≠ ÿßŸÑŸÅŸÑÿ™ÿ±ÿ©\" : \"Clear Filters\"}\n              </Button>\n            )}\n          </div>\n\n          <div className=\"text-sm text-muted-foreground\">\n            {language === \"ar\" ? \"ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨: \" : \"Results: \"} {filteredPayments?.length || 0}\n          </div>\n\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\" : \"User\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑŸÖÿ®ŸÑÿ∫\" : \"Amount\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ∑ÿ±ŸäŸÇÿ©\" : \"Method\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ≠ÿßŸÑÿ©\" : \"Status\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ\" : \"Date\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ•ÿ´ÿ®ÿßÿ™\" : \"Proof\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™\" : \"Actions\"}</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredPayments?.map((payment) => (\n                <TableRow key={payment.id} data-testid={`row-payment-${payment.id}`}>\n                  <TableCell className=\"font-medium\">\n                    {payment.userName || \"N/A\"}\n                  </TableCell>\n                  <TableCell className=\"text-muted-foreground\">\n                    {payment.userEmail || \"N/A\"}\n                  </TableCell>\n                  <TableCell className=\"font-medium\">\n                    ${payment.amount} {payment.currency}\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant=\"outline\">{payment.method}</Badge>\n                  </TableCell>\n                  <TableCell>\n                    <Badge\n                      variant={\n                        payment.status === \"approved\"\n                          ? \"default\"\n                          : payment.status === \"pending\"\n                            ? \"secondary\"\n                            : \"destructive\"\n                      }\n                    >\n                      {payment.status}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"text-muted-foreground\">\n                    {payment.createdAt\n                      ? new Date(payment.createdAt).toLocaleDateString()\n                      : \"-\"}\n                  </TableCell>\n                  <TableCell>\n                    {payment.proofImageUrl && (\n                      <Dialog>\n                        <DialogTrigger asChild>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            data-testid={`button-view-proof-${payment.id}`}\n                          >\n                            <Eye className=\"h-4 w-4\" />\n                          </Button>\n                        </DialogTrigger>\n                        <DialogContent>\n                          <DialogHeader>\n                            <DialogTitle>\n                              {language === \"ar\"\n                                ? \"ÿ•ÿ´ÿ®ÿßÿ™ ÿßŸÑÿØŸÅÿπ\"\n                                : \"Payment Proof\"}\n                            </DialogTitle>\n                          </DialogHeader>\n                          <img\n                            src={payment.proofImageUrl}\n                            alt=\"Payment proof\"\n                            className=\"w-full rounded-lg\"\n                          />\n                        </DialogContent>\n                      </Dialog>\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    {payment.status === \"pending\" && (\n                      <div className=\"flex gap-2\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"default\"\n                          onClick={() =>\n                            updatePaymentMutation.mutate({\n                              paymentId: payment.id,\n                              status: \"approved\",\n                            })\n                          }\n                          disabled={updatePaymentMutation.isPending}\n                          data-testid={`button-approve-${payment.id}`}\n                        >\n                          <Check className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          size=\"sm\"\n                          variant=\"destructive\"\n                          onClick={() =>\n                            updatePaymentMutation.mutate({\n                              paymentId: payment.id,\n                              status: \"rejected\",\n                            })\n                          }\n                          disabled={updatePaymentMutation.isPending}\n                          data-testid={`button-reject-${payment.id}`}\n                        >\n                          <X className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    )}\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          {filteredPayments?.length === 0 && (\n            <div className=\"text-center py-8 text-muted-foreground\">\n              {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿØŸÅŸàÿπÿßÿ™\" : \"No payments found\"}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
            "size_bytes": 11098
        },
        "client/src/hooks/use-mobile.tsx": {
            "content": "import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n",
            "size_bytes": 565
        },
        "client/src/pages/Landing.tsx": {
            "content": "import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Hero } from \"@/components/landing/Hero\";\nimport { MarketTicker } from \"@/components/landing/MarketTicker\";\nimport { Features } from \"@/components/landing/Features\";\nimport { Testimonials } from \"@/components/landing/Testimonials\";\nimport { WhoWeAre } from \"@/components/landing/WhoWeAre\";\nimport { VideoSection } from \"@/components/landing/VideoSection\";\nimport { EnhancedTestimonials } from \"@/components/landing/EnhancedTestimonials\";\nimport { StatsSection } from \"@/components/landing/StatsSection\";\nimport { useTranslation } from \"react-i18next\";\n\nexport default function Landing() {\n  const { i18n } = useTranslation();\n\n  return (\n    <div\n      className=\"min-h-screen bg-background\"\n      dir={i18n.language === \"ar\" ? \"rtl\" : \"ltr\"}\n    >\n      <Header />\n      <main className=\"pt-20\">\n        <Hero />\n        <MarketTicker />\n        <WhoWeAre />\n        <StatsSection />\n        <VideoSection />\n        <Features />\n        <EnhancedTestimonials />\n        <Testimonials />\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 1152
        },
        "client/src/pages/CourseDetail.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useRoute } from \"wouter\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Clock,\n  BookOpen,\n  Lock,\n  Play,\n  CheckCircle2,\n  Calendar,\n  ChevronLeft,\n  ChevronRight,\n  PlayCircle,\n  Download,\n  FileText,\n  Link as LinkIcon,\n} from \"lucide-react\";\nimport type { Course, Lesson, Progress as UserProgress, Meeting, CourseResource } from \"@shared/schema\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState, useRef, useEffect } from \"react\";\n\nexport default function CourseDetail() {\n  const [, params] = useRoute(\"/course/:id\");\n  const { t, language } = useLanguage();\n  const { user, isAuthenticated } = useAuth();\n  const { toast } = useToast();\n  const [currentLessonIndex, setCurrentLessonIndex] = useState(0);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [lastProgressUpdate, setLastProgressUpdate] = useState(0);\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\n  const [videoSrc, setVideoSrc] = useState<string>(\"\");\n\n  const { data: course } = useQuery<Course>({\n    queryKey: [\"/api/courses\", params?.id],\n    enabled: !!params?.id,\n  });\n\n  const { data: lessons } = useQuery<Lesson[]>({\n    queryKey: [\"/api/courses\", params?.id, \"lessons\"],\n    enabled: !!params?.id,\n  });\n\n  // Update video source when lesson changes\n  useEffect(() => {\n    if (!lessons || lessons.length === 0) return;\n    const lesson = lessons[currentLessonIndex];\n    if (lesson) {\n      setVideoSrc(`/api/videos/${lesson.id}/stream`);\n    }\n  }, [currentLessonIndex, lessons]);\n\n  // Prevent video download and right-click\n  const handleVideoContextMenu = (e: React.MouseEvent) => {\n    e.preventDefault();\n    return false;\n  };\n\n  const handleVideoDragStart = (e: React.DragEvent) => {\n    e.preventDefault();\n    return false;\n  };\n\n  const { data: userProgress } = useQuery<UserProgress[]>({\n    queryKey: [\"/api/progress\", params?.id],\n    enabled: !!params?.id && isAuthenticated,\n  });\n\n  const { data: meetings } = useQuery<Meeting[]>({\n    queryKey: [\"/api/courses\", params?.id, \"meetings\"],\n    enabled: !!params?.id,\n  });\n\n  const { data: resources } = useQuery<CourseResource[]>({\n    queryKey: [\"/api/courses\", params?.id, \"resources\"],\n    enabled: !!params?.id,\n  });\n\n  const updateWatchProgressMutation = useMutation({\n    mutationFn: async ({\n      lessonId,\n      watchProgress,\n      courseId,\n    }: {\n      lessonId: string;\n      watchProgress: number;\n      courseId: string;\n    }) => {\n      return await apiRequest(\"PATCH\", `/api/progress/${lessonId}/watch`, {\n        watchProgress,\n        courseId,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/progress\", params?.id] });\n    },\n  });\n\n  // Video player event handlers\n  useEffect(() => {\n    const video = videoRef.current;\n    if (!video || !lessons || !isAuthenticated) return;\n\n    const currentLesson = lessons[currentLessonIndex];\n    if (!currentLesson) return;\n\n    const handleTimeUpdate = () => {\n      const currentTime = Math.floor(video.currentTime);\n\n      // Update progress every 5 seconds\n      if (currentTime > 0 && currentTime - lastProgressUpdate >= 5) {\n        setLastProgressUpdate(currentTime);\n        updateWatchProgressMutation.mutate({\n          lessonId: currentLesson.id,\n          watchProgress: currentTime,\n          courseId: params?.id!,\n        });\n      }\n    };\n\n    const handleEnded = () => {\n      // Video completed - mark as completed\n      updateWatchProgressMutation.mutate({\n        lessonId: currentLesson.id,\n        watchProgress: currentLesson.duration || 0,\n        courseId: params?.id!,\n      });\n\n      toast({\n        title: t(\"common.success\"),\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿØÿ±ÿ≥!\" : \"Lesson completed!\",\n      });\n    };\n\n    video.addEventListener(\"timeupdate\", handleTimeUpdate);\n    video.addEventListener(\"ended\", handleEnded);\n\n    return () => {\n      video.removeEventListener(\"timeupdate\", handleTimeUpdate);\n      video.removeEventListener(\"ended\", handleEnded);\n    };\n  }, [\n    currentLessonIndex,\n    lessons,\n    isAuthenticated,\n    lastProgressUpdate,\n    params?.id,\n    language,\n    toast,\n    t,\n    updateWatchProgressMutation,\n  ]);\n\n  if (!course || !lessons) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"container mx-auto px-6 py-24\">\n          <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n        </div>\n      </div>\n    );\n  }\n\n  const isLocked = !course.isFree && user?.subscriptionStatus !== \"active\";\n  const completedLessons = userProgress?.filter((p) => p.completed).length || 0;\n  const totalLessons = lessons.length;\n  const progressPercentage = totalLessons > 0 ? (completedLessons / totalLessons) * 100 : 0;\n\n  const isLessonAccessible = (lesson: Lesson, index: number) => {\n    if (lesson.isFree) return true;\n    if (isLocked) return false;\n    if (!lesson.requiresPrevious || index === 0) return true;\n    const previousLesson = lessons[index - 1];\n    return userProgress?.some((p) => p.lessonId === previousLesson.id && p.completed);\n  };\n\n  const currentLesson = lessons[currentLessonIndex];\n  const canGoNext = currentLessonIndex < lessons.length - 1;\n  const canGoPrev = currentLessonIndex > 0;\n\n  // If user is not logged in or course is locked, show landing page view\n  if (!isAuthenticated || isLocked) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <div className=\"border-b\">\n          <div className=\"container mx-auto px-6 py-6\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                <Button variant=\"ghost\" size=\"icon\" asChild>\n                  <a href=\"/courses\" data-testid=\"button-back-courses\">\n                    <ChevronLeft className=\"h-5 w-5\" />\n                  </a>\n                </Button>\n                <div>\n                  <h1 className=\"text-xl font-heading font-bold text-foreground\">\n                    {language === \"ar\" ? course.titleAr : course.titleEn}\n                  </h1>\n                </div>\n              </div>\n              {!isAuthenticated ? (\n                <Button asChild data-testid=\"button-login\">\n                  <a href=\"/api/login\">{t(\"nav.login\")}</a>\n                </Button>\n              ) : (\n                <Button asChild data-testid=\"button-subscribe\">\n                  <a href=\"/pricing\">{language === \"ar\" ? \"ÿßÿ¥ÿ™ÿ±ŸÉ ÿßŸÑÿ¢ŸÜ\" : \"Subscribe Now\"}</a>\n                </Button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <main className=\"container mx-auto px-6 py-12\">\n          <div className=\"max-w-4xl mx-auto\">\n            <Card>\n              <CardContent className=\"p-12 text-center\">\n                <Lock className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n                <h2 className=\"text-2xl font-heading font-bold text-foreground mb-2\">\n                  {!isAuthenticated\n                    ? language === \"ar\"\n                      ? \"ÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÑŸÑŸàÿµŸàŸÑ\"\n                      : \"Login to Access\"\n                    : language === \"ar\"\n                      ? \"Ÿáÿ∞Ÿá ÿßŸÑÿØŸàÿ±ÿ© ŸÖÿ≠ÿ∏Ÿàÿ±ÿ©\"\n                      : \"This Course is Locked\"}\n                </h2>\n                <p className=\"text-muted-foreground mb-6\">\n                  {!isAuthenticated\n                    ? language === \"ar\"\n                      ? \"Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿØŸàÿ±ÿ©\"\n                      : \"Please login to access course content\"\n                    : language === \"ar\"\n                      ? \"ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿÆÿ∑ÿ© ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ ÿ¨ŸÖŸäÿπ ÿßŸÑÿØÿ±Ÿàÿ≥ ŸàÿßŸÑŸÖÿ≠ÿ™ŸàŸâ\"\n                      : \"Subscribe to a plan to access all lessons and content\"}\n                </p>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n                  <div className=\"p-4 border rounded-lg\">\n                    <BookOpen className=\"h-8 w-8 text-primary mx-auto mb-2\" />\n                    <p className=\"text-sm font-medium text-foreground\">\n                      {totalLessons} {t(\"courses.lessons\")}\n                    </p>\n                  </div>\n                  <div className=\"p-4 border rounded-lg\">\n                    <Clock className=\"h-8 w-8 text-primary mx-auto mb-2\" />\n                    <p className=\"text-sm font-medium text-foreground\">\n                      {course.duration || 8} {t(\"courses.hours\")}\n                    </p>\n                  </div>\n                  <div className=\"p-4 border rounded-lg\">\n                    <PlayCircle className=\"h-8 w-8 text-primary mx-auto mb-2\" />\n                    <p className=\"text-sm font-medium text-foreground\">\n                      {language === \"ar\" ? \"ŸÖÿ≠ÿ™ŸàŸâ HD\" : \"HD Content\"}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  // Udemy-style player view for authenticated users with access\n  return (\n    <div className=\"min-h-screen bg-background flex flex-col\">\n      {/* Top Navigation Bar */}\n      <div className=\"border-b sticky top-0 bg-background z-10\">\n        <div className=\"container mx-auto px-6 py-4\">\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-4 flex-1 min-w-0\">\n              <Button variant=\"ghost\" size=\"icon\" asChild>\n                <a href=\"/courses\" data-testid=\"button-back-courses\">\n                  <ChevronLeft className=\"h-5 w-5\" />\n                </a>\n              </Button>\n              <div className=\"flex-1 min-w-0\">\n                <h1 className=\"text-lg font-heading font-bold text-foreground truncate\">\n                  {language === \"ar\" ? course.titleAr : course.titleEn}\n                </h1>\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                  <span>\n                    {completedLessons} / {totalLessons} {language === \"ar\" ? \"ŸÖŸÉÿ™ŸÖŸÑ\" : \"completed\"}\n                  </span>\n                  <span>‚Ä¢</span>\n                  <span>{Math.round(progressPercentage)}%</span>\n                </div>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Progress value={progressPercentage} className=\"w-24 h-2\" />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content Area - Mobile Responsive */}\n      <div className=\"flex-1 flex flex-col lg:flex-row\">\n        {/* Video & Content Area */}\n        <div className={`flex-1 transition-all ${sidebarCollapsed ? \"w-full\" : \"w-full lg:mr-80 xl:mr-96\"}`}>\n          {/* Video Player */}\n          <div className=\"bg-black select-none w-full\">\n            <video\n              ref={videoRef}\n              className=\"w-full aspect-video pointer-events-auto\"\n              controls\n              src={videoSrc}\n              data-testid=\"video-player\"\n              controlsList=\"nodownload\"\n              onContextMenu={handleVideoContextMenu}\n              onDragStart={handleVideoDragStart}\n              style={{\n                userSelect: \"none\",\n                WebkitUserSelect: \"none\",\n                MsUserSelect: \"none\",\n              }}\n            >\n              {language === \"ar\"\n                ? \"ŸÖÿ™ÿµŸÅÿ≠ŸÉ ŸÑÿß ŸäÿØÿπŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÅŸäÿØŸäŸà\"\n                : \"Your browser does not support the video tag.\"}\n            </video>\n          </div>\n\n          {/* Navigation Buttons - Mobile Responsive */}\n          <div className=\"border-b bg-background w-full\">\n            <div className=\"px-3 sm:px-4 md:px-6 py-3 sm:py-4\">\n              <div className=\"flex items-center justify-between gap-2 sm:gap-4\">\n                <Button\n                  variant=\"default\"\n                  size=\"sm\"\n                  onClick={() => setCurrentLessonIndex(currentLessonIndex - 1)}\n                  disabled={!canGoPrev}\n                  data-testid=\"button-prev-lesson\"\n                  className=\"flex-1 sm:flex-none\"\n                >\n                  <ChevronLeft className=\"h-4 w-4 mr-1 sm:mr-2\" />\n                  <span className=\"hidden sm:inline\">{language === \"ar\" ? \"ÿßŸÑÿ≥ÿßÿ®ŸÇ\" : \"Previous\"}</span>\n                </Button>\n                <div className=\"hidden sm:flex items-center gap-2 text-sm text-muted-foreground\">\n                  <span>{currentLessonIndex + 1}</span>\n                  <span>/</span>\n                  <span>{lessons.length}</span>\n                </div>\n                <Button\n                  variant=\"default\"\n                  size=\"sm\"\n                  onClick={() => setCurrentLessonIndex(currentLessonIndex + 1)}\n                  disabled={!canGoNext || !isLessonAccessible(lessons[currentLessonIndex + 1], currentLessonIndex + 1)}\n                  data-testid=\"button-next-lesson\"\n                  className=\"flex-1 sm:flex-none\"\n                >\n                  <span className=\"hidden sm:inline\">{language === \"ar\" ? \"ÿßŸÑÿ™ÿßŸÑŸä\" : \"Next\"}</span>\n                  <ChevronRight className=\"h-4 w-4 ml-1 sm:ml-2\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          {/* Tabbed Content - Mobile Responsive */}\n          <div className=\"w-full px-3 sm:px-4 md:px-6 py-4 sm:py-6\">\n            <Tabs defaultValue=\"overview\" className=\"w-full\">\n              <TabsList data-testid=\"tabs-content\" className=\"grid w-full grid-cols-3 sm:inline-flex\">\n                <TabsTrigger value=\"overview\" data-testid=\"tab-overview\" className=\"text-xs sm:text-sm\">\n                  {language === \"ar\" ? \"ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ©\" : \"Overview\"}\n                </TabsTrigger>\n                <TabsTrigger value=\"resources\" data-testid=\"tab-resources\" className=\"text-xs sm:text-sm\">\n                  {language === \"ar\" ? \"ÿßŸÑŸÖŸàÿßÿ±ÿØ\" : \"Resources\"}\n                </TabsTrigger>\n                <TabsTrigger value=\"meetings\" data-testid=\"tab-meetings\" className=\"text-xs sm:text-sm\">\n                  {language === \"ar\" ? \"ÿßŸÑÿ¨ŸÑÿ≥ÿßÿ™\" : \"Sessions\"}\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"overview\" className=\"mt-4 sm:mt-6\">\n                <div className=\"space-y-4 sm:space-y-6\">\n                  <div>\n                    <h2 className=\"text-xl sm:text-2xl font-heading font-bold text-foreground mb-2\">\n                      {language === \"ar\" ? currentLesson?.titleAr : currentLesson?.titleEn}\n                    </h2>\n                    <p className=\"text-sm sm:text-base text-muted-foreground\">\n                      {language === \"ar\" ? currentLesson?.descriptionAr : currentLesson?.descriptionEn}\n                    </p>\n                  </div>\n\n                  <Separator />\n\n                  <div>\n                    <h3 className=\"text-lg sm:text-xl font-heading font-semibold text-foreground mb-4\">\n                      {language === \"ar\" ? \"ÿπŸÜ Ÿáÿ∞Ÿá ÿßŸÑÿØŸàÿ±ÿ©\" : \"About this Course\"}\n                    </h3>\n                    <p className=\"text-sm sm:text-base text-muted-foreground mb-4\">\n                      {language === \"ar\" ? course.descriptionAr : course.descriptionEn}\n                    </p>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-4\">\n                      <div className=\"p-2 sm:p-4 border rounded-lg\">\n                        <p className=\"text-xs sm:text-sm text-muted-foreground mb-1\">\n                          {language === \"ar\" ? \"ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ\" : \"Level\"}\n                        </p>\n                        <p className=\"text-sm sm:text-base font-semibold text-foreground\">\n                          {t(\"courses.level\")} {course.level}\n                        </p>\n                      </div>\n                      <div className=\"p-2 sm:p-4 border rounded-lg\">\n                        <p className=\"text-xs sm:text-sm text-muted-foreground mb-1\">\n                          {language === \"ar\" ? \"ÿßŸÑÿØÿ±Ÿàÿ≥\" : \"Lessons\"}\n                        </p>\n                        <p className=\"text-sm sm:text-base font-semibold text-foreground\">{totalLessons}</p>\n                      </div>\n                      <div className=\"p-2 sm:p-4 border rounded-lg\">\n                        <p className=\"text-xs sm:text-sm text-muted-foreground mb-1\">\n                          {language === \"ar\" ? \"ÿßŸÑŸÖÿØÿ©\" : \"Duration\"}\n                        </p>\n                        <p className=\"text-sm sm:text-base font-semibold text-foreground\">\n                          {course.duration || 8} {t(\"courses.hours\")}\n                        </p>\n                      </div>\n                      <div className=\"p-2 sm:p-4 border rounded-lg\">\n                        <p className=\"text-xs sm:text-sm text-muted-foreground mb-1\">\n                          {language === \"ar\" ? \"ÿßŸÑŸÖÿØÿ±ÿ®\" : \"Instructor\"}\n                        </p>\n                        <p className=\"text-sm sm:text-base font-semibold text-foreground\">\n                          {language === \"ar\" ? course.instructorAr : course.instructorEn}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"resources\" className=\"mt-6\">\n                {resources && resources.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    {resources.map((resource) => (\n                      <Card key={resource.id} className=\"hover-elevate\" data-testid={`card-resource-${resource.id}`}>\n                        <CardContent className=\"p-4 sm:p-6\">\n                          <div className=\"flex items-start gap-4\">\n                            <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\n                              {resource.fileType === \"link\" ? (\n                                <LinkIcon className=\"h-6 w-6 text-primary\" />\n                              ) : (\n                                <FileText className=\"h-6 w-6 text-primary\" />\n                              )}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <h3 className=\"font-semibold text-foreground mb-1 truncate\">\n                                {language === \"ar\" ? resource.titleAr : resource.titleEn}\n                              </h3>\n                              <p className=\"text-sm text-muted-foreground mb-3 line-clamp-2\">\n                                {language === \"ar\" ? resource.descriptionAr : resource.descriptionEn}\n                              </p>\n                              <div className=\"flex flex-wrap items-center gap-2 text-xs text-muted-foreground\">\n                                {resource.fileType !== \"link\" && resource.fileSize && (\n                                  <>\n                                    <span>{(resource.fileSize / (1024 * 1024)).toFixed(2)} MB</span>\n                                    <span>‚Ä¢</span>\n                                  </>\n                                )}\n                                <span>{resource.fileName}</span>\n                              </div>\n                            </div>\n                            <div className=\"flex-shrink-0\">\n                              {resource.fileType === \"link\" ? (\n                                <Button asChild size=\"sm\" variant=\"default\" data-testid={`button-open-resource-${resource.id}`}>\n                                  <a href={resource.fileUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                                    <LinkIcon className=\"h-4 w-4 mr-2\" />\n                                    {language === \"ar\" ? \"ŸÅÿ™ÿ≠\" : \"Open\"}\n                                  </a>\n                                </Button>\n                              ) : (\n                                <Button asChild size=\"sm\" variant=\"default\" data-testid={`button-download-resource-${resource.id}`}>\n                                  <a href={resource.fileUrl} download data-testid={`link-download-${resource.id}`}>\n                                    <Download className=\"h-4 w-4 mr-2\" />\n                                    {language === \"ar\" ? \"ÿ™ÿ≠ŸÖŸäŸÑ\" : \"Download\"}\n                                  </a>\n                                </Button>\n                              )}\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    ))}\n                  </div>\n                ) : (\n                  <Card>\n                    <CardContent className=\"p-6\">\n                      <p className=\"text-muted-foreground text-center\">\n                        {language === \"ar\"\n                          ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖŸàÿßÿ±ÿØ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÑŸáÿ∞Ÿá ÿßŸÑÿØŸàÿ±ÿ©\"\n                          : \"No additional resources for this course\"}\n                      </p>\n                    </CardContent>\n                  </Card>\n                )}\n              </TabsContent>\n\n              <TabsContent value=\"meetings\" className=\"mt-6\">\n                <div className=\"space-y-4\">\n                  {meetings && meetings.length > 0 ? (\n                    meetings.map((meeting) => (\n                      <Card key={meeting.id} data-testid={`card-meeting-${meeting.id}`}>\n                        <CardContent className=\"p-6\">\n                          <div className=\"flex items-start gap-4\">\n                            <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\n                              <Calendar className=\"h-6 w-6 text-primary\" />\n                            </div>\n                            <div className=\"flex-1\">\n                              <h3 className=\"font-semibold text-foreground mb-1\">\n                                {language === \"ar\" ? meeting.titleAr : meeting.titleEn}\n                              </h3>\n                              <p className=\"text-sm text-muted-foreground mb-3\">\n                                {new Date(meeting.scheduledAt).toLocaleString(language === \"ar\" ? \"ar\" : \"en\")}\n                              </p>\n                              {!meeting.isPaidOnly || !isLocked ? (\n                                <Button asChild size=\"sm\" data-testid={`button-join-meeting-${meeting.id}`}>\n                                  <a href={meeting.zoomLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                                    {language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ÿßŸÑÿ¢ŸÜ\" : \"Join Now\"}\n                                  </a>\n                                </Button>\n                              ) : (\n                                <Badge variant=\"secondary\">\n                                  <Lock className=\"h-3 w-3 mr-1\" />\n                                  {language === \"ar\" ? \"Ÿäÿ™ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉÿßŸã\" : \"Subscription Required\"}\n                                </Badge>\n                              )}\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    ))\n                  ) : (\n                    <Card>\n                      <CardContent className=\"p-6\">\n                        <p className=\"text-muted-foreground text-center\">\n                          {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ¨ŸÑÿ≥ÿßÿ™ ŸÖÿ¨ÿØŸàŸÑÿ©\" : \"No scheduled sessions\"}\n                        </p>\n                      </CardContent>\n                    </Card>\n                  )}\n                </div>\n              </TabsContent>\n            </Tabs>\n          </div>\n        </div>\n\n        {/* Lessons Sidebar - Hidden on mobile */}\n        <div className=\"hidden lg:flex fixed right-0 top-[73px] bottom-0 w-80 xl:w-96 bg-background border-l flex-col\">\n          <div className=\"p-4 border-b\">\n            <h2 className=\"font-heading font-bold text-foreground mb-2\">\n              {language === \"ar\" ? \"ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿØŸàÿ±ÿ©\" : \"Course Content\"}\n            </h2>\n            <p className=\"text-sm text-muted-foreground\">\n              {completedLessons} / {totalLessons} {language === \"ar\" ? \"ÿØÿ±Ÿàÿ≥ ŸÖŸÉÿ™ŸÖŸÑÿ©\" : \"lessons completed\"}\n            </p>\n          </div>\n\n          <ScrollArea className=\"flex-1\">\n            <div className=\"p-4 space-y-2\">\n              {lessons.map((lesson, index) => {\n                const isCompleted = userProgress?.some((p) => p.lessonId === lesson.id && p.completed);\n                const isAccessible = isLessonAccessible(lesson, index);\n                const isCurrent = index === currentLessonIndex;\n\n                return (\n                  <button\n                    key={lesson.id}\n                    onClick={() => isAccessible && setCurrentLessonIndex(index)}\n                    disabled={!isAccessible}\n                    className={`w-full p-3 rounded-lg text-left transition-all hover-elevate active-elevate-2 disabled:opacity-50 disabled:cursor-not-allowed ${\n                      isCurrent ? \"bg-primary/10 border-l-4 border-l-primary\" : \"bg-muted/30\"\n                    }`}\n                    data-testid={`button-select-lesson-${index}`}\n                  >\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"flex-shrink-0 pt-1\">\n                        {isCompleted ? (\n                          <CheckCircle2 className=\"h-5 w-5 text-green-500\" />\n                        ) : !isAccessible ? (\n                          <Lock className=\"h-5 w-5 text-muted-foreground\" />\n                        ) : isCurrent ? (\n                          <PlayCircle className=\"h-5 w-5 text-primary\" />\n                        ) : (\n                          <Play className=\"h-5 w-5 text-muted-foreground\" />\n                        )}\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className={`font-medium text-sm mb-1 ${isAccessible ? \"text-foreground\" : \"text-muted-foreground\"}`}>\n                          {index + 1}. {language === \"ar\" ? lesson.titleAr : lesson.titleEn}\n                        </p>\n                        <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                          <Clock className=\"h-3 w-3\" />\n                          <span>\n                            {lesson.duration} {language === \"ar\" ? \"ÿØŸÇŸäŸÇÿ©\" : \"min\"}\n                          </span>\n                          {!isAccessible && lesson.requiresPrevious && (\n                            <>\n                              <span>‚Ä¢</span>\n                              <Lock className=\"h-3 w-3\" />\n                            </>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  </button>\n                );\n              })}\n            </div>\n          </ScrollArea>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
            "size_bytes": 27738
        },
        "server/storage.ts": {
            "content": "import { db } from \"./db\";\nimport { \n  users, \n  courses, \n  lessons, \n  courseResources,\n  subscriptionPlans, \n  subscriptions,\n  payments,\n  progress,\n  meetings,\n  testimonials,\n  paymentSettings,\n  settings,\n  referralTransactions,\n  withdrawalRequests,\n  adminLogs,\n  type User,\n  type UpsertUser,\n  type Course,\n  type InsertCourse,\n  type Lesson,\n  type InsertLesson,\n  type CourseResource,\n  type InsertCourseResource,\n  type SubscriptionPlan,\n  type InsertSubscriptionPlan,\n  type Subscription,\n  type InsertSubscription,\n  type Payment,\n  type InsertPayment,\n  type Progress,\n  type InsertProgress,\n  type Meeting,\n  type InsertMeeting,\n  type Testimonial,\n  type InsertTestimonial,\n  type PaymentSettings,\n  type InsertPaymentSettings,\n  type Setting,\n  type ReferralTransaction,\n  type InsertReferralTransaction,\n  type WithdrawalRequest,\n  type InsertWithdrawalRequest,\n  type AdminLog,\n  type InsertAdminLog,\n} from \"@shared/schema\";\nimport { eq, and, desc, gte, lte } from \"drizzle-orm\";\nimport bcrypt from \"bcrypt\";\n\nexport interface IStorage {\n  // User methods\n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  getUserByReferralCode(code: string): Promise<User | undefined>;\n  createUser(userData: { email: string; password: string; firstName: string; lastName: string; phone?: string; referredBy?: string }): Promise<User>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  getAllUsers(): Promise<User[]>;\n  updateUser(id: string, data: Partial<User>): Promise<User>;\n  getReferralCount(userId: string): Promise<number>;\n  getReferralStats(userId: string): Promise<{ count: number; earnings: string; transactions: ReferralTransaction[] }>;\n  addReferralEarnings(referrerId: string, referredUserId: string, amount: number): Promise<ReferralTransaction>;\n  validateUserPassword(email: string, password: string): Promise<User | null>;\n  deactivateUser(userId: string): Promise<User>;\n  activateUser(userId: string): Promise<User>;\n  deleteUser(userId: string): Promise<void>;\n  cancelUserSubscription(userId: string): Promise<User>;\n  \n  // Course methods\n  getCourse(id: string): Promise<Course | undefined>;\n  getAllCourses(): Promise<Course[]>;\n  createCourse(course: InsertCourse): Promise<Course>;\n  updateCourse(id: string, data: Partial<Course>): Promise<Course>;\n  deleteCourse(id: string): Promise<void>;\n  \n  // Lesson methods\n  getLesson(id: string): Promise<Lesson | undefined>;\n  getLessonsByCourse(courseId: string): Promise<Lesson[]>;\n  createLesson(lesson: InsertLesson): Promise<Lesson>;\n  updateLesson(id: string, data: Partial<Lesson>): Promise<Lesson>;\n  deleteLesson(id: string): Promise<void>;\n  \n  // Course Resources methods\n  getCourseResource(id: string): Promise<CourseResource | undefined>;\n  getCourseResources(courseId: string): Promise<CourseResource[]>;\n  createCourseResource(resource: InsertCourseResource): Promise<CourseResource>;\n  updateCourseResource(id: string, data: Partial<CourseResource>): Promise<CourseResource>;\n  deleteCourseResource(id: string): Promise<void>;\n  \n  // Subscription Plan methods\n  getSubscriptionPlan(id: string): Promise<SubscriptionPlan | undefined>;\n  getAllSubscriptionPlans(): Promise<SubscriptionPlan[]>;\n  createSubscriptionPlan(plan: InsertSubscriptionPlan): Promise<SubscriptionPlan>;\n  updateSubscriptionPlan(id: string, data: Partial<SubscriptionPlan>): Promise<SubscriptionPlan>;\n  \n  // Subscription methods\n  getUserSubscription(userId: string): Promise<Subscription | undefined>;\n  createSubscription(subscription: InsertSubscription): Promise<Subscription>;\n  updateSubscription(id: string, data: Partial<Subscription>): Promise<Subscription>;\n  \n  // Payment methods\n  getPayment(id: string): Promise<Payment | undefined>;\n  getAllPayments(): Promise<Payment[]>;\n  getUserPayments(userId: string): Promise<Payment[]>;\n  createPayment(payment: InsertPayment): Promise<Payment>;\n  updatePayment(id: string, data: Partial<Payment>): Promise<Payment>;\n  \n  // Progress methods\n  getUserProgress(userId: string): Promise<Progress[]>;\n  getCourseProgress(userId: string, courseId: string): Promise<Progress[]>;\n  upsertProgress(progressData: InsertProgress): Promise<Progress>;\n  \n  // Meeting methods\n  getMeeting(id: string): Promise<Meeting | undefined>;\n  getCourseMeetings(courseId: string): Promise<Meeting[]>;\n  getAllMeetings(): Promise<Meeting[]>;\n  createMeeting(meeting: InsertMeeting): Promise<Meeting>;\n  updateMeeting(id: string, data: Partial<Meeting>): Promise<Meeting>;\n  deleteMeeting(id: string): Promise<void>;\n  \n  // Testimonial methods\n  getAllTestimonials(): Promise<Testimonial[]>;\n  createTestimonial(testimonial: InsertTestimonial): Promise<Testimonial>;\n  \n  // Stats methods\n  getStats(): Promise<{ userCount: number; courseCount: number; satisfactionRate: number }>;\n  \n  // Analytics methods\n  getAnalytics(): Promise<{\n    revenueTrends: { \n      daily: Array<{ date: string; amount: number }>; \n      weekly: Array<{ week: string; amount: number }>; \n      monthly: Array<{ month: string; amount: number }>;\n    };\n    userRegistrationTrends: Array<{ month: string; count: number }>;\n    courseEnrollments: Array<{ courseId: string; courseName: string; count: number }>;\n    topCourses: Array<{ id: string; titleEn: string; titleAr: string; enrollments: number }>;\n    paymentStatusBreakdown: { pending: number; approved: number; rejected: number };\n  }>;\n  \n  // Payment Settings methods\n  getPaymentSettings(): Promise<PaymentSettings | undefined>;\n  upsertPaymentSettings(settings: InsertPaymentSettings): Promise<PaymentSettings>;\n  \n  // Settings methods\n  getSetting(key: string): Promise<Setting | undefined>;\n  getAllSettings(): Promise<Setting[]>;\n  upsertSetting(key: string, value: string): Promise<Setting>;\n\n  // Withdrawal methods\n  createWithdrawalRequest(data: InsertWithdrawalRequest): Promise<WithdrawalRequest>;\n  getUserWithdrawals(userId: string): Promise<WithdrawalRequest[]>;\n  getAllWithdrawalRequests(): Promise<WithdrawalRequest[]>;\n  approveWithdrawal(withdrawalId: string, adminNotes?: string): Promise<WithdrawalRequest>;\n  rejectWithdrawal(withdrawalId: string, adminNotes?: string): Promise<WithdrawalRequest>;\n\n  // Admin Logs methods\n  createAdminLog(log: InsertAdminLog): Promise<AdminLog>;\n  getAllAdminLogs(): Promise<AdminLog[]>;\n  getAdminLogsByDateRange(startDate: Date, endDate: Date): Promise<AdminLog[]>;\n  getAdminLogsByPage(page: string): Promise<AdminLog[]>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User methods\n  async getUser(id: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.email, email)).limit(1);\n    return result[0];\n  }\n\n  async getUserByReferralCode(code: string): Promise<User | undefined> {\n    const result = await db.select().from(users).where(eq(users.referralCode, code)).limit(1);\n    return result[0];\n  }\n\n  async createUser(userData: { email: string; password: string; firstName: string; lastName: string; phone?: string; referredBy?: string }): Promise<User> {\n    // Hash the password\n    const passwordHash = await bcrypt.hash(userData.password, 10);\n    \n    // Generate unique referral code\n    let referralCode = this.generateReferralCode();\n    let isUnique = false;\n    while (!isUnique) {\n      const existing = await this.getUserByReferralCode(referralCode);\n      if (!existing) {\n        isUnique = true;\n      } else {\n        referralCode = this.generateReferralCode();\n      }\n    }\n\n    // Create user\n    const [newUser] = await db.insert(users).values({\n      email: userData.email,\n      passwordHash,\n      firstName: userData.firstName,\n      lastName: userData.lastName,\n      phone: userData.phone,\n      referralCode,\n      referredBy: userData.referredBy || null,\n    }).returning();\n\n    return newUser;\n  }\n\n  async validateUserPassword(email: string, password: string): Promise<User | null> {\n    const user = await this.getUserByEmail(email);\n    if (!user) return null;\n\n    const isValid = await bcrypt.compare(password, user.passwordHash);\n    return isValid ? user : null;\n  }\n\n  private generateReferralCode(): string {\n    const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';\n    let code = '';\n    for (let i = 0; i < 8; i++) {\n      code += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return code;\n  }\n\n  async upsertUser(user: UpsertUser): Promise<User> {\n    const existing = user.email ? await this.getUserByEmail(user.email) : null;\n    \n    if (existing) {\n      const [updated] = await db\n        .update(users)\n        .set({ ...user, updatedAt: new Date() })\n        .where(eq(users.id, existing.id))\n        .returning();\n      return updated;\n    }\n    \n    const [newUser] = await db.insert(users).values(user).returning();\n    return newUser;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users).orderBy(desc(users.createdAt));\n  }\n\n  async updateUser(id: string, data: Partial<User>): Promise<User> {\n    const [updated] = await db\n      .update(users)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(users.id, id))\n      .returning();\n    return updated;\n  }\n\n  async getReferralCount(userId: string): Promise<number> {\n    const user = await this.getUser(userId);\n    if (!user?.referralCode) return 0;\n    \n    const referrals = await db\n      .select()\n      .from(users)\n      .where(eq(users.referredBy, user.referralCode));\n    return referrals.length;\n  }\n\n  async getReferralStats(userId: string): Promise<{ count: number; earnings: string; transactions: ReferralTransaction[] }> {\n    const user = await this.getUser(userId);\n    if (!user) return { count: 0, earnings: \"0\", transactions: [] };\n\n    const transactions = await db.query.referralTransactions.findMany({\n      where: (t) => eq(t.referrerId, userId),\n    });\n\n    return {\n      count: user.referralCount || 0,\n      earnings: user.referralEarnings || \"0\",\n      transactions,\n    };\n  }\n\n  async addReferralEarnings(referrerId: string, referredUserId: string, amount: number): Promise<ReferralTransaction> {\n    const transaction = await db.insert(referralTransactions).values({\n      referrerId,\n      referredUserId,\n      amount: amount.toString(),\n      status: \"completed\",\n    }).returning().then(r => r[0]);\n\n    // Update referrer's earnings and count\n    const referrer = await this.getUser(referrerId);\n    if (referrer) {\n      const currentEarnings = parseFloat(referrer.referralEarnings || \"0\");\n      const newCount = (referrer.referralCount || 0) + 1;\n      await db.update(users).set({\n        referralEarnings: (currentEarnings + amount).toString(),\n        referralCount: newCount,\n      }).where(eq(users.id, referrerId));\n    }\n\n    return transaction;\n  }\n\n  async deactivateUser(userId: string): Promise<User> {\n    const [updated] = await db\n      .update(users)\n      .set({ isActive: false, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return updated;\n  }\n\n  async activateUser(userId: string): Promise<User> {\n    const [updated] = await db\n      .update(users)\n      .set({ isActive: true, updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return updated;\n  }\n\n  async deleteUser(userId: string): Promise<void> {\n    await db.update(payments).set({ reviewedBy: null }).where(eq(payments.reviewedBy, userId));\n    await db.delete(testimonials).where(eq(testimonials.userId, userId));\n    await db.delete(progress).where(eq(progress.userId, userId));\n    await db.delete(payments).where(eq(payments.userId, userId));\n    await db.delete(subscriptions).where(eq(subscriptions.userId, userId));\n    await db.delete(users).where(eq(users.id, userId));\n  }\n\n  async cancelUserSubscription(userId: string): Promise<User> {\n    const subscription = await db\n      .select()\n      .from(subscriptions)\n      .where(eq(subscriptions.userId, userId))\n      .limit(1);\n    \n    if (subscription.length > 0) {\n      await db\n        .update(subscriptions)\n        .set({ status: 'cancelled' })\n        .where(eq(subscriptions.userId, userId));\n    }\n    \n    const [updated] = await db\n      .update(users)\n      .set({ subscriptionStatus: 'cancelled', updatedAt: new Date() })\n      .where(eq(users.id, userId))\n      .returning();\n    return updated;\n  }\n\n  // Course methods\n  async getCourse(id: string): Promise<Course | undefined> {\n    const result = await db.select().from(courses).where(eq(courses.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getAllCourses(): Promise<Course[]> {\n    return await db.select().from(courses).orderBy(courses.level);\n  }\n\n  async createCourse(course: InsertCourse): Promise<Course> {\n    const [newCourse] = await db.insert(courses).values(course).returning();\n    return newCourse;\n  }\n\n  async updateCourse(id: string, data: Partial<Course>): Promise<Course> {\n    const [updated] = await db\n      .update(courses)\n      .set({ ...data, updatedAt: new Date() })\n      .where(eq(courses.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteCourse(id: string): Promise<void> {\n    await db.delete(courses).where(eq(courses.id, id));\n  }\n\n  // Lesson methods\n  async getLesson(id: string): Promise<Lesson | undefined> {\n    const result = await db.select().from(lessons).where(eq(lessons.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getLessonsByCourse(courseId: string): Promise<Lesson[]> {\n    return await db\n      .select()\n      .from(lessons)\n      .where(eq(lessons.courseId, courseId))\n      .orderBy(lessons.order);\n  }\n\n  async createLesson(lesson: InsertLesson): Promise<Lesson> {\n    const [newLesson] = await db.insert(lessons).values(lesson).returning();\n    return newLesson;\n  }\n\n  async updateLesson(id: string, data: Partial<Lesson>): Promise<Lesson> {\n    const [updated] = await db\n      .update(lessons)\n      .set(data)\n      .where(eq(lessons.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteLesson(id: string): Promise<void> {\n    await db.delete(lessons).where(eq(lessons.id, id));\n  }\n\n  // Course Resources methods\n  async getCourseResource(id: string): Promise<CourseResource | undefined> {\n    const result = await db\n      .select()\n      .from(courseResources)\n      .where(eq(courseResources.id, id))\n      .limit(1);\n    return result[0];\n  }\n\n  async getCourseResources(courseId: string): Promise<CourseResource[]> {\n    return await db\n      .select()\n      .from(courseResources)\n      .where(eq(courseResources.courseId, courseId))\n      .orderBy(courseResources.order);\n  }\n\n  async createCourseResource(resource: InsertCourseResource): Promise<CourseResource> {\n    const [newResource] = await db.insert(courseResources).values(resource).returning();\n    return newResource;\n  }\n\n  async updateCourseResource(id: string, data: Partial<CourseResource>): Promise<CourseResource> {\n    const [updated] = await db\n      .update(courseResources)\n      .set(data)\n      .where(eq(courseResources.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteCourseResource(id: string): Promise<void> {\n    await db.delete(courseResources).where(eq(courseResources.id, id));\n  }\n\n  // Subscription Plan methods\n  async getSubscriptionPlan(id: string): Promise<SubscriptionPlan | undefined> {\n    const result = await db\n      .select()\n      .from(subscriptionPlans)\n      .where(eq(subscriptionPlans.id, id))\n      .limit(1);\n    return result[0];\n  }\n\n  async getAllSubscriptionPlans(): Promise<SubscriptionPlan[]> {\n    return await db.select().from(subscriptionPlans);\n  }\n\n  async createSubscriptionPlan(plan: InsertSubscriptionPlan): Promise<SubscriptionPlan> {\n    const [newPlan] = await db.insert(subscriptionPlans).values(plan).returning();\n    return newPlan;\n  }\n\n  async updateSubscriptionPlan(\n    id: string,\n    data: Partial<SubscriptionPlan>\n  ): Promise<SubscriptionPlan> {\n    const [updated] = await db\n      .update(subscriptionPlans)\n      .set(data)\n      .where(eq(subscriptionPlans.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteSubscriptionPlan(id: string): Promise<void> {\n    await db.delete(subscriptionPlans).where(eq(subscriptionPlans.id, id));\n  }\n\n  // Subscription methods\n  async getUserSubscription(userId: string): Promise<Subscription | undefined> {\n    const result = await db\n      .select()\n      .from(subscriptions)\n      .where(eq(subscriptions.userId, userId))\n      .orderBy(desc(subscriptions.createdAt))\n      .limit(1);\n    return result[0];\n  }\n\n  async createSubscription(subscription: InsertSubscription): Promise<Subscription> {\n    const [newSub] = await db.insert(subscriptions).values(subscription).returning();\n    return newSub;\n  }\n\n  async updateSubscription(id: string, data: Partial<Subscription>): Promise<Subscription> {\n    const [updated] = await db\n      .update(subscriptions)\n      .set(data)\n      .where(eq(subscriptions.id, id))\n      .returning();\n    return updated;\n  }\n\n  // Payment methods\n  async getPayment(id: string): Promise<Payment | undefined> {\n    const result = await db.select().from(payments).where(eq(payments.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getAllPayments(): Promise<Payment[]> {\n    return await db.select().from(payments).orderBy(desc(payments.createdAt));\n  }\n\n  async getUserPayments(userId: string): Promise<Payment[]> {\n    return await db\n      .select()\n      .from(payments)\n      .where(eq(payments.userId, userId))\n      .orderBy(desc(payments.createdAt));\n  }\n\n  async createPayment(payment: InsertPayment): Promise<Payment> {\n    const user = await this.getUser(payment.userId);\n    const paymentData = {\n      ...payment,\n      userName: user ? `${user.firstName} ${user.lastName}` : undefined,\n      userEmail: user?.email,\n    };\n    const [newPayment] = await db.insert(payments).values(paymentData).returning();\n    return newPayment;\n  }\n\n  async updatePayment(id: string, data: Partial<Payment>): Promise<Payment> {\n    const [updated] = await db\n      .update(payments)\n      .set(data)\n      .where(eq(payments.id, id))\n      .returning();\n    return updated;\n  }\n\n  // Progress methods\n  async getUserProgress(userId: string): Promise<Progress[]> {\n    return await db.select().from(progress).where(eq(progress.userId, userId));\n  }\n\n  async getCourseProgress(userId: string, courseId: string): Promise<Progress[]> {\n    return await db\n      .select()\n      .from(progress)\n      .where(and(eq(progress.userId, userId), eq(progress.courseId, courseId)));\n  }\n\n  async upsertProgress(progressData: InsertProgress): Promise<Progress> {\n    const existing = await db\n      .select()\n      .from(progress)\n      .where(\n        and(\n          eq(progress.userId, progressData.userId),\n          eq(progress.lessonId, progressData.lessonId)\n        )\n      )\n      .limit(1);\n\n    if (existing.length > 0) {\n      const [updated] = await db\n        .update(progress)\n        .set({ ...progressData, lastAccessedAt: new Date() })\n        .where(eq(progress.id, existing[0].id))\n        .returning();\n      return updated;\n    }\n\n    const [newProgress] = await db.insert(progress).values(progressData).returning();\n    return newProgress;\n  }\n\n  // Meeting methods\n  async getMeeting(id: string): Promise<Meeting | undefined> {\n    const result = await db.select().from(meetings).where(eq(meetings.id, id)).limit(1);\n    return result[0];\n  }\n\n  async getCourseMeetings(courseId: string): Promise<Meeting[]> {\n    return await db\n      .select()\n      .from(meetings)\n      .where(eq(meetings.courseId, courseId))\n      .orderBy(meetings.scheduledAt);\n  }\n\n  async getAllMeetings(): Promise<Meeting[]> {\n    return await db.select().from(meetings).orderBy(meetings.scheduledAt);\n  }\n\n  async createMeeting(meeting: InsertMeeting): Promise<Meeting> {\n    const [newMeeting] = await db.insert(meetings).values(meeting).returning();\n    return newMeeting;\n  }\n\n  async updateMeeting(id: string, data: Partial<Meeting>): Promise<Meeting> {\n    const [updated] = await db\n      .update(meetings)\n      .set(data)\n      .where(eq(meetings.id, id))\n      .returning();\n    return updated;\n  }\n\n  async deleteMeeting(id: string): Promise<void> {\n    await db.delete(meetings).where(eq(meetings.id, id));\n  }\n\n  // Testimonial methods\n  async getAllTestimonials(): Promise<Testimonial[]> {\n    return await db.select().from(testimonials);\n  }\n\n  async createTestimonial(testimonial: InsertTestimonial): Promise<Testimonial> {\n    const [newTestimonial] = await db.insert(testimonials).values(testimonial).returning();\n    return newTestimonial;\n  }\n  \n  // Stats methods\n  async getStats(): Promise<{ userCount: number; courseCount: number; satisfactionRate: number }> {\n    const { sql } = await import(\"drizzle-orm\");\n    \n    const [{ userCount }] = await db\n      .select({ userCount: sql<number>`cast(count(*) as integer)` })\n      .from(users);\n    \n    const [{ courseCount }] = await db\n      .select({ courseCount: sql<number>`cast(count(*) as integer)` })\n      .from(courses);\n    \n    const [{ testimonialCount, totalRating }] = await db\n      .select({\n        testimonialCount: sql<number>`cast(count(*) as integer)`,\n        totalRating: sql<number>`cast(coalesce(sum(${testimonials.rating}), 0) as integer)`,\n      })\n      .from(testimonials);\n    \n    let satisfactionRate = 0;\n    if (testimonialCount > 0 && totalRating > 0) {\n      satisfactionRate = Math.round((totalRating / (testimonialCount * 5)) * 100);\n    }\n    \n    return {\n      userCount,\n      courseCount,\n      satisfactionRate,\n    };\n  }\n  \n  // Analytics methods\n  async getAnalytics() {\n    const allPayments = await db.select().from(payments);\n    const allUsers = await db.select().from(users);\n    const allSubscriptions = await db.select().from(subscriptions);\n    const allCourses = await db.select().from(courses);\n    \n    const now = new Date();\n    const approvedPayments = allPayments.filter(p => p.status === \"approved\" && p.createdAt);\n    \n    // Daily revenue (last 30 days) - backfill all days\n    const dailyRevenue = new Map<string, number>();\n    for (let i = 0; i < 30; i++) {\n      const date = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);\n      const dateStr = date.toISOString().split('T')[0];\n      dailyRevenue.set(dateStr, 0);\n    }\n    \n    approvedPayments.forEach(p => {\n      const paymentDate = new Date(p.createdAt!);\n      const daysDiff = Math.floor((now.getTime() - paymentDate.getTime()) / (24 * 60 * 60 * 1000));\n      if (daysDiff < 30) {\n        const dateStr = paymentDate.toISOString().split('T')[0];\n        dailyRevenue.set(dateStr, (dailyRevenue.get(dateStr) || 0) + parseFloat(p.amount));\n      }\n    });\n    \n    const daily = Array.from(dailyRevenue.entries())\n      .map(([date, amount]) => ({ date, amount: Math.round(amount * 100) / 100 }))\n      .sort((a, b) => a.date.localeCompare(b.date));\n    \n    // ISO Week calculation helper\n    const getISOWeek = (date: Date): string => {\n      const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\n      const dayNum = d.getUTCDay() || 7;\n      d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n      const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n      const weekNo = Math.ceil((((d.getTime() - yearStart.getTime()) / 86400000) + 1) / 7);\n      return `${d.getUTCFullYear()}-W${weekNo.toString().padStart(2, '0')}`;\n    };\n    \n    // Weekly revenue (last 12 weeks) - backfill all weeks\n    const weeklyRevenue = new Map<string, number>();\n    for (let i = 0; i < 12; i++) {\n      const date = new Date(now.getTime() - i * 7 * 24 * 60 * 60 * 1000);\n      const weekKey = getISOWeek(date);\n      weeklyRevenue.set(weekKey, 0);\n    }\n    \n    approvedPayments.forEach(p => {\n      const weekKey = getISOWeek(new Date(p.createdAt!));\n      if (weeklyRevenue.has(weekKey)) {\n        weeklyRevenue.set(weekKey, (weeklyRevenue.get(weekKey) || 0) + parseFloat(p.amount));\n      }\n    });\n    \n    const weekly = Array.from(weeklyRevenue.entries())\n      .map(([week, amount]) => ({ week, amount: Math.round(amount * 100) / 100 }))\n      .sort((a, b) => a.week.localeCompare(b.week));\n    \n    // Monthly revenue (last 12 months) - backfill all months\n    const monthlyRevenue = new Map<string, number>();\n    for (let i = 0; i < 12; i++) {\n      const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n      const monthKey = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}`;\n      monthlyRevenue.set(monthKey, 0);\n    }\n    \n    approvedPayments.forEach(p => {\n      const date = new Date(p.createdAt!);\n      const monthKey = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}`;\n      if (monthlyRevenue.has(monthKey)) {\n        monthlyRevenue.set(monthKey, (monthlyRevenue.get(monthKey) || 0) + parseFloat(p.amount));\n      }\n    });\n    \n    const monthly = Array.from(monthlyRevenue.entries())\n      .map(([month, amount]) => ({ month, amount: Math.round(amount * 100) / 100 }))\n      .sort((a, b) => a.month.localeCompare(b.month));\n    \n    // User registration trends (last 12 months) - backfill all months\n    const registrationTrends = new Map<string, number>();\n    for (let i = 0; i < 12; i++) {\n      const date = new Date(now.getFullYear(), now.getMonth() - i, 1);\n      const monthKey = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}`;\n      registrationTrends.set(monthKey, 0);\n    }\n    \n    allUsers.forEach(u => {\n      if (u.createdAt) {\n        const date = new Date(u.createdAt);\n        const monthKey = `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}`;\n        if (registrationTrends.has(monthKey)) {\n          registrationTrends.set(monthKey, (registrationTrends.get(monthKey) || 0) + 1);\n        }\n      }\n    });\n    \n    const userRegistrationTrends = Array.from(registrationTrends.entries())\n      .map(([month, count]) => ({ month, count }))\n      .sort((a, b) => a.month.localeCompare(b.month));\n    \n    // Course enrollments - count all subscriptions (since we don't have courseId in subscriptions)\n    const courseEnrollments = allCourses.map(course => ({\n      courseId: course.id,\n      courseName: course.titleEn,\n      count: Math.floor(allSubscriptions.length / Math.max(allCourses.length, 1)),\n    }));\n    \n    // Top performing courses - distribute enrollments evenly across courses\n    const enrollmentsPerCourse = Math.floor(allSubscriptions.length / Math.max(allCourses.length, 1));\n    const topCourses = allCourses\n      .map((course, idx) => ({\n        id: course.id,\n        titleEn: course.titleEn,\n        titleAr: course.titleAr,\n        enrollments: enrollmentsPerCourse + (idx === 0 ? allSubscriptions.length % allCourses.length : 0),\n      }))\n      .sort((a, b) => b.enrollments - a.enrollments)\n      .slice(0, 5);\n    \n    // Payment status breakdown\n    const paymentStatusBreakdown = {\n      pending: allPayments.filter(p => p.status === \"pending\").length,\n      approved: allPayments.filter(p => p.status === \"approved\").length,\n      rejected: allPayments.filter(p => p.status === \"rejected\").length,\n    };\n    \n    return {\n      revenueTrends: { daily, weekly, monthly },\n      userRegistrationTrends,\n      courseEnrollments,\n      topCourses,\n      paymentStatusBreakdown,\n    };\n  }\n  \n  // Payment Settings methods\n  async getPaymentSettings(): Promise<PaymentSettings | undefined> {\n    const result = await db.select().from(paymentSettings).limit(1);\n    return result[0];\n  }\n  \n  async upsertPaymentSettings(settings: InsertPaymentSettings): Promise<PaymentSettings> {\n    const existing = await this.getPaymentSettings();\n    \n    if (existing) {\n      const [updated] = await db\n        .update(paymentSettings)\n        .set({ ...settings, updatedAt: new Date() })\n        .where(eq(paymentSettings.id, existing.id))\n        .returning();\n      return updated;\n    }\n    \n    const [newSettings] = await db.insert(paymentSettings).values(settings).returning();\n    return newSettings;\n  }\n\n  // Settings methods\n  async getSetting(key: string): Promise<Setting | undefined> {\n    const [setting] = await db.select().from(settings).where(eq(settings.key, key)).limit(1);\n    return setting;\n  }\n\n  async getAllSettings(): Promise<Setting[]> {\n    return await db.select().from(settings);\n  }\n\n  async upsertSetting(key: string, value: string): Promise<Setting> {\n    const existing = await this.getSetting(key);\n    \n    if (existing) {\n      const [updated] = await db\n        .update(settings)\n        .set({ value, updatedAt: new Date() })\n        .where(eq(settings.key, key))\n        .returning();\n      return updated;\n    }\n    \n    const [newSetting] = await db.insert(settings).values({ key, value }).returning();\n    return newSetting;\n  }\n\n  // Withdrawal methods\n  async createWithdrawalRequest(data: InsertWithdrawalRequest): Promise<WithdrawalRequest> {\n    const [withdrawal] = await db.insert(withdrawalRequests).values(data).returning();\n    return withdrawal;\n  }\n\n  async getUserWithdrawals(userId: string): Promise<WithdrawalRequest[]> {\n    return await db\n      .select()\n      .from(withdrawalRequests)\n      .where(eq(withdrawalRequests.userId, userId))\n      .orderBy(desc(withdrawalRequests.createdAt));\n  }\n\n  async getAllWithdrawalRequests(): Promise<WithdrawalRequest[]> {\n    const results = await db\n      .select()\n      .from(withdrawalRequests)\n      .orderBy(desc(withdrawalRequests.createdAt));\n    return results;\n  }\n\n  async approveWithdrawal(withdrawalId: string, adminNotes?: string): Promise<WithdrawalRequest> {\n    // Get the withdrawal request\n    const [withdrawal] = await db\n      .select()\n      .from(withdrawalRequests)\n      .where(eq(withdrawalRequests.id, withdrawalId))\n      .limit(1);\n\n    if (!withdrawal) {\n      throw new Error(\"Withdrawal request not found\");\n    }\n\n    // Reset user's referral earnings to 0\n    await db\n      .update(users)\n      .set({ \n        referralEarnings: \"0\",\n        updatedAt: new Date()\n      })\n      .where(eq(users.id, withdrawal.userId));\n\n    // Update withdrawal status to completed\n    const [updated] = await db\n      .update(withdrawalRequests)\n      .set({\n        status: \"completed\",\n        approvedAt: new Date(),\n        adminNotes,\n      })\n      .where(eq(withdrawalRequests.id, withdrawalId))\n      .returning();\n\n    return updated;\n  }\n\n  async rejectWithdrawal(withdrawalId: string, adminNotes?: string): Promise<WithdrawalRequest> {\n    const [updated] = await db\n      .update(withdrawalRequests)\n      .set({\n        status: \"rejected\",\n        adminNotes,\n      })\n      .where(eq(withdrawalRequests.id, withdrawalId))\n      .returning();\n\n    return updated;\n  }\n\n  // Admin Logs methods\n  async createAdminLog(log: InsertAdminLog): Promise<AdminLog> {\n    const [newLog] = await db.insert(adminLogs).values(log).returning();\n    return newLog;\n  }\n\n  async getAllAdminLogs(): Promise<AdminLog[]> {\n    console.log(\"üíæ [STORAGE] Fetching ALL admin logs from database\");\n    const logs = await db.select().from(adminLogs).orderBy(desc(adminLogs.createdAt));\n    console.log(\"‚úÖ [STORAGE] Found admin logs:\", logs.length, \"entries\");\n    if (logs.length > 0) {\n      console.log(\"üìã [STORAGE] First log:\", logs[0]);\n    }\n    return logs;\n  }\n\n  async getAdminLogsByDateRange(startDate: Date, endDate: Date): Promise<AdminLog[]> {\n    console.log(\"üíæ [STORAGE] Fetching admin logs by date range:\", {\n      start: startDate.toISOString(),\n      end: endDate.toISOString(),\n    });\n    const logs = await db\n      .select()\n      .from(adminLogs)\n      .where(and(gte(adminLogs.createdAt, startDate), lte(adminLogs.createdAt, endDate)))\n      .orderBy(desc(adminLogs.createdAt));\n    console.log(\"‚úÖ [STORAGE] Found admin logs in range:\", logs.length, \"entries\");\n    if (logs.length > 0) {\n      console.log(\"üìã [STORAGE] First log:\", logs[0]);\n    }\n    return logs;\n  }\n\n  async getAdminLogsByPage(page: string): Promise<AdminLog[]> {\n    return await db\n      .select()\n      .from(adminLogs)\n      .where(eq(adminLogs.page, page))\n      .orderBy(desc(adminLogs.createdAt));\n  }\n}\n\nexport const storage = new DatabaseStorage();\n",
            "size_bytes": 32423
        },
        "client/src/pages/admin/AdminCourses.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { Plus, Edit, Trash2, Video, FileText, Link as LinkIcon, X } from \"lucide-react\";\nimport type { Course, Lesson, SubscriptionPlan, CourseResource } from \"@shared/schema\";\nimport { insertLessonSchema } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useState, useRef, useEffect } from \"react\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport axios from \"axios\";\n\nexport default function AdminCourses() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editDialogOpen, setEditDialogOpen] = useState(false);\n  const [editingCourse, setEditingCourse] = useState<Course | null>(null);\n  const [lessonDialogOpen, setLessonDialogOpen] = useState(false);\n  const [resourceDialogOpen, setResourceDialogOpen] = useState(false);\n  const [selectedCourseId, setSelectedCourseId] = useState<string>(\"\");\n  const [selectedResourceCourseId, setSelectedResourceCourseId] = useState<string>(\"\");\n  const [createThumbnailFile, setCreateThumbnailFile] = useState<File | null>(null);\n  const [createThumbnailPreview, setCreateThumbnailPreview] = useState<string | null>(null);\n  const [createUploadProgress, setCreateUploadProgress] = useState<number>(0);\n  const [editThumbnailFile, setEditThumbnailFile] = useState<File | null>(null);\n  const [editThumbnailPreview, setEditThumbnailPreview] = useState<string | null>(null);\n  const [editUploadProgress, setEditUploadProgress] = useState<number>(0);\n  const [lessonVideoFile, setLessonVideoFile] = useState<File | null>(null);\n  const [lessonUploadProgress, setLessonUploadProgress] = useState<number>(0);\n  const [resourceFile, setResourceFile] = useState<File | null>(null);\n  const [resourceUploadProgress, setResourceUploadProgress] = useState<number>(0);\n  const [resourceType, setResourceType] = useState<\"file\" | \"link\">(\"file\");\n  const [resourceLinkUrl, setResourceLinkUrl] = useState<string>(\"\");\n  const [resourceTitleEn, setResourceTitleEn] = useState<string>(\"\");\n  const [resourceTitleAr, setResourceTitleAr] = useState<string>(\"\");\n  const [resourceDescEn, setResourceDescEn] = useState<string>(\"\");\n  const [resourceDescAr, setResourceDescAr] = useState<string>(\"\");\n  const [searchFilter, setSearchFilter] = useState<string>(\"\");\n  const [levelFilter, setLevelFilter] = useState<string>(\"all\");\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const editFileInputRef = useRef<HTMLInputElement>(null);\n  const videoInputRef = useRef<HTMLInputElement>(null);\n  const resourceFileInputRef = useRef<HTMLInputElement>(null);\n\n  const { data: courses, isLoading } = useQuery<Course[]>({\n    queryKey: [\"/api/admin/courses\"],\n  });\n\n  const filteredCourses = courses?.filter((course) => {\n    const matchSearch = !searchFilter || \n      course.titleEn?.toLowerCase().includes(searchFilter.toLowerCase()) ||\n      course.titleAr?.toLowerCase().includes(searchFilter.toLowerCase()) ||\n      course.instructorEn?.toLowerCase().includes(searchFilter.toLowerCase()) ||\n      course.instructorAr?.toLowerCase().includes(searchFilter.toLowerCase());\n    const matchLevel = levelFilter === \"all\" || course.level.toString() === levelFilter;\n    return matchSearch && matchLevel;\n  }) || [];\n\n  const { data: lessons } = useQuery<Lesson[]>({\n    queryKey: [`/api/courses/${selectedCourseId}/lessons`],\n    enabled: !!selectedCourseId,\n  });\n\n  const { data: resources, refetch: refetchResources } = useQuery<CourseResource[]>({\n    queryKey: [`/api/courses/${selectedResourceCourseId}/resources`],\n    enabled: !!selectedResourceCourseId,\n  });\n\n  const { data: plans } = useQuery<SubscriptionPlan[]>({\n    queryKey: [\"/api/subscription-plans\"],\n  });\n\n  const form = useForm({\n    defaultValues: {\n      titleEn: \"\",\n      titleAr: \"\",\n      descriptionEn: \"\",\n      descriptionAr: \"\",\n      level: \"1\",\n      price: \"0\",\n      isFree: false,\n      instructorEn: \"\",\n      instructorAr: \"\",\n      duration: \"8\",\n      thumbnailUrl: \"\",\n      requiredPlanId: \"none\",\n      language: \"en\",\n    },\n  });\n\n  const lessonFormSchema = insertLessonSchema.extend({\n    titleEn: z.string().min(1, \"English title is required\"),\n    titleAr: z.string().min(1, \"Arabic title is required\"),\n  }).omit({ courseId: true, videoUrl: true, videoFilePath: true });\n\n  const lessonForm = useForm({\n    resolver: zodResolver(lessonFormSchema),\n    defaultValues: {\n      titleEn: \"\",\n      titleAr: \"\",\n      descriptionEn: \"\",\n      descriptionAr: \"\",\n      duration: 30,\n      order: 1,\n      requiresPrevious: true,\n      isFree: false,\n    },\n  });\n\n  const createCourseMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const formData = new FormData();\n      \n      // Append all form fields\n      Object.keys(data).forEach((key) => {\n        if (key !== \"thumbnail\" && data[key] !== null && data[key] !== undefined) {\n          formData.append(key, data[key].toString());\n        }\n      });\n      \n      // Append thumbnail file if selected\n      if (createThumbnailFile) {\n        formData.append(\"thumbnail\", createThumbnailFile);\n      }\n      \n      // Use axios for upload progress tracking\n      const response = await axios.post(\"/api/admin/courses\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n        onUploadProgress: (progressEvent: any) => {\n          const progress = progressEvent.total\n            ? Math.round((progressEvent.loaded * 100) / progressEvent.total)\n            : 0;\n          setCreateUploadProgress(progress);\n        },\n      });\n      \n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/courses\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°\" : \"Created\",\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿØŸàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠\"\n            : \"Course created successfully\",\n      });\n      setDialogOpen(false);\n      setCreateThumbnailFile(null);\n      setCreateThumbnailPreview(null);\n      setCreateUploadProgress(0);\n      form.reset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.response?.data?.message || error.message || \"Failed to create course\",\n        variant: \"destructive\",\n      });\n      setCreateUploadProgress(0);\n    },\n  });\n\n  const updateCourseMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      const formData = new FormData();\n      \n      Object.keys(data).forEach((key) => {\n        if (key !== \"thumbnail\" && data[key] !== null && data[key] !== undefined && data[key] !== \"\") {\n          formData.append(key, data[key].toString());\n        }\n      });\n      \n      if (editThumbnailFile) {\n        formData.append(\"thumbnail\", editThumbnailFile);\n      }\n      \n      const response = await axios.patch(`/api/admin/courses/${id}`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n        onUploadProgress: (progressEvent: any) => {\n          const progress = progressEvent.total\n            ? Math.round((progressEvent.loaded * 100) / progressEvent.total)\n            : 0;\n          setEditUploadProgress(progress);\n        },\n      });\n      \n      return response.data;\n    },\n    onSuccess: async () => {\n      await queryClient.invalidateQueries({ queryKey: [\"/api/admin/courses\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\" : \"Updated\",\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿØŸàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠\"\n            : \"Course updated successfully\",\n      });\n      setEditDialogOpen(false);\n      setEditingCourse(null);\n      setEditThumbnailFile(null);\n      setEditThumbnailPreview(null);\n      setEditUploadProgress(0);\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.response?.data?.message || error.message || \"Failed to update course\",\n        variant: \"destructive\",\n      });\n      setEditUploadProgress(0);\n    },\n  });\n\n  const deleteCourseMutation = useMutation({\n    mutationFn: async (courseId: string) => {\n      return await apiRequest(\"DELETE\", `/api/admin/courses/${courseId}`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/courses\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ\" : \"Deleted\",\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿØŸàÿ±ÿ© ÿ®ŸÜÿ¨ÿßÿ≠\"\n            : \"Course deleted successfully\",\n      });\n    },\n  });\n\n  const createLessonMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const formData = new FormData();\n      \n      // Append all form fields\n      Object.keys(data).forEach((key) => {\n        if (data[key] !== null && data[key] !== undefined) {\n          formData.append(key, data[key].toString());\n        }\n      });\n      \n      // Append video file if selected\n      if (lessonVideoFile) {\n        formData.append(\"video\", lessonVideoFile);\n      }\n      \n      // Use axios for upload progress tracking\n      const response = await axios.post(\"/api/admin/lessons\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n        onUploadProgress: (progressEvent: any) => {\n          const progress = progressEvent.total\n            ? Math.round((progressEvent.loaded * 100) / progressEvent.total)\n            : 0;\n          setLessonUploadProgress(progress);\n        },\n      });\n      \n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/courses/${selectedCourseId}/lessons`] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°\" : \"Created\",\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿØÿ±ÿ≥ ÿ®ŸÜÿ¨ÿßÿ≠\"\n            : \"Lesson created successfully\",\n      });\n      setLessonDialogOpen(false);\n      setLessonVideoFile(null);\n      setLessonUploadProgress(0);\n      lessonForm.reset();\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.response?.data?.message || error.message || \"Failed to create lesson\",\n        variant: \"destructive\",\n      });\n      setLessonUploadProgress(0);\n    },\n  });\n\n  const deleteLessonMutation = useMutation({\n    mutationFn: async (lessonId: string) => {\n      return await apiRequest(\"DELETE\", `/api/admin/lessons/${lessonId}`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/courses/${selectedCourseId}/lessons`] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ\" : \"Deleted\",\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿØÿ±ÿ≥ ÿ®ŸÜÿ¨ÿßÿ≠\"\n            : \"Lesson deleted successfully\",\n      });\n    },\n  });\n\n  const handleCreateThumbnailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      // Validate file type (images only)\n      const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n      if (!allowedTypes.includes(file.type)) {\n        toast({\n          title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n          description: language === \"ar\" ? \"Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸÖŸäŸÑ ÿµŸàÿ±ÿ© (JPEGÿå PNGÿå ÿ£Ÿà WebP)\" : \"Please upload an image (JPEG, PNG, or WebP)\",\n          variant: \"destructive\",\n        });\n        e.target.value = ''; // Reset input\n        return;\n      }\n      \n      // Validate file size (5MB max)\n      const maxSize = 5 * 1024 * 1024; // 5MB\n      if (file.size > maxSize) {\n        toast({\n          title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n          description: language === \"ar\" ? \"ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 5 ŸÖŸäÿ¨ÿßÿ®ÿßŸäÿ™\" : \"Image size must be less than 5MB\",\n          variant: \"destructive\",\n        });\n        e.target.value = ''; // Reset input\n        return;\n      }\n      \n      setCreateThumbnailFile(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setCreateThumbnailPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleEditThumbnailChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      // Validate file type (images only)\n      const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];\n      if (!allowedTypes.includes(file.type)) {\n        toast({\n          title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n          description: language === \"ar\" ? \"Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸÖŸäŸÑ ÿµŸàÿ±ÿ© (JPEGÿå PNGÿå ÿ£Ÿà WebP)\" : \"Please upload an image (JPEG, PNG, or WebP)\",\n          variant: \"destructive\",\n        });\n        e.target.value = ''; // Reset input\n        return;\n      }\n      \n      // Validate file size (5MB max)\n      const maxSize = 5 * 1024 * 1024; // 5MB\n      if (file.size > maxSize) {\n        toast({\n          title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n          description: language === \"ar\" ? \"ÿ≠ÿ¨ŸÖ ÿßŸÑÿµŸàÿ±ÿ© Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 5 ŸÖŸäÿ¨ÿßÿ®ÿßŸäÿ™\" : \"Image size must be less than 5MB\",\n          variant: \"destructive\",\n        });\n        e.target.value = ''; // Reset input\n        return;\n      }\n      \n      setEditThumbnailFile(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setEditThumbnailPreview(reader.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const onSubmit = (data: any) => {\n    createCourseMutation.mutate({\n      ...data,\n      level: data.level,\n      price: data.price,\n      duration: data.duration,\n      requiredPlanId: data.requiredPlanId === \"none\" ? null : data.requiredPlanId,\n    });\n  };\n\n  const handleVideoChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      // Validate file type (videos only)\n      const allowedTypes = ['video/mp4', 'video/webm', 'video/quicktime'];\n      if (!allowedTypes.includes(file.type)) {\n        toast({\n          title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n          description: language === \"ar\" ? \"Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸÑŸÅ ŸÅŸäÿØŸäŸà (MP4ÿå WebMÿå ÿ£Ÿà MOV)\" : \"Please upload a video file (MP4, WebM, or MOV)\",\n          variant: \"destructive\",\n        });\n        e.target.value = ''; // Reset input\n        return;\n      }\n      \n      // Validate file size (2GB max)\n      const maxSize = 2 * 1024 * 1024 * 1024; // 2GB\n      if (file.size > maxSize) {\n        toast({\n          title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n          description: language === \"ar\" ? \"ÿ≠ÿ¨ŸÖ ÿßŸÑŸÅŸäÿØŸäŸà Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 2 ÿ¨Ÿäÿ¨ÿßÿ®ÿßŸäÿ™\" : \"Video size must be less than 2GB\",\n          variant: \"destructive\",\n        });\n        e.target.value = ''; // Reset input\n        return;\n      }\n      \n      setLessonVideoFile(file);\n    }\n  };\n\n  const onLessonSubmit = (data: any) => {\n    if (!selectedCourseId) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: language === \"ar\" ? \"ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿØ ÿØŸàÿ±ÿ©\" : \"No course selected\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (!lessonVideoFile) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: language === \"ar\" ? \"Ÿäÿ±ÿ¨Ÿâ ÿ™ÿ≠ŸÖŸäŸÑ ŸÖŸÑŸÅ ŸÅŸäÿØŸäŸà\" : \"Please upload a video file\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    createLessonMutation.mutate({\n      ...data,\n      courseId: selectedCourseId,\n    });\n  };\n\n  const openLessonDialog = (courseId: string) => {\n    setSelectedCourseId(courseId);\n    setLessonDialogOpen(true);\n  };\n\n  const openResourceDialog = (courseId: string) => {\n    setSelectedResourceCourseId(courseId);\n    setResourceFile(null);\n    setResourceLinkUrl(\"\");\n    setResourceTitleEn(\"\");\n    setResourceTitleAr(\"\");\n    setResourceDescEn(\"\");\n    setResourceDescAr(\"\");\n    setResourceType(\"file\");\n    refetchResources();\n    setResourceDialogOpen(true);\n  };\n\n  const handleResourceFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      const allowedTypes = [\"application/pdf\", \"image/jpeg\", \"image/png\", \"application/msword\", \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"];\n      if (!allowedTypes.includes(file.type)) {\n        toast({ title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\", description: language === \"ar\" ? \"ŸÅŸÇÿ∑ PDF ŸàÿßŸÑÿµŸàÿ± ŸàÿßŸÑŸÖÿ≥ÿ™ŸÜÿØÿßÿ™ ŸÖÿØÿπŸàŸÖÿ©\" : \"Only PDF, images, and documents are allowed\", variant: \"destructive\" });\n        e.target.value = '';\n        return;\n      }\n      if (file.size > 100 * 1024 * 1024) {\n        toast({ title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\", description: language === \"ar\" ? \"ÿ≠ÿ¨ŸÖ ÿßŸÑŸÖŸÑŸÅ Ÿäÿ¨ÿ® ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿ£ŸÇŸÑ ŸÖŸÜ 100 ŸÖŸäÿ¨ÿßÿ®ÿßŸäÿ™\" : \"File size must be less than 100MB\", variant: \"destructive\" });\n        e.target.value = '';\n        return;\n      }\n      setResourceFile(file);\n    }\n  };\n\n  const createResourceMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const formData = new FormData();\n      formData.append(\"titleEn\", data.titleEn);\n      formData.append(\"titleAr\", data.titleAr);\n      formData.append(\"descriptionEn\", data.descriptionEn);\n      formData.append(\"descriptionAr\", data.descriptionAr);\n      formData.append(\"resourceType\", data.resourceType);\n      if (data.resourceType === \"link\") {\n        formData.append(\"linkUrl\", data.linkUrl);\n      } else if (resourceFile) {\n        formData.append(\"file\", resourceFile);\n      }\n      const response = await axios.post(`/api/admin/courses/${selectedResourceCourseId}/resources`, formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n        onUploadProgress: (progressEvent: any) => {\n          setResourceUploadProgress(progressEvent.total ? Math.round((progressEvent.loaded * 100) / progressEvent.total) : 0);\n        },\n      });\n      return response.data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/courses/${selectedResourceCourseId}/resources`] });\n      toast({ title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°\" : \"Created\", description: language === \"ar\" ? \"ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑŸÖŸàÿßÿ±ÿØ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Resource added successfully\" });\n      setResourceFile(null);\n      setResourceLinkUrl(\"\");\n      setResourceTitleEn(\"\");\n      setResourceTitleAr(\"\");\n      setResourceDescEn(\"\");\n      setResourceDescAr(\"\");\n      setResourceUploadProgress(0);\n      refetchResources();\n    },\n    onError: (error: any) => {\n      toast({ title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\", description: error.response?.data?.message || \"Failed to add resource\", variant: \"destructive\" });\n      setResourceUploadProgress(0);\n    },\n  });\n\n  const deleteResourceMutation = useMutation({\n    mutationFn: async (resourceId: string) => {\n      return await apiRequest(\"DELETE\", `/api/admin/course-resources/${resourceId}`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/courses/${selectedResourceCourseId}/resources`] });\n      toast({ title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ\" : \"Deleted\", description: language === \"ar\" ? \"ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸàÿßÿ±ÿØ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Resource deleted successfully\" });\n      refetchResources();\n    },\n  });\n\n  const openEditDialog = (course: Course) => {\n    setEditingCourse(course);\n    setEditThumbnailFile(null);\n    setEditUploadProgress(0);\n    setEditThumbnailPreview(course.thumbnailUrl || null);\n    form.reset({\n      titleEn: course.titleEn,\n      titleAr: course.titleAr,\n      descriptionEn: course.descriptionEn || \"\",\n      descriptionAr: course.descriptionAr || \"\",\n      level: course.level.toString(),\n      price: course.price || \"0\",\n      isFree: course.isFree || false,\n      instructorEn: course.instructorEn || \"\",\n      instructorAr: course.instructorAr || \"\",\n      duration: course.duration?.toString() || \"8\",\n      requiredPlanId: course.requiredPlanId || \"none\",\n      language: course.language || \"en\",\n    });\n    setEditDialogOpen(true);\n  };\n\n  const onEditSubmit = (data: any) => {\n    if (!editingCourse) return;\n    \n    updateCourseMutation.mutate({\n      id: editingCourse.id,\n      data: {\n        ...data,\n        level: data.level,\n        price: data.price,\n        duration: data.duration,\n        requiredPlanId: data.requiredPlanId === \"none\" ? null : data.requiredPlanId,\n      },\n    });\n  };\n\n  // Update default order when lessons change\n  useEffect(() => {\n    if (lessons && lessonDialogOpen) {\n      const nextOrder = (lessons.length || 0) + 1;\n      lessonForm.setValue(\"order\", nextOrder);\n    }\n  }, [lessons, lessonDialogOpen, lessonForm]);\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"flex items-center justify-between mb-8\">\n        <h1\n          className=\"text-3xl font-heading font-bold text-foreground\"\n          data-testid=\"text-admin-courses-title\"\n        >\n          {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"Course Management\"}\n        </h1>\n        <Dialog \n          open={dialogOpen} \n          onOpenChange={(open) => {\n            setDialogOpen(open);\n            if (!open) {\n              setCreateThumbnailFile(null);\n              setCreateThumbnailPreview(null);\n              setCreateUploadProgress(0);\n              if (fileInputRef.current) {\n                fileInputRef.current.value = '';\n              }\n              form.reset();\n            }\n          }}\n        >\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-create-course\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              {language === \"ar\" ? \"ÿ•ŸÜÿ¥ÿßÿ° ÿØŸàÿ±ÿ©\" : \"Create Course\"}\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>\n                {language === \"ar\" ? \"ÿ•ŸÜÿ¥ÿßÿ° ÿØŸàÿ±ÿ© ÿ¨ÿØŸäÿØÿ©\" : \"Create New Course\"}\n              </DialogTitle>\n            </DialogHeader>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"titleEn\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Title (English)</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-title-en\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"titleAr\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Title (Arabic)</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-title-ar\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"descriptionEn\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Description (English)</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} data-testid=\"input-desc-en\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"descriptionAr\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Description (Arabic)</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} data-testid=\"input-desc-ar\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-4 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"level\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Level</FormLabel>\n                        <Select\n                          onValueChange={field.onChange}\n                          defaultValue={field.value}\n                        >\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-level\">\n                              <SelectValue placeholder=\"Select level\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            <SelectItem value=\"1\">Level 1</SelectItem>\n                            <SelectItem value=\"2\">Level 2</SelectItem>\n                            <SelectItem value=\"3\">Level 3</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"language\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Content Language</FormLabel>\n                        <Select\n                          onValueChange={field.onChange}\n                          defaultValue={field.value}\n                        >\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-language\">\n                              <SelectValue placeholder=\"Select language\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            <SelectItem value=\"en\">English</SelectItem>\n                            <SelectItem value=\"ar\">Arabic</SelectItem>\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"price\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Price ($)</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"number\"\n                            step=\"0.01\"\n                            {...field}\n                            data-testid=\"input-price\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"duration\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Duration (hours)</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"number\"\n                            {...field}\n                            data-testid=\"input-duration\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"instructorEn\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Instructor (English)</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-instructor-en\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"instructorAr\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Instructor (Arabic)</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-instructor-ar\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"thumbnail-upload\">\n                    {language === \"ar\" ? \"ÿµŸàÿ±ÿ© ÿßŸÑÿØŸàÿ±ÿ© ÿßŸÑŸÖÿµÿ∫ÿ±ÿ©\" : \"Course Thumbnail\"}\n                  </Label>\n                  <div className=\"flex items-center gap-4\">\n                    <Input\n                      id=\"thumbnail-upload\"\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleCreateThumbnailChange}\n                      ref={fileInputRef}\n                      data-testid=\"input-thumbnail-file\"\n                      className=\"flex-1\"\n                    />\n                    {createThumbnailFile && (\n                      <Badge variant=\"secondary\">\n                        {(createThumbnailFile.size / 1024).toFixed(0)} KB\n                      </Badge>\n                    )}\n                  </div>\n                  {createThumbnailPreview && (\n                    <div className=\"mt-2\">\n                      <img\n                        src={createThumbnailPreview}\n                        alt=\"Thumbnail preview\"\n                        className=\"w-32 h-32 object-cover rounded-lg border\"\n                      />\n                    </div>\n                  )}\n                  <p className=\"text-xs text-muted-foreground\">\n                    {language === \"ar\"\n                      ? \"PNGÿå JPEGÿå ÿ£Ÿà WebP (ÿ≠ÿ¨ŸÖ ÿ£ŸÇÿµŸâ 5 ŸÖŸäÿ¨ÿßÿ®ÿßŸäÿ™)\"\n                      : \"PNG, JPEG, or WebP (max 5MB)\"}\n                  </p>\n                </div>\n\n                <FormField\n                  control={form.control}\n                  name=\"requiredPlanId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Required Subscription Plan (Optional)</FormLabel>\n                      <Select\n                        onValueChange={field.onChange}\n                        value={field.value || \"none\"}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-required-plan\">\n                            <SelectValue placeholder=\"Select a plan or leave empty for free access\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"none\">No plan required</SelectItem>\n                          {plans?.map((plan) => (\n                            <SelectItem key={plan.id} value={plan.id}>\n                              {language === \"ar\" ? plan.nameAr : plan.nameEn} - ${plan.price}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"isFree\"\n                  render={({ field }) => (\n                    <FormItem className=\"flex items-center justify-between rounded-lg border p-4\">\n                      <div className=\"space-y-0.5\">\n                        <FormLabel className=\"text-base\">Free Course</FormLabel>\n                        <div className=\"text-sm text-muted-foreground\">\n                          Make this course completely free for all users\n                        </div>\n                      </div>\n                      <FormControl>\n                        <Switch\n                          checked={field.value}\n                          onCheckedChange={field.onChange}\n                          data-testid=\"switch-is-free\"\n                        />\n                      </FormControl>\n                    </FormItem>\n                  )}\n                />\n\n                {createUploadProgress > 0 && createUploadProgress < 100 && (\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-muted-foreground\">\n                        {language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ±ŸÅÿπ...\" : \"Uploading...\"}\n                      </span>\n                      <span className=\"font-medium\">{createUploadProgress}%</span>\n                    </div>\n                    <Progress value={createUploadProgress} className=\"h-2\" />\n                  </div>\n                )}\n\n                <Button\n                  type=\"submit\"\n                  disabled={createCourseMutation.isPending || (createUploadProgress > 0 && createUploadProgress < 100)}\n                  className=\"w-full\"\n                  data-testid=\"button-submit-course\"\n                >\n                  {createCourseMutation.isPending\n                    ? language === \"ar\"\n                      ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°...\"\n                      : \"Creating...\"\n                    : language === \"ar\"\n                      ? \"ÿ•ŸÜÿ¥ÿßÿ°\"\n                      : \"Create\"}\n                </Button>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Edit Course Dialog */}\n      <Dialog \n        open={editDialogOpen} \n        onOpenChange={(open) => {\n          if (!open) {\n            setEditThumbnailFile(null);\n            setEditThumbnailPreview(null);\n            setEditUploadProgress(0);\n            setEditingCourse(null);\n            form.reset();\n            if (editFileInputRef.current) {\n              editFileInputRef.current.value = '';\n            }\n          }\n          setEditDialogOpen(open);\n        }}\n      >\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {language === \"ar\" ? \"ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿØŸàÿ±ÿ©\" : \"Edit Course\"}\n            </DialogTitle>\n          </DialogHeader>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onEditSubmit)} className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"titleEn\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Title (English)</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-edit-title-en\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"titleAr\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Title (Arabic)</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-edit-title-ar\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"descriptionEn\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Description (English)</FormLabel>\n                      <FormControl>\n                        <Textarea {...field} data-testid=\"input-edit-desc-en\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"descriptionAr\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Description (Arabic)</FormLabel>\n                      <FormControl>\n                        <Textarea {...field} data-testid=\"input-edit-desc-ar\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-4 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"level\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Level</FormLabel>\n                      <Select\n                        onValueChange={field.onChange}\n                        value={field.value}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-edit-level\">\n                            <SelectValue placeholder=\"Select level\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"1\">Level 1</SelectItem>\n                          <SelectItem value=\"2\">Level 2</SelectItem>\n                          <SelectItem value=\"3\">Level 3</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"language\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Content Language</FormLabel>\n                      <Select\n                        onValueChange={field.onChange}\n                        value={field.value}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-edit-language\">\n                            <SelectValue placeholder=\"Select language\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"en\">English</SelectItem>\n                          <SelectItem value=\"ar\">Arabic</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"price\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Price ($)</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          step=\"0.01\"\n                          {...field}\n                          data-testid=\"input-edit-price\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"duration\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Duration (hours)</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          {...field}\n                          data-testid=\"input-edit-duration\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"instructorEn\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Instructor (English)</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-edit-instructor-en\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"instructorAr\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Instructor (Arabic)</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-edit-instructor-ar\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"edit-thumbnail-upload\">\n                  {language === \"ar\" ? \"ÿµŸàÿ±ÿ© ÿßŸÑÿØŸàÿ±ÿ© ÿßŸÑŸÖÿµÿ∫ÿ±ÿ©\" : \"Course Thumbnail\"}\n                </Label>\n                <div className=\"flex items-center gap-4\">\n                  <Input\n                    id=\"edit-thumbnail-upload\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleEditThumbnailChange}\n                    ref={editFileInputRef}\n                    data-testid=\"input-edit-thumbnail-file\"\n                    className=\"flex-1\"\n                  />\n                  {editThumbnailFile && (\n                    <Badge variant=\"secondary\">\n                      {(editThumbnailFile.size / 1024).toFixed(0)} KB\n                    </Badge>\n                  )}\n                </div>\n                {editThumbnailPreview && (\n                  <div className=\"mt-2\">\n                    <img\n                      src={editThumbnailPreview}\n                      alt=\"Thumbnail preview\"\n                      className=\"w-32 h-32 object-cover rounded-lg border\"\n                    />\n                  </div>\n                )}\n                <p className=\"text-xs text-muted-foreground\">\n                  {language === \"ar\"\n                    ? \"PNGÿå JPEGÿå ÿ£Ÿà WebP (ÿ≠ÿ¨ŸÖ ÿ£ŸÇÿµŸâ 5 ŸÖŸäÿ¨ÿßÿ®ÿßŸäÿ™)\"\n                    : \"PNG, JPEG, or WebP (max 5MB)\"}\n                </p>\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"requiredPlanId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Required Subscription Plan (Optional)</FormLabel>\n                    <Select\n                      onValueChange={field.onChange}\n                      value={field.value || \"none\"}\n                    >\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-edit-required-plan\">\n                          <SelectValue placeholder=\"Select a plan or leave empty for free access\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"none\">No plan required</SelectItem>\n                        {plans?.map((plan) => (\n                          <SelectItem key={plan.id} value={plan.id}>\n                            {language === \"ar\" ? plan.nameAr : plan.nameEn} - ${plan.price}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"isFree\"\n                render={({ field }) => (\n                  <FormItem className=\"flex items-center justify-between rounded-lg border p-4\">\n                    <div className=\"space-y-0.5\">\n                      <FormLabel className=\"text-base\">Free Course</FormLabel>\n                      <div className=\"text-sm text-muted-foreground\">\n                        Make this course completely free for all users\n                      </div>\n                    </div>\n                    <FormControl>\n                      <Switch\n                        checked={field.value}\n                        onCheckedChange={field.onChange}\n                        data-testid=\"switch-edit-is-free\"\n                      />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n\n              {editUploadProgress > 0 && editUploadProgress < 100 && (\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">\n                      {language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ±ŸÅÿπ...\" : \"Uploading...\"}\n                    </span>\n                    <span className=\"font-medium\">{editUploadProgress}%</span>\n                  </div>\n                  <Progress value={editUploadProgress} className=\"h-2\" />\n                </div>\n              )}\n\n              <Button\n                type=\"submit\"\n                disabled={updateCourseMutation.isPending || (editUploadProgress > 0 && editUploadProgress < 100)}\n                className=\"w-full\"\n                data-testid=\"button-submit-edit-course\"\n              >\n                {updateCourseMutation.isPending\n                  ? language === \"ar\"\n                    ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´...\"\n                    : \"Updating...\"\n                  : language === \"ar\"\n                    ? \"ÿ™ÿ≠ÿØŸäÿ´\"\n                    : \"Update\"}\n              </Button>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      {/* Courses Filter Section */}\n      <div className=\"mb-8 space-y-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <Input\n            placeholder={language === \"ar\" ? \"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿØŸàÿ±ÿ©...\" : \"Search courses...\"}\n            value={searchFilter}\n            onChange={(e) => setSearchFilter(e.target.value)}\n            data-testid=\"input-search-courses\"\n          />\n          <select \n            value={levelFilter}\n            onChange={(e) => setLevelFilter(e.target.value)}\n            className=\"px-3 py-2 border border-border rounded-md bg-background\"\n            data-testid=\"select-level-filter\"\n          >\n            <option value=\"all\">{language === \"ar\" ? \"ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ŸàŸäÿßÿ™\" : \"All Levels\"}</option>\n            <option value=\"1\">{language === \"ar\" ? \"ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 1\" : \"Level 1\"}</option>\n            <option value=\"2\">{language === \"ar\" ? \"ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 2\" : \"Level 2\"}</option>\n            <option value=\"3\">{language === \"ar\" ? \"ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 3\" : \"Level 3\"}</option>\n          </select>\n          {(searchFilter || levelFilter !== \"all\") && (\n            <Button\n              variant=\"outline\"\n              onClick={() => {\n                setSearchFilter(\"\");\n                setLevelFilter(\"all\");\n              }}\n              data-testid=\"button-clear-course-filters\"\n            >\n              {language === \"ar\" ? \"ŸÖÿ≥ÿ≠\" : \"Clear\"}\n            </Button>\n          )}\n        </div>\n        <div className=\"text-sm text-muted-foreground\">\n          {language === \"ar\" ? \"ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨: \" : \"Results: \"} {filteredCourses.length}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredCourses?.map((course) => (\n          <Card\n            key={course.id}\n            className=\"hover-elevate active-elevate-2 transition-all\"\n            data-testid={`card-course-${course.id}`}\n          >\n            <CardHeader>\n              <div className=\"flex items-start justify-between mb-2\">\n                <Badge>{language === \"ar\" ? \"ŸÖÿ≥ÿ™ŸàŸâ\" : \"Level\"} {course.level}</Badge>\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => openLessonDialog(course.id)}\n                    data-testid={`button-lessons-${course.id}`}\n                  >\n                    <Video className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => openResourceDialog(course.id)}\n                    data-testid={`button-resources-${course.id}`}\n                  >\n                    <FileText className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => openEditDialog(course)}\n                    data-testid={`button-edit-${course.id}`}\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => deleteCourseMutation.mutate(course.id)}\n                    data-testid={`button-delete-${course.id}`}\n                  >\n                    <Trash2 className=\"h-4 w-4 text-destructive\" />\n                  </Button>\n                </div>\n              </div>\n              <CardTitle className=\"text-lg\">\n                {language === \"ar\" ? course.titleAr : course.titleEn}\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <p className=\"text-sm text-muted-foreground line-clamp-2 mb-4\">\n                {language === \"ar\" ? course.descriptionAr : course.descriptionEn}\n              </p>\n              <div className=\"flex items-center justify-between text-sm\">\n                <span className=\"text-foreground font-medium\">\n                  ${course.price}\n                </span>\n                <span className=\"text-muted-foreground\">\n                  {course.duration} {language === \"ar\" ? \"ÿ≥ÿßÿπÿßÿ™\" : \"hours\"}\n                </span>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Resources Management Dialog */}\n      <Dialog open={resourceDialogOpen} onOpenChange={setResourceDialogOpen}>\n        <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖŸàÿßÿ±ÿØ\" : \"Manage Resources\"}\n            </DialogTitle>\n          </DialogHeader>\n\n          {/* Current Resources */}\n          {resources && resources.length > 0 && (\n            <div className=\"mb-6 pb-6 border-b\">\n              <h3 className=\"text-lg font-semibold mb-4\">{language === \"ar\" ? \"ÿßŸÑŸÖŸàÿßÿ±ÿØ ÿßŸÑÿ≠ÿßŸÑŸäÿ©\" : \"Current Resources\"}</h3>\n              <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n                {resources.map((resource) => (\n                  <div key={resource.id} className=\"flex items-center justify-between p-3 bg-muted rounded-lg\" data-testid={`card-admin-resource-${resource.id}`}>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-medium text-sm\">{language === \"ar\" ? resource.titleAr : resource.titleEn}</p>\n                      <p className=\"text-xs text-muted-foreground\">{resource.fileName}</p>\n                    </div>\n                    <Button size=\"sm\" variant=\"ghost\" onClick={() => deleteResourceMutation.mutate(resource.id)} data-testid={`button-delete-resource-${resource.id}`}>\n                      <X className=\"h-4 w-4 text-destructive\" />\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Add Resource Form */}\n          <div className=\"space-y-4\">\n            <div className=\"flex gap-2\">\n              <Button variant={resourceType === \"file\" ? \"default\" : \"outline\"} size=\"sm\" onClick={() => setResourceType(\"file\")} data-testid=\"button-resource-type-file\">\n                {language === \"ar\" ? \"ŸÖŸÑŸÅ\" : \"File\"}\n              </Button>\n              <Button variant={resourceType === \"link\" ? \"default\" : \"outline\"} size=\"sm\" onClick={() => setResourceType(\"link\")} data-testid=\"button-resource-type-link\">\n                {language === \"ar\" ? \"ÿ±ÿßÿ®ÿ∑\" : \"Link\"}\n              </Button>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"resource-title-en\" className=\"text-sm\">{language === \"ar\" ? \"ÿßŸÑÿπŸÜŸàÿßŸÜ (ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä)\" : \"Title (English)\"}</Label>\n                <Input id=\"resource-title-en\" value={resourceTitleEn} onChange={(e) => setResourceTitleEn(e.target.value)} placeholder=\"Resource title\" data-testid=\"input-resource-title-en\" />\n              </div>\n              <div>\n                <Label htmlFor=\"resource-title-ar\" className=\"text-sm\">{language === \"ar\" ? \"ÿßŸÑÿπŸÜŸàÿßŸÜ (ÿπÿ±ÿ®Ÿä)\" : \"Title (Arabic)\"}</Label>\n                <Input id=\"resource-title-ar\" value={resourceTitleAr} onChange={(e) => setResourceTitleAr(e.target.value)} placeholder=\"ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖŸàÿßÿ±ÿØ\" data-testid=\"input-resource-title-ar\" />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <Label htmlFor=\"resource-desc-en\" className=\"text-sm\">{language === \"ar\" ? \"ÿßŸÑŸàÿµŸÅ (ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä)\" : \"Description (English)\"}</Label>\n                <Textarea value={resourceDescEn} onChange={(e) => setResourceDescEn(e.target.value)} placeholder=\"Optional description\" className=\"resize-none\" rows={2} data-testid=\"input-resource-desc-en\" />\n              </div>\n              <div>\n                <Label htmlFor=\"resource-desc-ar\" className=\"text-sm\">{language === \"ar\" ? \"ÿßŸÑŸàÿµŸÅ (ÿπÿ±ÿ®Ÿä)\" : \"Description (Arabic)\"}</Label>\n                <Textarea value={resourceDescAr} onChange={(e) => setResourceDescAr(e.target.value)} placeholder=\"ŸàÿµŸÅ ÿßÿÆÿ™Ÿäÿßÿ±Ÿä\" className=\"resize-none\" rows={2} data-testid=\"input-resource-desc-ar\" />\n              </div>\n            </div>\n\n            {resourceType === \"file\" ? (\n              <div>\n                <Label htmlFor=\"resource-file\" className=\"text-sm\">{language === \"ar\" ? \"ÿßÿÆÿ™ÿ± ŸÖŸÑŸÅ\" : \"Select File\"}</Label>\n                <Input id=\"resource-file\" type=\"file\" accept=\".pdf,.jpg,.jpeg,.png,.doc,.docx\" onChange={handleResourceFileChange} ref={resourceFileInputRef} data-testid=\"input-resource-file\" />\n                {resourceFile && <p className=\"text-xs text-muted-foreground mt-1\">{resourceFile.name}</p>}\n              </div>\n            ) : (\n              <div>\n                <Label htmlFor=\"resource-link-url\" className=\"text-sm\">{language === \"ar\" ? \"ÿ±ÿßÿ®ÿ∑ URL\" : \"Link URL\"}</Label>\n                <Input id=\"resource-link-url\" value={resourceLinkUrl} onChange={(e) => setResourceLinkUrl(e.target.value)} placeholder=\"https://example.com\" data-testid=\"input-resource-link-url\" />\n              </div>\n            )}\n\n            {resourceUploadProgress > 0 && resourceUploadProgress < 100 && (\n              <div className=\"space-y-2\">\n                <div className=\"flex justify-between text-sm\"><span>{language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ±ŸÅÿπ...\" : \"Uploading...\"}</span><span>{resourceUploadProgress}%</span></div>\n                <Progress value={resourceUploadProgress} className=\"h-2\" />\n              </div>\n            )}\n\n            <Button onClick={() => createResourceMutation.mutate({ titleEn: resourceTitleEn, titleAr: resourceTitleAr, descriptionEn: resourceDescEn, descriptionAr: resourceDescAr, resourceType, linkUrl: resourceLinkUrl })} disabled={createResourceMutation.isPending || !resourceTitleEn || !resourceTitleAr || (resourceType === \"file\" && !resourceFile) || (resourceType === \"link\" && !resourceLinkUrl)} className=\"w-full\" data-testid=\"button-add-resource\">\n              {createResourceMutation.isPending ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©...\" : \"Adding...\") : (language === \"ar\" ? \"ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸàÿßÿ±ÿØ\" : \"Add Resource\")}\n            </Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n\n      {/* Lesson Management Dialog */}\n      <Dialog open={lessonDialogOpen} onOpenChange={setLessonDialogOpen}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle>\n              {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿØÿ±Ÿàÿ≥\" : \"Manage Lessons\"}\n            </DialogTitle>\n          </DialogHeader>\n          \n          {/* Existing Lessons List */}\n          <div className=\"mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">\n              {language === \"ar\" ? \"ÿßŸÑÿØÿ±Ÿàÿ≥ ÿßŸÑÿ≠ÿßŸÑŸäÿ©\" : \"Current Lessons\"}\n            </h3>\n            <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n              {lessons?.length === 0 && (\n                <p className=\"text-sm text-muted-foreground\">\n                  {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿØÿ±Ÿàÿ≥\" : \"No lessons yet\"}\n                </p>\n              )}\n              {lessons?.map((lesson) => (\n                <Card key={lesson.id} className=\"p-3\" data-testid={`card-lesson-${lesson.id}`}>\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {language === \"ar\" ? \"ÿ™ÿ±ÿ™Ÿäÿ®\" : \"Order\"} {lesson.order}\n                        </Badge>\n                        {lesson.isFree && (\n                          <Badge variant=\"secondary\" className=\"text-xs\">\n                            {language === \"ar\" ? \"ŸÖÿ¨ÿßŸÜŸä\" : \"Free\"}\n                          </Badge>\n                        )}\n                      </div>\n                      <h4 className=\"font-medium text-sm\">\n                        {language === \"ar\" ? lesson.titleAr : lesson.titleEn}\n                      </h4>\n                      {lesson.videoUrl && (\n                        <p className=\"text-xs text-muted-foreground mt-1 truncate\">\n                          {lesson.videoUrl}\n                        </p>\n                      )}\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        {lesson.duration} {language === \"ar\" ? \"ÿØŸÇŸäŸÇÿ©\" : \"min\"}\n                      </p>\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => deleteLessonMutation.mutate(lesson.id)}\n                      data-testid={`button-delete-lesson-${lesson.id}`}\n                    >\n                      <Trash2 className=\"h-4 w-4 text-destructive\" />\n                    </Button>\n                  </div>\n                </Card>\n              ))}\n            </div>\n          </div>\n\n          {/* Add New Lesson Form */}\n          <div className=\"border-t pt-4\">\n            <h3 className=\"text-lg font-semibold mb-4\">\n              {language === \"ar\" ? \"ÿ•ÿ∂ÿßŸÅÿ© ÿØÿ±ÿ≥ ÿ¨ÿØŸäÿØ\" : \"Add New Lesson\"}\n            </h3>\n            <Form {...lessonForm}>\n              <form onSubmit={lessonForm.handleSubmit(onLessonSubmit)} className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={lessonForm.control}\n                    name=\"titleEn\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Title (English)</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-lesson-title-en\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={lessonForm.control}\n                    name=\"titleAr\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Title (Arabic)</FormLabel>\n                        <FormControl>\n                          <Input {...field} data-testid=\"input-lesson-title-ar\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={lessonForm.control}\n                    name=\"descriptionEn\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Description (English)</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} data-testid=\"input-lesson-desc-en\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={lessonForm.control}\n                    name=\"descriptionAr\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Description (Arabic)</FormLabel>\n                        <FormControl>\n                          <Textarea {...field} data-testid=\"input-lesson-desc-ar\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"lesson-video-upload\">\n                    {language === \"ar\" ? \"ŸÖŸÑŸÅ ÿßŸÑŸÅŸäÿØŸäŸà\" : \"Lesson Video\"}\n                  </Label>\n                  <div className=\"flex items-center gap-4\">\n                    <Input\n                      id=\"lesson-video-upload\"\n                      type=\"file\"\n                      accept=\"video/*\"\n                      onChange={handleVideoChange}\n                      ref={videoInputRef}\n                      data-testid=\"input-lesson-video-file\"\n                      className=\"flex-1\"\n                    />\n                    {lessonVideoFile && (\n                      <Badge variant=\"secondary\">\n                        {(lessonVideoFile.size / (1024 * 1024)).toFixed(1)} MB\n                      </Badge>\n                    )}\n                  </div>\n                  {lessonVideoFile && (\n                    <p className=\"text-xs text-muted-foreground\">\n                      {lessonVideoFile.name}\n                    </p>\n                  )}\n                  <p className=\"text-xs text-muted-foreground\">\n                    {language === \"ar\"\n                      ? \"MP4ÿå WebMÿå ÿ£Ÿà MOV (ÿ≠ÿ¨ŸÖ ÿ£ŸÇÿµŸâ 2 ÿ¨Ÿäÿ¨ÿßÿ®ÿßŸäÿ™)\"\n                      : \"MP4, WebM, or MOV (max 2GB)\"}\n                  </p>\n                </div>\n\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <FormField\n                    control={lessonForm.control}\n                    name=\"duration\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Duration (minutes)</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"number\"\n                            {...field}\n                            onChange={(e) => field.onChange(parseInt(e.target.value) || 30)}\n                            value={field.value}\n                            data-testid=\"input-lesson-duration\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={lessonForm.control}\n                    name=\"order\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Order</FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"number\"\n                            {...field}\n                            onChange={(e) => field.onChange(parseInt(e.target.value) || 1)}\n                            value={field.value}\n                            data-testid=\"input-lesson-order\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={lessonForm.control}\n                    name=\"isFree\"\n                    render={({ field }) => (\n                      <FormItem className=\"flex items-center gap-2 pt-6\">\n                        <FormControl>\n                          <Switch\n                            checked={field.value}\n                            onCheckedChange={field.onChange}\n                            data-testid=\"switch-lesson-free\"\n                          />\n                        </FormControl>\n                        <FormLabel className=\"!mt-0\">\n                          {language === \"ar\" ? \"ŸÖÿ¨ÿßŸÜŸä\" : \"Free\"}\n                        </FormLabel>\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={lessonForm.control}\n                  name=\"requiresPrevious\"\n                  render={({ field }) => (\n                    <FormItem className=\"flex items-center gap-2\">\n                      <FormControl>\n                        <Switch\n                          checked={field.value}\n                          onCheckedChange={field.onChange}\n                          data-testid=\"switch-lesson-requires-previous\"\n                        />\n                      </FormControl>\n                      <FormLabel className=\"!mt-0\">\n                        {language === \"ar\" ? \"Ÿäÿ™ÿ∑ŸÑÿ® ÿ•ŸÉŸÖÿßŸÑ ÿßŸÑÿØÿ±ÿ≥ ÿßŸÑÿ≥ÿßÿ®ŸÇ\" : \"Requires previous lesson completion\"}\n                      </FormLabel>\n                    </FormItem>\n                  )}\n                />\n\n                {lessonUploadProgress > 0 && lessonUploadProgress < 100 && (\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-muted-foreground\">\n                        {language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿ±ŸÅÿπ ÿßŸÑŸÅŸäÿØŸäŸà...\" : \"Uploading video...\"}\n                      </span>\n                      <span className=\"font-medium\">{lessonUploadProgress}%</span>\n                    </div>\n                    <Progress value={lessonUploadProgress} className=\"h-2\" />\n                  </div>\n                )}\n\n                <Button\n                  type=\"submit\"\n                  disabled={createLessonMutation.isPending || !selectedCourseId || (lessonUploadProgress > 0 && lessonUploadProgress < 100)}\n                  className=\"w-full\"\n                  data-testid=\"button-submit-lesson\"\n                >\n                  {createLessonMutation.isPending\n                    ? language === \"ar\"\n                      ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°...\"\n                      : \"Creating...\"\n                    : language === \"ar\"\n                      ? \"ÿ•ÿ∂ÿßŸÅÿ© ÿØÿ±ÿ≥\"\n                      : \"Add Lesson\"}\n                </Button>\n              </form>\n            </Form>\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n",
            "size_bytes": 70161
        },
        "client/src/components/ui/aspect-ratio.tsx": {
            "content": "import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n",
            "size_bytes": 140
        },
        "client/src/components/ui/avatar.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n",
            "size_bytes": 1592
        },
        "vite.config.ts": {
            "content": "import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n",
            "size_bytes": 1080
        },
        "client/src/pages/Contact.tsx": {
            "content": "import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Mail, Phone, MapPin } from \"lucide-react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nconst contactSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  email: z.string().email(\"Invalid email address\"),\n  message: z.string().min(10, \"Message must be at least 10 characters\"),\n});\n\ntype ContactFormData = z.infer<typeof contactSchema>;\n\nexport default function Contact() {\n  const { t, language } = useLanguage();\n  const { toast } = useToast();\n\n  const form = useForm<ContactFormData>({\n    resolver: zodResolver(contactSchema),\n    defaultValues: {\n      name: \"\",\n      email: \"\",\n      message: \"\",\n    },\n  });\n\n  const onSubmit = (data: ContactFormData) => {\n    console.log(\"Contact form:\", data);\n    toast({\n      title: t(\"common.success\"),\n      description:\n        language === \"ar\"\n          ? \"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠!\"\n          : \"Your message has been sent successfully!\",\n    });\n    form.reset();\n  };\n\n  const contactInfo = [\n    {\n      icon: Mail,\n      title: language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\",\n      value: \"info@Leed Academy.com\",\n    },\n    {\n      icon: Phone,\n      title: language === \"ar\" ? \"ÿßŸÑŸáÿßÿ™ŸÅ\" : \"Phone\",\n      value: \"+1 (555) 123-4567\",\n    },\n    {\n      icon: MapPin,\n      title: language === \"ar\" ? \"ÿßŸÑŸÖŸàŸÇÿπ\" : \"Location\",\n      value: language === \"ar\" ? \"ÿØÿ®Ÿäÿå ÿßŸÑÿ•ŸÖÿßÿ±ÿßÿ™ ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿßŸÑŸÖÿ™ÿ≠ÿØÿ©\" : \"Dubai, UAE\",\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20\">\n        {/* Hero Section */}\n        <section className=\"py-24 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-3xl mx-auto text-center\">\n              <h1\n                className=\"text-4xl md:text-5xl font-heading font-bold text-foreground mb-6\"\n                data-testid=\"text-contact-title\"\n              >\n                {t(\"contact.title\")}\n              </h1>\n              <p className=\"text-lg text-muted-foreground leading-relaxed\">\n                {language === \"ar\"\n                  ? \"ŸÜÿ≠ŸÜ ŸáŸÜÿß ŸÑŸÖÿ≥ÿßÿπÿØÿ™ŸÉ. ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸÜÿß Ÿàÿ≥ŸÜÿ±ÿØ ÿπŸÑŸäŸÉ ŸÅŸä ÿ£ŸÇÿ±ÿ® ŸàŸÇÿ™ ŸÖŸÖŸÉŸÜ.\"\n                  : \"We're here to help. Get in touch and we'll get back to you as soon as possible.\"}\n              </p>\n            </div>\n          </div>\n        </section>\n\n        {/* Contact Form & Info */}\n        <section className=\"py-24\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-12\">\n              {/* Contact Info Cards */}\n              <div className=\"space-y-6\">\n                {contactInfo.map((info, index) => (\n                  <Card\n                    key={index}\n                    className=\"hover-elevate active-elevate-2 transition-all\"\n                    data-testid={`card-contact-info-${index}`}\n                  >\n                    <CardContent className=\"p-6\">\n                      <div className=\"flex items-start gap-4\">\n                        <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\n                          <info.icon className=\"h-6 w-6 text-primary\" />\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold text-foreground mb-1\">\n                            {info.title}\n                          </h3>\n                          <p className=\"text-muted-foreground\">{info.value}</p>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n\n              {/* Contact Form */}\n              <div className=\"lg:col-span-2\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle className=\"text-2xl\">\n                      {language === \"ar\" ? \"ÿ£ÿ±ÿ≥ŸÑ ŸÑŸÜÿß ÿ±ÿ≥ÿßŸÑÿ©\" : \"Send us a message\"}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <Form {...form}>\n                      <form\n                        onSubmit={form.handleSubmit(onSubmit)}\n                        className=\"space-y-6\"\n                      >\n                        <FormField\n                          control={form.control}\n                          name=\"name\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>{t(\"contact.name\")}</FormLabel>\n                              <FormControl>\n                                <Input\n                                  {...field}\n                                  data-testid=\"input-contact-name\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={form.control}\n                          name=\"email\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>{t(\"contact.email\")}</FormLabel>\n                              <FormControl>\n                                <Input\n                                  type=\"email\"\n                                  {...field}\n                                  data-testid=\"input-contact-email\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <FormField\n                          control={form.control}\n                          name=\"message\"\n                          render={({ field }) => (\n                            <FormItem>\n                              <FormLabel>{t(\"contact.message\")}</FormLabel>\n                              <FormControl>\n                                <Textarea\n                                  {...field}\n                                  rows={6}\n                                  data-testid=\"input-contact-message\"\n                                />\n                              </FormControl>\n                              <FormMessage />\n                            </FormItem>\n                          )}\n                        />\n\n                        <Button\n                          type=\"submit\"\n                          size=\"lg\"\n                          className=\"w-full\"\n                          data-testid=\"button-contact-send\"\n                        >\n                          {t(\"contact.send\")}\n                        </Button>\n                      </form>\n                    </Form>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 7758
        },
        "postcss.config.js": {
            "content": "export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n",
            "size_bytes": 80
        },
        "client/src/lib/authUtils.ts": {
            "content": "export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n",
            "size_bytes": 116
        },
        "client/src/components/ui/dialog.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n",
            "size_bytes": 3848
        },
        "client/src/pages/admin/AdminUsers.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { MoreVertical, UserCheck, UserX, XCircle, Trash2 } from \"lucide-react\";\nimport type { User } from \"@shared/schema\";\nimport { useState } from \"react\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport default function AdminUsers() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  const { user: currentUser } = useAuth();\n  const [searchFilter, setSearchFilter] = useState<string>(\"\");\n  const [roleFilter, setRoleFilter] = useState<string>(\"all\");\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\n  \n  const [actionDialog, setActionDialog] = useState<{\n    open: boolean;\n    type: \"deactivate\" | \"activate\" | \"delete\" | \"cancel-subscription\" | null;\n    user: User | null;\n  }>({\n    open: false,\n    type: null,\n    user: null,\n  });\n\n  const { data: users, isLoading } = useQuery<User[]>({\n    queryKey: [\"/api/admin/users\"],\n  });\n\n  const filteredUsers = users?.filter((user) => {\n    const matchSearch = !searchFilter || \n      user.email?.toLowerCase().includes(searchFilter.toLowerCase()) ||\n      user.firstName?.toLowerCase().includes(searchFilter.toLowerCase()) ||\n      user.lastName?.toLowerCase().includes(searchFilter.toLowerCase());\n    const matchRole = roleFilter === \"all\" || user.role === roleFilter;\n    const matchStatus = statusFilter === \"all\" || (statusFilter === \"active\" ? user.isActive : !user.isActive);\n    return matchSearch && matchRole && matchStatus;\n  }) || [];\n\n  const deactivateMutation = useMutation({\n    mutationFn: async (userId: string) => {\n      return await apiRequest(\"PATCH\", `/api/admin/users/${userId}/deactivate`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿπÿ∑ŸäŸÑ\" : \"User Deactivated\",\n        description: language === \"ar\" \n          ? \"ÿ™ŸÖ ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ®ŸÜÿ¨ÿßÿ≠\" \n          : \"User has been deactivated successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || \"Failed to deactivate user\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const activateMutation = useMutation({\n    mutationFn: async (userId: string) => {\n      return await apiRequest(\"PATCH\", `/api/admin/users/${userId}/activate`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ŸÅÿπŸäŸÑ\" : \"User Activated\",\n        description: language === \"ar\" \n          ? \"ÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ®ŸÜÿ¨ÿßÿ≠\" \n          : \"User has been activated successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || \"Failed to activate user\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (userId: string) => {\n      return await apiRequest(\"DELETE\", `/api/admin/users/${userId}`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ\" : \"User Deleted\",\n        description: language === \"ar\" \n          ? \"ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ®ŸÜÿ¨ÿßÿ≠\" \n          : \"User has been deleted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || \"Failed to delete user\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const cancelSubscriptionMutation = useMutation({\n    mutationFn: async (userId: string) => {\n      return await apiRequest(\"PATCH\", `/api/admin/users/${userId}/cancel-subscription`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ•ŸÑÿ∫ÿßÿ°\" : \"Subscription Cancelled\",\n        description: language === \"ar\" \n          ? \"ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿ®ŸÜÿ¨ÿßÿ≠\" \n          : \"Subscription has been cancelled successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || \"Failed to cancel subscription\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAction = () => {\n    if (!actionDialog.user) return;\n\n    switch (actionDialog.type) {\n      case \"deactivate\":\n        deactivateMutation.mutate(actionDialog.user.id);\n        break;\n      case \"activate\":\n        activateMutation.mutate(actionDialog.user.id);\n        break;\n      case \"delete\":\n        deleteMutation.mutate(actionDialog.user.id);\n        break;\n      case \"cancel-subscription\":\n        cancelSubscriptionMutation.mutate(actionDialog.user.id);\n        break;\n    }\n\n    setActionDialog({ open: false, type: null, user: null });\n  };\n\n  const openActionDialog = (type: typeof actionDialog.type, user: User) => {\n    setActionDialog({ open: true, type, user });\n  };\n\n  const isCurrentUser = (userId: string) => currentUser?.id === userId;\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n      <h1\n        className=\"text-3xl font-heading font-bold text-foreground mb-8\"\n        data-testid=\"text-admin-users-title\"\n      >\n        {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ\" : \"User Management\"}\n      </h1>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>\n            {language === \"ar\" ? \"ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ\" : \"All Users\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <Input\n              placeholder={language === \"ar\" ? \"ÿßÿ®ÿ≠ÿ´ ÿ®ÿßŸÑÿ®ÿ±ŸäÿØ ÿ£Ÿà ÿßŸÑÿßÿ≥ŸÖ...\" : \"Search by email or name...\"}\n              value={searchFilter}\n              onChange={(e) => setSearchFilter(e.target.value)}\n              data-testid=\"input-search-users\"\n            />\n            <select \n              value={roleFilter}\n              onChange={(e) => setRoleFilter(e.target.value)}\n              className=\"px-3 py-2 border border-border rounded-md bg-background\"\n              data-testid=\"select-role-filter\"\n            >\n              <option value=\"all\">{language === \"ar\" ? \"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿØŸàÿßÿ±\" : \"All Roles\"}</option>\n              <option value=\"user\">{language === \"ar\" ? \"ŸÖÿ≥ÿ™ÿÆÿØŸÖ\" : \"User\"}</option>\n              <option value=\"admin\">{language === \"ar\" ? \"ŸÖÿ≥ÿ§ŸàŸÑ\" : \"Admin\"}</option>\n            </select>\n            <select \n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n              className=\"px-3 py-2 border border-border rounded-md bg-background\"\n              data-testid=\"select-status-filter\"\n            >\n              <option value=\"all\">{language === \"ar\" ? \"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ÿßŸÑÿßÿ™\" : \"All Status\"}</option>\n              <option value=\"active\">{language === \"ar\" ? \"ŸÜÿ¥ÿ∑\" : \"Active\"}</option>\n              <option value=\"inactive\">{language === \"ar\" ? \"ŸÖÿπÿ∑ŸÑ\" : \"Inactive\"}</option>\n            </select>\n            {(searchFilter || roleFilter !== \"all\" || statusFilter !== \"all\") && (\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setSearchFilter(\"\");\n                  setRoleFilter(\"all\");\n                  setStatusFilter(\"all\");\n                }}\n                data-testid=\"button-clear-user-filters\"\n              >\n                {language === \"ar\" ? \"ŸÖÿ≥ÿ≠\" : \"Clear\"}\n              </Button>\n            )}\n          </div>\n          <div className=\"text-sm text-muted-foreground\">\n            {language === \"ar\" ? \"ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨: \" : \"Results: \"} {filteredUsers.length}\n          </div>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\" : \"User\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿØŸàÿ±\" : \"Role\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ≠ÿßŸÑÿ©\" : \"Status\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\" : \"Subscription\"}</TableHead>\n                <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ\" : \"Joined\"}</TableHead>\n                <TableHead className=\"text-right\">{language === \"ar\" ? \"ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™\" : \"Actions\"}</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {filteredUsers.map((user) => (\n                <TableRow key={user.id} data-testid={`row-user-${user.id}`}>\n                  <TableCell>\n                    <div className=\"flex items-center gap-3\">\n                      <Avatar className=\"h-8 w-8\">\n                        <AvatarImage src={user.profileImageUrl || \"\"} />\n                        <AvatarFallback>\n                          {user.firstName?.[0] || user.email?.[0] || \"U\"}\n                        </AvatarFallback>\n                      </Avatar>\n                      <span className=\"font-medium\">\n                        {user.firstName && user.lastName\n                          ? `${user.firstName} ${user.lastName}`\n                          : user.email}\n                      </span>\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"text-muted-foreground\">\n                    {user.email}\n                  </TableCell>\n                  <TableCell>\n                    <Badge variant={user.role === \"admin\" ? \"default\" : \"secondary\"}>\n                      {user.role}\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    <Badge\n                      variant={user.isActive ? \"default\" : \"secondary\"}\n                      data-testid={`badge-status-${user.id}`}\n                    >\n                      {user.isActive \n                        ? (language === \"ar\" ? \"ŸÜÿ¥ÿ∑\" : \"Active\")\n                        : (language === \"ar\" ? \"ŸÖÿπÿ∑ŸÑ\" : \"Inactive\")\n                      }\n                    </Badge>\n                  </TableCell>\n                  <TableCell>\n                    <Badge\n                      variant={\n                        user.subscriptionStatus === \"active\"\n                          ? \"default\"\n                          : \"secondary\"\n                      }\n                    >\n                      {user.subscriptionStatus || \"none\"}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"text-muted-foreground\">\n                    {user.createdAt\n                      ? new Date(user.createdAt).toLocaleDateString()\n                      : \"-\"}\n                  </TableCell>\n                  <TableCell className=\"text-right\">\n                    <DropdownMenu>\n                      <DropdownMenuTrigger asChild>\n                        <Button \n                          variant=\"ghost\" \n                          size=\"icon\"\n                          data-testid={`button-actions-${user.id}`}\n                        >\n                          <MoreVertical className=\"h-4 w-4\" />\n                        </Button>\n                      </DropdownMenuTrigger>\n                      <DropdownMenuContent align=\"end\">\n                        <DropdownMenuLabel>\n                          {language === \"ar\" ? \"ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™\" : \"Actions\"}\n                        </DropdownMenuLabel>\n                        <DropdownMenuSeparator />\n                        \n                        {!isCurrentUser(user.id) && user.isActive && (\n                          <DropdownMenuItem\n                            onClick={() => openActionDialog(\"deactivate\", user)}\n                            data-testid={`action-deactivate-${user.id}`}\n                          >\n                            <UserX className=\"h-4 w-4 mr-2\" />\n                            {language === \"ar\" ? \"ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Deactivate Account\"}\n                          </DropdownMenuItem>\n                        )}\n                        \n                        {!user.isActive && (\n                          <DropdownMenuItem\n                            onClick={() => openActionDialog(\"activate\", user)}\n                            data-testid={`action-activate-${user.id}`}\n                          >\n                            <UserCheck className=\"h-4 w-4 mr-2\" />\n                            {language === \"ar\" ? \"ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Activate Account\"}\n                          </DropdownMenuItem>\n                        )}\n\n                        {user.subscriptionStatus && user.subscriptionStatus !== \"none\" && user.subscriptionStatus !== \"cancelled\" && (\n                          <DropdownMenuItem\n                            onClick={() => openActionDialog(\"cancel-subscription\", user)}\n                            data-testid={`action-cancel-subscription-${user.id}`}\n                          >\n                            <XCircle className=\"h-4 w-4 mr-2\" />\n                            {language === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\" : \"Cancel Subscription\"}\n                          </DropdownMenuItem>\n                        )}\n\n                        {!isCurrentUser(user.id) && (\n                          <>\n                            <DropdownMenuSeparator />\n                            \n                            <DropdownMenuItem\n                              onClick={() => openActionDialog(\"delete\", user)}\n                              className=\"text-destructive focus:text-destructive\"\n                              data-testid={`action-delete-${user.id}`}\n                            >\n                              <Trash2 className=\"h-4 w-4 mr-2\" />\n                              {language === \"ar\" ? \"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\" : \"Delete User\"}\n                            </DropdownMenuItem>\n                          </>\n                        )}\n                      </DropdownMenuContent>\n                    </DropdownMenu>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </CardContent>\n      </Card>\n\n      <AlertDialog open={actionDialog.open} onOpenChange={(open) => !open && setActionDialog({ open: false, type: null, user: null })}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>\n              {actionDialog.type === \"deactivate\" && (language === \"ar\" ? \"ÿ™ÿπÿ∑ŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Deactivate Account\")}\n              {actionDialog.type === \"activate\" && (language === \"ar\" ? \"ÿ™ŸÅÿπŸäŸÑ ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Activate Account\")}\n              {actionDialog.type === \"delete\" && (language === \"ar\" ? \"ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\" : \"Delete User\")}\n              {actionDialog.type === \"cancel-subscription\" && (language === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ° ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\" : \"Cancel Subscription\")}\n            </AlertDialogTitle>\n            <AlertDialogDescription>\n              {actionDialog.type === \"deactivate\" && (\n                language === \"ar\" \n                  ? \"ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿπÿ∑ŸäŸÑ Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿü ŸÑŸÜ Ÿäÿ™ŸÖŸÉŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸÜ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ.\"\n                  : \"Are you sure you want to deactivate this account? The user will not be able to log in.\"\n              )}\n              {actionDialog.type === \"activate\" && (\n                language === \"ar\"\n                  ? \"ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ŸÅÿπŸäŸÑ Ÿáÿ∞ÿß ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿü\"\n                  : \"Are you sure you want to activate this account?\"\n              )}\n              {actionDialog.type === \"delete\" && (\n                language === \"ar\"\n                  ? \"ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖÿü Ÿáÿ∞ÿß ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ° ŸÑÿß ÿ±ÿ¨ÿπÿ© ŸÅŸäŸá Ÿàÿ≥Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ±ÿ™ÿ®ÿ∑ÿ©.\"\n                  : \"Are you sure you want to delete this user? This action cannot be undone and will delete all associated data.\"\n              )}\n              {actionDialog.type === \"cancel-subscription\" && (\n                language === \"ar\"\n                  ? \"ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ŸÑÿ∫ÿßÿ° ÿßÿ¥ÿ™ÿ±ÿßŸÉ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖÿü\"\n                  : \"Are you sure you want to cancel this user's subscription?\"\n              )}\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel data-testid=\"button-cancel-action\">\n              {language === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ°\" : \"Cancel\"}\n            </AlertDialogCancel>\n            <AlertDialogAction \n              onClick={handleAction}\n              data-testid=\"button-confirm-action\"\n              className={actionDialog.type === \"delete\" ? \"bg-destructive hover:bg-destructive/90\" : \"\"}\n            >\n              {language === \"ar\" ? \"ÿ™ÿ£ŸÉŸäÿØ\" : \"Confirm\"}\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n",
            "size_bytes": 18452
        },
        "client/src/components/ui/sheet.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n",
            "size_bytes": 4281
        },
        "client/src/components/ui/toaster.tsx": {
            "content": "import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n",
            "size_bytes": 772
        },
        "client/src/components/ui/context-menu.tsx": {
            "content": "import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n",
            "size_bytes": 7428
        },
        "client/src/components/ui/badge.tsx": {
            "content": "import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n",
            "size_bytes": 1202
        },
        "client/src/components/ui/radio-group.tsx": {
            "content": "import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n",
            "size_bytes": 1467
        },
        "client/src/components/ui/button.tsx": {
            "content": "import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n",
            "size_bytes": 2359
        },
        "client/src/components/ui/toggle-group.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n",
            "size_bytes": 1753
        },
        "client/src/components/admin/AdminSidebar.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Link, useLocation } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport {\n  LayoutDashboard,\n  Users,\n  BookOpen,\n  DollarSign,\n  BarChart3,\n  Video,\n  Settings,\n  GraduationCap,\n  CreditCard,\n  Home,\n  LogOut,\n  ArrowDown,\n  Shield,\n  Headphones,\n  Settings as SettingsIcon,\n} from \"lucide-react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n  SidebarFooter,\n} from \"@/components/ui/sidebar\";\nimport { Button } from \"@/components/ui/button\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport function AdminSidebar() {\n  const { t, language } = useLanguage();\n  const [location, navigate] = useLocation();\n  const { toast } = useToast();\n  const { user } = useAuth();\n\n  const handleLogout = async () => {\n    try {\n      const response = await fetch(\"/api/auth/logout\", {\n        method: \"POST\",\n        credentials: \"include\",\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Logout failed\");\n      }\n\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      navigate(\"/\");\n      \n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logged out\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"You have been logged out successfully\",\n      });\n    } catch (error) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: language === \"ar\" ? \"ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logout failed\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const overviewItems = [\n    {\n      title: language === \"ar\" ? \"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ\" : \"Dashboard\",\n      icon: LayoutDashboard,\n      path: \"/admin/dashboard\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™\" : \"Analytics\",\n      icon: BarChart3,\n      path: \"/admin/analytics\",\n    },\n  ];\n\n  const contentItems = [\n    {\n      title: language === \"ar\" ? \"ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"Courses\",\n      icon: BookOpen,\n      path: \"/admin/courses\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ Zoom\" : \"Zoom Meetings\",\n      icon: Video,\n      path: \"/admin/meetings\",\n    },\n  ];\n\n  const businessItems = [\n    {\n      title: language === \"ar\" ? \"ÿÆÿ∑ÿ∑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\" : \"Pricing Plans\",\n      icon: DollarSign,\n      path: \"/admin/pricing\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸàŸÜ\" : \"Users\",\n      icon: Users,\n      path: \"/admin/users\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿßŸÑŸÖÿØŸÅŸàÿπÿßÿ™\" : \"Payments\",\n      icon: CreditCard,\n      path: \"/admin/payments\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ≥ÿ≠ÿ®\" : \"Withdrawals\",\n      icon: ArrowDown,\n      path: \"/admin/withdrawals\",\n    },\n  ];\n\n  const systemItems = [\n    ...(user?.role === \"admin\" || user?.role === \"manager\" ? [{\n      title: language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿØŸàÿßÿ±\" : \"Role Management\",\n      icon: Users,\n      path: \"/admin/roles\",\n    }] : []),\n    {\n      title: language === \"ar\" ? \"ÿßŸÑÿ≥ÿ¨ŸÑÿßÿ™\" : \"Logs\",\n      icon: BarChart3,\n      path: \"/admin/logs\",\n    },\n    ...(user?.role === \"admin\" ? [{\n      title: language === \"ar\" ? \"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™\" : \"Settings\",\n      icon: Settings,\n      path: \"/admin/settings\",\n    }] : []),\n  ];\n\n  // Filter business items based on role\n  const getBusinessItems = () => {\n    if (user?.role === \"admin\") {\n      return businessItems;\n    }\n    if (user?.role === \"support\") {\n      return businessItems.filter(item => \n        item.path === \"/admin/pricing\" || \n        item.path === \"/admin/users\" || \n        item.path === \"/admin/payments\" || \n        item.path === \"/admin/withdrawals\"\n      );\n    }\n    if (user?.role === \"manager\") {\n      return businessItems.filter(item => item.path !== \"/admin/settings\");\n    }\n    return [];\n  };\n\n  // Filter content items based on role\n  const getContentItems = () => {\n    if (user?.role === \"support\") return [];\n    return contentItems;\n  };\n\n  // Filter overview items based on role\n  const getOverviewItems = () => {\n    if (user?.role === \"support\") return [];\n    return overviewItems;\n  };\n\n  // Get role badge color and icon\n  const getRoleBadgeColor = (role?: string) => {\n    switch (role) {\n      case \"admin\":\n        return \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100\";\n      case \"manager\":\n        return \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100\";\n      case \"support\":\n        return \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100\";\n      default:\n        return \"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100\";\n    }\n  };\n\n  const getRoleIcon = (role?: string) => {\n    switch (role) {\n      case \"admin\":\n        return <Shield className=\"h-3 w-3\" />;\n      case \"manager\":\n        return <SettingsIcon className=\"h-3 w-3\" />;\n      case \"support\":\n        return <Headphones className=\"h-3 w-3\" />;\n      default:\n        return <Users className=\"h-3 w-3\" />;\n    }\n  };\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"border-b border-border p-4 space-y-4\">\n        {/* Logo Section */}\n        <Link href=\"/admin/dashboard\">\n          <a className=\"flex items-center gap-2 px-2 py-1 hover-elevate active-elevate-2 rounded-md transition-colors\">\n            <GraduationCap className=\"h-6 w-6 text-primary\" />\n            <div className=\"flex flex-col\">\n              <span className=\"font-heading font-bold text-base\">Leed Academy</span>\n              <span className=\"text-xs text-muted-foreground\">\n                {language === \"ar\" ? \"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ©\" : \"Admin Panel\"}\n              </span>\n            </div>\n          </a>\n        </Link>\n\n        {/* User Info Section */}\n        <div className=\"flex items-center gap-3 px-2 py-3 bg-muted/30 rounded-lg\">\n          <Avatar className=\"h-10 w-10\">\n            <AvatarImage src={user?.profileImageUrl || \"\"} />\n            <AvatarFallback>\n              {user?.firstName?.[0] || user?.email?.[0] || \"U\"}\n            </AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium text-foreground truncate\" data-testid=\"text-user-name\">\n              {user?.firstName} {user?.lastName}\n            </p>\n            <div className=\"flex items-center gap-1 mt-1\">\n              <Badge className={`${getRoleBadgeColor(user?.role)} flex items-center gap-1`} data-testid={`badge-user-role-${user?.role}`}>\n                {getRoleIcon(user?.role)}\n                <span className=\"text-xs capitalize\">\n                  {language === \"ar\" \n                    ? user?.role === \"admin\" ? \"ŸÖÿ≥ÿ§ŸàŸÑ\" : user?.role === \"manager\" ? \"ŸÖÿØŸäÿ±\" : user?.role === \"support\" ? \"ÿØÿπŸÖ\" : user?.role\n                    : user?.role}\n                </span>\n              </Badge>\n            </div>\n          </div>\n        </div>\n      </SidebarHeader>\n      <SidebarContent className=\"gap-4\">\n        {/* Overview Section */}\n        {getOverviewItems().length > 0 && (\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs font-medium text-muted-foreground px-4\">\n            {language === \"ar\" ? \"ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ©\" : \"Overview\"}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {getOverviewItems().map((item) => (\n                <SidebarMenuItem key={item.path}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.path}\n                    data-testid={`admin-link-${item.path.split(\"/\").pop()}`}\n                  >\n                    <Link href={item.path}>\n                      <a className=\"flex items-center gap-3\">\n                        <item.icon className=\"h-4 w-4\" />\n                        <span className=\"text-sm font-medium\">{item.title}</span>\n                      </a>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n        )}\n\n        {/* Content Management Section */}\n        {getContentItems().length > 0 && (\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs font-medium text-muted-foreground px-4\">\n            {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ\" : \"Content\"}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {getContentItems().map((item) => (\n                <SidebarMenuItem key={item.path}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.path}\n                    data-testid={`admin-link-${item.path.split(\"/\").pop()}`}\n                  >\n                    <Link href={item.path}>\n                      <a className=\"flex items-center gap-3\">\n                        <item.icon className=\"h-4 w-4\" />\n                        <span className=\"text-sm font-medium\">{item.title}</span>\n                      </a>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n        )}\n\n        {/* Business Section */}\n        {getBusinessItems().length > 0 && (\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs font-medium text-muted-foreground px-4\">\n            {language === \"ar\" ? \"ÿßŸÑÿ£ÿπŸÖÿßŸÑ\" : \"Business\"}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {getBusinessItems().map((item) => (\n                <SidebarMenuItem key={item.path}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.path}\n                    data-testid={`admin-link-${item.path.split(\"/\").pop()}`}\n                  >\n                    <Link href={item.path}>\n                      <a className=\"flex items-center gap-3\">\n                        <item.icon className=\"h-4 w-4\" />\n                        <span className=\"text-sm font-medium\">{item.title}</span>\n                      </a>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n        )}\n\n        {/* System Section */}\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs font-medium text-muted-foreground px-4\">\n            {language === \"ar\" ? \"ÿßŸÑŸÜÿ∏ÿßŸÖ\" : \"System\"}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {systemItems.map((item) => (\n                <SidebarMenuItem key={item.path}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.path}\n                    data-testid={`admin-link-${item.path.split(\"/\").pop()}`}\n                  >\n                    <Link href={item.path}>\n                      <a className=\"flex items-center gap-3\">\n                        <item.icon className=\"h-4 w-4\" />\n                        <span className=\"text-sm font-medium\">{item.title}</span>\n                      </a>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n      <SidebarFooter className=\"border-t border-border p-4 space-y-2\">\n        <Button\n          variant=\"ghost\"\n          className=\"w-full justify-start gap-3 text-sm\"\n          onClick={() => navigate(\"/\")}\n          data-testid=\"button-admin-home\"\n        >\n          <Home className=\"h-4 w-4\" />\n          {language === \"ar\" ? \"ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\" : \"Home\"}\n        </Button>\n        <Button\n          variant=\"destructive\"\n          className=\"w-full justify-start gap-3 text-sm\"\n          onClick={handleLogout}\n          data-testid=\"button-admin-logout\"\n        >\n          <LogOut className=\"h-4 w-4\" />\n          {language === \"ar\" ? \"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logout\"}\n        </Button>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n",
            "size_bytes": 12550
        },
        "client/src/hooks/useAuth.ts": {
            "content": "import { useQuery } from \"@tanstack/react-query\";\nimport type { User } from \"@shared/schema\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery<User>({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  return {\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n    isAdmin: user?.role === \"admin\",\n  };\n}\n",
            "size_bytes": 344
        },
        "client/src/components/ui/tabs.tsx": {
            "content": "import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n",
            "size_bytes": 1883
        },
        "client/src/lib/queryClient.ts": {
            "content": "import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n",
            "size_bytes": 1383
        },
        "client/src/components/ui/toast.tsx": {
            "content": "import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n",
            "size_bytes": 4845
        },
        "server/db.ts": {
            "content": "import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n",
            "size_bytes": 483
        },
        "client/src/components/ui/command.tsx": {
            "content": "import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n",
            "size_bytes": 4885
        },
        "server/replitAuth.ts": {
            "content": "import session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport connectPg from \"connect-pg-simple\";\nimport { pool } from \"./db\";\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    pool,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === \"production\",\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const userId = (req.session as any)?.userId;\n\n  if (!userId) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  return next();\n};\n",
            "size_bytes": 1024
        },
        "client/src/pages/Dashboard.tsx": {
            "content": "import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { BookOpen, Clock, TrendingUp, Award, CreditCard, CheckCircle2, AlertCircle, XCircle, Calendar } from \"lucide-react\";\nimport type { Course, Progress as UserProgress, Subscription, SubscriptionPlan } from \"@shared/schema\";\nimport { Link } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { format } from \"date-fns\";\n\nexport default function Dashboard() {\n  const { t, language } = useLanguage();\n  const { user, isAuthenticated, isLoading } = useAuth();\n  const { toast } = useToast();\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const { data: courses } = useQuery<Course[]>({\n    queryKey: [\"/api/courses\"],\n    enabled: isAuthenticated,\n  });\n\n  const { data: allProgress } = useQuery<UserProgress[]>({\n    queryKey: [\"/api/user/progress\"],\n    enabled: isAuthenticated,\n  });\n\n  const { data: subscription, isLoading: isLoadingSubscription } = useQuery<\n    (Subscription & { plan: SubscriptionPlan | null }) | null\n  >({\n    queryKey: [\"/api/user/subscription\"],\n    enabled: isAuthenticated,\n  });\n\n  if (isLoading || !isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <Header />\n        <main className=\"pt-20\">\n          <div className=\"container mx-auto px-6 py-24\">\n            <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  // Only show courses where user has started watching (has progress)\n  const enrolledCourses = courses?.filter((course) =>\n    allProgress?.some((p) => p.courseId === course.id)\n  );\n\n  const completedLessons = allProgress?.filter((p) => p.completed).length || 0;\n  const totalHours = Math.floor(completedLessons * 0.75);\n\n  const stats = [\n    {\n      icon: BookOpen,\n      label: t(\"dashboard.stats.enrolled\"),\n      value: enrolledCourses?.length || 0,\n      color: \"text-blue-500\",\n    },\n    {\n      icon: Award,\n      label: t(\"dashboard.stats.completed\"),\n      value: completedLessons,\n      color: \"text-green-500\",\n    },\n    {\n      icon: Clock,\n      label: t(\"dashboard.stats.hours\"),\n      value: totalHours,\n      color: \"text-purple-500\",\n    },\n    {\n      icon: TrendingUp,\n      label: t(\"dashboard.stats.progress\"),\n      value: `${completedLessons > 0 ? Math.min(Math.round((completedLessons / 50) * 100), 100) : 0}%`,\n      color: \"text-orange-500\",\n    },\n  ];\n\n  const getCourseProgress = (courseId: string) => {\n    const courseProgress = allProgress?.filter((p) => p.courseId === courseId);\n    const completed = courseProgress?.filter((p) => p.completed).length || 0;\n    const total = courseProgress?.length || 1;\n    return (completed / total) * 100;\n  };\n\n  const getSubscriptionStatus = () => {\n    if (!subscription) return \"none\";\n    \n    const now = new Date();\n    const endDate = subscription.endDate ? new Date(subscription.endDate) : null;\n    \n    if (subscription.status === \"active\" && endDate && now > endDate) {\n      return \"expired\";\n    }\n    \n    return subscription.status;\n  };\n\n  const subscriptionStatus = getSubscriptionStatus();\n  \n  const getStatusConfig = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return {\n          icon: CheckCircle2,\n          label: t(\"subscription.status.active\"),\n          variant: \"default\" as const,\n          color: \"text-green-500\",\n        };\n      case \"pending\":\n        return {\n          icon: AlertCircle,\n          label: t(\"subscription.status.pending\"),\n          variant: \"secondary\" as const,\n          color: \"text-yellow-500\",\n        };\n      case \"expired\":\n        return {\n          icon: XCircle,\n          label: t(\"subscription.status.expired\"),\n          variant: \"destructive\" as const,\n          color: \"text-red-500\",\n        };\n      default:\n        return {\n          icon: AlertCircle,\n          label: t(\"subscription.status.inactive\"),\n          variant: \"outline\" as const,\n          color: \"text-muted-foreground\",\n        };\n    }\n  };\n\n  const statusConfig = getStatusConfig(subscriptionStatus);\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20\">\n        {/* Welcome Section */}\n        <section className=\"py-12 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <h1\n              className=\"text-3xl md:text-4xl font-heading font-bold text-foreground mb-2\"\n              data-testid=\"text-dashboard-welcome\"\n            >\n              {t(\"dashboard.welcome\")}, {user?.firstName || user?.email}!\n            </h1>\n            <p className=\"text-muted-foreground\">\n              {language === \"ar\"\n                ? \"ÿ™ÿßÿ®ÿπ ÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÉ\"\n                : \"Continue your learning journey\"}\n            </p>\n          </div>\n        </section>\n\n        {/* Stats Cards */}\n        <section className=\"py-12\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {stats.map((stat, index) => (\n                <Card\n                  key={index}\n                  className=\"hover-elevate active-elevate-2 transition-all\"\n                  data-testid={`card-stat-${index}`}\n                >\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <stat.icon className={`h-8 w-8 ${stat.color}`} />\n                      <span className=\"text-3xl font-bold text-foreground\">\n                        {stat.value}\n                      </span>\n                    </div>\n                    <p className=\"text-sm text-muted-foreground\">{stat.label}</p>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        </section>\n\n        {/* Subscription Status */}\n        <section className=\"py-12 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <h2 className=\"text-2xl font-heading font-bold text-foreground mb-6\">\n              {t(\"subscription.title\")}\n            </h2>\n            \n            {isLoadingSubscription ? (\n              <Card>\n                <CardContent className=\"p-12\">\n                  <div className=\"h-32 bg-muted animate-pulse rounded-lg\" />\n                </CardContent>\n              </Card>\n            ) : subscription && subscription.plan ? (\n              <Card className=\"hover-elevate transition-all\" data-testid=\"card-subscription-status\">\n                <CardHeader>\n                  <div className=\"flex items-start justify-between gap-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <CreditCard className=\"h-8 w-8 text-primary\" />\n                      <div>\n                        <CardTitle className=\"text-xl mb-1\">\n                          {language === \"ar\" ? subscription.plan.nameAr : subscription.plan.nameEn}\n                        </CardTitle>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {t(\"subscription.current-plan\")}\n                        </p>\n                      </div>\n                    </div>\n                    <Badge variant={statusConfig.variant} className=\"flex items-center gap-1\" data-testid=\"badge-subscription-status\">\n                      <statusConfig.icon className=\"h-3 w-3\" />\n                      {statusConfig.label}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6\">\n                    {subscription.startDate && (\n                      <div>\n                        <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-2\">\n                          <Calendar className=\"h-4 w-4\" />\n                          {t(\"subscription.started\")}\n                        </p>\n                        <p className=\"font-medium text-foreground\" data-testid=\"text-subscription-start-date\">\n                          {format(new Date(subscription.startDate), \"MMM dd, yyyy\")}\n                        </p>\n                      </div>\n                    )}\n                    {subscription.endDate && (\n                      <div>\n                        <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-2\">\n                          <Calendar className=\"h-4 w-4\" />\n                          {subscriptionStatus === \"expired\"\n                            ? t(\"subscription.expired-on\")\n                            : t(\"subscription.expires\")}\n                        </p>\n                        <p className={`font-medium ${subscriptionStatus === \"expired\" ? \"text-destructive\" : \"text-foreground\"}`} data-testid=\"text-subscription-end-date\">\n                          {format(new Date(subscription.endDate), \"MMM dd, yyyy\")}\n                        </p>\n                      </div>\n                    )}\n                    <div>\n                      <p className=\"text-sm text-muted-foreground mb-1\">\n                        {t(\"pricing.features\")}\n                      </p>\n                      <p className=\"font-medium text-foreground\">\n                        {subscription.plan.featuresEn?.length || 0} {language === \"ar\" ? \"ŸÖŸäÿ≤ÿßÿ™\" : \"features\"}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-wrap gap-3\">\n                    <Button asChild variant=\"default\" data-testid=\"button-upgrade-plan\">\n                      <Link href=\"/pricing\">\n                        <a>\n                          {subscriptionStatus === \"active\"\n                            ? t(\"subscription.upgrade\")\n                            : subscriptionStatus === \"expired\"\n                              ? t(\"subscription.view-plans\")\n                              : t(\"subscription.change\")}\n                        </a>\n                      </Link>\n                    </Button>\n                    {subscriptionStatus === \"pending\" && (\n                      <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                        <AlertCircle className=\"h-4 w-4\" />\n                        <span>\n                          {language === \"ar\"\n                            ? \"ÿ≥Ÿäÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ ÿ®ÿπÿØ ŸÖŸàÿßŸÅŸÇÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ© ÿπŸÑŸâ ÿßŸÑÿØŸÅÿπ\"\n                            : \"Your subscription will be activated after admin approves your payment\"}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card className=\"hover-elevate transition-all\" data-testid=\"card-no-subscription\">\n                <CardContent className=\"p-12 text-center\">\n                  <CreditCard className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n                  <h3 className=\"text-xl font-heading font-bold text-foreground mb-2\">\n                    {t(\"subscription.no-subscription\")}\n                  </h3>\n                  <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\n                    {t(\"subscription.no-subscription-desc\")}\n                  </p>\n                  <Button asChild size=\"lg\" data-testid=\"button-view-plans\">\n                    <Link href=\"/pricing\">\n                      <a>{t(\"subscription.view-plans\")}</a>\n                    </Link>\n                  </Button>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </section>\n\n        {/* My Courses */}\n        <section className=\"py-12\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <h2 className=\"text-2xl font-heading font-bold text-foreground\">\n                {t(\"dashboard.my-courses\")}\n              </h2>\n              <Button asChild variant=\"outline\">\n                <Link href=\"/courses\">\n                  <a data-testid=\"button-browse-courses\">{language === \"ar\" ? \"ÿ™ÿµŸÅÿ≠ ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"Browse Courses\"}</a>\n                </Link>\n              </Button>\n            </div>\n\n            {enrolledCourses && enrolledCourses.length > 0 ? (\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {enrolledCourses.map((course) => {\n                  const progress = getCourseProgress(course.id);\n\n                  return (\n                    <Card\n                      key={course.id}\n                      className=\"hover-elevate active-elevate-2 transition-all\"\n                      data-testid={`card-my-course-${course.id}`}\n                    >\n                      <CardHeader>\n                        <CardTitle className=\"text-lg\">\n                          {language === \"ar\" ? course.titleAr : course.titleEn}\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"space-y-4\">\n                          <div>\n                            <div className=\"flex justify-between text-sm mb-2\">\n                              <span className=\"text-muted-foreground\">\n                                {t(\"dashboard.stats.progress\")}\n                              </span>\n                              <span className=\"font-medium text-foreground\">\n                                {Math.round(progress)}%\n                              </span>\n                            </div>\n                            <Progress value={progress} />\n                          </div>\n                          <Button\n                            asChild\n                            className=\"w-full\"\n                            data-testid={`button-continue-course-${course.id}`}\n                          >\n                            <Link href={`/course/${course.id}`}>\n                              <a>{t(\"courses.continue\")}</a>\n                            </Link>\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  );\n                })}\n              </div>\n            ) : (\n              <Card>\n                <CardContent className=\"p-12 text-center\">\n                  <BookOpen className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                  <p className=\"text-muted-foreground mb-4\">\n                    {language === \"ar\"\n                      ? \"ŸÑŸÖ ÿ™ŸÇŸÖ ÿ®ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸÅŸä ÿ£Ÿä ÿØŸàÿ±ÿ© ÿ®ÿπÿØ\"\n                      : \"You haven't enrolled in any courses yet\"}\n                  </p>\n                  <Button asChild>\n                    <Link href=\"/courses\">\n                      <a data-testid=\"button-explore-courses\">\n                        {language === \"ar\"\n                          ? \"ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑÿØŸàÿ±ÿßÿ™\"\n                          : \"Explore Courses\"}\n                      </a>\n                    </Link>\n                  </Button>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 16051
        },
        "client/src/hooks/use-toast.ts": {
            "content": "import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n",
            "size_bytes": 3895
        },
        "client/src/components/ui/progress.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n",
            "size_bytes": 791
        },
        "client/src/components/ui/menubar.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n",
            "size_bytes": 8605
        },
        "client/src/components/ui/breadcrumb.tsx": {
            "content": "import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n",
            "size_bytes": 2712
        },
        "client/src/index.css": {
            "content": "@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;500;600;700&family=Cairo:wght@400;500;600;700&display=swap');\n\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* Arabic Font - Apply to all elements when Arabic is active */\nbody.lang-ar,\nbody.lang-ar * {\n  font-family: Cairo, sans-serif !important;\n}\n\n/* Ensure Cairo font is used for Arabic text */\nhtml[dir=\"rtl\"] {\n  font-family: Cairo, sans-serif;\n}\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n  --opaque-button-border-intensity: -8;\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n  --background: 0 0% 100%;\n  --foreground: 222 47% 11%;\n  --border: 220 13% 91%;\n  --card: 0 0% 98%;\n  --card-foreground: 222 47% 11%;\n  --card-border: 220 13% 94%;\n  --sidebar: 220 14% 96%;\n  --sidebar-foreground: 222 47% 11%;\n  --sidebar-border: 220 13% 91%;\n  --sidebar-primary: 217 91% 60%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 220 14% 91%;\n  --sidebar-accent-foreground: 222 47% 11%;\n  --sidebar-ring: 217 91% 60%;\n  --popover: 0 0% 96%;\n  --popover-foreground: 222 47% 11%;\n  --popover-border: 220 13% 92%;\n  --primary: 217 91% 60%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 220 14% 91%;\n  --secondary-foreground: 222 47% 11%;\n  --muted: 220 14% 94%;\n  --muted-foreground: 215 16% 47%;\n  --accent: 220 13% 91%;\n  --accent-foreground: 222 47% 11%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 220 13% 85%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 60%;\n  --chart-2: 173 58% 39%;\n  --chart-3: 197 37% 24%;\n  --chart-4: 43 74% 66%;\n  --chart-5: 27 87% 67%;\n  --font-sans: Inter, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem;\n  --shadow-2xs: 0px 2px 0px 0px hsl(220 13% 91% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(220 13% 91% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 1px 2px -1px hsl(220 13% 91% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 1px 2px -1px hsl(220 13% 91% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 2px 4px -1px hsl(220 13% 91% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 4px 6px -1px hsl(220 13% 91% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(220 13% 91% / 0.00), 0px 8px 10px -1px hsl(220 13% 91% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(220 13% 91% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n  --opaque-button-border-intensity: 9;\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n  --background: 222 47% 11%;\n  --foreground: 210 40% 98%;\n  --border: 217 33% 17%;\n  --card: 220 39% 13%;\n  --card-foreground: 210 40% 98%;\n  --card-border: 217 33% 16%;\n  --sidebar: 217 33% 15%;\n  --sidebar-foreground: 210 40% 98%;\n  --sidebar-border: 215 28% 19%;\n  --sidebar-primary: 217 91% 60%;\n  --sidebar-primary-foreground: 0 0% 100%;\n  --sidebar-accent: 215 28% 19%;\n  --sidebar-accent-foreground: 210 40% 98%;\n  --sidebar-ring: 217 91% 60%;\n  --popover: 217 33% 17%;\n  --popover-foreground: 210 40% 98%;\n  --popover-border: 215 28% 21%;\n  --primary: 217 91% 60%;\n  --primary-foreground: 0 0% 100%;\n  --secondary: 215 28% 21%;\n  --secondary-foreground: 210 40% 98%;\n  --muted: 215 20% 19%;\n  --muted-foreground: 217 19% 65%;\n  --accent: 217 20% 19%;\n  --accent-foreground: 210 40% 98%;\n  --destructive: 0 84% 60%;\n  --destructive-foreground: 0 0% 100%;\n  --input: 215 28% 27%;\n  --ring: 217 91% 60%;\n  --chart-1: 217 91% 75%;\n  --chart-2: 173 58% 70%;\n  --chart-3: 197 37% 75%;\n  --chart-4: 43 74% 75%;\n  --chart-5: 27 87% 75%;\n  --shadow-2xs: 0px 2px 0px 0px hsl(217 33% 15% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(217 33% 15% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(217 33% 15% / 0.00), 0px 1px 2px -1px hsl(217 33% 15% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(217 33% 15% / 0.00), 0px 1px 2px -1px hsl(217 33% 15% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(217 33% 15% / 0.00), 0px 2px 4px -1px hsl(217 33% 15% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(217 33% 15% / 0.00), 0px 4px 6px -1px hsl(217 33% 15% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(217 33% 15% / 0.00), 0px 8px 10px -1px hsl(217 33% 15% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(217 33% 15% / 0.00);\n\n/* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}\n",
            "size_bytes": 11169
        },
        "design_guidelines.md": {
            "content": "# Design Guidelines: Premium Trading Education Platform\n\n## Design Approach\n\n**Hybrid Approach**: Combine SmartTrader.me's premium aesthetic (sophisticated fintech design) with Material Design principles for dashboard functionality. Reference platforms: SmartTrader.me for marketing pages, Udemy for course layouts, Stripe for payment flows.\n\n**Key Design Principles**:\n- Professional sophistication with financial credibility\n- Data-driven trust building through live market integration\n- Bilingual excellence with seamless RTL/LTR switching\n- Premium education platform aesthetics\n\n## Typography System\n\n**Primary Font**: Inter (Google Fonts) - for UI, navigation, body text\n**Accent Font**: Poppins - for headings, CTAs, emphasis\n\n**Hierarchy**:\n- Hero Headlines: Poppins Bold, 48-64px (desktop), 32-40px (mobile)\n- Section Headers: Poppins SemiBold, 32-40px (desktop), 24-28px (mobile)\n- Card Titles: Inter SemiBold, 20-24px\n- Body Text: Inter Regular, 16-18px\n- UI Labels: Inter Medium, 14-16px\n- Captions: Inter Regular, 12-14px\n\n**RTL Considerations**: Maintain same font sizes but adjust letter-spacing for Arabic (slightly tighter)\n\n## Layout System\n\n**Spacing Units**: Tailwind units of 2, 4, 6, 8, 12, 16, 20, 24\n- Component padding: p-6 to p-8\n- Section spacing: py-16 to py-24 (desktop), py-12 (mobile)\n- Card gaps: gap-6 to gap-8\n- Container: max-w-7xl with px-6\n\n**Grid System**:\n- Course cards: grid-cols-1 md:grid-cols-2 lg:grid-cols-3\n- Feature sections: grid-cols-1 md:grid-cols-2 lg:grid-cols-4\n- Dashboard: Sidebar (260px) + Content area with responsive collapse\n\n## Component Library\n\n### Navigation\n**Header**: Fixed top navigation with glassmorphism effect (backdrop-blur), height 80px\n- Logo left, nav center, language switcher + CTA right\n- Mobile: Hamburger menu with slide-in drawer\n- RTL: Mirror layout completely\n\n**Language Switcher**: Toggle button with flag icons (AR/EN), smooth transition\n\n### Marketing Pages\n\n**Hero Section** (Home):\n- Split layout: 60% content, 40% visual\n- Live crypto ticker banner integrated subtly below hero\n- Animated numbers/stats\n- Primary CTA + Secondary CTA with backdrop-blur on image background\n- Height: 85vh\n\n**Testimonial Slider**:\n- Auto-rotating cards (5s interval)\n- Card design: Avatar (60px), quote, name, role, 5-star rating\n- 3 visible on desktop, 1 on mobile\n- Subtle shadow and border treatment\n\n**Live Crypto Widget**:\n- Horizontal ticker strip or dashboard-style cards\n- Show: BTC, ETH, USDT with price, 24h change, sparkline\n- Update every 10s with smooth number transitions\n- Position: Below hero or sticky top banner\n\n### Course Catalog\n\n**Course Card**:\n- Thumbnail image (16:9 ratio, 400x225px)\n- Badge overlay: \"Free\", \"Level 1\", \"Locked\" with icons\n- Title, instructor, duration, lesson count\n- Progress bar for enrolled users (0-100%)\n- Hover: Subtle lift with shadow increase\n\n**Course Detail Page**:\n- Hero with course banner image\n- Left: Video player / course overview (65%)\n- Right: Enrollment card with pricing, locked status (35%)\n- Curriculum accordion below with lesson checkmarks\n\n### Dashboard Components\n\n**User Dashboard**:\n- Top stats cards: Enrolled Courses, Completed, Hours Watched, Progress\n- Main content: Tabs for \"My Courses\", \"Continue Learning\", \"Certificates\"\n- Course cards show progress rings and \"Continue\" CTA\n\n**Admin Dashboard**:\n- Sidebar navigation with icons (Users, Courses, Payments, Analytics, Settings)\n- Analytics: Line charts for revenue, bar charts for subscriptions, user growth\n- Payment review table: User, Amount, Method, Proof Image, Status, Actions\n- Course management: Drag-drop lesson ordering, toggle lock/unlock\n\n### Forms & Authentication\n\n**Auth Pages**:\n- Centered card (max-w-md) on gradient background\n- Social proof element (user count, rating) below form\n- Input fields: Icon prefix, floating labels, validation states\n- Password strength indicator on register\n\n**Payment Flow**:\n- Step indicator (Choose Plan ‚Üí Payment Method ‚Üí Upload Proof)\n- Plan cards: Highlight \"Popular\" with border treatment\n- Payment method: Radio cards with crypto icons or bank icon\n- Upload area: Drag-drop zone for receipt image with preview\n\n### Interactive Elements\n\n**Buttons**:\n- Primary: Solid with subtle gradient, rounded-lg\n- Secondary: Border with background-blur when on images\n- Icon buttons: Consistent 40px √ó 40px touch targets\n- No explicit hover states defined (let Button component handle)\n\n**Cards**:\n- Border radius: rounded-xl (12px)\n- Shadow: subtle elevation (shadow-md to shadow-lg on hover)\n- Padding: p-6 to p-8\n\n**Badges/Tags**:\n- Rounded-full, px-3 py-1\n- Status indicators: Success (green), Warning (yellow), Locked (gray)\n\n## Images\n\n**Hero Section**: Use a sophisticated trading/education themed image showing:\n- Professional trader at multiple screens OR\n- Modern classroom/online learning setup OR\n- Abstract financial charts with depth of field\n- Dimensions: 1920√ó1080px, optimized for web\n- Treatment: Subtle gradient overlay for text contrast\n\n**Course Thumbnails**: Consistent placeholder or branded graphics (400√ó225px)\n\n**About Page**: Team photo or professional office environment\n\n**Testimonial Avatars**: Circular 60√ó60px user photos\n\n**Admin Dashboard**: Use chart libraries (Chart.js) for data visualization, no static images\n\n## Responsive Behavior\n\n**Breakpoints**:\n- Mobile: < 768px (single column, stacked layout)\n- Tablet: 768px - 1024px (2-column grids)\n- Desktop: > 1024px (full multi-column)\n\n**Mobile Adjustments**:\n- Collapse navigation to drawer\n- Stack hero to single column\n- Reduce spacing units by ~30%\n- Single-column course grids\n- Bottom navigation for dashboard\n\n## RTL (Arabic) Specific\n\n- Mirror entire layout (flex-row-reverse, text-right)\n- Reverse grid order where needed\n- Icon positions swap (chevrons flip direction)\n- Maintain same spacing and proportions\n- Test navigation flow thoroughly\n\n## Animations\n\n**Minimal, Purposeful Motion**:\n- Page transitions: Subtle fade (200ms)\n- Crypto price updates: Number counter animation\n- Course unlock: Celebratory micro-interaction (confetti burst, 600ms)\n- Avoid: Excessive parallax, complex scroll animations\n- Use: Smooth transitions on state changes (loading, success)\n\n## Performance Priorities\n\n- Lazy load course videos and thumbnails\n- Optimize crypto API polling (10s intervals, cache)\n- Progressive image loading for hero\n- Code-split dashboard vs. marketing pages\n\nThis design creates a premium, trustworthy trading education platform that balances sophistication with usability across both languages.",
            "size_bytes": 6557
        },
        "client/src/components/layout/Header.tsx": {
            "content": "import { Link, useLocation } from \"wouter\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useTheme } from \"@/lib/theme\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Globe, Moon, Sun, Menu, X } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport function Header() {\n  const [location, navigate] = useLocation();\n  const { language, setLanguage, t } = useLanguage();\n  const { user, isAuthenticated, isAdmin } = useAuth();\n  const { theme, toggleTheme } = useTheme();\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const { toast } = useToast();\n\n  // Check if user has admin panel access (admin, manager, or support)\n  const hasAdminAccess = user?.role === \"admin\" || user?.role === \"manager\" || user?.role === \"support\";\n\n  // Get admin panel route based on role\n  const getAdminRoute = () => {\n    if (user?.role === \"support\") {\n      return \"/admin/users\";\n    }\n    return \"/admin/dashboard\"; // admin and manager\n  };\n\n  const handleLogout = async () => {\n    try {\n      const response = await fetch(\"/api/auth/logout\", {\n        method: \"POST\",\n        credentials: \"include\",\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Logout failed\");\n      }\n\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      navigate(\"/\");\n      \n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logged out\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"You have been logged out successfully\",\n      });\n    } catch (error) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: language === \"ar\" ? \"ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logout failed\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const navItems = [\n    { path: \"/\", label: t(\"nav.home\") },\n    { path: \"/about\", label: t(\"nav.about\") },\n    { path: \"/services\", label: t(\"nav.services\") },\n    { path: \"/courses\", label: t(\"nav.courses\") },\n    { path: \"/news\", label: language === \"ar\" ? \"ÿßŸÑÿ£ÿÆÿ®ÿßÿ±\" : \"News\" },\n    { path: \"/pricing\", label: t(\"nav.pricing\") },\n    { path: \"/contact\", label: t(\"nav.contact\") },\n  ];\n\n  const isActive = (path: string) => location === path;\n\n  return (\n    <header className=\"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border\">\n      <div className=\"container mx-auto px-6\">\n        <div className=\"flex items-center justify-between h-20\">\n          {/* Logo */}\n          <Link \n            href=\"/\"\n            className=\"text-2xl font-heading font-bold text-primary hover-elevate active-elevate-2 px-3 py-2 rounded-lg transition-colors\"\n            data-testid=\"link-home-logo\"\n          >\n            Leed Academy\n          </Link>\n\n          {/* Desktop Navigation */}\n          <nav className=\"hidden lg:flex items-center gap-1\">\n            {navItems.map((item) => (\n              <Link \n                key={item.path} \n                href={item.path}\n                className={`px-4 py-2 rounded-lg font-medium transition-colors hover-elevate active-elevate-2 ${\n                  isActive(item.path)\n                    ? \"text-foreground bg-accent\"\n                    : \"text-muted-foreground\"\n                }`}\n                data-testid={`link-${item.label.toLowerCase().replace(/\\s+/g, \"-\")}`}\n              >\n                {item.label}\n              </Link>\n            ))}\n          </nav>\n\n          {/* Right Actions */}\n          <div className=\"flex items-center gap-2\">\n            {/* Language Switcher */}\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  data-testid=\"button-language-toggle\"\n                >\n                  <Globe className=\"h-5 w-5\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuItem\n                  onClick={() => setLanguage(\"en\")}\n                  data-testid=\"option-language-en\"\n                >\n                  English\n                </DropdownMenuItem>\n                <DropdownMenuItem\n                  onClick={() => setLanguage(\"ar\")}\n                  data-testid=\"option-language-ar\"\n                >\n                  ÿßŸÑÿπÿ±ÿ®Ÿäÿ©\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n\n            {/* Theme Toggle */}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={toggleTheme}\n              data-testid=\"button-theme-toggle\"\n            >\n              {theme === \"dark\" ? (\n                <Sun className=\"h-5 w-5\" />\n              ) : (\n                <Moon className=\"h-5 w-5\" />\n              )}\n            </Button>\n\n            {/* User Menu or Login */}\n            {isAuthenticated && user ? (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"rounded-full\"\n                    data-testid=\"button-user-menu\"\n                  >\n                    <Avatar className=\"h-9 w-9\">\n                      <AvatarImage src={user.profileImageUrl || \"\"} />\n                      <AvatarFallback>\n                        {user.firstName?.[0] || user.email?.[0] || \"U\"}\n                      </AvatarFallback>\n                    </Avatar>\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\" className=\"w-56\">\n                  <DropdownMenuItem asChild>\n                    <Link href=\"/dashboard\" data-testid=\"link-dashboard\">\n                      {t(\"nav.dashboard\")}\n                    </Link>\n                  </DropdownMenuItem>\n                  {hasAdminAccess && (\n                    <DropdownMenuItem asChild>\n                      <Link href={getAdminRoute()} data-testid=\"link-admin\">\n                        {t(\"nav.admin\")}\n                      </Link>\n                    </DropdownMenuItem>\n                  )}\n                  <DropdownMenuItem \n                    onClick={handleLogout}\n                    data-testid=\"button-logout\"\n                  >\n                    {t(\"nav.logout\")}\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            ) : (\n              <Button asChild data-testid=\"button-login\">\n                <Link href=\"/auth\">{t(\"nav.login\")}</Link>\n              </Button>\n            )}\n\n            {/* Mobile Menu Toggle */}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"lg:hidden\"\n              onClick={() => setMobileMenuOpen(!mobileMenuOpen)}\n              data-testid=\"button-mobile-menu\"\n            >\n              {mobileMenuOpen ? (\n                <X className=\"h-6 w-6\" />\n              ) : (\n                <Menu className=\"h-6 w-6\" />\n              )}\n            </Button>\n          </div>\n        </div>\n\n        {/* Mobile Menu */}\n        {mobileMenuOpen && (\n          <nav className=\"lg:hidden py-4 border-t border-border\">\n            <div className=\"flex flex-col gap-2\">\n              {navItems.map((item) => (\n                <Link \n                  key={item.path} \n                  href={item.path}\n                  className={`block px-4 py-3 rounded-lg font-medium transition-colors hover-elevate active-elevate-2 ${\n                    isActive(item.path)\n                      ? \"text-foreground bg-accent\"\n                      : \"text-muted-foreground\"\n                  }`}\n                  onClick={() => setMobileMenuOpen(false)}\n                  data-testid={`mobile-link-${item.label.toLowerCase().replace(/\\s+/g, \"-\")}`}\n                >\n                  {item.label}\n                </Link>\n              ))}\n            </div>\n          </nav>\n        )}\n      </div>\n    </header>\n  );\n}\n",
            "size_bytes": 8408
        },
        "client/src/lib/utils.ts": {
            "content": "import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n",
            "size_bytes": 166
        },
        "client/src/components/landing/Hero.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Button } from \"@/components/ui/button\";\nimport { ArrowRight, Play } from \"lucide-react\";\nimport { Link } from \"wouter\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport heroImage from \"@assets/generated_images/Trading_hero_background_image_e876a55e.png\";\n\nexport function Hero() {\n  const { t } = useLanguage();\n  \n  const { data: stats } = useQuery<{ userCount: number; courseCount: number; satisfactionRate: number }>({\n    queryKey: [\"/api/stats\"],\n  });\n\n  return (\n    <section className=\"relative min-h-[85vh] flex items-center overflow-hidden\">\n      {/* Background Image with Gradient Overlay */}\n      <div className=\"absolute inset-0 z-0\">\n        <img\n          src={heroImage}\n          alt=\"Trading\"\n          className=\"w-full h-full object-cover\"\n        />\n        <div className=\"absolute inset-0 bg-gradient-to-r from-background/95 via-background/80 to-background/60\" />\n      </div>\n\n      {/* Content */}\n      <div className=\"container mx-auto px-6 relative z-10\">\n        <div className=\"max-w-3xl\">\n          <h1\n            className=\"text-5xl md:text-6xl lg:text-7xl font-heading font-bold text-foreground mb-6 leading-tight\"\n            data-testid=\"text-hero-title\"\n          >\n            {t(\"hero.title\")}\n          </h1>\n          <p\n            className=\"text-lg md:text-xl text-muted-foreground mb-8 leading-relaxed max-w-2xl\"\n            data-testid=\"text-hero-subtitle\"\n          >\n            {t(\"hero.subtitle\")}\n          </p>\n          <div className=\"flex flex-wrap gap-4\">\n            <Button\n              asChild\n              size=\"lg\"\n              className=\"text-base px-8\"\n              data-testid=\"button-hero-primary\"\n            >\n              <Link href=\"/courses\" className=\"flex items-center gap-2\">\n                {t(\"hero.cta.primary\")}\n                <ArrowRight className=\"h-5 w-5\" />\n              </Link>\n            </Button>\n            <Button\n              asChild\n              variant=\"outline\"\n              size=\"lg\"\n              className=\"text-base px-8 backdrop-blur-sm bg-background/50\"\n              data-testid=\"button-hero-secondary\"\n            >\n              <Link href=\"/about\" className=\"flex items-center gap-2\">\n                <Play className=\"h-5 w-5\" />\n                {t(\"hero.cta.secondary\")}\n              </Link>\n            </Button>\n          </div>\n\n          {/* Stats */}\n          <div className=\"grid grid-cols-3 gap-6 mt-12 max-w-xl\">\n            <div data-testid=\"stat-students\">\n              <p className=\"text-3xl font-bold text-foreground\">\n                {stats \n                  ? stats.userCount > 0 \n                    ? stats.userCount.toLocaleString()\n                    : t(\"language\") === \"ar\" ? \"ŸÇÿ±Ÿäÿ®ÿßŸã\" : \"Coming Soon\"\n                  : \"10K+\"}\n              </p>\n              <p className=\"text-sm text-muted-foreground\">\n                {t(\"language\") === \"ar\" ? \"ÿ∑ÿßŸÑÿ® ŸÜÿ¥ÿ∑\" : \"Active Students\"}\n              </p>\n            </div>\n            <div data-testid=\"stat-courses\">\n              <p className=\"text-3xl font-bold text-foreground\">\n                {stats \n                  ? stats.courseCount > 0 \n                    ? stats.courseCount.toString()\n                    : t(\"language\") === \"ar\" ? \"ŸÇÿ±Ÿäÿ®ÿßŸã\" : \"Coming Soon\"\n                  : \"50+\"}\n              </p>\n              <p className=\"text-sm text-muted-foreground\">\n                {t(\"language\") === \"ar\" ? \"ÿØŸàÿ±ÿ©\" : \"Courses\"}\n              </p>\n            </div>\n            <div data-testid=\"stat-satisfaction\">\n              <p className=\"text-3xl font-bold text-foreground\">\n                {stats \n                  ? stats.satisfactionRate > 0 \n                    ? `${stats.satisfactionRate}%`\n                    : t(\"language\") === \"ar\" ? \"ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠\" : \"N/A\"\n                  : \"95%\"}\n              </p>\n              <p className=\"text-sm text-muted-foreground\">\n                {t(\"language\") === \"ar\" ? \"ÿ±ÿ∂ÿß\" : \"Satisfaction\"}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n",
            "size_bytes": 4139
        },
        "client/src/components/ui/input-otp.tsx": {
            "content": "import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n",
            "size_bytes": 2154
        },
        "client/src/components/ui/alert-dialog.tsx": {
            "content": "import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n",
            "size_bytes": 4420
        },
        "client/src/components/ui/label.tsx": {
            "content": "import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n",
            "size_bytes": 710
        },
        "client/src/components/ui/sidebar.tsx": {
            "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n",
            "size_bytes": 21846
        },
        "client/src/pages/admin/AdminDashboard.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Users, BookOpen, DollarSign, TrendingUp } from \"lucide-react\";\nimport { \n  Bar, BarChart, ResponsiveContainer, XAxis, YAxis, Tooltip, CartesianGrid,\n  Line, LineChart, Pie, PieChart, Cell, Legend\n} from \"recharts\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useEffect, useState } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface DashboardStats {\n  totalUsers: number;\n  totalCourses: number;\n  totalRevenue: number;\n  activeSubscriptions: number;\n  recentPayments: Array<{ month: string; amount: number }>;\n}\n\ninterface Analytics {\n  revenueTrends: {\n    daily: Array<{ date: string; amount: number }>;\n    weekly: Array<{ week: string; amount: number }>;\n    monthly: Array<{ month: string; amount: number }>;\n  };\n  userRegistrationTrends: Array<{ month: string; count: number }>;\n  courseEnrollments: Array<{ courseId: string; courseName: string; count: number }>;\n  topCourses: Array<{ id: string; titleEn: string; titleAr: string; enrollments: number }>;\n  paymentStatusBreakdown: {\n    pending: number;\n    approved: number;\n    rejected: number;\n  };\n}\n\nexport default function AdminDashboard() {\n  const { language } = useLanguage();\n  const { user, isAuthenticated, isLoading } = useAuth();\n  const { toast } = useToast();\n  const [revenuePeriod, setRevenuePeriod] = useState<'daily' | 'weekly' | 'monthly'>('monthly');\n\n  useEffect(() => {\n    if (!isLoading && (!isAuthenticated || user?.role !== \"admin\")) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You don't have permission to access this page\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 500);\n    }\n  }, [isAuthenticated, user?.role, isLoading, toast]);\n\n  const { data: stats } = useQuery<DashboardStats>({\n    queryKey: [\"/api/admin/stats\"],\n    enabled: isAuthenticated && user?.role === \"admin\",\n  });\n\n  const { data: analytics, isLoading: analyticsLoading, isError: analyticsError } = useQuery<Analytics>({\n    queryKey: [\"/api/admin/analytics\"],\n    enabled: isAuthenticated && user?.role === \"admin\",\n  });\n\n  if (isLoading || !isAuthenticated || user?.role !== \"admin\") {\n    return (\n      <div className=\"p-8\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  if (analyticsError) {\n    return (\n      <div className=\"p-8\">\n        <Card>\n          <CardContent className=\"p-8 text-center\">\n            <p className=\"text-destructive\">\n              {language === \"ar\" ? \"ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™\" : \"Failed to load analytics\"}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  const statCards = [\n    {\n      title: language === \"ar\" ? \"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸàŸÜ\" : \"Users\",\n      value: stats?.totalUsers || 0,\n      icon: Users,\n      color: \"text-blue-500\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"Courses\",\n      value: stats?.totalCourses || 0,\n      icon: BookOpen,\n      color: \"text-green-500\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™\" : \"Revenue\",\n      value: `$${stats?.totalRevenue || 0}`,\n      icon: DollarSign,\n      color: \"text-purple-500\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉÿßÿ™ ÿßŸÑŸÜÿ¥ÿ∑ÿ©\" : \"Active Subscriptions\",\n      value: stats?.activeSubscriptions || 0,\n      icon: TrendingUp,\n      color: \"text-orange-500\",\n    },\n  ];\n\n  const totalPayments = analytics \n    ? analytics.paymentStatusBreakdown.pending + analytics.paymentStatusBreakdown.approved + analytics.paymentStatusBreakdown.rejected \n    : 0;\n  \n  const paymentStatusData = analytics && totalPayments > 0 ? [\n    { \n      name: language === \"ar\" ? \"ŸÖÿπŸÑŸÇ\" : \"Pending\", \n      value: analytics.paymentStatusBreakdown.pending, \n      color: \"#f59e0b\",\n      percentage: Math.round((analytics.paymentStatusBreakdown.pending / totalPayments) * 100)\n    },\n    { \n      name: language === \"ar\" ? \"ŸÖŸàÿßŸÅŸÇ ÿπŸÑŸäŸá\" : \"Approved\", \n      value: analytics.paymentStatusBreakdown.approved, \n      color: \"#10b981\",\n      percentage: Math.round((analytics.paymentStatusBreakdown.approved / totalPayments) * 100)\n    },\n    { \n      name: language === \"ar\" ? \"ŸÖÿ±ŸÅŸàÿ∂\" : \"Rejected\", \n      value: analytics.paymentStatusBreakdown.rejected, \n      color: \"#ef4444\",\n      percentage: Math.round((analytics.paymentStatusBreakdown.rejected / totalPayments) * 100)\n    },\n  ] : [];\n\n  const revenueData = analytics?.revenueTrends[revenuePeriod] || [];\n\n  return (\n    <div className=\"p-8\">\n      <h1\n        className=\"text-3xl font-heading font-bold text-foreground mb-8\"\n        data-testid=\"text-admin-dashboard-title\"\n      >\n        {language === \"ar\" ? \"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ÿßŸÑŸÖÿ™ŸÇÿØŸÖÿ©\" : \"Advanced Analytics Dashboard\"}\n      </h1>\n\n      {/* Stats Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n        {statCards.map((stat, index) => (\n          <Card\n            key={index}\n            className=\"hover-elevate active-elevate-2 transition-all\"\n            data-testid={`card-admin-stat-${index}`}\n          >\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <stat.icon className={`h-8 w-8 ${stat.color}`} />\n                <span className=\"text-2xl font-bold text-foreground\">\n                  {stat.value}\n                </span>\n              </div>\n              <p className=\"text-sm text-muted-foreground\">{stat.title}</p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {/* Revenue Trends Chart with Tabs */}\n      <Card data-testid=\"card-revenue-trends\" className=\"mb-8\">\n        <CardHeader>\n          <CardTitle>\n            {language === \"ar\" ? \"ÿßÿ™ÿ¨ÿßŸáÿßÿ™ ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™\" : \"Revenue Trends\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Tabs value={revenuePeriod} onValueChange={(v) => setRevenuePeriod(v as any)} className=\"mb-4\">\n            <TabsList data-testid=\"tabs-revenue-period\">\n              <TabsTrigger value=\"daily\" data-testid=\"tab-daily\">\n                {language === \"ar\" ? \"ŸäŸàŸÖŸä\" : \"Daily\"}\n              </TabsTrigger>\n              <TabsTrigger value=\"weekly\" data-testid=\"tab-weekly\">\n                {language === \"ar\" ? \"ÿ£ÿ≥ÿ®ŸàÿπŸä\" : \"Weekly\"}\n              </TabsTrigger>\n              <TabsTrigger value=\"monthly\" data-testid=\"tab-monthly\">\n                {language === \"ar\" ? \"ÿ¥Ÿáÿ±Ÿä\" : \"Monthly\"}\n              </TabsTrigger>\n            </TabsList>\n          </Tabs>\n          \n          {analyticsLoading ? (\n            <div className=\"h-[300px] bg-muted animate-pulse rounded-lg\" />\n          ) : revenueData.length > 0 ? (\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart data={revenueData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis \n                  dataKey={revenuePeriod === 'daily' ? 'date' : revenuePeriod === 'weekly' ? 'week' : 'month'}\n                  tick={{ fontSize: 12 }}\n                />\n                <YAxis />\n                <Tooltip />\n                <Line type=\"monotone\" dataKey=\"amount\" stroke=\"hsl(var(--primary))\" strokeWidth={2} />\n              </LineChart>\n            </ResponsiveContainer>\n          ) : (\n            <p className=\"text-muted-foreground text-center py-8\">\n              {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™\" : \"No revenue data available\"}\n            </p>\n          )}\n        </CardContent>\n      </Card>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8\">\n        {/* User Registration Trends */}\n        <Card data-testid=\"card-user-registration\">\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\" ? \"ÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ\" : \"User Registrations\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {analyticsLoading ? (\n              <div className=\"h-[300px] bg-muted animate-pulse rounded-lg\" />\n            ) : analytics?.userRegistrationTrends && analytics.userRegistrationTrends.length > 0 ? (\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={analytics.userRegistrationTrends}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"month\" tick={{ fontSize: 12 }} />\n                  <YAxis />\n                  <Tooltip />\n                  <Bar dataKey=\"count\" fill=\"hsl(var(--primary))\" />\n                </BarChart>\n              </ResponsiveContainer>\n            ) : (\n              <p className=\"text-muted-foreground text-center py-8\">\n                {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™\" : \"No registration data available\"}\n              </p>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Payment Status Breakdown Pie Chart */}\n        <Card data-testid=\"card-payment-status\">\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\" ? \"ÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿØŸÅÿπ\" : \"Payment Status\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {analyticsLoading ? (\n              <div className=\"h-[300px] bg-muted animate-pulse rounded-lg\" />\n            ) : paymentStatusData.length > 0 ? (\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <PieChart>\n                  <Pie\n                    data={paymentStatusData}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    labelLine={false}\n                    label={(entry) => `${entry.name}: ${entry.value} (${entry.percentage}%)`}\n                    outerRadius={80}\n                    fill=\"#8884d8\"\n                    dataKey=\"value\"\n                  >\n                    {paymentStatusData.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={entry.color} />\n                    ))}\n                  </Pie>\n                  <Tooltip />\n                  <Legend />\n                </PieChart>\n              </ResponsiveContainer>\n            ) : (\n              <p className=\"text-muted-foreground text-center py-8\">\n                {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™\" : \"No payment data available\"}\n              </p>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Course Enrollments Chart */}\n      <Card data-testid=\"card-course-enrollments\" className=\"mb-8\">\n        <CardHeader>\n          <CardTitle>\n            {language === \"ar\" ? \"ÿßŸÑÿßŸÑÿ™ÿ≠ÿßŸÇÿßÿ™ ÿ®ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"Course Enrollments\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {analyticsLoading ? (\n            <div className=\"h-[300px] bg-muted animate-pulse rounded-lg\" />\n          ) : analytics?.courseEnrollments && analytics.courseEnrollments.length > 0 ? (\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={analytics.courseEnrollments}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"courseName\" tick={{ fontSize: 12 }} angle={-45} textAnchor=\"end\" height={80} />\n                <YAxis />\n                <Tooltip />\n                <Bar dataKey=\"count\" fill=\"hsl(var(--primary))\" />\n              </BarChart>\n            </ResponsiveContainer>\n          ) : (\n            <p className=\"text-muted-foreground text-center py-8\">\n              {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™\" : \"No enrollment data available\"}\n            </p>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Top Performing Courses */}\n      <Card data-testid=\"card-top-courses\">\n        <CardHeader>\n          <CardTitle>\n            {language === \"ar\" ? \"ÿ£ŸÅÿ∂ŸÑ ÿßŸÑÿØŸàÿ±ÿßÿ™ ÿ£ÿØÿßÿ°Ÿã\" : \"Top Performing Courses\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {analytics?.topCourses && analytics.topCourses.length > 0 ? (\n              analytics.topCourses.map((course, index) => (\n                <div\n                  key={course.id}\n                  className=\"flex items-center justify-between p-4 bg-muted/50 rounded-lg hover-elevate\"\n                  data-testid={`top-course-${index}`}\n                >\n                  <div>\n                    <p className=\"font-semibold text-foreground\">\n                      #{index + 1} {language === \"ar\" ? course.titleAr : course.titleEn}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {language === \"ar\" ? \"ÿßŸÑÿßŸÑÿ™ÿ≠ÿßŸÇÿßÿ™:\" : \"Enrollments:\"} {course.enrollments}\n                    </p>\n                  </div>\n                  <TrendingUp className=\"h-6 w-6 text-green-500\" />\n                </div>\n              ))\n            ) : (\n              <p className=\"text-muted-foreground text-center py-8\">\n                {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™\" : \"No data available\"}\n              </p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
            "size_bytes": 13398
        },
        "client/src/components/ui/navigation-menu.tsx": {
            "content": "import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n",
            "size_bytes": 5128
        },
        "client/src/components/ui/scroll-area.tsx": {
            "content": "import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n",
            "size_bytes": 1642
        },
        "client/src/components/ui/slider.tsx": {
            "content": "import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n",
            "size_bytes": 1077
        },
        "client/src/components/ui/card.tsx": {
            "content": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n",
            "size_bytes": 1904
        },
        "drizzle.config.ts": {
            "content": "import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n",
            "size_bytes": 325
        },
        "client/src/components/landing/Testimonials.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Star } from \"lucide-react\";\nimport type { Testimonial } from \"@shared/schema\";\nimport { useState, useEffect } from \"react\";\n\nexport function Testimonials() {\n  const { t, language } = useLanguage();\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const { data: testimonials, isLoading } = useQuery<Testimonial[]>({\n    queryKey: [\"/api/testimonials\"],\n  });\n\n  useEffect(() => {\n    if (!testimonials || testimonials.length === 0) return;\n\n    const interval = setInterval(() => {\n      setCurrentIndex((prev) => (prev + 1) % testimonials.length);\n    }, 5000);\n\n    return () => clearInterval(interval);\n  }, [testimonials]);\n\n  if (isLoading) {\n    return (\n      <section className=\"py-24\">\n        <div className=\"container mx-auto px-6\">\n          <h2 className=\"text-3xl md:text-4xl font-heading font-bold text-center text-foreground mb-12\">\n            {t(\"testimonials.title\")}\n          </h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n            {[1, 2, 3].map((i) => (\n              <Card key={i}>\n                <CardContent className=\"p-6\">\n                  <div className=\"h-32 bg-muted animate-pulse rounded-lg\" />\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </section>\n    );\n  }\n\n  if (!testimonials || testimonials.length === 0) {\n    return null;\n  }\n\n  const visibleTestimonials = [\n    testimonials[currentIndex],\n    testimonials[(currentIndex + 1) % testimonials.length],\n    testimonials[(currentIndex + 2) % testimonials.length],\n  ];\n\n  return (\n    <section className=\"py-24\">\n      <div className=\"container mx-auto px-6\">\n        <h2\n          className=\"text-3xl md:text-4xl font-heading font-bold text-center text-foreground mb-12\"\n          data-testid=\"text-testimonials-title\"\n        >\n          {t(\"testimonials.title\")}\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          {visibleTestimonials.map((testimonial, index) => (\n            <Card\n              key={`${testimonial.id}-${index}`}\n              className=\"hover-elevate active-elevate-2 transition-all\"\n              data-testid={`card-testimonial-${index}`}\n            >\n              <CardContent className=\"p-6\">\n                {/* Rating */}\n                <div className=\"flex gap-1 mb-4\">\n                  {Array.from({ length: testimonial.rating }).map((_, i) => (\n                    <Star\n                      key={i}\n                      className=\"h-4 w-4 fill-yellow-500 text-yellow-500\"\n                    />\n                  ))}\n                </div>\n\n                {/* Content */}\n                <p className=\"text-muted-foreground mb-6 italic\">\n                  \"{language === \"ar\" ? testimonial.contentAr : testimonial.contentEn}\"\n                </p>\n\n                {/* Author */}\n                <div className=\"flex items-center gap-3\">\n                  <Avatar>\n                    <AvatarImage src={testimonial.imageUrl || \"\"} />\n                    <AvatarFallback>\n                      {(language === \"ar\" ? testimonial.nameAr : testimonial.nameEn)?.[0] || \"U\"}\n                    </AvatarFallback>\n                  </Avatar>\n                  <div>\n                    <p className=\"font-semibold text-foreground\">\n                      {language === \"ar\" ? testimonial.nameAr : testimonial.nameEn}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {language === \"ar\" ? testimonial.roleAr : testimonial.roleEn}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n\n        {/* Indicators */}\n        <div className=\"flex justify-center gap-2 mt-8\">\n          {testimonials.map((_, index) => (\n            <button\n              key={index}\n              className={`h-2 rounded-full transition-all ${\n                index === currentIndex ? \"w-8 bg-primary\" : \"w-2 bg-muted\"\n              }`}\n              onClick={() => setCurrentIndex(index)}\n              data-testid={`indicator-testimonial-${index}`}\n            />\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n",
            "size_bytes": 4459
        },
        "client/src/components/ui/dropdown-menu.tsx": {
            "content": "import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n",
            "size_bytes": 7609
        },
        "replit.md": {
            "content": "# Leed Academy - Trading Education Platform\n\n## Overview\n\nLeed Academy is a premium bilingual (English/Arabic) cryptocurrency trading education platform. The application provides comprehensive course management, user subscriptions, payment processing, live Zoom sessions, and progress tracking. It features a modern landing page, user dashboard, and advanced admin panel for content and subscription management.\n\nThe platform is built as a full-stack TypeScript application with a React frontend and Express backend, designed to deliver a sophisticated fintech user experience with Material Design principles and premium aesthetics inspired by platforms like SmartTrader.me.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework & Build System**\n- React 18 with TypeScript for type-safe component development\n- Vite as the build tool and development server\n- Wouter for lightweight client-side routing\n- React Query (TanStack Query) for server state management and caching\n\n**UI Component System**\n- Shadcn/ui component library with Radix UI primitives\n- Tailwind CSS for utility-first styling with custom design tokens\n- CVA (Class Variance Authority) for component variant management\n- Custom theming system supporting light/dark modes\n- RTL/LTR layout support for Arabic/English bilingual interface\n\n**User Dashboard Navigation**\n- Tab-based interface using Shadcn Tabs component (replaced sidebar navigation)\n- Single /dashboard route with URL query parameter support (?tab=courses, ?tab=subscription, etc.)\n- Deep linking support for direct access to specific tabs\n- Browser back/forward navigation synchronized with tab state via wouter location hooks\n- Five main sections: My Courses, Subscription, Join Group, Settings, Ratings\n- URL state management with useEffect listening to location changes\n\n**State Management**\n- React Query for server state with optimistic updates\n- React Context for theme and language preferences\n- React Hook Form with Zod validation for form state\n\n**Design System**\n- Typography: Inter (UI/body) and Poppins (headings) from Google Fonts\n- Spacing: Tailwind unit system (2, 4, 6, 8, 12, 16, 20, 24)\n- Color system: HSL-based with CSS variables for theme switching\n- Component patterns: Cards with elevation states, glassmorphism effects, hover animations\n\n### Backend Architecture\n\n**Server Framework**\n- Express.js with TypeScript for type-safe REST API development\n- Session-based authentication with PostgreSQL session store\n- File upload handling via Multer with security validation\n- Error handling middleware with structured logging\n\n**Authentication & Authorization**\n- Email/password authentication with bcrypt hashing (10 rounds)\n- Session-based authentication with PostgreSQL session store\n- Session fixation prevention via session regeneration\n- Role-based access control (user/admin roles)\n- Protected routes with authentication and admin middleware\n- Password hash sanitization in all API responses\n\n**API Structure**\n- RESTful endpoints organized by resource type\n- Request validation using Zod schemas\n- Standardized JSON responses with error codes\n- File serving for uploaded content (payment proofs, course materials)\n\n**Business Logic Layer**\n- Storage abstraction layer for database operations\n- Separation of concerns: routes ‚Üí controllers ‚Üí storage\n- Transaction support for payment and subscription operations\n- Progress tracking with lesson completion validation\n\n### Data Storage\n\n**Database**\n- PostgreSQL via Neon serverless driver with WebSocket support\n- Drizzle ORM for type-safe database queries and schema management\n- Schema-first approach with TypeScript type inference\n\n**Schema Design**\n- Users: Email/password auth, phone number, roles, subscription status, referral system\n- Courses: Multi-level system (Level 1-3), bilingual content, pricing\n- Lessons: Sequential ordering, video URLs, access control, duration tracking\n- Subscription Plans: Tiered pricing, feature lists, duration-based\n- Subscriptions: User enrollments with start/end dates, status tracking\n- Payments: Crypto/bank transfer support, proof uploads, admin approval workflow\n- Progress: Per-lesson completion tracking with timestamps\n- Meetings: Zoom session scheduling with paid/free access control\n- Testimonials: User reviews with ratings and bilingual content\n- Sessions: PostgreSQL-backed session storage for authentication\n\n**Data Relationships**\n- One-to-many: Users ‚Üí Subscriptions, Courses ‚Üí Lessons\n- Many-to-one: Progress ‚Üí Users/Lessons, Payments ‚Üí Users/Plans\n- Referential integrity enforced through foreign key constraints\n\n### External Dependencies\n\n**Authentication**\n- Bcrypt for password hashing and validation\n- Express-session for session management\n- Zod for request validation and sanitization\n- Session regeneration for security\n\n**Database**\n- Neon serverless PostgreSQL for production database hosting\n- WebSocket connection support for serverless environments\n- Drizzle Kit for schema migrations\n\n**File Storage**\n- Local filesystem storage for uploaded files (payment proofs, course thumbnails, lesson videos)\n- Multer for multipart form data handling\n- File type validation:\n  - Course thumbnails: JPEG, PNG, WebP only (max 5MB)\n  - Lesson videos: MP4, WebM, MOV only (max 2GB)\n  - Payment proofs: JPEG, PNG, PDF only (max 10MB)\n- Timestamp-based unique filenames with slugs for better organization\n- Directory structure:\n  - uploads/courses/{courseId}/thumbnails/ - Course thumbnail images\n  - uploads/courses/{courseId}/videos/{lessonId}/ - Lesson video files\n  - uploads/ - Payment proof files\n- Automatic cleanup on errors (files deleted if database operation fails)\n\n**UI Components**\n- Radix UI primitives for accessible component foundations\n- Lucide React for icon system\n- React Day Picker for date selection\n- Recharts for analytics visualization (admin dashboard)\n- Embla Carousel for testimonial rotations\n- CMDK for command palette patterns\n\n**Development Tools**\n- Replit-specific plugins for development environment integration\n- Runtime error overlay for debugging\n- Source map support for production troubleshooting\n\n**Payment Integration**\n- Manual payment processing (no automated gateway)\n- Support for cryptocurrency wallets (USDT, BTC, ETH addresses)\n- Bank transfer with proof upload workflow\n- Admin approval system for payment verification\n\n**Video Content**\n- External video hosting (URLs stored in database)\n- No integrated video player library (uses HTML5 video element)\n- Progress tracking via video playback events\n\n**Styling & Design**\n- Google Fonts API for web typography\n- PostCSS with Autoprefixer for CSS processing\n- Tailwind CSS JIT compiler for production optimization\n\n**Form Validation**\n- Zod for runtime schema validation\n- Hookform Resolvers for React Hook Form integration\n- Type-safe form handling with TypeScript inference",
            "size_bytes": 6941
        },
        "client/src/pages/News.tsx": {
            "content": "import { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar, Lock, ExternalLink, Clock } from \"lucide-react\";\nimport type { Meeting } from \"@shared/schema\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport default function News() {\n  const { t, language } = useLanguage();\n  const { user, isAuthenticated } = useAuth();\n\n  const { data: meetings, isLoading } = useQuery<Meeting[]>({\n    queryKey: [\"/api/meetings\"],\n  });\n\n  const hasActiveSubscription = user?.subscriptionStatus === \"active\";\n\n  const upcomingMeetings = meetings?.filter(\n    (meeting) => new Date(meeting.scheduledAt) > new Date()\n  ).sort((a, b) => \n    new Date(a.scheduledAt).getTime() - new Date(b.scheduledAt).getTime()\n  );\n\n  const canAccessMeeting = (meeting: Meeting) => {\n    if (!meeting.isPaidOnly) return true;\n    return isAuthenticated && hasActiveSubscription;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20\">\n        {/* Page Header */}\n        <section className=\"py-12 bg-muted/30\">\n          <div className=\"container mx-auto px-6\">\n            <h1 className=\"text-3xl md:text-4xl font-heading font-bold text-foreground mb-4\" data-testid=\"text-page-title\">\n              {language === \"ar\" ? \"ÿßŸÑÿ£ÿÆÿ®ÿßÿ± ŸàÿßŸÑÿ¨ŸÑÿ≥ÿßÿ™\" : \"News & Sessions\"}\n            </h1>\n            <p className=\"text-lg text-muted-foreground max-w-2xl\">\n              {language === \"ar\"\n                ? \"ÿßÿ®ŸÇ ÿπŸÑŸâ ÿßÿ∑ŸÑÿßÿπ ÿπŸÑŸâ ÿ£ÿ≠ÿØÿ´ ÿ¨ŸÑÿ≥ÿßÿ™ Zoom ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ© ŸàÿßŸÑÿ£ÿ≠ÿØÿßÿ´ ÿßŸÑŸÇÿßÿØŸÖÿ©\"\n                : \"Stay updated with the latest educational Zoom sessions and upcoming events\"}\n            </p>\n          </div>\n        </section>\n\n        {/* Meetings Section */}\n        <section className=\"py-12\">\n          <div className=\"container mx-auto px-6\">\n            <div className=\"max-w-4xl mx-auto\">\n              {isLoading ? (\n                <div className=\"space-y-4\">\n                  {[1, 2, 3].map((i) => (\n                    <div key={i} className=\"h-48 bg-muted animate-pulse rounded-lg\" />\n                  ))}\n                </div>\n              ) : upcomingMeetings && upcomingMeetings.length > 0 ? (\n                <div className=\"space-y-6\">\n                  {upcomingMeetings.map((meeting) => {\n                    const canAccess = canAccessMeeting(meeting);\n                    const meetingDate = new Date(meeting.scheduledAt);\n\n                    return (\n                      <Card key={meeting.id} data-testid={`card-meeting-${meeting.id}`}>\n                        <CardHeader>\n                          <div className=\"flex flex-wrap items-start justify-between gap-4\">\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-3 mb-2\">\n                                <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center flex-shrink-0\">\n                                  <Calendar className=\"h-6 w-6 text-primary\" />\n                                </div>\n                                <div>\n                                  <CardTitle className=\"text-xl text-foreground\">\n                                    {language === \"ar\" ? meeting.titleAr : meeting.titleEn}\n                                  </CardTitle>\n                                  <div className=\"flex items-center gap-2 mt-1 text-sm text-muted-foreground\">\n                                    <Clock className=\"h-4 w-4\" />\n                                    <span>\n                                      {meetingDate.toLocaleString(\n                                        language === \"ar\" ? \"ar\" : \"en\",\n                                        {\n                                          dateStyle: \"full\",\n                                          timeStyle: \"short\",\n                                        }\n                                      )}\n                                    </span>\n                                  </div>\n                                </div>\n                              </div>\n                              <div className=\"flex items-center gap-2 mt-3\">\n                                {meeting.isPaidOnly && (\n                                  <Badge variant=\"secondary\" data-testid={`badge-paid-only-${meeting.id}`}>\n                                    <Lock className=\"h-3 w-3 mr-1\" />\n                                    {language === \"ar\" ? \"ŸÑŸÑŸÖÿ¥ÿ™ÿ±ŸÉŸäŸÜ ŸÅŸÇÿ∑\" : \"Subscribers Only\"}\n                                  </Badge>\n                                )}\n                                <Badge>\n                                  {meeting.duration} {language === \"ar\" ? \"ÿØŸÇŸäŸÇÿ©\" : \"min\"}\n                                </Badge>\n                              </div>\n                            </div>\n                          </div>\n                        </CardHeader>\n                        <CardContent>\n                          <p className=\"text-muted-foreground mb-4\">\n                            {language === \"ar\" ? meeting.descriptionAr : meeting.descriptionEn}\n                          </p>\n                          \n                          {canAccess ? (\n                            <Button\n                              asChild\n                              data-testid={`button-join-meeting-${meeting.id}`}\n                            >\n                              <a\n                                href={meeting.zoomLink}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                              >\n                                <ExternalLink className=\"h-4 w-4 mr-2\" />\n                                {language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ÿßŸÑÿ¨ŸÑÿ≥ÿ©\" : \"Join Session\"}\n                              </a>\n                            </Button>\n                          ) : (\n                            <div className=\"flex items-center gap-4 p-4 bg-muted/50 rounded-lg border border-muted\">\n                              <Lock className=\"h-5 w-5 text-muted-foreground\" />\n                              <div className=\"flex-1\">\n                                <p className=\"text-sm font-medium text-foreground\">\n                                  {language === \"ar\"\n                                    ? \"Ÿäÿ™ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉÿßŸã ŸÜÿ¥ÿ∑ÿßŸã\"\n                                    : \"Subscription Required\"}\n                                </p>\n                                <p className=\"text-xs text-muted-foreground\">\n                                  {language === \"ar\"\n                                    ? \"ÿßÿ¥ÿ™ÿ±ŸÉ ŸÅŸä ÿ£ÿ≠ÿØ ÿÆÿ∑ÿ∑ŸÜÿß ŸÑŸÑŸàÿµŸàŸÑ ÿ•ŸÑŸâ Ÿáÿ∞Ÿá ÿßŸÑÿ¨ŸÑÿ≥ÿ©\"\n                                    : \"Subscribe to one of our plans to access this session\"}\n                                </p>\n                              </div>\n                              {!isAuthenticated ? (\n                                <Button asChild variant=\"outline\" size=\"sm\" data-testid={`button-login-${meeting.id}`}>\n                                  <a href=\"/api/login\">{t(\"nav.login\")}</a>\n                                </Button>\n                              ) : (\n                                <Button asChild variant=\"outline\" size=\"sm\" data-testid={`button-subscribe-${meeting.id}`}>\n                                  <a href=\"/pricing\">{language === \"ar\" ? \"ÿßÿ¥ÿ™ÿ±ŸÉ ÿßŸÑÿ¢ŸÜ\" : \"Subscribe Now\"}</a>\n                                </Button>\n                              )}\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    );\n                  })}\n                </div>\n              ) : (\n                <Card>\n                  <CardContent className=\"p-12 text-center\">\n                    <Calendar className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n                    <h2 className=\"text-xl font-heading font-semibold text-foreground mb-2\">\n                      {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ¨ŸÑÿ≥ÿßÿ™ ŸÇÿßÿØŸÖÿ©\" : \"No Upcoming Sessions\"}\n                    </h2>\n                    <p className=\"text-muted-foreground\">\n                      {language === \"ar\"\n                        ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ¨ŸÑÿ≥ÿßÿ™ ŸÖÿ¨ÿØŸàŸÑÿ© ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ≠ÿßŸÑŸä. ÿ™ÿ≠ŸÇŸÇ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ ŸÑÿßÿ≠ŸÇÿßŸã\"\n                        : \"There are no scheduled sessions at the moment. Check back later\"}\n                    </p>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          </div>\n        </section>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 8998
        },
        "client/src/pages/admin/AdminSettings.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useEffect } from \"react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Save, MessageCircle } from \"lucide-react\";\n\nconst paymentSettingsSchema = z.object({\n  bankName: z.string().optional(),\n  accountNumber: z.string().optional(),\n  accountHolderName: z.string().optional(),\n  iban: z.string().optional(),\n  swiftCode: z.string().optional(),\n  bankAddress: z.string().optional(),\n  btcAddress: z.string().optional(),\n  ethAddress: z.string().optional(),\n  usdtAddress: z.string().optional(),\n  usdtNetwork: z.string().optional(),\n  paymentInstructionsEn: z.string().optional(),\n  paymentInstructionsAr: z.string().optional(),\n});\n\nconst socialLinksSchema = z.object({\n  telegramGroupLink: z.string().url(\"Please enter a valid URL\").optional().or(z.literal(\"\")),\n  whatsappGroupLink: z.string().url(\"Please enter a valid URL\").optional().or(z.literal(\"\")),\n});\n\ntype PaymentSettingsForm = z.infer<typeof paymentSettingsSchema>;\ntype SocialLinksForm = z.infer<typeof socialLinksSchema>;\n\nexport default function AdminSettings() {\n  const { language } = useLanguage();\n  const { user, isAuthenticated, isLoading } = useAuth();\n  const { toast } = useToast();\n\n  // Redirect if not admin\n  useEffect(() => {\n    if (!isLoading && (!isAuthenticated || user?.role !== \"admin\")) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"Only admins can access this page\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/\";\n      }, 500);\n    }\n  }, [isAuthenticated, user?.role, isLoading, toast]);\n\n  const { data: settings, isLoading: settingsLoading } = useQuery({\n    queryKey: [\"/api/payment-settings\"],\n    enabled: isAuthenticated && user?.role === \"admin\",\n  });\n\n  const { data: platformSettings, isLoading: platformSettingsLoading } = useQuery<Array<{ key: string; value: string }>>({\n    queryKey: [\"/api/settings\"],\n    enabled: isAuthenticated && user?.role === \"admin\",\n  });\n\n  const form = useForm<PaymentSettingsForm>({\n    resolver: zodResolver(paymentSettingsSchema),\n    values: settings || {\n      bankName: \"\",\n      accountNumber: \"\",\n      accountHolderName: \"\",\n      iban: \"\",\n      swiftCode: \"\",\n      bankAddress: \"\",\n      btcAddress: \"\",\n      ethAddress: \"\",\n      usdtAddress: \"\",\n      usdtNetwork: \"TRC20\",\n      paymentInstructionsEn: \"\",\n      paymentInstructionsAr: \"\",\n    },\n  });\n\n  const socialLinksForm = useForm<SocialLinksForm>({\n    resolver: zodResolver(socialLinksSchema),\n    defaultValues: {\n      telegramGroupLink: \"\",\n      whatsappGroupLink: \"\",\n    },\n  });\n\n  useEffect(() => {\n    if (platformSettings) {\n      const telegram = platformSettings.find(s => s.key === \"telegram_group_link\");\n      const whatsapp = platformSettings.find(s => s.key === \"whatsapp_group_link\");\n      socialLinksForm.reset({\n        telegramGroupLink: telegram?.value || \"\",\n        whatsappGroupLink: whatsapp?.value || \"\",\n      });\n    }\n  }, [platformSettings, socialLinksForm]);\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: PaymentSettingsForm) => {\n      const res = await fetch(\"/api/admin/payment-settings\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n        credentials: \"include\",\n      });\n      \n      if (!res.ok) {\n        // Store the response for error handling\n        const error: any = new Error(\"Failed to save settings\");\n        error.response = res;\n        throw error;\n      }\n      \n      const contentType = res.headers.get(\"content-type\");\n      if (contentType && contentType.includes(\"application/json\")) {\n        return res.json();\n      }\n      return undefined;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/payment-settings\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏\" : \"Saved\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿØŸÅÿπ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Payment settings saved successfully\",\n      });\n    },\n    onError: async (error: any) => {\n      // Try to get the response and parse validation errors\n      if (error.response) {\n        try {\n          const errorData = await error.response.json();\n          \n          // Handle Zod validation errors\n          if (errorData.issues && Array.isArray(errorData.issues)) {\n            let hasFieldErrors = false;\n            \n            errorData.issues.forEach((issue: any) => {\n              // Only handle simple, single-level field paths\n              if (issue.path && issue.path.length === 1) {\n                const fieldName = issue.path[0] as keyof PaymentSettingsForm;\n                \n                // Verify field exists in form before setting error\n                if (fieldName in form.getValues()) {\n                  form.setError(fieldName, {\n                    type: \"server\",\n                    message: issue.message,\n                  });\n                  hasFieldErrors = true;\n                }\n              }\n            });\n            \n            if (hasFieldErrors) {\n              toast({\n                title: language === \"ar\" ? \"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÇŸÇ\" : \"Validation Error\",\n                description: language === \"ar\" \n                  ? \"Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©\" \n                  : \"Please check the highlighted fields\",\n                variant: \"destructive\",\n              });\n              return;\n            }\n          }\n        } catch (e) {\n          // Fall through to generic error\n        }\n      }\n      \n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || \"Failed to save settings\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: PaymentSettingsForm) => {\n    updateMutation.mutate(data);\n  };\n\n  const updateSocialLinksMutation = useMutation({\n    mutationFn: async (data: SocialLinksForm) => {\n      return await apiRequest(\"/api/settings\", \"POST\", {\n        settings: [\n          { key: \"telegram_group_link\", value: data.telegramGroupLink || \"\" },\n          { key: \"whatsapp_group_link\", value: data.whatsappGroupLink || \"\" },\n        ],\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/settings\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏\" : \"Saved\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Social group links saved successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || \"Failed to save social links\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSocialLinksSubmit = (data: SocialLinksForm) => {\n    updateSocialLinksMutation.mutate(data);\n  };\n\n  if (isLoading || !isAuthenticated || user?.role !== \"admin\") {\n    return (\n      <div className=\"p-8\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8 space-y-8\">\n      <div>\n        <h1\n          className=\"text-3xl font-heading font-bold text-foreground mb-2\"\n          data-testid=\"text-admin-settings-title\"\n        >\n          {language === \"ar\" ? \"ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÜÿ∏ÿßŸÖ\" : \"System Settings\"}\n        </h1>\n        <p className=\"text-muted-foreground\">\n          {language === \"ar\" \n            ? \"ÿ•ÿØÿßÿ±ÿ© ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑŸÖŸÜÿµÿ© ŸàÿßŸÑÿØŸÅÿπ ŸàÿßŸÑŸÖÿ¨ŸÖŸàÿπÿßÿ™ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸäÿ©\" \n            : \"Manage platform, payment, and social group settings\"}\n        </p>\n      </div>\n\n      {/* Social Group Links */}\n      <Form {...socialLinksForm}>\n        <form onSubmit={socialLinksForm.handleSubmit(onSocialLinksSubmit)} className=\"space-y-6\">\n          <Card data-testid=\"card-social-links\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <MessageCircle className=\"h-5 w-5\" />\n                {language === \"ar\" ? \"ÿ±Ÿàÿßÿ®ÿ∑ ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿßÿ™ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸäÿ©\" : \"Social Group Links\"}\n              </CardTitle>\n              <CardDescription>\n                {language === \"ar\"\n                  ? \"ÿ£ÿ∂ŸÅ ÿ±Ÿàÿßÿ®ÿ∑ ŸÖÿ¨ŸÖŸàÿπÿßÿ™ ÿ™ŸäŸÑŸäÿ¨ÿ±ÿßŸÖ ŸàŸàÿßÿ™ÿ≥ÿßÿ® ŸÑŸäŸÜÿ∂ŸÖ ÿ•ŸÑŸäŸáÿß ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸàŸÜ\"\n                  : \"Add Telegram and WhatsApp group links for users to join\"}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <FormField\n                control={socialLinksForm.control}\n                name=\"telegramGroupLink\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ÿ±ÿßÿ®ÿ∑ ŸÖÿ¨ŸÖŸàÿπÿ© ÿ™ŸäŸÑŸäÿ¨ÿ±ÿßŸÖ\" : \"Telegram Group Link\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        placeholder=\"https://t.me/...\"\n                        data-testid=\"input-telegram-link\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={socialLinksForm.control}\n                name=\"whatsappGroupLink\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ÿ±ÿßÿ®ÿ∑ ŸÖÿ¨ŸÖŸàÿπÿ© Ÿàÿßÿ™ÿ≥ÿßÿ®\" : \"WhatsApp Group Link\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        placeholder=\"https://chat.whatsapp.com/...\"\n                        data-testid=\"input-whatsapp-link\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </CardContent>\n          </Card>\n\n          <div className=\"flex justify-end\">\n            <Button\n              type=\"submit\"\n              disabled={updateSocialLinksMutation.isPending || platformSettingsLoading}\n              className=\"min-w-32\"\n              data-testid=\"button-save-social-links\"\n            >\n              {updateSocialLinksMutation.isPending ? (\n                language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏...\" : \"Saving...\"\n              ) : (\n                <>\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  {language === \"ar\" ? \"ÿ≠ŸÅÿ∏ ÿßŸÑÿ±Ÿàÿßÿ®ÿ∑\" : \"Save Links\"}\n                </>\n              )}\n            </Button>\n          </div>\n        </form>\n      </Form>\n\n      {/* Payment Settings */}\n      <div>\n        <h2 className=\"text-2xl font-heading font-bold text-foreground mb-4\">\n          {language === \"ar\" ? \"ÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿØŸÅÿπ\" : \"Payment Settings\"}\n        </h2>\n        \n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n          {/* Bank Information */}\n          <Card data-testid=\"card-bank-info\">\n            <CardHeader>\n              <CardTitle>{language === \"ar\" ? \"ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ®ŸÜŸÉ\" : \"Bank Information\"}</CardTitle>\n              <CardDescription>\n                {language === \"ar\"\n                  ? \"ÿ£ÿØÿÆŸÑ ÿ™ŸÅÿßÿµŸäŸÑ ÿ≠ÿ≥ÿßÿ®ŸÉ ÿßŸÑÿ®ŸÜŸÉŸä ŸÑŸÑÿ™ÿ≠ŸàŸäŸÑÿßÿ™ ÿßŸÑÿ®ŸÜŸÉŸäÿ©\"\n                  : \"Enter your bank account details for bank transfers\"}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"bankName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿßŸÑÿ®ŸÜŸÉ\" : \"Bank Name\"}</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-bank-name\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"accountHolderName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿµÿßÿ≠ÿ® ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Account Holder Name\"}</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-account-holder\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"accountNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Account Number\"}</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-account-number\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"iban\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>IBAN</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-iban\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"swiftCode\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>SWIFT/BIC Code</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-swift\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"bankAddress\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{language === \"ar\" ? \"ÿπŸÜŸàÿßŸÜ ÿßŸÑÿ®ŸÜŸÉ\" : \"Bank Address\"}</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-bank-address\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Cryptocurrency Wallets */}\n          <Card data-testid=\"card-crypto-wallets\">\n            <CardHeader>\n              <CardTitle>{language === \"ar\" ? \"ŸÖÿ≠ÿßŸÅÿ∏ ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©\" : \"Cryptocurrency Wallets\"}</CardTitle>\n              <CardDescription>\n                {language === \"ar\"\n                  ? \"ÿ£ÿØÿÆŸÑ ÿπŸÜÿßŸàŸäŸÜ ŸÖÿ≠ÿßŸÅÿ∏ŸÉ ŸÑŸÑŸÖÿØŸÅŸàÿπÿßÿ™ ÿ®ÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑÿ±ŸÇŸÖŸäÿ©\"\n                  : \"Enter your wallet addresses for cryptocurrency payments\"}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"btcAddress\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Bitcoin (BTC) Address</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"bc1...\" data-testid=\"input-btc-address\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"ethAddress\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Ethereum (ETH) Address</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"0x...\" data-testid=\"input-eth-address\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"usdtAddress\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>USDT Address</FormLabel>\n                      <FormControl>\n                        <Input {...field} data-testid=\"input-usdt-address\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"usdtNetwork\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{language === \"ar\" ? \"ÿ¥ÿ®ŸÉÿ© USDT\" : \"USDT Network\"}</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-usdt-network\">\n                            <SelectValue />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"TRC20\">TRC20 (Tron)</SelectItem>\n                          <SelectItem value=\"ERC20\">ERC20 (Ethereum)</SelectItem>\n                          <SelectItem value=\"BEP20\">BEP20 (BSC)</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Payment Instructions */}\n          <Card data-testid=\"card-payment-instructions\">\n            <CardHeader>\n              <CardTitle>{language === \"ar\" ? \"ÿ™ÿπŸÑŸäŸÖÿßÿ™ ÿßŸÑÿØŸÅÿπ\" : \"Payment Instructions\"}</CardTitle>\n              <CardDescription>\n                {language === \"ar\"\n                  ? \"ÿ£ÿ∂ŸÅ ÿ™ÿπŸÑŸäŸÖÿßÿ™ ŸÖÿÆÿµÿµÿ© ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ÿ≠ŸàŸÑ ŸÉŸäŸÅŸäÿ© ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿØŸÅÿπ\"\n                  : \"Add custom instructions for users on how to complete payment\"}\n              </CardDescription>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"paymentInstructionsEn\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Instructions (English)</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        rows={4}\n                        placeholder=\"Enter payment instructions in English...\"\n                        data-testid=\"textarea-instructions-en\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"paymentInstructionsAr\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Instructions (Arabic)</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        rows={4}\n                        placeholder=\"ÿ£ÿØÿÆŸÑ ÿ™ÿπŸÑŸäŸÖÿßÿ™ ÿßŸÑÿØŸÅÿπ ÿ®ÿßŸÑÿπÿ±ÿ®Ÿäÿ©...\"\n                        data-testid=\"textarea-instructions-ar\"\n                        dir=\"rtl\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </CardContent>\n          </Card>\n\n          <div className=\"flex justify-end\">\n            <Button\n              type=\"submit\"\n              disabled={updateMutation.isPending || settingsLoading}\n              className=\"min-w-32\"\n              data-testid=\"button-save-settings\"\n            >\n              {updateMutation.isPending ? (\n                language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏...\" : \"Saving...\"\n              ) : (\n                <>\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  {language === \"ar\" ? \"ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™\" : \"Save Settings\"}\n                </>\n              )}\n            </Button>\n          </div>\n        </form>\n      </Form>\n      </div>\n    </div>\n  );\n}\n",
            "size_bytes": 21963
        },
        "client/src/pages/Auth.tsx": {
            "content": "import { useState, useEffect } from \"react\";\nimport { useLocation } from \"wouter\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { LogIn, UserPlus, CheckCircle2, XCircle } from \"lucide-react\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { queryClient } from \"@/lib/queryClient\";\n\nconst loginSchema = z.object({\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n});\n\nconst registerSchema = z.object({\n  firstName: z.string().min(1, \"First name is required\"),\n  lastName: z.string().min(1, \"Last name is required\"),\n  email: z.string().email(\"Invalid email address\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n  phone: z.string().min(1, \"Phone number is required\"),\n  referredBy: z.string().optional(),\n});\n\ntype LoginForm = z.infer<typeof loginSchema>;\ntype RegisterForm = z.infer<typeof registerSchema>;\n\nexport default function Auth() {\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n  const { user, isAuthenticated } = useAuth();\n  const { language } = useLanguage();\n  const [referralCode, setReferralCode] = useState(\"\");\n  const [validatingReferral, setValidatingReferral] = useState(false);\n  const [referralValid, setReferralValid] = useState<boolean | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  // Redirect if already authenticated\n  useEffect(() => {\n    if (isAuthenticated && user) {\n      if (user.role === \"admin\") {\n        navigate(\"/admin/dashboard\");\n      } else {\n        navigate(\"/dashboard\");\n      }\n    }\n  }, [isAuthenticated, user, navigate]);\n\n  const loginForm = useForm<LoginForm>({\n    resolver: zodResolver(loginSchema),\n    defaultValues: {\n      email: \"\",\n      password: \"\",\n    },\n  });\n\n  const registerForm = useForm<RegisterForm>({\n    resolver: zodResolver(registerSchema),\n    defaultValues: {\n      firstName: \"\",\n      lastName: \"\",\n      email: \"\",\n      password: \"\",\n      phone: \"\",\n      referredBy: \"\",\n    },\n  });\n\n  // Validate referral code when user types\n  const validateReferralCode = async (code: string) => {\n    if (!code) {\n      setReferralValid(null);\n      return;\n    }\n\n    setValidatingReferral(true);\n    try {\n      const response = await fetch(`/api/referral/validate/${code}`);\n      if (response.ok) {\n        const data = await response.json();\n        setReferralValid(data.valid === true);\n      } else {\n        setReferralValid(false);\n      }\n    } catch (error) {\n      setReferralValid(false);\n    } finally {\n      setValidatingReferral(false);\n    }\n  };\n\n  // Debounced referral validation\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (referralCode) {\n        validateReferralCode(referralCode);\n      } else {\n        setReferralValid(null);\n      }\n    }, 500);\n\n    return () => clearTimeout(timer);\n  }, [referralCode]);\n\n  const onLogin = async (data: LoginForm) => {\n    setIsSubmitting(true);\n    try {\n      const response = await fetch(\"/api/auth\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n        credentials: \"include\",\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Login failed\");\n      }\n\n      const result = await response.json();\n\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Login successful\",\n        description: language === \"ar\" ? \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ÿπŸàÿØÿ™ŸÉ!\" : \"Welcome back!\",\n      });\n\n      // Invalidate queries and redirect\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      \n      if (result.user.role === \"admin\") {\n        navigate(\"/admin/dashboard\");\n      } else {\n        navigate(\"/dashboard\");\n      }\n    } catch (error: any) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ\" : \"Login failed\",\n        description: error.message || (language === \"ar\" ? \"ÿ®ÿ±ŸäÿØ ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ£Ÿà ŸÉŸÑŸÖÿ© ŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©\" : \"Invalid email or password\"),\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const onRegister = async (data: RegisterForm) => {\n    setIsSubmitting(true);\n    try {\n      const response = await fetch(\"/api/auth/register\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          ...data,\n          referredBy: referralCode || undefined,\n        }),\n        credentials: \"include\",\n      });\n\n      if (!response.ok) {\n        const error = await response.json();\n        throw new Error(error.message || \"Registration failed\");\n      }\n\n      const result = await response.json();\n\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Registration successful\",\n        description: language === \"ar\" ? \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä Leed Academy!\" : \"Welcome to Leed Academy!\",\n      });\n\n      // Invalidate queries and redirect\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      \n      if (result.user.role === \"admin\") {\n        navigate(\"/admin/dashboard\");\n      } else {\n        navigate(\"/dashboard\");\n      }\n    } catch (error: any) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ\" : \"Registration failed\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Failed to create account\"),\n        variant: \"destructive\",\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Update referredBy field when referral code changes\n  useEffect(() => {\n    registerForm.setValue(\"referredBy\", referralCode);\n  }, [referralCode, registerForm]);\n\n  if (isAuthenticated) {\n    return null; // Will redirect via useEffect\n  }\n\n  return (\n    <div className=\"min-h-screen flex flex-col bg-background\">\n      <Header />\n      \n      <main className=\"flex-1 flex items-center justify-center px-4 py-12\">\n        <Card className=\"w-full max-w-md\">\n          <CardHeader className=\"space-y-1\">\n            <CardTitle className=\"text-2xl text-center\">\n              {language === \"ar\" ? \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ\" : \"Welcome\"}\n            </CardTitle>\n            <CardDescription className=\"text-center\">\n              {language === \"ar\" \n                ? \"ÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ£Ÿà ÿ£ŸÜÿ¥ÿ¶ ÿ≠ÿ≥ÿßÿ®ÿßŸã ÿ¨ÿØŸäÿØÿßŸã\" \n                : \"Login or create a new account\"}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            <Tabs defaultValue=\"login\" className=\"w-full\">\n              <TabsList className=\"grid w-full grid-cols-2\">\n                <TabsTrigger value=\"login\" data-testid=\"tab-login\">\n                  {language === \"ar\" ? \"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ\" : \"Login\"}\n                </TabsTrigger>\n                <TabsTrigger value=\"register\" data-testid=\"tab-register\">\n                  {language === \"ar\" ? \"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®\" : \"Register\"}\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"login\" className=\"space-y-4 mt-4\">\n                <Form {...loginForm}>\n                  <form onSubmit={loginForm.handleSubmit(onLogin)} className=\"space-y-4\">\n                    <FormField\n                      control={loginForm.control}\n                      name=\"email\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>{language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}</FormLabel>\n                          <FormControl>\n                            <Input\n                              type=\"email\"\n                              placeholder={language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}\n                              data-testid=\"input-login-email\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    <FormField\n                      control={loginForm.control}\n                      name=\"password\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>{language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Password\"}</FormLabel>\n                          <FormControl>\n                            <Input\n                              type=\"password\"\n                              placeholder={language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Password\"}\n                              data-testid=\"input-login-password\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n                    <Button\n                      type=\"submit\"\n                      className=\"w-full\"\n                      size=\"lg\"\n                      disabled={isSubmitting}\n                      data-testid=\"button-login-submit\"\n                    >\n                      <LogIn className=\"w-4 h-4 mr-2\" />\n                      {isSubmitting \n                        ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ...\" : \"Logging in...\") \n                        : (language === \"ar\" ? \"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ\" : \"Login\")}\n                    </Button>\n                  </form>\n                </Form>\n              </TabsContent>\n\n              <TabsContent value=\"register\" className=\"space-y-4 mt-4\">\n                <Form {...registerForm}>\n                  <form onSubmit={registerForm.handleSubmit(onRegister)} className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <FormField\n                        control={registerForm.control}\n                        name=\"firstName\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>{language === \"ar\" ? \"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ŸàŸÑ\" : \"First Name\"}</FormLabel>\n                            <FormControl>\n                              <Input\n                                placeholder={language === \"ar\" ? \"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ŸàŸÑ\" : \"First Name\"}\n                                data-testid=\"input-register-firstname\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                      <FormField\n                        control={registerForm.control}\n                        name=\"lastName\"\n                        render={({ field }) => (\n                          <FormItem>\n                            <FormLabel>{language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿßŸÑÿπÿßÿ¶ŸÑÿ©\" : \"Last Name\"}</FormLabel>\n                            <FormControl>\n                              <Input\n                                placeholder={language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿßŸÑÿπÿßÿ¶ŸÑÿ©\" : \"Last Name\"}\n                                data-testid=\"input-register-lastname\"\n                                {...field}\n                              />\n                            </FormControl>\n                            <FormMessage />\n                          </FormItem>\n                        )}\n                      />\n                    </div>\n\n                    <FormField\n                      control={registerForm.control}\n                      name=\"email\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>{language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}</FormLabel>\n                          <FormControl>\n                            <Input\n                              type=\"email\"\n                              placeholder={language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}\n                              data-testid=\"input-register-email\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={registerForm.control}\n                      name=\"password\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>{language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Password\"}</FormLabel>\n                          <FormControl>\n                            <Input\n                              type=\"password\"\n                              placeholder={language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Password\"}\n                              data-testid=\"input-register-password\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <FormField\n                      control={registerForm.control}\n                      name=\"phone\"\n                      render={({ field }) => (\n                        <FormItem>\n                          <FormLabel>{language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)\" : \"Phone (Optional)\"}</FormLabel>\n                          <FormControl>\n                            <Input\n                              type=\"tel\"\n                              placeholder={language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ\" : \"Phone\"}\n                              data-testid=\"input-register-phone\"\n                              {...field}\n                            />\n                          </FormControl>\n                          <FormMessage />\n                        </FormItem>\n                      )}\n                    />\n\n                    <div className=\"space-y-2\">\n                      <FormLabel>\n                        {language === \"ar\" ? \"ŸÉŸàÿØ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ© (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)\" : \"Referral Code (Optional)\"}\n                      </FormLabel>\n                      <div className=\"relative\">\n                        <Input\n                          placeholder={language === \"ar\" ? \"ÿ£ÿØÿÆŸÑ ŸÉŸàÿØ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ©\" : \"Enter referral code\"}\n                          value={referralCode}\n                          onChange={(e) => setReferralCode(e.target.value.toUpperCase())}\n                          data-testid=\"input-register-referral\"\n                          className={\n                            referralValid === true\n                              ? \"border-green-500 pr-10\"\n                              : referralValid === false\n                              ? \"border-red-500 pr-10\"\n                              : \"pr-10\"\n                          }\n                        />\n                        {validatingReferral && (\n                          <div className=\"absolute right-3 top-1/2 -translate-y-1/2\">\n                            <div className=\"w-4 h-4 border-2 border-t-transparent border-primary rounded-full animate-spin\" />\n                          </div>\n                        )}\n                        {!validatingReferral && referralValid === true && (\n                          <CheckCircle2 className=\"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-green-500\" />\n                        )}\n                        {!validatingReferral && referralValid === false && (\n                          <XCircle className=\"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-red-500\" />\n                        )}\n                      </div>\n                      {referralValid === true && (\n                        <p className=\"text-sm text-green-600\">\n                          {language === \"ar\" ? \"ŸÉŸàÿØ ÿ•ÿ≠ÿßŸÑÿ© ÿµÿßŸÑÿ≠\" : \"Valid referral code\"}\n                        </p>\n                      )}\n                      {referralValid === false && (\n                        <p className=\"text-sm text-red-600\">\n                          {language === \"ar\" ? \"ŸÉŸàÿØ ÿ•ÿ≠ÿßŸÑÿ© ÿ∫Ÿäÿ± ÿµÿßŸÑÿ≠\" : \"Invalid referral code\"}\n                        </p>\n                      )}\n                    </div>\n\n                    <Button\n                      type=\"submit\"\n                      className=\"w-full\"\n                      size=\"lg\"\n                      disabled={isSubmitting || (referralCode.length > 0 && referralValid !== true)}\n                      data-testid=\"button-register-submit\"\n                    >\n                      <UserPlus className=\"w-4 h-4 mr-2\" />\n                      {isSubmitting \n                        ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®...\" : \"Creating account...\") \n                        : (language === \"ar\" ? \"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®\" : \"Register\")}\n                    </Button>\n                  </form>\n                </Form>\n              </TabsContent>\n            </Tabs>\n          </CardContent>\n        </Card>\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 18020
        },
        "DOCS.md": {
            "content": "# Leed Academy - Application Documentation\n\n## Overview\n\nLeed Academy is a comprehensive bilingual (English/Arabic) cryptocurrency trading education platform featuring:\n- Multi-level course system (Level 1-3)\n- Subscription-based access control\n- Payment processing (crypto & bank transfer)\n- Live Zoom meeting scheduling\n- Referral system\n- Admin dashboard with analytics\n- Udemy-style video player with progress tracking\n\n---\n\n## Authentication System\n\n### How Login/Register Works\n\nThe application uses **Replit OIDC (OpenID Connect)** for secure authentication.\n\n#### User Flow:\n1. **Visit `/auth`** - Access the login/register page\n2. **Choose Login or Register** - Select appropriate tab\n3. **Referral Code** - During registration, optionally enter a referral code\n4. **Replit Authentication** - Redirected to Replit for secure login\n5. **Auto Account Creation** - Account created automatically on first login\n6. **Redirect** - Sent to dashboard (users) or admin panel (admins)\n\n#### Login vs Register:\n- **Login**: For existing users - redirects directly to OIDC\n- **Register**: For new users - allows entering referral code before OIDC redirect\n- Both use the same Replit authentication system\n- Account is created automatically during first OIDC callback\n\n### Referral System:\n- Each user gets a unique 8-character referral code upon registration\n- New users can enter a referral code during registration\n- Referral code is stored in session and applied during OIDC callback\n- Only applied for first-time users\n\n### User Roles:\n- **User** (default): Access to courses, dashboard, subscription\n- **Admin**: Full access to admin panel + all user features\n\n### Session Management & Token Expiry:\n\nThe authentication system uses robust fallback logic to ensure reliable session expiry handling across different OIDC providers:\n\n**Expiry Fallback Chain:**\n1. **Primary**: `claims.exp` from ID token\n2. **Fallback 1**: `tokens.expires_at` from token response\n3. **Fallback 2**: Calculated from `tokens.expires_in` (current time + expires_in seconds)\n4. **Final**: `undefined` (if all methods fail)\n\nThis ensures that even providers with minimal token metadata maintain valid sessions for downstream authentication checks (`isAuthenticated`, `/api/auth/user`).\n\n**Session Data Structure:**\n```javascript\nreq.user = {\n  // Profile data from database\n  id, email, firstName, lastName, profileImageUrl, \n  referralCode, referredBy, role, \n  // Token metadata\n  claims, access_token, refresh_token, expires_at\n}\n```\n\n---\n\n## Routes & Pages\n\n### Public Routes (No Authentication Required)\n\n| Route | Description |\n|-------|-------------|\n| `/` | Landing page with hero, features, testimonials |\n| `/auth` | Login/Register page with referral code input |\n| `/about` | About the academy and team |\n| `/services` | Services offered |\n| `/contact` | Contact form |\n| `/pricing` | Subscription plans pricing |\n| `/courses` | Browse all available courses |\n| `/course/:id` | View specific course details |\n| `/news` | Upcoming Zoom meetings/sessions |\n\n### Protected Routes (Authentication Required)\n\n| Route | Description | Access |\n|-------|-------------|--------|\n| `/dashboard` | User dashboard showing subscriptions and progress | All Users |\n| `/subscribe/:planId?` | Subscribe/checkout page with payment options | All Users |\n\n### Admin Routes (Admin Role Required)\n\n| Route | Description |\n|-------|-------------|\n| `/admin` or `/admin/dashboard` | Admin dashboard with analytics |\n| `/admin/users` | Manage users, roles, subscriptions |\n| `/admin/courses` | Create/edit courses and lessons |\n| `/admin/payments` | Review and approve payment submissions |\n| `/admin/analytics` | Advanced analytics (placeholder) |\n| `/admin/meetings` | Create/manage Zoom meetings |\n| `/admin/settings` | Configure payment information (bank details, crypto wallets) |\n\n---\n\n## API Endpoints\n\n### Authentication Endpoints\n\n| Method | Endpoint | Description | Auth Required |\n|--------|----------|-------------|---------------|\n| GET | `/api/login` | Initiate OIDC login flow | No |\n| GET | `/api/callback` | OIDC callback handler | No |\n| GET | `/api/logout` | Logout and clear session | No |\n| GET | `/api/auth/user` | Get current user info | Yes |\n| POST | `/api/auth/referral-intent` | Store referral code before OIDC | No |\n\n### User & Referral Endpoints\n\n| Method | Endpoint | Description | Auth Required |\n|--------|----------|-------------|---------------|\n| GET | `/api/referral/validate/:code` | Check if referral code is valid | No |\n| GET | `/api/referral/stats` | Get user's referral statistics | Yes |\n\n### Course Endpoints\n\n| Method | Endpoint | Description | Auth Required |\n|--------|----------|-------------|---------------|\n| GET | `/api/courses` | Get all courses | No |\n| GET | `/api/courses/:id` | Get specific course | No |\n| POST | `/api/admin/courses` | Create new course | Admin |\n| PATCH | `/api/admin/courses/:id` | Update course | Admin |\n| DELETE | `/api/admin/courses/:id` | Delete course | Admin |\n\n### Lesson Endpoints\n\n| Method | Endpoint | Description | Auth Required |\n|--------|----------|-------------|---------------|\n| GET | `/api/courses/:courseId/lessons` | Get lessons for course | No |\n| GET | `/api/lessons/:id` | Get specific lesson | Yes |\n| POST | `/api/admin/lessons` | Create new lesson | Admin |\n| PATCH | `/api/admin/lessons/:id` | Update lesson | Admin |\n| DELETE | `/api/admin/lessons/:id` | Delete lesson | Admin |\n\n### Progress Endpoints\n\n| Method | Endpoint | Description | Auth Required |\n|--------|----------|-------------|---------------|\n| GET | `/api/progress/:courseId` | Get user's progress for course | Yes |\n| POST | `/api/progress` | Update lesson progress | Yes |\n\n### Subscription & Payment Endpoints\n\n| Method | Endpoint | Description | Auth Required |\n|--------|----------|-------------|---------------|\n| GET | `/api/subscription-plans` | Get all subscription plans | No |\n| GET | `/api/subscriptions` | Get user's subscriptions | Yes |\n| POST | `/api/payments` | Submit payment proof | Yes |\n| GET | `/api/admin/payments` | Get all payments (for review) | Admin |\n| PATCH | `/api/admin/payments/:id` | Approve/reject payment | Admin |\n| GET | `/api/payment-settings` | Get payment configuration | Yes |\n| POST | `/api/admin/payment-settings` | Update payment settings | Admin |\n\n### Meeting Endpoints\n\n| Method | Endpoint | Description | Auth Required |\n|--------|----------|-------------|---------------|\n| GET | `/api/meetings` | Get all upcoming meetings | No |\n| POST | `/api/admin/meetings` | Create new meeting | Admin |\n| DELETE | `/api/admin/meetings/:id` | Delete meeting | Admin |\n\n### Analytics & Stats\n\n| Method | Endpoint | Description | Auth Required |\n|--------|----------|-------------|---------------|\n| GET | `/api/stats` | Get platform statistics | No |\n| GET | `/api/admin/analytics` | Get detailed analytics | Admin |\n\n---\n\n## Key Features\n\n### 1. Course System\n- **3-Level Structure**: Level 1 (Beginner), Level 2 (Intermediate), Level 3 (Advanced)\n- **Sequential Lessons**: Lessons must be completed in order\n- **Video Content**: Each lesson has a video URL and description\n- **Progress Tracking**: 95% video completion required to unlock next lesson\n- **Access Control**: Requires active subscription\n\n### 2. Subscription System\n- **Multiple Plans**: Different pricing tiers with various features\n- **Payment Methods**: Cryptocurrency (BTC, ETH, USDT) or Bank Transfer\n- **Manual Approval**: Admin reviews and approves all payment proofs\n- **Duration-Based**: Plans have specific durations (30, 90, 365 days)\n\n### 3. Payment Processing\n- **Admin-Configured**: Payment details set by admin in `/admin/settings`\n- **Payment Information**: Bank details (name, account, IBAN, SWIFT) and crypto wallets\n- **Proof Upload**: Users upload payment proof (image or PDF, max 10MB)\n- **Admin Review**: Admins approve/reject payments in `/admin/payments`\n\n### 4. Referral System\n- **Unique Codes**: Each user gets 8-character referral code (e.g., \"ABC12345\")\n- **Registration Bonus**: New users enter code during registration\n- **Tracking**: Users can see their referral count\n- **Validation**: Real-time validation during registration\n\n### 5. Admin Dashboard\n- **User Management**: View users, change roles, manage subscriptions\n- **Course Management**: Create/edit courses and lessons\n- **Payment Review**: Approve/reject payment submissions\n- **Analytics**: View platform statistics\n- **Meeting Management**: Schedule Zoom sessions\n- **Settings**: Configure payment information\n\n### 6. Udemy-Style Video Player\n- **Full-Width Player**: Immersive video experience\n- **Fixed Sidebar**: Lesson list always visible\n- **Tabbed Content**: Overview, Resources, Sessions\n- **Navigation**: Previous/Next buttons\n- **Progress Bar**: Visual progress indicator\n\n---\n\n## How to Use as Admin\n\n### First Time Setup:\n1. **Login**: Visit `/auth` and login with Replit\n2. **Database**: Manually set your role to 'admin' in database\n3. **Payment Settings**: Go to `/admin/settings` and configure:\n   - Bank account details\n   - Crypto wallet addresses\n   - Payment instructions\n4. **Create Subscription Plans**: Add pricing tiers\n5. **Create Courses**: Add courses with lessons\n6. **Schedule Meetings**: Add Zoom session information\n\n### Managing Courses:\n1. Go to `/admin/courses`\n2. Click \"Create Course\"\n3. Fill in course details (title, description, level, price)\n4. Add lessons to the course with video URLs\n\n### Approving Payments:\n1. Go to `/admin/payments`\n2. Review pending payment submissions\n3. Check payment proof images\n4. Approve or reject with notes\n\n### Managing Users:\n1. Go to `/admin/users`\n2. View all registered users\n3. Change user roles (user ‚Üí admin)\n4. View subscription status\n\n---\n\n## How to Use as User\n\n### Getting Started:\n1. **Register**: Visit `/auth` and click \"Register\" tab\n2. **Referral Code** (Optional): Enter code if you have one\n3. **Login with Replit**: Complete authentication\n4. **Browse Courses**: View available courses at `/courses`\n5. **Choose Plan**: Select subscription plan at `/pricing`\n\n### Subscribing:\n1. Click \"Subscribe\" on a plan\n2. Fill in personal information\n3. Choose payment method (Crypto or Bank Transfer)\n4. Upload payment proof\n5. Wait for admin approval\n6. Access courses once approved\n\n### Taking Courses:\n1. Go to `/dashboard` to see your subscriptions\n2. Click on a course to start learning\n3. Watch video lessons sequentially\n4. Complete 95% of video to unlock next lesson\n5. Track your progress\n\n### Referrals:\n1. Find your referral code in `/dashboard`\n2. Share with friends\n3. They enter your code during registration\n4. Track your referrals in dashboard\n\n---\n\n## Database Schema\n\n### Key Tables:\n- **users**: User accounts, roles, referral codes\n- **courses**: Course information and pricing\n- **lessons**: Video lessons linked to courses\n- **subscription_plans**: Available subscription tiers\n- **subscriptions**: Active user subscriptions\n- **payments**: Payment submissions and approvals\n- **progress**: User lesson completion tracking\n- **meetings**: Scheduled Zoom sessions\n- **payment_settings**: Admin-configured payment information\n- **sessions**: Session storage for authentication\n\n---\n\n## Environment Variables\n\nRequired environment variables:\n- `DATABASE_URL`: PostgreSQL connection string\n- `SESSION_SECRET`: Secret for session encryption\n- `ISSUER_URL`: OIDC provider URL (default: Replit)\n- `REPL_ID`: Replit application ID\n\n---\n\n## Tech Stack\n\n### Frontend:\n- **React 18** with TypeScript\n- **Wouter** for routing\n- **TanStack Query** for server state\n- **Shadcn/ui** + Radix UI components\n- **Tailwind CSS** for styling\n- **React Hook Form** + Zod for forms\n\n### Backend:\n- **Express.js** with TypeScript\n- **PostgreSQL** (Neon serverless)\n- **Drizzle ORM** for database\n- **Passport.js** for OIDC authentication\n- **Multer** for file uploads\n- **Express Session** for session management\n\n---\n\n## Development Commands\n\n```bash\n# Start development server\nnpm run dev\n\n# Push database schema changes\nnpm run db:push\n\n# Force push schema changes\nnpm run db:push -- --force\n```\n\n---\n\n## Support\n\nFor questions or issues, please contact the development team or check the repository documentation.\n",
            "size_bytes": 12234
        },
        "client/src/pages/admin/AdminMeetings.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Plus, Edit, Trash2, Video, Calendar, Clock } from \"lucide-react\";\nimport type { Meeting, Course } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useForm } from \"react-hook-form\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { useState } from \"react\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nexport default function AdminMeetings() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingMeeting, setEditingMeeting] = useState<Meeting | null>(null);\n\n  const { data: meetings, isLoading } = useQuery<Meeting[]>({\n    queryKey: [\"/api/admin/meetings\"],\n  });\n\n  const { data: courses } = useQuery<Course[]>({\n    queryKey: [\"/api/admin/courses\"],\n  });\n\n  const form = useForm({\n    defaultValues: {\n      titleEn: \"\",\n      titleAr: \"\",\n      descriptionEn: \"\",\n      descriptionAr: \"\",\n      scheduledAt: \"\",\n      zoomLink: \"\",\n      duration: 60,\n      isPaidOnly: true,\n      courseId: \"none\",\n    },\n  });\n\n  const createMeetingMutation = useMutation({\n    mutationFn: async (data: any) => {\n      // Convert scheduledAt to ISO string only if it's not already\n      const scheduledAt = data.scheduledAt instanceof Date \n        ? data.scheduledAt.toISOString() \n        : new Date(data.scheduledAt).toISOString();\n      \n      return await apiRequest(\"POST\", \"/api/admin/meetings\", {\n        ...data,\n        duration: typeof data.duration === 'number' ? data.duration : parseInt(data.duration),\n        scheduledAt,\n        courseId: data.courseId === \"none\" ? null : data.courseId,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/meetings\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°\" : \"Created\",\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπ ÿ®ŸÜÿ¨ÿßÿ≠\"\n            : \"Meeting created successfully\",\n      });\n      setDialogOpen(false);\n      setEditingMeeting(null);\n      form.reset();\n    },\n  });\n\n  const updateMeetingMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: any }) => {\n      // Convert scheduledAt to ISO string only if it's not already\n      const scheduledAt = data.scheduledAt instanceof Date \n        ? data.scheduledAt.toISOString() \n        : new Date(data.scheduledAt).toISOString();\n      \n      return await apiRequest(\"PATCH\", `/api/admin/meetings/${id}`, {\n        ...data,\n        duration: typeof data.duration === 'number' ? data.duration : parseInt(data.duration),\n        scheduledAt,\n        courseId: data.courseId === \"none\" ? null : data.courseId,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/meetings\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\" : \"Updated\",\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπ ÿ®ŸÜÿ¨ÿßÿ≠\"\n            : \"Meeting updated successfully\",\n      });\n      setDialogOpen(false);\n      setEditingMeeting(null);\n      form.reset();\n    },\n  });\n\n  const deleteMeetingMutation = useMutation({\n    mutationFn: async (meetingId: string) => {\n      return await apiRequest(\"DELETE\", `/api/admin/meetings/${meetingId}`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/meetings\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ\" : \"Deleted\",\n        description:\n          language === \"ar\"\n            ? \"ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπ ÿ®ŸÜÿ¨ÿßÿ≠\"\n            : \"Meeting deleted successfully\",\n      });\n    },\n  });\n\n  const onSubmit = (data: any) => {\n    if (editingMeeting) {\n      updateMeetingMutation.mutate({ id: editingMeeting.id, data });\n    } else {\n      createMeetingMutation.mutate(data);\n    }\n  };\n\n  const handleEdit = (meeting: Meeting) => {\n    setEditingMeeting(meeting);\n    const scheduledDate = new Date(meeting.scheduledAt);\n    const localDateTime = new Date(scheduledDate.getTime() - scheduledDate.getTimezoneOffset() * 60000)\n      .toISOString()\n      .slice(0, 16);\n    \n    form.reset({\n      titleEn: meeting.titleEn,\n      titleAr: meeting.titleAr,\n      descriptionEn: meeting.descriptionEn || \"\",\n      descriptionAr: meeting.descriptionAr || \"\",\n      scheduledAt: localDateTime,\n      zoomLink: meeting.zoomLink,\n      duration: meeting.duration,\n      isPaidOnly: meeting.isPaidOnly ?? true,\n      courseId: meeting.courseId || \"none\",\n    });\n    setDialogOpen(true);\n  };\n\n  const handleDialogChange = (open: boolean) => {\n    setDialogOpen(open);\n    if (!open) {\n      setEditingMeeting(null);\n      form.reset();\n    }\n  };\n\n  // Sort meetings by date (upcoming first, then past)\n  const sortedMeetings = meetings?.sort((a, b) => {\n    const dateA = new Date(a.scheduledAt).getTime();\n    const dateB = new Date(b.scheduledAt).getTime();\n    return dateB - dateA; // Most recent first\n  }) || [];\n\n  const now = new Date();\n  const upcomingMeetings = sortedMeetings.filter(m => new Date(m.scheduledAt) > now);\n  const pastMeetings = sortedMeetings.filter(m => new Date(m.scheduledAt) <= now);\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"flex items-center justify-between mb-8\">\n        <h1\n          className=\"text-3xl font-heading font-bold text-foreground\"\n          data-testid=\"text-admin-meetings-title\"\n        >\n          {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ Zoom\" : \"Zoom Meetings Management\"}\n        </h1>\n        <Dialog open={dialogOpen} onOpenChange={handleDialogChange}>\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-create-meeting\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              {language === \"ar\" ? \"ÿ•ŸÜÿ¥ÿßÿ° ÿßÿ¨ÿ™ŸÖÿßÿπ\" : \"Create Meeting\"}\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>\n                {editingMeeting\n                  ? language === \"ar\"\n                    ? \"ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπ\"\n                    : \"Edit Meeting\"\n                  : language === \"ar\"\n                    ? \"ÿ•ŸÜÿ¥ÿßÿ° ÿßÿ¨ÿ™ŸÖÿßÿπ ÿ¨ÿØŸäÿØ\"\n                    : \"Create New Meeting\"}\n              </DialogTitle>\n            </DialogHeader>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"titleEn\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>\n                          {language === \"ar\" ? \"ÿßŸÑÿπŸÜŸàÿßŸÜ (ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä)\" : \"Title (English)\"}\n                        </FormLabel>\n                        <FormControl>\n                          <Input\n                            {...field}\n                            placeholder=\"Monthly Trading Strategy Session\"\n                            data-testid=\"input-title-en\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"titleAr\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>\n                          {language === \"ar\" ? \"ÿßŸÑÿπŸÜŸàÿßŸÜ (ÿπÿ±ÿ®Ÿä)\" : \"Title (Arabic)\"}\n                        </FormLabel>\n                        <FormControl>\n                          <Input\n                            {...field}\n                            placeholder=\"ÿ¨ŸÑÿ≥ÿ© ÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿ© ÿßŸÑÿ™ÿØÿßŸàŸÑ ÿßŸÑÿ¥Ÿáÿ±Ÿäÿ©\"\n                            data-testid=\"input-title-ar\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"descriptionEn\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>\n                          {language === \"ar\" ? \"ÿßŸÑŸàÿµŸÅ (ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä)\" : \"Description (English)\"}\n                        </FormLabel>\n                        <FormControl>\n                          <Textarea\n                            {...field}\n                            placeholder=\"Learn about...\"\n                            data-testid=\"input-description-en\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"descriptionAr\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>\n                          {language === \"ar\" ? \"ÿßŸÑŸàÿµŸÅ (ÿπÿ±ÿ®Ÿä)\" : \"Description (Arabic)\"}\n                        </FormLabel>\n                        <FormControl>\n                          <Textarea\n                            {...field}\n                            placeholder=\"ÿ™ÿπŸÑŸÖ ÿπŸÜ...\"\n                            data-testid=\"input-description-ar\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <FormField\n                    control={form.control}\n                    name=\"scheduledAt\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>\n                          {language === \"ar\" ? \"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ŸàÿßŸÑŸàŸÇÿ™\" : \"Date & Time\"}\n                        </FormLabel>\n                        <FormControl>\n                          <Input\n                            {...field}\n                            type=\"datetime-local\"\n                            data-testid=\"input-scheduled-at\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <FormField\n                    control={form.control}\n                    name=\"duration\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>\n                          {language === \"ar\" ? \"ÿßŸÑŸÖÿØÿ© (ÿØŸÇÿßÿ¶ŸÇ)\" : \"Duration (minutes)\"}\n                        </FormLabel>\n                        <FormControl>\n                          <Input\n                            type=\"number\"\n                            min=\"15\"\n                            step=\"15\"\n                            value={field.value}\n                            onChange={(e) => field.onChange(e.target.value)}\n                            data-testid=\"input-duration\"\n                          />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n\n                <FormField\n                  control={form.control}\n                  name=\"zoomLink\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>\n                        {language === \"ar\" ? \"ÿ±ÿßÿ®ÿ∑ Zoom\" : \"Zoom Link\"}\n                      </FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"https://zoom.us/j/123456789\"\n                          data-testid=\"input-zoom-link\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"courseId\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>\n                        {language === \"ar\" ? \"ÿ±ÿ®ÿ∑ ÿ®ÿØŸàÿ±ÿ© (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)\" : \"Link to Course (Optional)\"}\n                      </FormLabel>\n                      <Select\n                        onValueChange={field.onChange}\n                        value={field.value || \"none\"}\n                      >\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-course\">\n                            <SelectValue placeholder={language === \"ar\" ? \"ÿßÿÆÿ™ÿ± ÿØŸàÿ±ÿ©\" : \"Select a course\"} />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"none\">\n                            {language === \"ar\" ? \"ÿ®ÿØŸàŸÜ ÿ±ÿ®ÿ∑\" : \"No link\"}\n                          </SelectItem>\n                          {courses?.map((course) => (\n                            <SelectItem key={course.id} value={course.id}>\n                              {language === \"ar\" ? course.titleAr : course.titleEn}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"isPaidOnly\"\n                  render={({ field }) => (\n                    <FormItem className=\"flex items-center justify-between rounded-lg border p-4\">\n                      <div className=\"space-y-0.5\">\n                        <FormLabel className=\"text-base\">\n                          {language === \"ar\" ? \"ŸÑŸÑŸÖÿ¥ÿ™ÿ±ŸÉŸäŸÜ ŸÅŸÇÿ∑\" : \"Paid Subscribers Only\"}\n                        </FormLabel>\n                        <div className=\"text-sm text-muted-foreground\">\n                          {language === \"ar\"\n                            ? \"Ÿäÿ™ÿ∑ŸÑÿ® ÿßÿ¥ÿ™ÿ±ÿßŸÉÿßŸã ŸÜÿ¥ÿ∑ÿßŸã ŸÑŸÑŸàÿµŸàŸÑ\"\n                            : \"Requires active subscription to access\"}\n                        </div>\n                      </div>\n                      <FormControl>\n                        <Switch\n                          checked={field.value}\n                          onCheckedChange={field.onChange}\n                          data-testid=\"switch-paid-only\"\n                        />\n                      </FormControl>\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"flex justify-end gap-2 pt-4\">\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => handleDialogChange(false)}\n                    data-testid=\"button-cancel\"\n                  >\n                    {language === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ°\" : \"Cancel\"}\n                  </Button>\n                  <Button\n                    type=\"submit\"\n                    disabled={createMeetingMutation.isPending || updateMeetingMutation.isPending}\n                    data-testid=\"button-submit\"\n                  >\n                    {editingMeeting\n                      ? language === \"ar\"\n                        ? \"ÿ™ÿ≠ÿØŸäÿ´\"\n                        : \"Update\"\n                      : language === \"ar\"\n                        ? \"ÿ•ŸÜÿ¥ÿßÿ°\"\n                        : \"Create\"}\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Upcoming Meetings */}\n      <Card className=\"mb-6\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Calendar className=\"h-5 w-5\" />\n            {language === \"ar\" ? \"ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿßŸÑŸÇÿßÿØŸÖÿ©\" : \"Upcoming Meetings\"}\n            <Badge variant=\"secondary\">{upcomingMeetings.length}</Badge>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {upcomingMeetings.length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-8\">\n              {language === \"ar\"\n                ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ŸÇÿßÿØŸÖÿ©\"\n                : \"No upcoming meetings\"}\n            </p>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>{language === \"ar\" ? \"ÿßŸÑÿπŸÜŸàÿßŸÜ\" : \"Title\"}</TableHead>\n                  <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ŸàÿßŸÑŸàŸÇÿ™\" : \"Date & Time\"}</TableHead>\n                  <TableHead>{language === \"ar\" ? \"ÿßŸÑŸÖÿØÿ©\" : \"Duration\"}</TableHead>\n                  <TableHead>{language === \"ar\" ? \"ÿßŸÑŸàÿµŸàŸÑ\" : \"Access\"}</TableHead>\n                  <TableHead>{language === \"ar\" ? \"ÿ±ÿßÿ®ÿ∑ Zoom\" : \"Zoom Link\"}</TableHead>\n                  <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™\" : \"Actions\"}</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {upcomingMeetings.map((meeting) => (\n                  <TableRow key={meeting.id} data-testid={`row-meeting-${meeting.id}`}>\n                    <TableCell className=\"font-medium\">\n                      {language === \"ar\" ? meeting.titleAr : meeting.titleEn}\n                    </TableCell>\n                    <TableCell>\n                      <div className=\"flex items-center gap-2\">\n                        <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n                        {new Date(meeting.scheduledAt).toLocaleString(\n                          language === \"ar\" ? \"ar-SA\" : \"en-US\",\n                          {\n                            year: \"numeric\",\n                            month: \"short\",\n                            day: \"numeric\",\n                            hour: \"2-digit\",\n                            minute: \"2-digit\",\n                          }\n                        )}\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <div className=\"flex items-center gap-1\">\n                        <Clock className=\"h-4 w-4 text-muted-foreground\" />\n                        {meeting.duration} {language === \"ar\" ? \"ÿØŸÇŸäŸÇÿ©\" : \"min\"}\n                      </div>\n                    </TableCell>\n                    <TableCell>\n                      <Badge variant={meeting.isPaidOnly ? \"default\" : \"secondary\"}>\n                        {meeting.isPaidOnly\n                          ? language === \"ar\"\n                            ? \"ŸÖÿØŸÅŸàÿπ\"\n                            : \"Paid\"\n                          : language === \"ar\"\n                            ? \"ŸÖÿ¨ÿßŸÜŸä\"\n                            : \"Free\"}\n                      </Badge>\n                    </TableCell>\n                    <TableCell>\n                      <a\n                        href={meeting.zoomLink}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"text-primary hover:underline flex items-center gap-1\"\n                      >\n                        <Video className=\"h-4 w-4\" />\n                        {language === \"ar\" ? \"ŸÅÿ™ÿ≠\" : \"Open\"}\n                      </a>\n                    </TableCell>\n                    <TableCell>\n                      <div className=\"flex gap-2\">\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleEdit(meeting)}\n                          data-testid={`button-edit-${meeting.id}`}\n                        >\n                          <Edit className=\"h-4 w-4\" />\n                        </Button>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => deleteMeetingMutation.mutate(meeting.id)}\n                          data-testid={`button-delete-${meeting.id}`}\n                        >\n                          <Trash2 className=\"h-4 w-4 text-destructive\" />\n                        </Button>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Past Meetings */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Clock className=\"h-5 w-5\" />\n            {language === \"ar\" ? \"ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ©\" : \"Past Meetings\"}\n            <Badge variant=\"outline\">{pastMeetings.length}</Badge>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {pastMeetings.length === 0 ? (\n            <p className=\"text-muted-foreground text-center py-8\">\n              {language === \"ar\"\n                ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿßÿ¨ÿ™ŸÖÿßÿπÿßÿ™ ÿ≥ÿßÿ®ŸÇÿ©\"\n                : \"No past meetings\"}\n            </p>\n          ) : (\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>{language === \"ar\" ? \"ÿßŸÑÿπŸÜŸàÿßŸÜ\" : \"Title\"}</TableHead>\n                  <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ ŸàÿßŸÑŸàŸÇÿ™\" : \"Date & Time\"}</TableHead>\n                  <TableHead>{language === \"ar\" ? \"ÿßŸÑŸÖÿØÿ©\" : \"Duration\"}</TableHead>\n                  <TableHead>{language === \"ar\" ? \"ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™\" : \"Actions\"}</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {pastMeetings.slice(0, 10).map((meeting) => (\n                  <TableRow key={meeting.id} className=\"opacity-60\">\n                    <TableCell className=\"font-medium\">\n                      {language === \"ar\" ? meeting.titleAr : meeting.titleEn}\n                    </TableCell>\n                    <TableCell>\n                      {new Date(meeting.scheduledAt).toLocaleString(\n                        language === \"ar\" ? \"ar-SA\" : \"en-US\",\n                        {\n                          year: \"numeric\",\n                          month: \"short\",\n                          day: \"numeric\",\n                          hour: \"2-digit\",\n                          minute: \"2-digit\",\n                        }\n                      )}\n                    </TableCell>\n                    <TableCell>\n                      {meeting.duration} {language === \"ar\" ? \"ÿØŸÇŸäŸÇÿ©\" : \"min\"}\n                    </TableCell>\n                    <TableCell>\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => deleteMeetingMutation.mutate(meeting.id)}\n                        data-testid={`button-delete-${meeting.id}`}\n                      >\n                        <Trash2 className=\"h-4 w-4 text-destructive\" />\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
            "size_bytes": 24605
        },
        "server/uploadHelpers.ts": {
            "content": "import fs from \"fs\";\nimport path from \"path\";\nimport { promisify } from \"util\";\n\nconst mkdir = promisify(fs.mkdir);\nconst rm = promisify(fs.rm);\n\n/**\n * Generate a URL-safe slug from a string\n */\nexport function generateSlug(text: string): string {\n  return text\n    .toLowerCase()\n    .replace(/[^a-z0-9]+/g, \"-\")\n    .replace(/^-|-$/g, \"\")\n    .slice(0, 50);\n}\n\n/**\n * Generate a unique filename with timestamp and random string\n */\nexport function generateUniqueFilename(originalName: string, prefix?: string): string {\n  const timestamp = Date.now();\n  const random = Math.random().toString(36).substring(2, 10);\n  const ext = path.extname(originalName);\n  const slug = prefix ? generateSlug(prefix) : \"file\";\n  return `${timestamp}-${slug}-${random}${ext}`;\n}\n\n/**\n * Create directory if it doesn't exist\n */\nexport function ensureDir(dirPath: string): void {\n  try {\n    if (!fs.existsSync(dirPath)) {\n      fs.mkdirSync(dirPath, { recursive: true });\n    }\n  } catch (error: any) {\n    if (error.code !== \"EEXIST\") {\n      throw error;\n    }\n  }\n}\n\n/**\n * Get course upload directory\n */\nexport function getCourseUploadDir(courseId: string): string {\n  return path.join(process.cwd(), \"uploads\", \"courses\", courseId);\n}\n\n/**\n * Get thumbnail upload path\n */\nexport function getThumbnailPath(courseId: string, filename: string): string {\n  return path.join(getCourseUploadDir(courseId), \"thumbnails\", filename);\n}\n\n/**\n * Get lesson video upload path\n */\nexport function getLessonVideoPath(courseId: string, lessonId: string, filename: string): string {\n  return path.join(getCourseUploadDir(courseId), \"videos\", lessonId, filename);\n}\n\n/**\n * Clean up uploaded files on error\n */\nexport async function cleanupFiles(files: string[]): Promise<void> {\n  for (const file of files) {\n    try {\n      if (fs.existsSync(file)) {\n        await rm(file, { recursive: true, force: true });\n      }\n    } catch (error) {\n      console.error(`Failed to cleanup file: ${file}`, error);\n    }\n  }\n}\n\n/**\n * Clean up course directory\n */\nexport async function cleanupCourseDir(courseId: string): Promise<void> {\n  const courseDir = getCourseUploadDir(courseId);\n  try {\n    if (fs.existsSync(courseDir)) {\n      await rm(courseDir, { recursive: true, force: true });\n    }\n  } catch (error) {\n    console.error(`Failed to cleanup course directory: ${courseDir}`, error);\n  }\n}\n\n/**\n * Move file from temp to final destination\n */\nexport async function moveFile(source: string, destination: string): Promise<void> {\n  await ensureDir(path.dirname(destination));\n  await promisify(fs.rename)(source, destination);\n}\n\n/**\n * Validate file MIME type\n */\nexport function validateMimeType(mimetype: string, allowedTypes: string[]): boolean {\n  return allowedTypes.some(type => {\n    if (type.endsWith(\"/*\")) {\n      const prefix = type.slice(0, -2);\n      return mimetype.startsWith(prefix + \"/\");\n    }\n    return mimetype === type;\n  });\n}\n\n/**\n * Validate file size\n */\nexport function validateFileSize(size: number, maxSize: number): boolean {\n  return size <= maxSize;\n}\n\n// File size constants\nexport const MAX_THUMBNAIL_SIZE = 5 * 1024 * 1024; // 5MB\nexport const MAX_VIDEO_SIZE = 2 * 1024 * 1024 * 1024; // 2GB\n\n// Allowed MIME types\nexport const ALLOWED_IMAGE_TYPES = [\"image/jpeg\", \"image/jpg\", \"image/png\", \"image/webp\"];\nexport const ALLOWED_VIDEO_TYPES = [\"video/mp4\", \"video/webm\", \"video/quicktime\"];\n",
            "size_bytes": 3402
        },
        "client/src/pages/DashboardNew.tsx": {
            "content": "import { useState, useEffect } from \"react\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useLocation } from \"wouter\";\nimport { Button } from \"@/components/ui/button\";\nimport { BookOpen, CreditCard, Users, Settings, Star, Home, LogOut, Gift } from \"lucide-react\";\nimport MyCourses from \"@/components/dashboard/tabs/MyCourses\";\nimport MySubscription from \"@/components/dashboard/tabs/MySubscription\";\nimport JoinGroupTab from \"@/components/dashboard/tabs/JoinGroupTab\";\nimport SettingsTab from \"@/components/dashboard/tabs/SettingsTab\";\nimport RatingsTab from \"@/components/dashboard/tabs/RatingsTab\";\nimport ReferralTab from \"@/components/dashboard/tabs/ReferralTab\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { cn } from \"@/lib/utils\";\nimport { queryClient } from \"@/lib/queryClient\";\n\nexport default function DashboardNew() {\n  const { language } = useLanguage();\n  const [location, navigate] = useLocation();\n  const { isAuthenticated, isLoading } = useAuth();\n  const { toast } = useToast();\n  \n  const searchParams = new URLSearchParams(window.location.search);\n  const urlTab = searchParams.get(\"tab\") || \"courses\";\n  const [activeTab, setActiveTab] = useState(urlTab);\n\n  useEffect(() => {\n    const params = new URLSearchParams(window.location.search);\n    const tab = params.get(\"tab\") || \"courses\";\n    setActiveTab(tab);\n  }, [location]);\n\n  useEffect(() => {\n    if (!isLoading && !isAuthenticated) {\n      toast({\n        title: \"Unauthorized\",\n        description: \"You are logged out. Logging in again...\",\n        variant: \"destructive\",\n      });\n      setTimeout(() => {\n        window.location.href = \"/api/login\";\n      }, 500);\n    }\n  }, [isAuthenticated, isLoading, toast]);\n\n  const handleTabChange = (value: string) => {\n    setActiveTab(value);\n    navigate(`/dashboard?tab=${value}`, { replace: true });\n  };\n\n  const handleLogout = async () => {\n    try {\n      const response = await fetch(\"/api/auth/logout\", {\n        method: \"POST\",\n        credentials: \"include\",\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Logout failed\");\n      }\n\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      navigate(\"/\");\n      \n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logged out\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"You have been logged out successfully\",\n      });\n    } catch (error) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: language === \"ar\" ? \"ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logout failed\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const tabs = [\n    {\n      value: \"courses\",\n      label: language === \"ar\" ? \"ÿØŸàÿ±ÿßÿ™Ÿä\" : \"My Courses\",\n      icon: BookOpen,\n    },\n    {\n      value: \"subscription\",\n      label: language === \"ar\" ? \"ÿßÿ¥ÿ™ÿ±ÿßŸÉŸä\" : \"Subscription\",\n      icon: CreditCard,\n    },\n    {\n      value: \"referrals\",\n      label: language === \"ar\" ? \"ÿßŸÑÿ•ÿ≠ÿßŸÑÿßÿ™\" : \"Referrals\",\n      icon: Gift,\n    },\n    {\n      value: \"join-group\",\n      label: language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ŸÑŸÑŸÖÿ¨ŸÖŸàÿπÿ©\" : \"Join Group\",\n      icon: Users,\n    },\n    {\n      value: \"ratings\",\n      label: language === \"ar\" ? \"ÿßŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™\" : \"Ratings\",\n      icon: Star,\n    },\n    {\n      value: \"settings\",\n      label: language === \"ar\" ? \"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™\" : \"Settings\",\n      icon: Settings,\n    },\n  ];\n\n  if (isLoading || !isAuthenticated) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <Header />\n        <main className=\"pt-20\">\n          <div className=\"container mx-auto px-6 py-24\">\n            <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20 pb-20 md:pb-0\">\n        <div className=\"container mx-auto px-0 md:px-6\">\n          <div className=\"flex flex-col md:flex-row gap-0 md:gap-6 py-0 md:py-8\">\n            {/* Desktop Sidebar - Hidden on Mobile */}\n            <aside className=\"hidden md:block w-64 flex-shrink-0\">\n              <div className=\"sticky top-24 space-y-4 p-4 bg-muted rounded-lg\">\n                <h2 className=\"px-4 py-2 text-lg font-heading font-bold text-foreground\">\n                  {language === \"ar\" ? \"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ\" : \"Dashboard\"}\n                </h2>\n                <nav className=\"space-y-1\">\n                  {tabs.map((tab) => (\n                    <Button\n                      key={tab.value}\n                      variant={activeTab === tab.value ? \"default\" : \"ghost\"}\n                      className={cn(\n                        \"w-full justify-start gap-3 text-base\",\n                        activeTab === tab.value && \"bg-background\"\n                      )}\n                      onClick={() => handleTabChange(tab.value)}\n                      data-testid={`sidebar-tab-${tab.value}`}\n                    >\n                      <tab.icon className=\"h-5 w-5\" />\n                      {tab.label}\n                    </Button>\n                  ))}\n                </nav>\n                <div className=\"border-t border-border pt-4 space-y-2\">\n                  <Button\n                    variant=\"ghost\"\n                    className=\"w-full justify-start gap-3 text-base\"\n                    onClick={() => navigate(\"/\")}\n                    data-testid=\"button-dashboard-home\"\n                  >\n                    <Home className=\"h-5 w-5\" />\n                    {language === \"ar\" ? \"ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©\" : \"Home\"}\n                  </Button>\n                  <Button\n                    variant=\"destructive\"\n                    className=\"w-full justify-start gap-3 text-base\"\n                    onClick={handleLogout}\n                    data-testid=\"button-dashboard-logout\"\n                  >\n                    <LogOut className=\"h-5 w-5\" />\n                    {language === \"ar\" ? \"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logout\"}\n                  </Button>\n                </div>\n              </div>\n            </aside>\n\n            {/* Main Content */}\n            <div className=\"flex-1 min-w-0 px-4 md:px-0\">\n              {activeTab === \"courses\" && <MyCourses />}\n              {activeTab === \"subscription\" && <MySubscription />}\n              {activeTab === \"referrals\" && <ReferralTab />}\n              {activeTab === \"join-group\" && <JoinGroupTab />}\n              {activeTab === \"ratings\" && <RatingsTab />}\n              {activeTab === \"settings\" && <SettingsTab />}\n            </div>\n          </div>\n        </div>\n\n        {/* Mobile Bottom Navigation - Hidden on Desktop */}\n        <nav className=\"md:hidden fixed bottom-0 left-0 right-0 bg-background border-t border-border z-50\">\n          <div className=\"grid grid-cols-5 gap-1 p-2\">\n            {tabs.map((tab) => (\n              <Button\n                key={tab.value}\n                variant=\"ghost\"\n                size=\"sm\"\n                className={cn(\n                  \"flex flex-col items-center gap-1 h-auto py-2 px-1\",\n                  activeTab === tab.value && \"bg-muted text-primary\"\n                )}\n                onClick={() => handleTabChange(tab.value)}\n                data-testid={`mobile-tab-${tab.value}`}\n              >\n                <tab.icon className={cn(\n                  \"h-5 w-5\",\n                  activeTab === tab.value && \"text-primary\"\n                )} />\n                <span className=\"text-xs truncate w-full text-center\">\n                  {tab.label}\n                </span>\n              </Button>\n            ))}\n          </div>\n        </nav>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 7910
        },
        "client/src/components/dashboard/tabs/RatingsTab.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useState } from \"react\";\nimport { Star, Send } from \"lucide-react\";\nimport type { Testimonial } from \"@shared/schema\";\n\nexport default function Ratings() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  \n  const [rating, setRating] = useState(5);\n  const [hoverRating, setHoverRating] = useState(0);\n  const [review, setReview] = useState(\"\");\n\n  const { data: myReviews } = useQuery<Testimonial[]>({\n    queryKey: [\"/api/user/reviews\"],\n  });\n\n  const submitReviewMutation = useMutation({\n    mutationFn: async (data: { rating: number; content: string }) => {\n      return await apiRequest(\"POST\", \"/api/user/reviews\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/reviews\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/testimonials\"] });\n      setReview(\"\");\n      setRating(5);\n      toast({\n        title: language === \"ar\" ? \"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ!\" : \"Thank you!\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÇŸäŸäŸÖŸÉ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Your review has been submitted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ\" : \"Failed to submit review\"),\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!review.trim()) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: language === \"ar\" ? \"ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÉÿ™ÿßÿ®ÿ© ÿ™ŸÇŸäŸäŸÖŸÉ\" : \"Please write your review\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    submitReviewMutation.mutate({ rating, content: review });\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-ratings-title\">\n          {language === \"ar\" ? \"ÿßŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™\" : \"Ratings & Reviews\"}\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          {language === \"ar\"\n            ? \"ÿ¥ÿßÿ±ŸÉŸÜÿß ÿ±ÿ£ŸäŸÉ ŸÅŸä ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ©\"\n            : \"Share your experience with your learning journey\"}\n        </p>\n      </div>\n\n      {/* Submit Review Card */}\n      <Card>\n        <CardHeader>\n          <CardTitle>{language === \"ar\" ? \"ÿßŸÉÿ™ÿ® ÿ™ŸÇŸäŸäŸÖŸÉ\" : \"Write a Review\"}</CardTitle>\n          <CardDescription>\n            {language === \"ar\"\n              ? \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ÿ™ÿ±ŸÉ ÿ±ÿ£ŸäŸÉ ŸÖŸÜ ÿ£ÿ¨ŸÑ ŸÖÿ≥ÿßÿπÿØÿ© ÿ£ÿÆÿ±ŸäŸÜ ŸÅŸä ÿßÿ™ÿÆÿßÿ∞ ÿßŸÑŸÇÿ±ÿßÿ±.\"\n              : \"Help others by sharing your experience with our platform\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Star Rating */}\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-foreground\">\n                {language === \"ar\" ? \"ÿßŸÑÿ™ŸÇŸäŸäŸÖ\" : \"Rating\"}\n              </label>\n              <div className=\"flex gap-1\" data-testid=\"rating-stars\">\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <button\n                    key={star}\n                    type=\"button\"\n                    onClick={() => setRating(star)}\n                    onMouseEnter={() => setHoverRating(star)}\n                    onMouseLeave={() => setHoverRating(0)}\n                    className=\"transition-transform hover:scale-110 active:scale-95\"\n                    data-testid={`star-${star}`}\n                  >\n                    <Star\n                      className={`h-8 w-8 ${\n                        star <= (hoverRating || rating)\n                          ? \"fill-yellow-400 text-yellow-400\"\n                          : \"text-muted-foreground\"\n                      } transition-colors`}\n                    />\n                  </button>\n                ))}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">\n                {rating === 5 && (language === \"ar\" ? \"ŸÖŸÖÿ™ÿßÿ≤!\" : \"Excellent!\")}\n                {rating === 4 && (language === \"ar\" ? \"ÿ¨ŸäÿØ ÿ¨ÿØÿßŸã\" : \"Very Good\")}\n                {rating === 3 && (language === \"ar\" ? \"ÿ¨ŸäÿØ\" : \"Good\")}\n                {rating === 2 && (language === \"ar\" ? \"ŸÖÿ™Ÿàÿ≥ÿ∑\" : \"Fair\")}\n                {rating === 1 && (language === \"ar\" ? \"ÿ∂ÿπŸäŸÅ\" : \"Poor\")}\n              </p>\n            </div>\n\n            {/* Review Text */}\n            <div className=\"space-y-2\">\n              <label htmlFor=\"review\" className=\"text-sm font-medium text-foreground\">\n                {language === \"ar\" ? \"ÿ™ŸÇŸäŸäŸÖŸÉ\" : \"Your Review\"}\n              </label>\n              <Textarea\n                id=\"review\"\n                placeholder={\n                  language === \"ar\"\n                    ? \"ÿßŸÉÿ™ÿ® ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ ŸÖÿπ ÿßŸÑŸÖŸÜÿµÿ© ŸàÿßŸÑÿØŸàÿ±ÿßÿ™...\"\n                    : \"Share your experience with the platform and courses...\"\n                }\n                value={review}\n                onChange={(e) => setReview(e.target.value)}\n                rows={5}\n                data-testid=\"textarea-review\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                {language === \"ar\"\n                  ? \"ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ™ŸÇŸäŸäŸÖŸÉ ŸÇÿ®ŸÑ ŸÜÿ¥ÿ±Ÿá\"\n                  : \"Your review will be reviewed before being published\"}\n              </p>\n            </div>\n\n            <Button\n              type=\"submit\"\n              disabled={submitReviewMutation.isPending}\n              className=\"w-full md:w-auto\"\n              data-testid=\"button-submit-review\"\n            >\n              <Send className=\"h-4 w-4 mr-2\" />\n              {submitReviewMutation.isPending\n                ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...\" : \"Submitting...\")\n                : (language === \"ar\" ? \"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ\" : \"Submit Review\")}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* My Reviews */}\n      {myReviews && myReviews.length > 0 && (\n        <div className=\"space-y-4\">\n          <h2 className=\"text-xl font-heading font-bold text-foreground\">\n            {language === \"ar\" ? \"ÿ™ŸÇŸäŸäŸÖÿßÿ™Ÿä\" : \"My Reviews\"}\n          </h2>\n          {myReviews.map((review) => (\n            <Card key={review.id} data-testid={`review-${review.id}`}>\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center gap-1 mb-2\">\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <Star\n                      key={star}\n                      className={`h-4 w-4 ${\n                        star <= review.rating\n                          ? \"fill-yellow-400 text-yellow-400\"\n                          : \"text-muted-foreground\"\n                      }`}\n                    />\n                  ))}\n                </div>\n                <p className=\"text-sm text-foreground\">\n                  {language === \"ar\" ? review.contentAr : review.contentEn}\n                </p>\n                <div className=\"flex items-center gap-2 mt-3 text-xs text-muted-foreground\">\n                  <span>{new Date(review.createdAt!).toLocaleDateString()}</span>\n                  {review.isActive ? (\n                    <span className=\"px-2 py-1 rounded-full bg-green-500/10 text-green-500\">\n                      {language === \"ar\" ? \"ŸÖŸÜÿ¥Ÿàÿ±\" : \"Published\"}\n                    </span>\n                  ) : (\n                    <span className=\"px-2 py-1 rounded-full bg-yellow-500/10 text-yellow-500\">\n                      {language === \"ar\" ? \"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©\" : \"Under Review\"}\n                    </span>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n",
            "size_bytes": 8330
        },
        "client/src/pages/dashboard/UserSettings.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useState } from \"react\";\nimport { Save, Lock, User as UserIcon } from \"lucide-react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\n\nconst profileSchema = z.object({\n  firstName: z.string().min(1, \"First name is required\"),\n  lastName: z.string().min(1, \"Last name is required\"),\n  phone: z.string().optional(),\n});\n\nconst passwordSchema = z.object({\n  currentPassword: z.string().min(6, \"Password must be at least 6 characters\"),\n  newPassword: z.string().min(6, \"Password must be at least 6 characters\"),\n  confirmPassword: z.string().min(6, \"Password must be at least 6 characters\"),\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\ntype ProfileForm = z.infer<typeof profileSchema>;\ntype PasswordForm = z.infer<typeof passwordSchema>;\n\nexport default function UserSettings() {\n  const { language } = useLanguage();\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  const profileForm = useForm<ProfileForm>({\n    resolver: zodResolver(profileSchema),\n    defaultValues: {\n      firstName: user?.firstName || \"\",\n      lastName: user?.lastName || \"\",\n      phone: user?.phone || \"\",\n    },\n  });\n\n  const passwordForm = useForm<PasswordForm>({\n    resolver: zodResolver(passwordSchema),\n    defaultValues: {\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n    },\n  });\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: ProfileForm) => {\n      return await apiRequest(\"PATCH\", \"/api/user/profile\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\" : \"Updated\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Profile updated successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä\" : \"Failed to update profile\"),\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updatePasswordMutation = useMutation({\n    mutationFn: async (data: PasswordForm) => {\n      return await apiRequest(\"PATCH\", \"/api/user/password\", {\n        currentPassword: data.currentPassword,\n        newPassword: data.newPassword,\n      });\n    },\n    onSuccess: () => {\n      passwordForm.reset();\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\" : \"Updated\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Password changed successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Failed to change password\"),\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onProfileSubmit = (data: ProfileForm) => {\n    updateProfileMutation.mutate(data);\n  };\n\n  const onPasswordSubmit = (data: PasswordForm) => {\n    updatePasswordMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-settings-title\">\n          {language === \"ar\" ? \"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™\" : \"Settings\"}\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          {language === \"ar\"\n            ? \"ÿ•ÿØÿßÿ±ÿ© ŸÖÿπŸÑŸàŸÖÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ© Ÿàÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ®\"\n            : \"Manage your personal information and account settings\"}\n        </p>\n      </div>\n\n      {/* Profile Information */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <UserIcon className=\"h-5 w-5\" />\n            <CardTitle>{language === \"ar\" ? \"ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ©\" : \"Profile Information\"}</CardTitle>\n          </div>\n          <CardDescription>\n            {language === \"ar\"\n              ? \"ŸÇŸÖ ÿ®ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÖŸÑŸÅŸÉ ÿßŸÑÿ¥ÿÆÿµŸä\"\n              : \"Update your profile information\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...profileForm}>\n            <form onSubmit={profileForm.handleSubmit(onProfileSubmit)} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={profileForm.control}\n                  name=\"firstName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{language === \"ar\" ? \"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ŸàŸÑ\" : \"First Name\"}</FormLabel>\n                      <FormControl>\n                        <Input\n                          placeholder={language === \"ar\" ? \"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ŸàŸÑ\" : \"First Name\"}\n                          data-testid=\"input-first-name\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={profileForm.control}\n                  name=\"lastName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿßŸÑÿπÿßÿ¶ŸÑÿ©\" : \"Last Name\"}</FormLabel>\n                      <FormControl>\n                        <Input\n                          placeholder={language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿßŸÑÿπÿßÿ¶ŸÑÿ©\" : \"Last Name\"}\n                          data-testid=\"input-last-name\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={profileForm.control}\n                name=\"phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ\" : \"Phone Number\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"tel\"\n                        placeholder={language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ\" : \"Phone Number\"}\n                        data-testid=\"input-phone\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"bg-muted p-3 rounded-lg\">\n                <Label className=\"text-sm font-medium\">\n                  {language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}\n                </Label>\n                <p className=\"text-sm text-muted-foreground mt-1\">{user?.email}</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  {language === \"ar\"\n                    ? \"ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\"\n                    : \"Email cannot be changed\"}\n                </p>\n              </div>\n\n              <Button\n                type=\"submit\"\n                disabled={updateProfileMutation.isPending}\n                data-testid=\"button-save-profile\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {updateProfileMutation.isPending\n                  ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏...\" : \"Saving...\")\n                  : (language === \"ar\" ? \"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™\" : \"Save Changes\")}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      {/* Change Password */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <Lock className=\"h-5 w-5\" />\n            <CardTitle>{language === \"ar\" ? \"ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Change Password\"}</CardTitle>\n          </div>\n          <CardDescription>\n            {language === \"ar\"\n              ? \"ŸÇŸÖ ÿ®ÿ™ÿ≠ÿØŸäÿ´ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÉ\"\n              : \"Update your password\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...passwordForm}>\n            <form onSubmit={passwordForm.handleSubmit(onPasswordSubmit)} className=\"space-y-4\">\n              <FormField\n                control={passwordForm.control}\n                name=\"currentPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ≠ÿßŸÑŸäÿ©\" : \"Current Password\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"password\"\n                        placeholder={language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ≠ÿßŸÑŸäÿ©\" : \"Current Password\"}\n                        data-testid=\"input-current-password\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={passwordForm.control}\n                name=\"newPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©\" : \"New Password\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"password\"\n                        placeholder={language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©\" : \"New Password\"}\n                        data-testid=\"input-new-password\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={passwordForm.control}\n                name=\"confirmPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ÿ™ÿ£ŸÉŸäÿØ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Confirm Password\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"password\"\n                        placeholder={language === \"ar\" ? \"ÿ™ÿ£ŸÉŸäÿØ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Confirm Password\"}\n                        data-testid=\"input-confirm-password\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <Button\n                type=\"submit\"\n                disabled={updatePasswordMutation.isPending}\n                data-testid=\"button-save-password\"\n              >\n                <Lock className=\"h-4 w-4 mr-2\" />\n                {updatePasswordMutation.isPending\n                  ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´...\" : \"Updating...\")\n                  : (language === \"ar\" ? \"ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Change Password\")}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
            "size_bytes": 12065
        },
        "client/src/components/dashboard/tabs/MyCourses.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { BookOpen, Clock, TrendingUp, Award } from \"lucide-react\";\nimport type { Course, Progress as UserProgress } from \"@shared/schema\";\nimport { Link } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\nexport default function MyCourses() {\n  const { t, language } = useLanguage();\n  const { user } = useAuth();\n\n  const { data: courses } = useQuery<Course[]>({\n    queryKey: [\"/api/courses\"],\n  });\n\n  const { data: allProgress } = useQuery<UserProgress[]>({\n    queryKey: [\"/api/user/progress\"],\n  });\n\n  const enrolledCourses = courses?.filter((course) =>\n    allProgress?.some((p) => p.courseId === course.id)\n  );\n\n  const completedLessons = allProgress?.filter((p) => p.completed).length || 0;\n  const totalHours = Math.floor(completedLessons * 0.75);\n\n  const stats = [\n    {\n      icon: BookOpen,\n      label: t(\"dashboard.stats.enrolled\"),\n      value: enrolledCourses?.length || 0,\n      color: \"text-blue-500\",\n    },\n    {\n      icon: Award,\n      label: t(\"dashboard.stats.completed\"),\n      value: completedLessons,\n      color: \"text-green-500\",\n    },\n    {\n      icon: Clock,\n      label: t(\"dashboard.stats.hours\"),\n      value: totalHours,\n      color: \"text-purple-500\",\n    },\n    {\n      icon: TrendingUp,\n      label: t(\"dashboard.stats.progress\"),\n      value: `${completedLessons > 0 ? Math.min(Math.round((completedLessons / 50) * 100), 100) : 0}%`,\n      color: \"text-orange-500\",\n    },\n  ];\n\n  const getCourseProgress = (courseId: string) => {\n    const courseProgress = allProgress?.filter((p) => p.courseId === courseId);\n    const completed = courseProgress?.filter((p) => p.completed).length || 0;\n    const total = courseProgress?.length || 1;\n    return (completed / total) * 100;\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h2 className=\"text-3xl font-heading font-bold text-foreground mb-2\">\n          {t(\"dashboard.welcome\")}, {user?.firstName}!\n        </h2>\n        <p className=\"text-muted-foreground\">\n          {language === \"ar\" ? \"ÿ™ÿßÿ®ÿπ ÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ™ÿπŸÑŸÖ ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÉ\" : \"Continue your learning journey\"}\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {stats.map((stat, index) => (\n          <Card key={index} className=\"hover-elevate active-elevate-2 transition-all\">\n            <CardContent className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <stat.icon className={`h-8 w-8 ${stat.color}`} />\n                <span className=\"text-3xl font-bold text-foreground\">{stat.value}</span>\n              </div>\n              <p className=\"text-sm text-muted-foreground\">{stat.label}</p>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      <div>\n        <div className=\"flex items-center justify-between mb-6\">\n          <h3 className=\"text-2xl font-heading font-bold text-foreground\">\n            {t(\"dashboard.my-courses\")}\n          </h3>\n          <Button asChild variant=\"outline\">\n            <Link href=\"/courses\">{language === \"ar\" ? \"ÿ™ÿµŸÅÿ≠ ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"Browse Courses\"}</Link>\n          </Button>\n        </div>\n\n        {enrolledCourses && enrolledCourses.length > 0 ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {enrolledCourses.map((course) => {\n              const progress = getCourseProgress(course.id);\n              return (\n                <Card key={course.id} className=\"hover-elevate active-elevate-2 transition-all\">\n                  <CardHeader>\n                    <CardTitle className=\"text-lg\">\n                      {language === \"ar\" ? course.titleAr : course.titleEn}\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <div className=\"flex justify-between text-sm mb-2\">\n                          <span className=\"text-muted-foreground\">{t(\"dashboard.stats.progress\")}</span>\n                          <span className=\"font-medium text-foreground\">{Math.round(progress)}%</span>\n                        </div>\n                        <Progress value={progress} />\n                      </div>\n                      <Button asChild className=\"w-full\">\n                        <Link href={`/course/${course.id}`}>{t(\"courses.continue\")}</Link>\n                      </Button>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        ) : (\n          <Card>\n            <CardContent className=\"p-12 text-center\">\n              <BookOpen className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n              <h3 className=\"text-xl font-heading font-bold text-foreground mb-2\">\n                {language === \"ar\" ? \"ŸÑŸÖ ÿ™ÿ®ÿØÿ£ ÿ£Ÿä ÿØŸàÿ±ÿßÿ™ ÿ®ÿπÿØ\" : \"No Courses Started Yet\"}\n              </h3>\n              <p className=\"text-muted-foreground mb-6\">\n                {language === \"ar\"\n                  ? \"ÿßÿ®ÿØÿ£ ŸÖÿ¥ÿßŸáÿØÿ© ÿßŸÑÿØÿ±Ÿàÿ≥ ŸÑÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß\"\n                  : \"Start watching lessons to see them here\"}\n              </p>\n              <Button asChild>\n                <Link href=\"/courses\">{language === \"ar\" ? \"ÿ™ÿµŸÅÿ≠ ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"Browse Courses\"}</Link>\n              </Button>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}\n",
            "size_bytes": 5729
        },
        "client/src/components/dashboard/tabs/MySubscription.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { CreditCard, Calendar, CheckCircle2, AlertCircle, XCircle } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { Link } from \"wouter\";\nimport type { Subscription, SubscriptionPlan } from \"@shared/schema\";\n\nexport default function SubscriptionPage() {\n  const { language } = useLanguage();\n  const { user } = useAuth();\n\n  const { data: subscription, isLoading, isError, error } = useQuery<\n    (Subscription & { plan: SubscriptionPlan | null }) | null\n  >({\n    queryKey: [\"/api/user/subscription\"],\n  });\n\n  const getSubscriptionStatus = () => {\n    if (!subscription) return \"none\";\n    \n    const now = new Date();\n    const endDate = subscription.endDate ? new Date(subscription.endDate) : null;\n    \n    if (subscription.status === \"active\" && endDate && now > endDate) {\n      return \"expired\";\n    }\n    \n    return subscription.status;\n  };\n\n  const subscriptionStatus = getSubscriptionStatus();\n  \n  const getStatusConfig = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return {\n          icon: CheckCircle2,\n          label: language === \"ar\" ? \"ŸÜÿ¥ÿ∑\" : \"Active\",\n          variant: \"default\" as const,\n          color: \"text-green-500\",\n        };\n      case \"pending\":\n        return {\n          icon: AlertCircle,\n          label: language === \"ar\" ? \"ŸÇŸäÿØ ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©\" : \"Pending Approval\",\n          variant: \"secondary\" as const,\n          color: \"text-yellow-500\",\n        };\n      case \"expired\":\n        return {\n          icon: XCircle,\n          label: language === \"ar\" ? \"ŸÖŸÜÿ™ŸáŸä\" : \"Expired\",\n          variant: \"destructive\" as const,\n          color: \"text-red-500\",\n        };\n      default:\n        return {\n          icon: AlertCircle,\n          label: language === \"ar\" ? \"ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑\" : \"Inactive\",\n          variant: \"outline\" as const,\n          color: \"text-muted-foreground\",\n        };\n    }\n  };\n\n  const statusConfig = getStatusConfig(subscriptionStatus);\n\n  if (isLoading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  if (isError) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"p-12 text-center\">\n            <AlertCircle className=\"h-16 w-16 text-destructive mx-auto mb-4\" />\n            <h3 className=\"text-xl font-heading font-bold text-foreground mb-2\">\n              {language === \"ar\" ? \"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ\" : \"Error Loading Subscription\"}\n            </h3>\n            <p className=\"text-muted-foreground mb-6\">\n              {language === \"ar\"\n                ? \"ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ. ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.\"\n                : \"Failed to load subscription information. Please try again.\"}\n            </p>\n            <Button onClick={() => window.location.reload()}>\n              {language === \"ar\" ? \"ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©\" : \"Retry\"}\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-subscription-title\">\n          {language === \"ar\" ? \"ÿßÿ¥ÿ™ÿ±ÿßŸÉŸä\" : \"My Subscription\"}\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          {language === \"ar\"\n            ? \"ÿ•ÿØÿßÿ±ÿ© ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ ŸàŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿØŸÅÿπ\"\n            : \"Manage your subscription and payment information\"}\n        </p>\n      </div>\n\n      {subscription && subscription.plan ? (\n        <div className=\"space-y-6\">\n          {/* Current Plan Card */}\n          <Card data-testid=\"card-current-subscription\">\n            <CardHeader>\n              <div className=\"flex items-start justify-between gap-4\">\n                <div className=\"flex items-center gap-3\">\n                  <CreditCard className=\"h-8 w-8 text-primary\" />\n                  <div>\n                    <CardTitle className=\"text-xl mb-1\">\n                      {language === \"ar\" ? subscription.plan.nameAr : subscription.plan.nameEn}\n                    </CardTitle>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {language === \"ar\" ? \"ÿÆÿ∑ÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©\" : \"Current Plan\"}\n                    </p>\n                  </div>\n                </div>\n                <Badge variant={statusConfig.variant} className=\"flex items-center gap-1\">\n                  <statusConfig.icon className=\"h-3 w-3\" />\n                  {statusConfig.label}\n                </Badge>\n              </div>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              {/* Dates */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {subscription.startDate && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4\" />\n                      {language === \"ar\" ? \"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ®ÿØÿ°\" : \"Start Date\"}\n                    </p>\n                    <p className=\"font-medium text-foreground\">\n                      {format(new Date(subscription.startDate), \"MMM dd, yyyy\")}\n                    </p>\n                  </div>\n                )}\n                {subscription.endDate && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4\" />\n                      {subscriptionStatus === \"expired\"\n                        ? (language === \"ar\" ? \"ÿßŸÜÿ™ŸáŸâ ŸÅŸä\" : \"Expired on\")\n                        : (language === \"ar\" ? \"ŸäŸÜÿ™ŸáŸä ŸÅŸä\" : \"Expires on\")}\n                    </p>\n                    <p className={`font-medium ${subscriptionStatus === \"expired\" ? \"text-destructive\" : \"text-foreground\"}`}>\n                      {format(new Date(subscription.endDate), \"MMM dd, yyyy\")}\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* Features */}\n              {subscription.plan.featuresEn && subscription.plan.featuresEn.length > 0 && (\n                <div>\n                  <h3 className=\"font-semibold text-foreground mb-3\">\n                    {language === \"ar\" ? \"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÖÿ¥ŸÖŸàŸÑÿ©\" : \"Included Features\"}\n                  </h3>\n                  <ul className=\"space-y-2\">\n                    {(language === \"ar\" ? subscription.plan.featuresAr : subscription.plan.featuresEn)?.map((feature, index) => (\n                      <li key={index} className=\"flex items-start gap-2 text-sm\">\n                        <CheckCircle2 className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                        <span className=\"text-muted-foreground\">{feature}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex flex-wrap gap-3 pt-4 border-t border-border\">\n                <Button asChild variant=\"default\">\n                  <Link href=\"/pricing\">\n                    {subscriptionStatus === \"active\"\n                      ? (language === \"ar\" ? \"ÿ™ÿ±ŸÇŸäÿ© ÿßŸÑÿÆÿ∑ÿ©\" : \"Upgrade Plan\")\n                      : subscriptionStatus === \"expired\"\n                        ? (language === \"ar\" ? \"ÿ™ÿ¨ÿØŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\" : \"Renew Subscription\")\n                        : (language === \"ar\" ? \"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿÆÿ∑ÿ©\" : \"Change Plan\")}\n                  </Link>\n                </Button>\n                {subscriptionStatus === \"pending\" && (\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                    <AlertCircle className=\"h-4 w-4\" />\n                    <span>\n                      {language === \"ar\"\n                        ? \"ÿ≥Ÿäÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ ÿ®ÿπÿØ ŸÖŸàÿßŸÅŸÇÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ© ÿπŸÑŸâ ÿßŸÑÿØŸÅÿπ\"\n                        : \"Your subscription will be activated after payment approval\"}\n                    </span>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      ) : (\n        <Card data-testid=\"card-no-subscription\">\n          <CardContent className=\"p-12 text-center\">\n            <CreditCard className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-xl font-heading font-bold text-foreground mb-2\">\n              {language === \"ar\" ? \"ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÜÿ¥ÿ∑\" : \"No Active Subscription\"}\n            </h3>\n            <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\n              {language === \"ar\"\n                ? \"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÜÿ¥ÿ∑ ÿ≠ÿ™Ÿâ ÿßŸÑÿ¢ŸÜ. ÿßÿÆÿ™ÿ± ÿÆÿ∑ÿ© ŸÑŸÅÿ™ÿ≠ ÿßŸÑÿØŸàÿ±ÿßÿ™ ŸàÿßŸÑŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©.\"\n                : \"You don't have an active subscription yet. Choose a plan to unlock premium courses and features.\"}\n            </p>\n            <Button asChild size=\"lg\">\n              <Link href=\"/pricing\">\n                {language === \"ar\" ? \"ÿπÿ±ÿ∂ ÿßŸÑÿÆÿ∑ÿ∑\" : \"View Plans\"}\n              </Link>\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n",
            "size_bytes": 9591
        },
        "client/src/pages/dashboard/Ratings.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useState } from \"react\";\nimport { Star, Send } from \"lucide-react\";\nimport type { Testimonial } from \"@shared/schema\";\n\nexport default function Ratings() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  \n  const [rating, setRating] = useState(5);\n  const [hoverRating, setHoverRating] = useState(0);\n  const [review, setReview] = useState(\"\");\n\n  const { data: myReviews } = useQuery<Testimonial[]>({\n    queryKey: [\"/api/user/reviews\"],\n  });\n\n  const submitReviewMutation = useMutation({\n    mutationFn: async (data: { rating: number; content: string }) => {\n      return await apiRequest(\"POST\", \"/api/user/reviews\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/user/reviews\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/testimonials\"] });\n      setReview(\"\");\n      setRating(5);\n      toast({\n        title: language === \"ar\" ? \"ÿ¥ŸÉÿ±ÿßŸã ŸÑŸÉ!\" : \"Thank you!\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÇŸäŸäŸÖŸÉ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Your review has been submitted successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ\" : \"Failed to submit review\"),\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!review.trim()) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: language === \"ar\" ? \"ÿßŸÑÿ±ÿ¨ÿßÿ° ŸÉÿ™ÿßÿ®ÿ© ÿ™ŸÇŸäŸäŸÖŸÉ\" : \"Please write your review\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    submitReviewMutation.mutate({ rating, content: review });\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-ratings-title\">\n          {language === \"ar\" ? \"ÿßŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™\" : \"Ratings & Reviews\"}\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          {language === \"ar\"\n            ? \"ÿ¥ÿßÿ±ŸÉŸÜÿß ÿ±ÿ£ŸäŸÉ ŸÅŸä ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸäÿ©\"\n            : \"Share your experience with your learning journey\"}\n        </p>\n      </div>\n\n      {/* Submit Review Card */}\n      <Card>\n        <CardHeader>\n          <CardTitle>{language === \"ar\" ? \"ÿßŸÉÿ™ÿ® ÿ™ŸÇŸäŸäŸÖŸÉ\" : \"Write a Review\"}</CardTitle>\n          <CardDescription>\n            {language === \"ar\"\n              ? \"ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ŸÉ ŸÅŸä ÿ™ÿ±ŸÉ ÿ±ÿ£ŸäŸÉ ŸÖŸÜ ÿ£ÿ¨ŸÑ ŸÖÿ≥ÿßÿπÿØÿ© ÿ£ÿÆÿ±ŸäŸÜ ŸÅŸä ÿßÿ™ÿÆÿßÿ∞ ÿßŸÑŸÇÿ±ÿßÿ±.\"\n              : \"Help others by sharing your experience with our platform\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Star Rating */}\n            <div className=\"space-y-2\">\n              <label className=\"text-sm font-medium text-foreground\">\n                {language === \"ar\" ? \"ÿßŸÑÿ™ŸÇŸäŸäŸÖ\" : \"Rating\"}\n              </label>\n              <div className=\"flex gap-1\" data-testid=\"rating-stars\">\n                {[1, 2, 3, 4, 5].map((star) => (\n                  <button\n                    key={star}\n                    type=\"button\"\n                    onClick={() => setRating(star)}\n                    onMouseEnter={() => setHoverRating(star)}\n                    onMouseLeave={() => setHoverRating(0)}\n                    className=\"transition-transform hover:scale-110 active:scale-95\"\n                    data-testid={`star-${star}`}\n                  >\n                    <Star\n                      className={`h-8 w-8 ${\n                        star <= (hoverRating || rating)\n                          ? \"fill-yellow-400 text-yellow-400\"\n                          : \"text-muted-foreground\"\n                      } transition-colors`}\n                    />\n                  </button>\n                ))}\n              </div>\n              <p className=\"text-sm text-muted-foreground\">\n                {rating === 5 && (language === \"ar\" ? \"ŸÖŸÖÿ™ÿßÿ≤!\" : \"Excellent!\")}\n                {rating === 4 && (language === \"ar\" ? \"ÿ¨ŸäÿØ ÿ¨ÿØÿßŸã\" : \"Very Good\")}\n                {rating === 3 && (language === \"ar\" ? \"ÿ¨ŸäÿØ\" : \"Good\")}\n                {rating === 2 && (language === \"ar\" ? \"ŸÖÿ™Ÿàÿ≥ÿ∑\" : \"Fair\")}\n                {rating === 1 && (language === \"ar\" ? \"ÿ∂ÿπŸäŸÅ\" : \"Poor\")}\n              </p>\n            </div>\n\n            {/* Review Text */}\n            <div className=\"space-y-2\">\n              <label htmlFor=\"review\" className=\"text-sm font-medium text-foreground\">\n                {language === \"ar\" ? \"ÿ™ŸÇŸäŸäŸÖŸÉ\" : \"Your Review\"}\n              </label>\n              <Textarea\n                id=\"review\"\n                placeholder={\n                  language === \"ar\"\n                    ? \"ÿßŸÉÿ™ÿ® ÿ™ÿ¨ÿ±ÿ®ÿ™ŸÉ ŸÖÿπ ÿßŸÑŸÖŸÜÿµÿ© ŸàÿßŸÑÿØŸàÿ±ÿßÿ™...\"\n                    : \"Share your experience with the platform and courses...\"\n                }\n                value={review}\n                onChange={(e) => setReview(e.target.value)}\n                rows={5}\n                data-testid=\"textarea-review\"\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                {language === \"ar\"\n                  ? \"ÿ≥Ÿäÿ™ŸÖ ŸÖÿ±ÿßÿ¨ÿπÿ© ÿ™ŸÇŸäŸäŸÖŸÉ ŸÇÿ®ŸÑ ŸÜÿ¥ÿ±Ÿá\"\n                  : \"Your review will be reviewed before being published\"}\n              </p>\n            </div>\n\n            <Button\n              type=\"submit\"\n              disabled={submitReviewMutation.isPending}\n              className=\"w-full md:w-auto\"\n              data-testid=\"button-submit-review\"\n            >\n              <Send className=\"h-4 w-4 mr-2\" />\n              {submitReviewMutation.isPending\n                ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...\" : \"Submitting...\")\n                : (language === \"ar\" ? \"ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇŸäŸäŸÖ\" : \"Submit Review\")}\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n\n      {/* My Reviews */}\n      {myReviews && myReviews.length > 0 && (\n        <div className=\"space-y-4\">\n          <h2 className=\"text-xl font-heading font-bold text-foreground\">\n            {language === \"ar\" ? \"ÿ™ŸÇŸäŸäŸÖÿßÿ™Ÿä\" : \"My Reviews\"}\n          </h2>\n          {myReviews.map((review) => (\n            <Card key={review.id} data-testid={`review-${review.id}`}>\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center gap-1 mb-2\">\n                  {[1, 2, 3, 4, 5].map((star) => (\n                    <Star\n                      key={star}\n                      className={`h-4 w-4 ${\n                        star <= review.rating\n                          ? \"fill-yellow-400 text-yellow-400\"\n                          : \"text-muted-foreground\"\n                      }`}\n                    />\n                  ))}\n                </div>\n                <p className=\"text-sm text-foreground\">\n                  {language === \"ar\" ? review.contentAr : review.contentEn}\n                </p>\n                <div className=\"flex items-center gap-2 mt-3 text-xs text-muted-foreground\">\n                  <span>{new Date(review.createdAt!).toLocaleDateString()}</span>\n                  {review.isActive ? (\n                    <span className=\"px-2 py-1 rounded-full bg-green-500/10 text-green-500\">\n                      {language === \"ar\" ? \"ŸÖŸÜÿ¥Ÿàÿ±\" : \"Published\"}\n                    </span>\n                  ) : (\n                    <span className=\"px-2 py-1 rounded-full bg-yellow-500/10 text-yellow-500\">\n                      {language === \"ar\" ? \"ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©\" : \"Under Review\"}\n                    </span>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n",
            "size_bytes": 8330
        },
        "client/src/pages/dashboard/Subscription.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { CreditCard, Calendar, CheckCircle2, AlertCircle, XCircle } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport { Link } from \"wouter\";\nimport type { Subscription, SubscriptionPlan } from \"@shared/schema\";\n\nexport default function SubscriptionPage() {\n  const { language } = useLanguage();\n  const { user } = useAuth();\n\n  const { data: subscription, isLoading, isError, error } = useQuery<\n    (Subscription & { plan: SubscriptionPlan | null }) | null\n  >({\n    queryKey: [\"/api/user/subscription\"],\n  });\n\n  const getSubscriptionStatus = () => {\n    if (!subscription) return \"none\";\n    \n    const now = new Date();\n    const endDate = subscription.endDate ? new Date(subscription.endDate) : null;\n    \n    if (subscription.status === \"active\" && endDate && now > endDate) {\n      return \"expired\";\n    }\n    \n    return subscription.status;\n  };\n\n  const subscriptionStatus = getSubscriptionStatus();\n  \n  const getStatusConfig = (status: string) => {\n    switch (status) {\n      case \"active\":\n        return {\n          icon: CheckCircle2,\n          label: language === \"ar\" ? \"ŸÜÿ¥ÿ∑\" : \"Active\",\n          variant: \"default\" as const,\n          color: \"text-green-500\",\n        };\n      case \"pending\":\n        return {\n          icon: AlertCircle,\n          label: language === \"ar\" ? \"ŸÇŸäÿØ ÿßŸÑŸÖŸàÿßŸÅŸÇÿ©\" : \"Pending Approval\",\n          variant: \"secondary\" as const,\n          color: \"text-yellow-500\",\n        };\n      case \"expired\":\n        return {\n          icon: XCircle,\n          label: language === \"ar\" ? \"ŸÖŸÜÿ™ŸáŸä\" : \"Expired\",\n          variant: \"destructive\" as const,\n          color: \"text-red-500\",\n        };\n      default:\n        return {\n          icon: AlertCircle,\n          label: language === \"ar\" ? \"ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑\" : \"Inactive\",\n          variant: \"outline\" as const,\n          color: \"text-muted-foreground\",\n        };\n    }\n  };\n\n  const statusConfig = getStatusConfig(subscriptionStatus);\n\n  if (isLoading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  if (isError) {\n    return (\n      <div className=\"p-6\">\n        <Card>\n          <CardContent className=\"p-12 text-center\">\n            <AlertCircle className=\"h-16 w-16 text-destructive mx-auto mb-4\" />\n            <h3 className=\"text-xl font-heading font-bold text-foreground mb-2\">\n              {language === \"ar\" ? \"ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ\" : \"Error Loading Subscription\"}\n            </h3>\n            <p className=\"text-muted-foreground mb-6\">\n              {language === \"ar\"\n                ? \"ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ŸÖŸäŸÑ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ. ÿßŸÑÿ±ÿ¨ÿßÿ° ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ© ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ.\"\n                : \"Failed to load subscription information. Please try again.\"}\n            </p>\n            <Button onClick={() => window.location.reload()}>\n              {language === \"ar\" ? \"ÿ•ÿπÿßÿØÿ© ÿßŸÑŸÖÿ≠ÿßŸàŸÑÿ©\" : \"Retry\"}\n            </Button>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-subscription-title\">\n          {language === \"ar\" ? \"ÿßÿ¥ÿ™ÿ±ÿßŸÉŸä\" : \"My Subscription\"}\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          {language === \"ar\"\n            ? \"ÿ•ÿØÿßÿ±ÿ© ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ ŸàŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿØŸÅÿπ\"\n            : \"Manage your subscription and payment information\"}\n        </p>\n      </div>\n\n      {subscription && subscription.plan ? (\n        <div className=\"space-y-6\">\n          {/* Current Plan Card */}\n          <Card data-testid=\"card-current-subscription\">\n            <CardHeader>\n              <div className=\"flex items-start justify-between gap-4\">\n                <div className=\"flex items-center gap-3\">\n                  <CreditCard className=\"h-8 w-8 text-primary\" />\n                  <div>\n                    <CardTitle className=\"text-xl mb-1\">\n                      {language === \"ar\" ? subscription.plan.nameAr : subscription.plan.nameEn}\n                    </CardTitle>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {language === \"ar\" ? \"ÿÆÿ∑ÿ™ŸÉ ÿßŸÑÿ≠ÿßŸÑŸäÿ©\" : \"Current Plan\"}\n                    </p>\n                  </div>\n                </div>\n                <Badge variant={statusConfig.variant} className=\"flex items-center gap-1\">\n                  <statusConfig.icon className=\"h-3 w-3\" />\n                  {statusConfig.label}\n                </Badge>\n              </div>\n            </CardHeader>\n            <CardContent className=\"space-y-6\">\n              {/* Dates */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                {subscription.startDate && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4\" />\n                      {language === \"ar\" ? \"ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ®ÿØÿ°\" : \"Start Date\"}\n                    </p>\n                    <p className=\"font-medium text-foreground\">\n                      {format(new Date(subscription.startDate), \"MMM dd, yyyy\")}\n                    </p>\n                  </div>\n                )}\n                {subscription.endDate && (\n                  <div>\n                    <p className=\"text-sm text-muted-foreground mb-1 flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4\" />\n                      {subscriptionStatus === \"expired\"\n                        ? (language === \"ar\" ? \"ÿßŸÜÿ™ŸáŸâ ŸÅŸä\" : \"Expired on\")\n                        : (language === \"ar\" ? \"ŸäŸÜÿ™ŸáŸä ŸÅŸä\" : \"Expires on\")}\n                    </p>\n                    <p className={`font-medium ${subscriptionStatus === \"expired\" ? \"text-destructive\" : \"text-foreground\"}`}>\n                      {format(new Date(subscription.endDate), \"MMM dd, yyyy\")}\n                    </p>\n                  </div>\n                )}\n              </div>\n\n              {/* Features */}\n              {subscription.plan.featuresEn && subscription.plan.featuresEn.length > 0 && (\n                <div>\n                  <h3 className=\"font-semibold text-foreground mb-3\">\n                    {language === \"ar\" ? \"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÖÿ¥ŸÖŸàŸÑÿ©\" : \"Included Features\"}\n                  </h3>\n                  <ul className=\"space-y-2\">\n                    {(language === \"ar\" ? subscription.plan.featuresAr : subscription.plan.featuresEn)?.map((feature, index) => (\n                      <li key={index} className=\"flex items-start gap-2 text-sm\">\n                        <CheckCircle2 className=\"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0\" />\n                        <span className=\"text-muted-foreground\">{feature}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n\n              {/* Actions */}\n              <div className=\"flex flex-wrap gap-3 pt-4 border-t border-border\">\n                <Button asChild variant=\"default\">\n                  <Link href=\"/pricing\">\n                    <a>\n                      {subscriptionStatus === \"active\"\n                        ? (language === \"ar\" ? \"ÿ™ÿ±ŸÇŸäÿ© ÿßŸÑÿÆÿ∑ÿ©\" : \"Upgrade Plan\")\n                        : subscriptionStatus === \"expired\"\n                          ? (language === \"ar\" ? \"ÿ™ÿ¨ÿØŸäÿØ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\" : \"Renew Subscription\")\n                          : (language === \"ar\" ? \"ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿÆÿ∑ÿ©\" : \"Change Plan\")}\n                    </a>\n                  </Link>\n                </Button>\n                {subscriptionStatus === \"pending\" && (\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                    <AlertCircle className=\"h-4 w-4\" />\n                    <span>\n                      {language === \"ar\"\n                        ? \"ÿ≥Ÿäÿ™ŸÖ ÿ™ŸÅÿπŸäŸÑ ÿßÿ¥ÿ™ÿ±ÿßŸÉŸÉ ÿ®ÿπÿØ ŸÖŸàÿßŸÅŸÇÿ© ÿßŸÑÿ•ÿØÿßÿ±ÿ© ÿπŸÑŸâ ÿßŸÑÿØŸÅÿπ\"\n                        : \"Your subscription will be activated after payment approval\"}\n                    </span>\n                  </div>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      ) : (\n        <Card data-testid=\"card-no-subscription\">\n          <CardContent className=\"p-12 text-center\">\n            <CreditCard className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-xl font-heading font-bold text-foreground mb-2\">\n              {language === \"ar\" ? \"ŸÑÿß ŸäŸàÿ¨ÿØ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÜÿ¥ÿ∑\" : \"No Active Subscription\"}\n            </h3>\n            <p className=\"text-muted-foreground mb-6 max-w-md mx-auto\">\n              {language === \"ar\"\n                ? \"ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿßÿ¥ÿ™ÿ±ÿßŸÉ ŸÜÿ¥ÿ∑ ÿ≠ÿ™Ÿâ ÿßŸÑÿ¢ŸÜ. ÿßÿÆÿ™ÿ± ÿÆÿ∑ÿ© ŸÑŸÅÿ™ÿ≠ ÿßŸÑÿØŸàÿ±ÿßÿ™ ŸàÿßŸÑŸÖŸäÿ≤ÿßÿ™ ÿßŸÑŸÖŸÖŸäÿ≤ÿ©.\"\n                : \"You don't have an active subscription yet. Choose a plan to unlock premium courses and features.\"}\n            </p>\n            <Button asChild size=\"lg\">\n              <Link href=\"/pricing\">\n                <a>{language === \"ar\" ? \"ÿπÿ±ÿ∂ ÿßŸÑÿÆÿ∑ÿ∑\" : \"View Plans\"}</a>\n              </Link>\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n",
            "size_bytes": 9657
        },
        "client/src/pages/dashboard/UserLayout.tsx": {
            "content": "import { SidebarProvider, SidebarTrigger } from \"@/components/ui/sidebar\";\nimport { UserSidebar } from \"@/components/dashboard/UserSidebar\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Button } from \"@/components/ui/button\";\nimport { LogOut, Globe, Moon, Sun } from \"lucide-react\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useTheme } from \"@/lib/theme\";\nimport { Link, useLocation } from \"wouter\";\nimport { queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\n\ninterface UserLayoutProps {\n  children: React.ReactNode;\n}\n\nexport function UserLayout({ children }: UserLayoutProps) {\n  const { user } = useAuth();\n  const { language, setLanguage } = useLanguage();\n  const { theme, toggleTheme } = useTheme();\n  const [, navigate] = useLocation();\n  const { toast } = useToast();\n\n  const style = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  };\n\n  const handleLogout = async () => {\n    try {\n      const response = await fetch(\"/api/auth/logout\", { method: \"POST\", credentials: \"include\" });\n      if (!response.ok) {\n        throw new Error(\"Logout failed\");\n      }\n      \n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      navigate(\"/\");\n      \n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logged out\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿÆÿ±Ÿàÿ¨ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"You have been logged out successfully\",\n      });\n    } catch (error) {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: language === \"ar\" ? \"ŸÅÿ¥ŸÑ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨\" : \"Logout failed\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  return (\n    <SidebarProvider style={style as React.CSSProperties}>\n      <div className=\"flex h-screen w-full overflow-hidden\">\n        <UserSidebar />\n        <div className=\"flex flex-col flex-1\">\n          <header className=\"flex items-center justify-between gap-4 p-4 border-b border-border bg-background\">\n            <div className=\"flex items-center gap-2\">\n              <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n            </div>\n            \n            <div className=\"flex items-center gap-3\">\n              {/* Language Switcher */}\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button variant=\"ghost\" size=\"icon\" data-testid=\"button-language-toggle\">\n                    <Globe className=\"h-5 w-5\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\">\n                  <DropdownMenuItem onClick={() => setLanguage(\"en\")} data-testid=\"option-language-en\">\n                    English\n                  </DropdownMenuItem>\n                  <DropdownMenuItem onClick={() => setLanguage(\"ar\")} data-testid=\"option-language-ar\">\n                    ÿßŸÑÿπÿ±ÿ®Ÿäÿ©\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n\n              {/* Theme Toggle */}\n              <Button variant=\"ghost\" size=\"icon\" onClick={toggleTheme} data-testid=\"button-theme-toggle\">\n                {theme === \"dark\" ? <Sun className=\"h-5 w-5\" /> : <Moon className=\"h-5 w-5\" />}\n              </Button>\n              \n              {user && (\n                <>\n                  <Link href=\"/dashboard/settings\">\n                    <a className=\"flex items-center gap-2 hover-elevate active-elevate-2 px-3 py-2 rounded-md transition-colors\">\n                      <Avatar className=\"h-8 w-8\">\n                        <AvatarFallback className=\"bg-primary/10 text-primary\">\n                          {user.firstName?.[0]}{user.lastName?.[0]}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div className=\"hidden md:block text-left\">\n                        <p className=\"text-sm font-medium text-foreground\">\n                          {user.firstName} {user.lastName}\n                        </p>\n                        <p className=\"text-xs text-muted-foreground\">{user.email}</p>\n                      </div>\n                    </a>\n                  </Link>\n                  \n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={handleLogout}\n                    data-testid=\"button-logout\"\n                  >\n                    <LogOut className=\"h-4 w-4\" />\n                  </Button>\n                </>\n              )}\n            </div>\n          </header>\n          \n          <main className=\"flex-1 overflow-auto\">\n            {children}\n          </main>\n        </div>\n      </div>\n    </SidebarProvider>\n  );\n}\n",
            "size_bytes": 4939
        },
        "client/src/pages/dashboard/JoinGroup.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { MessageCircle, Phone, ExternalLink } from \"lucide-react\";\nimport type { Setting } from \"@shared/schema\";\n\nexport default function JoinGroup() {\n  const { language } = useLanguage();\n\n  const { data: settingsData, isLoading } = useQuery<Setting[]>({\n    queryKey: [\"/api/settings\"],\n  });\n\n  const telegramLink = settingsData?.find(s => s.key === \"telegram_link\")?.value;\n  const whatsappLink = settingsData?.find(s => s.key === \"whatsapp_link\")?.value;\n\n  if (isLoading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-join-group-title\">\n          {language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ŸÑŸÖÿ¨ŸÖŸàÿπÿßÿ™ŸÜÿß\" : \"Join Our Groups\"}\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          {language === \"ar\"\n            ? \"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿ≤ŸÖŸÑÿßÿ¶ŸÉ ÿßŸÑÿ∑ŸÑÿßÿ® Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿßŸÑÿØÿπŸÖ ŸàÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©\"\n            : \"Connect with fellow students and get support and assistance\"}\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Telegram Card */}\n        <Card className=\"hover-elevate active-elevate-2 transition-all\" data-testid=\"card-telegram\">\n          <CardHeader>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center\">\n                <MessageCircle className=\"h-6 w-6 text-blue-500\" />\n              </div>\n              <div>\n                <CardTitle>Telegram</CardTitle>\n                <CardDescription>\n                  {language === \"ar\" ? \"ŸÖÿ¨ŸÖŸàÿπÿ© ÿßŸÑÿ∑ŸÑÿßÿ®\" : \"Student Group\"}\n                </CardDescription>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              {language === \"ar\"\n                ? \"ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ŸÖÿ¨ŸÖŸàÿπÿ™ŸÜÿß ÿπŸÑŸâ Telegram ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿßŸÑŸÅŸàÿ±Ÿäÿ© ŸàÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿØÿ±ÿ®ŸäŸÜ ŸàÿßŸÑÿ∑ŸÑÿßÿ® ÿßŸÑÿ¢ÿÆÿ±ŸäŸÜ\"\n                : \"Join our Telegram group for instant updates and to connect with instructors and other students\"}\n            </p>\n            {telegramLink ? (\n              <Button\n                asChild\n                className=\"w-full\"\n                data-testid=\"button-join-telegram\"\n              >\n                <a href={telegramLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <MessageCircle className=\"h-4 w-4 mr-2\" />\n                  {language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ÿßŸÑÿ¢ŸÜ\" : \"Join Now\"}\n                  <ExternalLink className=\"h-3 w-3 ml-2\" />\n                </a>\n              </Button>\n            ) : (\n              <div className=\"text-center text-sm text-muted-foreground p-4 bg-muted rounded-lg\">\n                {language === \"ar\" ? \"ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ÿ≠ÿßŸÑŸäÿßŸã\" : \"Link not available yet\"}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* WhatsApp Card */}\n        <Card className=\"hover-elevate active-elevate-2 transition-all\" data-testid=\"card-whatsapp\">\n          <CardHeader>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center\">\n                <Phone className=\"h-6 w-6 text-green-500\" />\n              </div>\n              <div>\n                <CardTitle>WhatsApp</CardTitle>\n                <CardDescription>\n                  {language === \"ar\" ? \"ŸÖÿ¨ŸÖŸàÿπÿ© ÿßŸÑÿ∑ŸÑÿßÿ®\" : \"Student Group\"}\n                </CardDescription>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              {language === \"ar\"\n                ? \"ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ŸÖÿ¨ŸÖŸàÿπÿ™ŸÜÿß ÿπŸÑŸâ WhatsApp ŸÑŸÑŸÖŸÜÿßŸÇÿ¥ÿßÿ™ ŸàÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸàÿßŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑÿ≥ÿ±Ÿäÿπ ŸÖÿπ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ\"\n                : \"Join our WhatsApp group for discussions, questions, and quick communication with the community\"}\n            </p>\n            {whatsappLink ? (\n              <Button\n                asChild\n                className=\"w-full bg-green-600 hover:bg-green-700\"\n                data-testid=\"button-join-whatsapp\"\n              >\n                <a href={whatsappLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <Phone className=\"h-4 w-4 mr-2\" />\n                  {language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ÿßŸÑÿ¢ŸÜ\" : \"Join Now\"}\n                  <ExternalLink className=\"h-3 w-3 ml-2\" />\n                </a>\n              </Button>\n            ) : (\n              <div className=\"text-center text-sm text-muted-foreground p-4 bg-muted rounded-lg\">\n                {language === \"ar\" ? \"ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ÿ≠ÿßŸÑŸäÿßŸã\" : \"Link not available yet\"}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"bg-muted/30\">\n        <CardContent className=\"p-6\">\n          <h3 className=\"font-semibold text-foreground mb-2\">\n            {language === \"ar\" ? \"ÿ•ÿ±ÿ¥ÿßÿØÿßÿ™ ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿ©\" : \"Group Guidelines\"}\n          </h3>\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\n            <li className=\"flex gap-2\">\n              <span>‚Ä¢</span>\n              <span>\n                {language === \"ar\"\n                  ? \"ŸÉŸÜ ŸÖÿ≠ÿ™ÿ±ŸÖÿßŸã ŸàŸÖŸáÿ∞ÿ®ÿßŸã ŸÖÿπ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°\"\n                  : \"Be respectful and polite to all members\"}\n              </span>\n            </li>\n            <li className=\"flex gap-2\">\n              <span>‚Ä¢</span>\n              <span>\n                {language === \"ar\"\n                  ? \"ŸÑÿß ÿ™ÿ¥ÿßÿ±ŸÉ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ¥ÿÆÿµŸäÿ© ÿ£Ÿà ÿ≠ÿ≥ÿßÿ≥ÿ©\"\n                  : \"Don't share personal or sensitive information\"}\n              </span>\n            </li>\n            <li className=\"flex gap-2\">\n              <span>‚Ä¢</span>\n              <span>\n                {language === \"ar\"\n                  ? \"ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿ© ŸÑŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸàÿßŸÑŸÖŸÜÿßŸÇÿ¥ÿßÿ™ ÿßŸÑŸÖÿ™ÿπŸÑŸÇÿ© ÿ®ÿßŸÑÿØŸàÿ±ÿßÿ™\"\n                  : \"Use the group for course-related questions and discussions\"}\n              </span>\n            </li>\n            <li className=\"flex gap-2\">\n              <span>‚Ä¢</span>\n              <span>\n                {language === \"ar\"\n                  ? \"ŸÑÿß ÿ™ÿ±ÿ≥ŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿ∫Ÿäÿ± ŸÖÿ±ÿ∫Ÿàÿ® ŸÅŸäŸáÿß ÿ£Ÿà ÿ•ÿπŸÑÿßŸÜÿßÿ™\"\n                  : \"No spam or promotional content\"}\n              </span>\n            </li>\n          </ul>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
            "size_bytes": 7032
        },
        "client/src/components/dashboard/UserSidebar.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Link, useLocation } from \"wouter\";\nimport {\n  BookOpen,\n  CreditCard,\n  Users,\n  Settings,\n  Star,\n  GraduationCap,\n} from \"lucide-react\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n} from \"@/components/ui/sidebar\";\n\nexport function UserSidebar() {\n  const { language } = useLanguage();\n  const [location] = useLocation();\n\n  const learningItems = [\n    {\n      title: language === \"ar\" ? \"ÿØŸàÿ±ÿßÿ™Ÿä\" : \"My Courses\",\n      icon: BookOpen,\n      path: \"/dashboard\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿßÿ¥ÿ™ÿ±ÿßŸÉŸä\" : \"My Subscription\",\n      icon: CreditCard,\n      path: \"/dashboard/subscription\",\n    },\n  ];\n\n  const communityItems = [\n    {\n      title: language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ŸÑŸÑŸÖÿ¨ŸÖŸàÿπÿ©\" : \"Join Group\",\n      icon: Users,\n      path: \"/dashboard/join-group\",\n    },\n    {\n      title: language === \"ar\" ? \"ÿßŸÑÿ™ŸÇŸäŸäŸÖÿßÿ™\" : \"Ratings\",\n      icon: Star,\n      path: \"/dashboard/ratings\",\n    },\n  ];\n\n  const accountItems = [\n    {\n      title: language === \"ar\" ? \"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™\" : \"Settings\",\n      icon: Settings,\n      path: \"/dashboard/settings\",\n    },\n  ];\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"border-b border-border p-4\">\n        <Link href=\"/dashboard\">\n          <a className=\"flex items-center gap-2 px-2 py-1 hover-elevate active-elevate-2 rounded-md transition-colors\">\n            <GraduationCap className=\"h-6 w-6 text-primary\" />\n            <div className=\"flex flex-col\">\n              <span className=\"font-heading font-bold text-base\">Leed Academy</span>\n              <span className=\"text-xs text-muted-foreground\">\n                {language === \"ar\" ? \"ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ\" : \"Dashboard\"}\n              </span>\n            </div>\n          </a>\n        </Link>\n      </SidebarHeader>\n      <SidebarContent className=\"gap-4\">\n        {/* Learning Section */}\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs font-medium text-muted-foreground px-4\">\n            {language === \"ar\" ? \"ÿßŸÑÿ™ÿπŸÑŸÖ\" : \"Learning\"}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {learningItems.map((item) => (\n                <SidebarMenuItem key={item.path}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.path}\n                    data-testid={`user-link-${item.path.split(\"/\").pop()}`}\n                  >\n                    <Link href={item.path}>\n                      <a className=\"flex items-center gap-3\">\n                        <item.icon className=\"h-4 w-4\" />\n                        <span className=\"text-sm font-medium\">{item.title}</span>\n                      </a>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        {/* Community Section */}\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs font-medium text-muted-foreground px-4\">\n            {language === \"ar\" ? \"ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ\" : \"Community\"}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {communityItems.map((item) => (\n                <SidebarMenuItem key={item.path}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.path}\n                    data-testid={`user-link-${item.path.split(\"/\").pop()}`}\n                  >\n                    <Link href={item.path}>\n                      <a className=\"flex items-center gap-3\">\n                        <item.icon className=\"h-4 w-4\" />\n                        <span className=\"text-sm font-medium\">{item.title}</span>\n                      </a>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n\n        {/* Account Section */}\n        <SidebarGroup>\n          <SidebarGroupLabel className=\"text-xs font-medium text-muted-foreground px-4\">\n            {language === \"ar\" ? \"ÿßŸÑÿ≠ÿ≥ÿßÿ®\" : \"Account\"}\n          </SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {accountItems.map((item) => (\n                <SidebarMenuItem key={item.path}>\n                  <SidebarMenuButton\n                    asChild\n                    isActive={location === item.path}\n                    data-testid={`user-link-${item.path.split(\"/\").pop()}`}\n                  >\n                    <Link href={item.path}>\n                      <a className=\"flex items-center gap-3\">\n                        <item.icon className=\"h-4 w-4\" />\n                        <span className=\"text-sm font-medium\">{item.title}</span>\n                      </a>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n    </Sidebar>\n  );\n}\n",
            "size_bytes": 5291
        },
        "client/src/components/dashboard/tabs/SettingsTab.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useState } from \"react\";\nimport { Save, Lock, User as UserIcon } from \"lucide-react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\n\nconst profileSchema = z.object({\n  firstName: z.string().min(1, \"First name is required\"),\n  lastName: z.string().min(1, \"Last name is required\"),\n  phone: z.string().optional(),\n});\n\nconst passwordSchema = z.object({\n  currentPassword: z.string().min(6, \"Password must be at least 6 characters\"),\n  newPassword: z.string().min(6, \"Password must be at least 6 characters\"),\n  confirmPassword: z.string().min(6, \"Password must be at least 6 characters\"),\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\ntype ProfileForm = z.infer<typeof profileSchema>;\ntype PasswordForm = z.infer<typeof passwordSchema>;\n\nexport default function UserSettings() {\n  const { language } = useLanguage();\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  const profileForm = useForm<ProfileForm>({\n    resolver: zodResolver(profileSchema),\n    defaultValues: {\n      firstName: user?.firstName || \"\",\n      lastName: user?.lastName || \"\",\n      phone: user?.phone || \"\",\n    },\n  });\n\n  const passwordForm = useForm<PasswordForm>({\n    resolver: zodResolver(passwordSchema),\n    defaultValues: {\n      currentPassword: \"\",\n      newPassword: \"\",\n      confirmPassword: \"\",\n    },\n  });\n\n  const updateProfileMutation = useMutation({\n    mutationFn: async (data: ProfileForm) => {\n      return await apiRequest(\"PATCH\", \"/api/user/profile\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\" : \"Updated\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Profile updated successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä\" : \"Failed to update profile\"),\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updatePasswordMutation = useMutation({\n    mutationFn: async (data: PasswordForm) => {\n      return await apiRequest(\"PATCH\", \"/api/user/password\", {\n        currentPassword: data.currentPassword,\n        newPassword: data.newPassword,\n      });\n    },\n    onSuccess: () => {\n      passwordForm.reset();\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\" : \"Updated\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Password changed successfully\",\n      });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ŸÅŸä ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Failed to change password\"),\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onProfileSubmit = (data: ProfileForm) => {\n    updateProfileMutation.mutate(data);\n  };\n\n  const onPasswordSubmit = (data: PasswordForm) => {\n    updatePasswordMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-settings-title\">\n          {language === \"ar\" ? \"ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™\" : \"Settings\"}\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          {language === \"ar\"\n            ? \"ÿ•ÿØÿßÿ±ÿ© ŸÖÿπŸÑŸàŸÖÿßÿ™ŸÉ ÿßŸÑÿ¥ÿÆÿµŸäÿ© Ÿàÿ•ÿπÿØÿßÿØÿßÿ™ ÿßŸÑÿ≠ÿ≥ÿßÿ®\"\n            : \"Manage your personal information and account settings\"}\n        </p>\n      </div>\n\n      {/* Profile Information */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <UserIcon className=\"h-5 w-5\" />\n            <CardTitle>{language === \"ar\" ? \"ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ¥ÿÆÿµŸäÿ©\" : \"Profile Information\"}</CardTitle>\n          </div>\n          <CardDescription>\n            {language === \"ar\"\n              ? \"ŸÇŸÖ ÿ®ÿ™ÿ≠ÿØŸäÿ´ ŸÖÿπŸÑŸàŸÖÿßÿ™ ŸÖŸÑŸÅŸÉ ÿßŸÑÿ¥ÿÆÿµŸä\"\n              : \"Update your profile information\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...profileForm}>\n            <form onSubmit={profileForm.handleSubmit(onProfileSubmit)} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={profileForm.control}\n                  name=\"firstName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{language === \"ar\" ? \"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ŸàŸÑ\" : \"First Name\"}</FormLabel>\n                      <FormControl>\n                        <Input\n                          placeholder={language === \"ar\" ? \"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ŸàŸÑ\" : \"First Name\"}\n                          data-testid=\"input-first-name\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={profileForm.control}\n                  name=\"lastName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>{language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿßŸÑÿπÿßÿ¶ŸÑÿ©\" : \"Last Name\"}</FormLabel>\n                      <FormControl>\n                        <Input\n                          placeholder={language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿßŸÑÿπÿßÿ¶ŸÑÿ©\" : \"Last Name\"}\n                          data-testid=\"input-last-name\"\n                          {...field}\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={profileForm.control}\n                name=\"phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ\" : \"Phone Number\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"tel\"\n                        placeholder={language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ\" : \"Phone Number\"}\n                        data-testid=\"input-phone\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"bg-muted p-3 rounded-lg\">\n                <Label className=\"text-sm font-medium\">\n                  {language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}\n                </Label>\n                <p className=\"text-sm text-muted-foreground mt-1\">{user?.email}</p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  {language === \"ar\"\n                    ? \"ŸÑÿß ŸäŸÖŸÉŸÜ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\"\n                    : \"Email cannot be changed\"}\n                </p>\n              </div>\n\n              <Button\n                type=\"submit\"\n                disabled={updateProfileMutation.isPending}\n                data-testid=\"button-save-profile\"\n              >\n                <Save className=\"h-4 w-4 mr-2\" />\n                {updateProfileMutation.isPending\n                  ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏...\" : \"Saving...\")\n                  : (language === \"ar\" ? \"ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿ∫ŸäŸäÿ±ÿßÿ™\" : \"Save Changes\")}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      {/* Change Password */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center gap-2\">\n            <Lock className=\"h-5 w-5\" />\n            <CardTitle>{language === \"ar\" ? \"ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Change Password\"}</CardTitle>\n          </div>\n          <CardDescription>\n            {language === \"ar\"\n              ? \"ŸÇŸÖ ÿ®ÿ™ÿ≠ÿØŸäÿ´ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÉ\"\n              : \"Update your password\"}\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...passwordForm}>\n            <form onSubmit={passwordForm.handleSubmit(onPasswordSubmit)} className=\"space-y-4\">\n              <FormField\n                control={passwordForm.control}\n                name=\"currentPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ≠ÿßŸÑŸäÿ©\" : \"Current Password\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"password\"\n                        placeholder={language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ≠ÿßŸÑŸäÿ©\" : \"Current Password\"}\n                        data-testid=\"input-current-password\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={passwordForm.control}\n                name=\"newPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©\" : \"New Password\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"password\"\n                        placeholder={language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿßŸÑÿ¨ÿØŸäÿØÿ©\" : \"New Password\"}\n                        data-testid=\"input-new-password\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={passwordForm.control}\n                name=\"confirmPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>{language === \"ar\" ? \"ÿ™ÿ£ŸÉŸäÿØ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Confirm Password\"}</FormLabel>\n                    <FormControl>\n                      <Input\n                        type=\"password\"\n                        placeholder={language === \"ar\" ? \"ÿ™ÿ£ŸÉŸäÿØ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Confirm Password\"}\n                        data-testid=\"input-confirm-password\"\n                        {...field}\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <Button\n                type=\"submit\"\n                disabled={updatePasswordMutation.isPending}\n                data-testid=\"button-save-password\"\n              >\n                <Lock className=\"h-4 w-4 mr-2\" />\n                {updatePasswordMutation.isPending\n                  ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ≠ÿØŸäÿ´...\" : \"Updating...\")\n                  : (language === \"ar\" ? \"ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Change Password\")}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
            "size_bytes": 12065
        },
        "client/src/components/dashboard/tabs/JoinGroupTab.tsx": {
            "content": "import { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { MessageCircle, Phone, ExternalLink } from \"lucide-react\";\nimport type { Setting } from \"@shared/schema\";\n\nexport default function JoinGroup() {\n  const { language } = useLanguage();\n\n  const { data: settingsData, isLoading } = useQuery<Setting[]>({\n    queryKey: [\"/api/settings\"],\n  });\n\n  const telegramLink = settingsData?.find(s => s.key === \"telegram_group_link\")?.value;\n  const whatsappLink = settingsData?.find(s => s.key === \"whatsapp_group_link\")?.value;\n\n  if (isLoading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-join-group-title\">\n          {language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ŸÑŸÖÿ¨ŸÖŸàÿπÿßÿ™ŸÜÿß\" : \"Join Our Groups\"}\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          {language === \"ar\"\n            ? \"ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿ≤ŸÖŸÑÿßÿ¶ŸÉ ÿßŸÑÿ∑ŸÑÿßÿ® Ÿàÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿßŸÑÿØÿπŸÖ ŸàÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©\"\n            : \"Connect with fellow students and get support and assistance\"}\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n        {/* Telegram Card */}\n        <Card className=\"hover-elevate active-elevate-2 transition-all\" data-testid=\"card-telegram\">\n          <CardHeader>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center\">\n                <MessageCircle className=\"h-6 w-6 text-blue-500\" />\n              </div>\n              <div>\n                <CardTitle>Telegram</CardTitle>\n                <CardDescription>\n                  {language === \"ar\" ? \"ŸÖÿ¨ŸÖŸàÿπÿ© ÿßŸÑÿ∑ŸÑÿßÿ®\" : \"Student Group\"}\n                </CardDescription>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              {language === \"ar\"\n                ? \"ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ŸÖÿ¨ŸÖŸàÿπÿ™ŸÜÿß ÿπŸÑŸâ Telegram ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ÿßŸÑŸÅŸàÿ±Ÿäÿ© ŸàÿßŸÑÿ™ŸàÿßÿµŸÑ ŸÖÿπ ÿßŸÑŸÖÿØÿ±ÿ®ŸäŸÜ ŸàÿßŸÑÿ∑ŸÑÿßÿ® ÿßŸÑÿ¢ÿÆÿ±ŸäŸÜ\"\n                : \"Join our Telegram group for instant updates and to connect with instructors and other students\"}\n            </p>\n            {telegramLink ? (\n              <Button\n                asChild\n                className=\"w-full\"\n                data-testid=\"button-join-telegram\"\n              >\n                <a href={telegramLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <MessageCircle className=\"h-4 w-4 mr-2\" />\n                  {language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ÿßŸÑÿ¢ŸÜ\" : \"Join Now\"}\n                  <ExternalLink className=\"h-3 w-3 ml-2\" />\n                </a>\n              </Button>\n            ) : (\n              <div className=\"text-center text-sm text-muted-foreground p-4 bg-muted rounded-lg\">\n                {language === \"ar\" ? \"ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ÿ≠ÿßŸÑŸäÿßŸã\" : \"Link not available yet\"}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* WhatsApp Card */}\n        <Card className=\"hover-elevate active-elevate-2 transition-all\" data-testid=\"card-whatsapp\">\n          <CardHeader>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-12 h-12 bg-green-500/10 rounded-lg flex items-center justify-center\">\n                <Phone className=\"h-6 w-6 text-green-500\" />\n              </div>\n              <div>\n                <CardTitle>WhatsApp</CardTitle>\n                <CardDescription>\n                  {language === \"ar\" ? \"ŸÖÿ¨ŸÖŸàÿπÿ© ÿßŸÑÿ∑ŸÑÿßÿ®\" : \"Student Group\"}\n                </CardDescription>\n              </div>\n            </div>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              {language === \"ar\"\n                ? \"ÿßŸÜÿ∂ŸÖ ÿ•ŸÑŸâ ŸÖÿ¨ŸÖŸàÿπÿ™ŸÜÿß ÿπŸÑŸâ WhatsApp ŸÑŸÑŸÖŸÜÿßŸÇÿ¥ÿßÿ™ ŸàÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸàÿßŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑÿ≥ÿ±Ÿäÿπ ŸÖÿπ ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ\"\n                : \"Join our WhatsApp group for discussions, questions, and quick communication with the community\"}\n            </p>\n            {whatsappLink ? (\n              <Button\n                asChild\n                className=\"w-full bg-green-600 hover:bg-green-700\"\n                data-testid=\"button-join-whatsapp\"\n              >\n                <a href={whatsappLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <Phone className=\"h-4 w-4 mr-2\" />\n                  {language === \"ar\" ? \"ÿßŸÜÿ∂ŸÖ ÿßŸÑÿ¢ŸÜ\" : \"Join Now\"}\n                  <ExternalLink className=\"h-3 w-3 ml-2\" />\n                </a>\n              </Button>\n            ) : (\n              <div className=\"text-center text-sm text-muted-foreground p-4 bg-muted rounded-lg\">\n                {language === \"ar\" ? \"ÿßŸÑÿ±ÿßÿ®ÿ∑ ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ± ÿ≠ÿßŸÑŸäÿßŸã\" : \"Link not available yet\"}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card className=\"bg-muted/30\">\n        <CardContent className=\"p-6\">\n          <h3 className=\"font-semibold text-foreground mb-2\">\n            {language === \"ar\" ? \"ÿ•ÿ±ÿ¥ÿßÿØÿßÿ™ ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿ©\" : \"Group Guidelines\"}\n          </h3>\n          <ul className=\"space-y-2 text-sm text-muted-foreground\">\n            <li className=\"flex gap-2\">\n              <span>‚Ä¢</span>\n              <span>\n                {language === \"ar\"\n                  ? \"ŸÉŸÜ ŸÖÿ≠ÿ™ÿ±ŸÖÿßŸã ŸàŸÖŸáÿ∞ÿ®ÿßŸã ŸÖÿπ ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿπÿ∂ÿßÿ°\"\n                  : \"Be respectful and polite to all members\"}\n              </span>\n            </li>\n            <li className=\"flex gap-2\">\n              <span>‚Ä¢</span>\n              <span>\n                {language === \"ar\"\n                  ? \"ŸÑÿß ÿ™ÿ¥ÿßÿ±ŸÉ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ¥ÿÆÿµŸäÿ© ÿ£Ÿà ÿ≠ÿ≥ÿßÿ≥ÿ©\"\n                  : \"Don't share personal or sensitive information\"}\n              </span>\n            </li>\n            <li className=\"flex gap-2\">\n              <span>‚Ä¢</span>\n              <span>\n                {language === \"ar\"\n                  ? \"ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑŸÖÿ¨ŸÖŸàÿπÿ© ŸÑŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ŸàÿßŸÑŸÖŸÜÿßŸÇÿ¥ÿßÿ™ ÿßŸÑŸÖÿ™ÿπŸÑŸÇÿ© ÿ®ÿßŸÑÿØŸàÿ±ÿßÿ™\"\n                  : \"Use the group for course-related questions and discussions\"}\n              </span>\n            </li>\n            <li className=\"flex gap-2\">\n              <span>‚Ä¢</span>\n              <span>\n                {language === \"ar\"\n                  ? \"ŸÑÿß ÿ™ÿ±ÿ≥ŸÑ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿ∫Ÿäÿ± ŸÖÿ±ÿ∫Ÿàÿ® ŸÅŸäŸáÿß ÿ£Ÿà ÿ•ÿπŸÑÿßŸÜÿßÿ™\"\n                  : \"No spam or promotional content\"}\n              </span>\n            </li>\n          </ul>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n",
            "size_bytes": 7044
        },
        "client/src/pages/CoursePreview.tsx": {
            "content": "import { useEffect, useRef } from \"react\";\nimport { useParams, useLocation } from \"wouter\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Separator } from \"@/components/ui/separator\";\nimport {\n  Star,\n  Clock,\n  Globe,\n  Award,\n  Eye,\n  Calendar,\n  PlayCircle,\n  CheckCircle2,\n  Lock,\n  Crown,\n} from \"lucide-react\";\nimport type { Course, Lesson, SubscriptionPlan } from \"@shared/schema\";\nimport { format } from \"date-fns\";\n\nexport default function CoursePreview() {\n  const { id } = useParams();\n  const [, navigate] = useLocation();\n  const { language } = useLanguage();\n  const hasIncrementedRef = useRef<Set<string>>(new Set());\n\n  const { data: course, isLoading: courseLoading } = useQuery<Course>({\n    queryKey: [`/api/courses/${id}`],\n    enabled: !!id,\n  });\n\n  const { data: lessons = [] } = useQuery<Lesson[]>({\n    queryKey: [`/api/courses/${id}/lessons`],\n    enabled: !!id,\n  });\n\n  const { data: plan } = useQuery<SubscriptionPlan>({\n    queryKey: [`/api/subscription-plans/${course?.requiredPlanId}`],\n    enabled: !!course?.requiredPlanId,\n  });\n\n  useEffect(() => {\n    if (id && course && !hasIncrementedRef.current.has(id)) {\n      hasIncrementedRef.current.add(id);\n      \n      apiRequest(\"POST\", `/api/courses/${id}/increment-views`, {})\n        .then(() => {\n          queryClient.invalidateQueries({ queryKey: [`/api/courses/${id}`] });\n        })\n        .catch((error) => {\n          console.error(\"Failed to increment views:\", error);\n          hasIncrementedRef.current.delete(id);\n        });\n    }\n  }, [id, course]);\n\n  if (courseLoading) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <Header />\n        <main className=\"pt-20\">\n          <div className=\"container mx-auto px-6 py-12\">\n            <div className=\"animate-pulse space-y-6\">\n              <div className=\"h-96 bg-muted rounded-lg\" />\n              <div className=\"h-40 bg-muted rounded-lg\" />\n            </div>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (!course) {\n    return (\n      <div className=\"min-h-screen bg-background\">\n        <Header />\n        <main className=\"pt-20\">\n          <div className=\"container mx-auto px-6 py-24 text-center\">\n            <h1 className=\"text-2xl font-bold text-foreground mb-4\">\n              {language === \"ar\" ? \"ÿßŸÑÿØŸàÿ±ÿ© ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØÿ©\" : \"Course Not Found\"}\n            </h1>\n            <Button onClick={() => navigate(\"/courses\")}>\n              {language === \"ar\" ? \"ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿØŸàÿ±ÿßÿ™\" : \"Back to Courses\"}\n            </Button>\n          </div>\n        </main>\n        <Footer />\n      </div>\n    );\n  }\n\n  const title = language === \"ar\" ? course.titleAr : course.titleEn;\n  const description = language === \"ar\" ? course.descriptionAr : course.descriptionEn;\n  const instructor = language === \"ar\" ? course.instructorAr : course.instructorEn;\n\n  const totalDuration = lessons.reduce((acc, lesson) => acc + (lesson.duration || 0), 0);\n  const hours = Math.floor(totalDuration / 60);\n  const minutes = totalDuration % 60;\n\n  const handleStartCourse = () => {\n    if (!id) return;\n    navigate(`/course/${id}`);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Header />\n      <main className=\"pt-20\">\n        {/* Hero Section */}\n        <div className=\"bg-gradient-to-r from-primary/10 via-primary/5 to-background\">\n          <div className=\"container mx-auto px-6 py-12\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n              {/* Left Column - Course Info */}\n              <div className=\"lg:col-span-2 space-y-6\">\n                {/* Breadcrumb */}\n                <div className=\"flex items-center gap-2 text-sm text-muted-foreground\" data-testid=\"breadcrumb-navigation\">\n                  <span\n                    className=\"hover:text-foreground cursor-pointer\"\n                    onClick={() => navigate(\"/courses\")}\n                    data-testid=\"link-courses\"\n                  >\n                    {language === \"ar\" ? \"ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"Courses\"}\n                  </span>\n                  <span>/</span>\n                  <span className=\"text-foreground\" data-testid=\"text-course-title\">{title}</span>\n                </div>\n\n                {/* Title */}\n                <h1 className=\"text-4xl md:text-5xl font-heading font-bold text-foreground leading-tight\" data-testid=\"heading-course-title\">\n                  {title}\n                </h1>\n\n                {/* Description */}\n                <p className=\"text-lg text-muted-foreground leading-relaxed\" data-testid=\"text-course-description\">\n                  {description}\n                </p>\n\n                {/* Meta Info */}\n                <div className=\"flex flex-wrap items-center gap-4\" data-testid=\"course-meta-info\">\n                  {/* Rating */}\n                  <div className=\"flex items-center gap-2\" data-testid=\"course-rating\">\n                    <div className=\"flex items-center gap-1\">\n                      {[1, 2, 3, 4, 5].map((star) => (\n                        <Star\n                          key={star}\n                          className=\"h-5 w-5 fill-yellow-400 text-yellow-400\"\n                          data-testid={`star-${star}`}\n                        />\n                      ))}\n                    </div>\n                    <span className=\"text-sm font-medium text-foreground\" data-testid=\"text-rating-value\">5.0</span>\n                  </div>\n\n                  <Separator orientation=\"vertical\" className=\"h-6\" />\n\n                  {/* Views Count */}\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground\" data-testid=\"course-views\">\n                    <Eye className=\"h-4 w-4\" />\n                    <span data-testid=\"text-views-count\">\n                      {course.viewsCount?.toLocaleString() || 0}{\" \"}\n                      {language === \"ar\" ? \"ŸÖÿ¥ÿßŸáÿØÿ©\" : \"views\"}\n                    </span>\n                  </div>\n\n                  <Separator orientation=\"vertical\" className=\"h-6\" />\n\n                  {/* Launch Date */}\n                  {course.createdAt && (\n                    <div className=\"flex items-center gap-2 text-sm text-muted-foreground\" data-testid=\"course-launch-date\">\n                      <Calendar className=\"h-4 w-4\" />\n                      <span data-testid=\"text-launch-date\">\n                        {language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ•ÿ∑ŸÑÿßŸÇ: \" : \"Launched: \"}\n                        {format(new Date(course.createdAt), \"MMM yyyy\")}\n                      </span>\n                    </div>\n                  )}\n                </div>\n\n                {/* Badges */}\n                <div className=\"flex flex-wrap items-center gap-3\">\n                  <Badge variant=\"secondary\" className=\"gap-2\">\n                    <Globe className=\"h-3 w-3\" />\n                    {course.language === \"ar\"\n                      ? language === \"ar\"\n                        ? \"ÿπÿ±ÿ®Ÿä\"\n                        : \"Arabic\"\n                      : language === \"ar\"\n                        ? \"ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä\"\n                        : \"English\"}\n                  </Badge>\n\n                  {course.hasCertificate && (\n                    <Badge variant=\"secondary\" className=\"gap-2\">\n                      <Award className=\"h-3 w-3\" />\n                      {language === \"ar\"\n                        ? \"ÿ¥ŸáÿßÿØÿ© ÿ•ÿ™ŸÖÿßŸÖ\"\n                        : \"Certificate of Completion\"}\n                    </Badge>\n                  )}\n\n                  {course.requiredPlanId && plan ? (\n                    <Badge variant=\"default\" className=\"gap-2\">\n                      <Crown className=\"h-3 w-3\" />\n                      {language === \"ar\" ? plan.nameAr : plan.nameEn}\n                    </Badge>\n                  ) : (\n                    <Badge variant=\"default\">{language === \"ar\" ? \"ŸÖÿ¨ÿßŸÜŸä\" : \"Free\"}</Badge>\n                  )}\n\n                  <Badge variant=\"outline\">\n                    {language === \"ar\" ? `ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ ${course.level}` : `Level ${course.level}`}\n                  </Badge>\n                </div>\n\n                {/* Instructor */}\n                {instructor && (\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center\">\n                      <span className=\"text-lg font-bold text-primary\">\n                        {instructor.charAt(0).toUpperCase()}\n                      </span>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"ar\" ? \"ÿßŸÑŸÖÿØÿ±ÿ®\" : \"Instructor\"}\n                      </p>\n                      <p className=\"font-medium text-foreground\">{instructor}</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Right Column - Course Card */}\n              <div className=\"lg:col-span-1\">\n                <Card className=\"sticky top-24\">\n                  <CardContent className=\"p-0\">\n                    {/* Thumbnail */}\n                    <div className=\"aspect-video w-full bg-muted relative overflow-hidden rounded-t-lg\">\n                      {course.thumbnailUrl ? (\n                        <img\n                          src={course.thumbnailUrl}\n                          alt={title}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      ) : (\n                        <div className=\"flex items-center justify-center h-full\">\n                          <PlayCircle className=\"h-16 w-16 text-muted-foreground\" />\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"p-6 space-y-4\">\n                      {/* Plan Name or Free Badge */}\n                      {course.requiredPlanId && plan ? (\n                        <div className=\"flex items-center gap-2\">\n                          <Crown className=\"h-6 w-6 text-primary\" />\n                          <div>\n                            <p className=\"text-sm text-muted-foreground\">\n                              {language === \"ar\" ? \"Ÿäÿ™ÿ∑ŸÑÿ® ÿÆÿ∑ÿ©\" : \"Requires Plan\"}\n                            </p>\n                            <p className=\"text-xl font-bold text-foreground\">\n                              {language === \"ar\" ? plan.nameAr : plan.nameEn}\n                            </p>\n                          </div>\n                        </div>\n                      ) : (\n                        <Badge variant=\"default\" className=\"text-lg px-4 py-2 w-full justify-center\">\n                          {language === \"ar\" ? \"ŸÖÿ¨ÿßŸÜŸä\" : \"Free\"}\n                        </Badge>\n                      )}\n\n                      {/* Start Course Button */}\n                      <Button\n                        onClick={handleStartCourse}\n                        className=\"w-full h-12 text-lg\"\n                        data-testid=\"button-start-course\"\n                      >\n                        <PlayCircle className=\"h-5 w-5 mr-2\" />\n                        {language === \"ar\" ? \"ÿßÿ®ÿØÿ£ ÿßŸÑÿØŸàÿ±ÿ©\" : \"Start Course\"}\n                      </Button>\n\n                      <Separator />\n\n                      {/* Course Stats */}\n                      <div className=\"space-y-3 text-sm\">\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-muted-foreground\">\n                            {language === \"ar\" ? \"ÿßŸÑŸÖÿØÿ© ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸäÿ©\" : \"Total Duration\"}\n                          </span>\n                          <span className=\"font-medium flex items-center gap-1\">\n                            <Clock className=\"h-4 w-4\" />\n                            {hours}h {minutes}m\n                          </span>\n                        </div>\n\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-muted-foreground\">\n                            {language === \"ar\" ? \"ÿπÿØÿØ ÿßŸÑÿØÿ±Ÿàÿ≥\" : \"Lessons\"}\n                          </span>\n                          <span className=\"font-medium\">{lessons.length}</span>\n                        </div>\n\n                        {course.hasCertificate && (\n                          <div className=\"flex items-center justify-between\">\n                            <span className=\"text-muted-foreground\">\n                              {language === \"ar\" ? \"ÿßŸÑÿ¥ŸáÿßÿØÿ©\" : \"Certificate\"}\n                            </span>\n                            <span className=\"font-medium text-green-600 flex items-center gap-1\">\n                              <Award className=\"h-4 w-4\" />\n                              {language === \"ar\" ? \"ŸÖÿ™ÿßÿ≠\" : \"Available\"}\n                            </span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Course Content Section */}\n        <div className=\"container mx-auto px-6 py-12\">\n          <div className=\"max-w-4xl\">\n            <h2 className=\"text-3xl font-heading font-bold text-foreground mb-6\">\n              {language === \"ar\" ? \"ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿØŸàÿ±ÿ©\" : \"Course Content\"}\n            </h2>\n\n            <Card>\n              <CardContent className=\"p-6\">\n                <div className=\"space-y-1\">\n                  {lessons.length === 0 ? (\n                    <p className=\"text-center text-muted-foreground py-8\">\n                      {language === \"ar\"\n                        ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿØÿ±Ÿàÿ≥ ŸÖÿ™ÿßÿ≠ÿ© ÿ®ÿπÿØ\"\n                        : \"No lessons available yet\"}\n                    </p>\n                  ) : (\n                    lessons.map((lesson, index) => (\n                      <div\n                        key={lesson.id}\n                        className=\"flex items-center justify-between p-4 rounded-lg hover-elevate cursor-pointer\"\n                        data-testid={`lesson-item-${lesson.id}`}\n                      >\n                        <div className=\"flex items-center gap-4 flex-1\">\n                          <div className=\"flex items-center justify-center h-10 w-10 rounded-full bg-primary/10 text-primary font-medium\">\n                            {index + 1}\n                          </div>\n                          <div className=\"flex-1\">\n                            <h3 className=\"font-medium text-foreground\">\n                              {language === \"ar\" ? lesson.titleAr : lesson.titleEn}\n                            </h3>\n                            {lesson.descriptionEn && (\n                              <p className=\"text-sm text-muted-foreground line-clamp-1\">\n                                {language === \"ar\"\n                                  ? lesson.descriptionAr\n                                  : lesson.descriptionEn}\n                              </p>\n                            )}\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-4\">\n                          {lesson.duration && (\n                            <span className=\"text-sm text-muted-foreground flex items-center gap-1\">\n                              <Clock className=\"h-4 w-4\" />\n                              {lesson.duration}m\n                            </span>\n                          )}\n                          {lesson.isFree ? (\n                            <Badge variant=\"secondary\" className=\"gap-1\">\n                              <PlayCircle className=\"h-3 w-3\" />\n                              {language === \"ar\" ? \"ŸÖÿ¨ÿßŸÜŸä\" : \"Free\"}\n                            </Badge>\n                          ) : (\n                            <Lock className=\"h-4 w-4 text-muted-foreground\" />\n                          )}\n                        </div>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Certificate Info */}\n            {course.hasCertificate && (\n              <Card className=\"mt-6 bg-gradient-to-r from-primary/5 to-background border-primary/20\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start gap-4\">\n                    <div className=\"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                      <Award className=\"h-6 w-6 text-primary\" />\n                    </div>\n                    <div>\n                      <h3 className=\"font-heading font-bold text-foreground text-lg mb-2\">\n                        {language === \"ar\"\n                          ? \"ÿßÿ≠ÿµŸÑ ÿπŸÑŸâ ÿ¥ŸáÿßÿØÿ© ÿ•ÿ™ŸÖÿßŸÖ\"\n                          : \"Earn a Certificate of Completion\"}\n                      </h3>\n                      <p className=\"text-muted-foreground\">\n                        {language === \"ar\"\n                          ? \"ÿ£ŸÉŸÖŸÑ ÿ¨ŸÖŸäÿπ ÿØÿ±Ÿàÿ≥ ÿßŸÑÿØŸàÿ±ÿ© ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ¥ŸáÿßÿØÿ© ÿ•ÿ™ŸÖÿßŸÖ ÿ±ÿ≥ŸÖŸäÿ© ŸäŸÖŸÉŸÜŸÉ ŸÖÿ¥ÿßÿ±ŸÉÿ™Ÿáÿß ŸÖÿπ ÿ£ÿµÿ≠ÿßÿ® ÿßŸÑÿπŸÖŸÑ ŸàÿßŸÑÿ≤ŸÖŸÑÿßÿ°.\"\n                          : \"Complete all course lessons to earn an official certificate of completion that you can share with employers and colleagues.\"}\n                      </p>\n                      <div className=\"flex items-center gap-2 mt-4 text-sm text-primary\">\n                        <CheckCircle2 className=\"h-4 w-4\" />\n                        <span className=\"font-medium\">\n                          {language === \"ar\"\n                            ? \"Ÿäÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ¥ŸáÿßÿØÿ© ÿ™ŸÑŸÇÿßÿ¶ŸäŸãÿß ÿπŸÜÿØ ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°\"\n                            : \"Automatically generated upon completion\"}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n        </div>\n      </main>\n      <Footer />\n    </div>\n  );\n}\n",
            "size_bytes": 18589
        },
        "client/src/pages/admin/AdminAnalytics.tsx": {
            "content": "import { useQuery } from \"@tanstack/react-query\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  LineChart,\n  Line,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer,\n} from \"recharts\";\nimport { TrendingUp, Users, DollarSign, BookOpen } from \"lucide-react\";\n\ninterface AnalyticsData {\n  revenueTrends: {\n    daily: Array<{ date: string; amount: number }>;\n    weekly: Array<{ week: string; amount: number }>;\n    monthly: Array<{ month: string; amount: number }>;\n  };\n  userRegistrationTrends: {\n    daily: Array<{ date: string; count: number }>;\n    monthly: Array<{ month: string; count: number }>;\n  };\n  courseEnrollments: {\n    byCourse: Array<{ courseTitle: string; enrollments: number }>;\n    byLevel: Array<{ level: number; enrollments: number }>;\n  };\n  topCourses: Array<{\n    courseId: string;\n    title: string;\n    enrollments: number;\n    completionRate: number;\n  }>;\n  paymentStatusBreakdown: {\n    pending: number;\n    approved: number;\n    rejected: number;\n  };\n  planUsage?: Array<{ planName: string; count: number }>;\n}\n\nconst COLORS = [\"#10b981\", \"#3b82f6\", \"#ef4444\", \"#f59e0b\", \"#8b5cf6\"];\n\nexport default function AdminAnalytics() {\n  const { language } = useLanguage();\n\n  const { data: analytics, isLoading } = useQuery<AnalyticsData>({\n    queryKey: [\"/api/admin/analytics\"],\n  });\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-8 bg-muted rounded w-1/4\"></div>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            {[1, 2, 3, 4].map((i) => (\n              <div key={i} className=\"h-32 bg-muted rounded\"></div>\n            ))}\n          </div>\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\n            {[1, 2, 3, 4].map((i) => (\n              <div key={i} className=\"h-80 bg-muted rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!analytics) {\n    return (\n      <div className=\"p-8\">\n        <p className=\"text-muted-foreground\">\n          {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸäÿßŸÜÿßÿ™ ŸÖÿ™ÿßÿ≠ÿ©\" : \"No data available\"}\n        </p>\n      </div>\n    );\n  }\n\n  const totalRevenue = analytics.revenueTrends?.daily?.reduce(\n    (sum, item) => sum + item.amount,\n    0\n  ) || 0;\n  const totalUsers = analytics.userRegistrationTrends?.daily?.reduce(\n    (sum, item) => sum + item.count,\n    0\n  ) || 0;\n  const totalEnrollments = analytics.courseEnrollments?.byCourse?.reduce(\n    (sum, item) => sum + item.enrollments,\n    0\n  ) || 0;\n\n  const paymentStatusData = [\n    {\n      name: language === \"ar\" ? \"ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±\" : \"Pending\",\n      value: analytics.paymentStatusBreakdown?.pending ?? 0,\n      color: COLORS[3],\n    },\n    {\n      name: language === \"ar\" ? \"ŸÖŸàÿßŸÅŸÇ ÿπŸÑŸäŸáÿß\" : \"Approved\",\n      value: analytics.paymentStatusBreakdown?.approved ?? 0,\n      color: COLORS[0],\n    },\n    {\n      name: language === \"ar\" ? \"ŸÖÿ±ŸÅŸàÿ∂ÿ©\" : \"Rejected\",\n      value: analytics.paymentStatusBreakdown?.rejected ?? 0,\n      color: COLORS[2],\n    },\n  ].filter(item => item.value > 0);\n\n  return (\n    <div className=\"p-8 space-y-8\">\n      <h1\n        className=\"text-3xl font-heading font-bold text-foreground\"\n        data-testid=\"text-admin-analytics-title\"\n      >\n        {language === \"ar\" ? \"ÿ™ÿ≠ŸÑŸäŸÑÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ©\" : \"Advanced Analytics\"}\n      </h1>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              {language === \"ar\" ? \"ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ ÿßŸÑŸÉŸÑŸäÿ©\" : \"Total Revenue\"}\n            </CardTitle>\n            <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">${totalRevenue.toFixed(2)}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              {language === \"ar\" ? \"ÿ¢ÿÆÿ± 30 ŸäŸàŸÖ\" : \"Last 30 days\"}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              {language === \"ar\" ? \"ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸàŸÜ ÿßŸÑÿ¨ÿØÿØ\" : \"New Users\"}\n            </CardTitle>\n            <Users className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalUsers}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              {language === \"ar\" ? \"ÿ¢ÿÆÿ± 30 ŸäŸàŸÖ\" : \"Last 30 days\"}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              {language === \"ar\" ? \"ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™ ÿßŸÑŸÉŸÑŸäÿ©\" : \"Total Enrollments\"}\n            </CardTitle>\n            <BookOpen className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{totalEnrollments}</div>\n            <p className=\"text-xs text-muted-foreground\">\n              {language === \"ar\" ? \"ÿ¨ŸÖŸäÿπ ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"All courses\"}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">\n              {language === \"ar\" ? \"ÿßŸÑÿØŸàÿ±ÿßÿ™ ÿßŸÑŸÜÿ¥ÿ∑ÿ©\" : \"Active Courses\"}\n            </CardTitle>\n            <TrendingUp className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">\n              {analytics.courseEnrollments?.byCourse?.length || 0}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">\n              {language === \"ar\" ? \"ŸÖÿπ ÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™\" : \"With enrollments\"}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Charts */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Daily Revenue Chart */}\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\" ? \"ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ ÿßŸÑŸäŸàŸÖŸäÿ©\" : \"Daily Revenue\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart data={analytics.revenueTrends?.daily || []}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis\n                  dataKey=\"date\"\n                  tick={{ fontSize: 12 }}\n                  tickFormatter={(value) => {\n                    const date = new Date(value);\n                    return `${date.getMonth() + 1}/${date.getDate()}`;\n                  }}\n                />\n                <YAxis tick={{ fontSize: 12 }} />\n                <Tooltip\n                  formatter={(value: any) => [`$${value.toFixed(2)}`, \"Revenue\"]}\n                  labelFormatter={(label) => {\n                    const date = new Date(label);\n                    return date.toLocaleDateString();\n                  }}\n                />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"amount\"\n                  stroke={COLORS[0]}\n                  strokeWidth={2}\n                  dot={{ r: 3 }}\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        {/* Weekly Revenue Chart */}\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\" ? \"ÿßŸÑÿ•Ÿäÿ±ÿßÿØÿßÿ™ ÿßŸÑÿ£ÿ≥ÿ®ŸàÿπŸäÿ©\" : \"Weekly Revenue\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={analytics.revenueTrends?.weekly || []}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"week\" tick={{ fontSize: 12 }} />\n                <YAxis tick={{ fontSize: 12 }} />\n                <Tooltip formatter={(value: any) => [`$${value.toFixed(2)}`, \"Revenue\"]} />\n                <Bar dataKey=\"amount\" fill={COLORS[1]} />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        {/* User Registration Trends */}\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\"\n                ? \"ÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ\"\n                : \"User Registrations\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart data={analytics.userRegistrationTrends?.daily || []}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis\n                  dataKey=\"date\"\n                  tick={{ fontSize: 12 }}\n                  tickFormatter={(value) => {\n                    const date = new Date(value);\n                    return `${date.getMonth() + 1}/${date.getDate()}`;\n                  }}\n                />\n                <YAxis tick={{ fontSize: 12 }} />\n                <Tooltip\n                  formatter={(value: any) => [value, \"Users\"]}\n                  labelFormatter={(label) => {\n                    const date = new Date(label);\n                    return date.toLocaleDateString();\n                  }}\n                />\n                <Line\n                  type=\"monotone\"\n                  dataKey=\"count\"\n                  stroke={COLORS[4]}\n                  strokeWidth={2}\n                  dot={{ r: 3 }}\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        {/* Payment Status Breakdown */}\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\" ? \"ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿØŸÅŸàÿπÿßÿ™\" : \"Payment Status\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <PieChart>\n                <Pie\n                  data={paymentStatusData}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  labelLine={false}\n                  label={(entry) => `${entry.name}: ${entry.value}`}\n                  outerRadius={80}\n                  fill=\"#8884d8\"\n                  dataKey=\"value\"\n                >\n                  {paymentStatusData.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={entry.color} />\n                  ))}\n                </Pie>\n                <Tooltip />\n                <Legend />\n              </PieChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        {/* Course Enrollments by Level */}\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\"\n                ? \"ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™ ÿ≠ÿ≥ÿ® ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ\"\n                : \"Enrollments by Level\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={analytics.courseEnrollments?.byLevel || []}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis\n                  dataKey=\"level\"\n                  tick={{ fontSize: 12 }}\n                  tickFormatter={(value) =>\n                    language === \"ar\" ? `ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ ${value}` : `Level ${value}`\n                  }\n                />\n                <YAxis tick={{ fontSize: 12 }} />\n                <Tooltip\n                  formatter={(value: any) => [value, \"Enrollments\"]}\n                  labelFormatter={(label) =>\n                    language === \"ar\" ? `ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ ${label}` : `Level ${label}`\n                  }\n                />\n                <Bar dataKey=\"enrollments\" fill={COLORS[3]} />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        {/* Top Courses */}\n        <Card>\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\" ? \"ÿ£ŸÅÿ∂ŸÑ ÿßŸÑÿØŸàÿ±ÿßÿ™\" : \"Top Courses\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {(analytics.topCourses || []).slice(0, 5).map((course, index) => (\n                <div\n                  key={course.courseId}\n                  className=\"flex items-center justify-between\"\n                  data-testid={`top-course-${index}`}\n                >\n                  <div className=\"flex-1\">\n                    <p className=\"font-medium text-sm\">{course.title || \"N/A\"}</p>\n                    <p className=\"text-xs text-muted-foreground\">\n                      {course.enrollments || 0}{\" \"}\n                      {language === \"ar\" ? \"ÿ™ÿ≥ÿ¨ŸäŸÑÿßÿ™\" : \"enrollments\"} ‚Ä¢{\" \"}\n                      {(course.completionRate ?? 0).toFixed(1)}%{\" \"}\n                      {language === \"ar\" ? \"ÿ•ŸÉŸÖÿßŸÑ\" : \"completion\"}\n                    </p>\n                  </div>\n                  <div\n                    className=\"h-8 w-8 rounded-full flex items-center justify-center text-xs font-bold\"\n                    style={{\n                      backgroundColor: COLORS[index % COLORS.length],\n                      color: \"white\",\n                    }}\n                  >\n                    {index + 1}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Most Used Plans */}\n        {analytics.planUsage && analytics.planUsage.length > 0 && (\n          <Card>\n            <CardHeader>\n              <CardTitle>\n                {language === \"ar\" ? \"ÿ£ŸÉÿ´ÿ± ÿßŸÑÿÆÿ∑ÿ∑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖÿßŸã\" : \"Most Used Plans\"}\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <PieChart>\n                  <Pie\n                    data={analytics.planUsage}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    labelLine={false}\n                    label={(entry) => `${entry.planName}: ${entry.count}`}\n                    outerRadius={80}\n                    fill=\"#8884d8\"\n                    dataKey=\"count\"\n                  >\n                    {analytics.planUsage.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                    ))}\n                  </Pie>\n                  <Tooltip />\n                </PieChart>\n              </ResponsiveContainer>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}\n",
            "size_bytes": 15162
        },
        "client/src/components/landing/VideoSection.tsx": {
            "content": "import { useEffect, useRef, useState } from \"react\";\nimport gsap from \"gsap\";\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\nimport { Play } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTranslation } from \"react-i18next\";\n\ngsap.registerPlugin(ScrollTrigger);\n\nexport function VideoSection() {\n  const { t } = useTranslation();\n  const sectionRef = useRef<HTMLDivElement>(null);\n  const videoRef = useRef<HTMLDivElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n\n  useEffect(() => {\n    if (!sectionRef.current) return;\n\n    const ctx = gsap.context(() => {\n      gsap.fromTo(\n        \".video-section-content\",\n        { opacity: 0, scale: 0.95 },\n        {\n          opacity: 1,\n          scale: 1,\n          duration: 0.8,\n          scrollTrigger: {\n            trigger: sectionRef.current,\n            start: \"top 60%\",\n          },\n        }\n      );\n\n      gsap.fromTo(\n        \".video-play-button\",\n        { opacity: 0, scale: 0 },\n        {\n          opacity: 1,\n          scale: 1,\n          duration: 0.6,\n          delay: 0.3,\n          scrollTrigger: {\n            trigger: sectionRef.current,\n            start: \"top 60%\",\n          },\n        }\n      );\n    }, sectionRef);\n\n    return () => ctx.revert();\n  }, []);\n\n  return (\n    <section\n      ref={sectionRef}\n      className=\"py-20 bg-gradient-to-br from-primary/5 via-accent/5 to-primary/5\"\n      data-testid=\"section-video\"\n    >\n      <div className=\"container mx-auto px-6\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"text-center mb-12\">\n            <h2 className=\"text-4xl md:text-5xl font-bold mb-6\">\n              {t(\"landing.video.title\")}\n            </h2>\n            <p className=\"text-lg text-muted-foreground\">\n              {t(\"landing.video.subtitle\")}\n            </p>\n          </div>\n\n          <div className=\"relative rounded-xl overflow-hidden shadow-2xl\">\n            <div\n              ref={videoRef}\n              className=\"video-section-content w-full bg-muted/50 aspect-video flex items-center justify-center relative group cursor-pointer\"\n              onClick={() => setIsPlaying(true)}\n              data-testid=\"video-container\"\n            >\n              <img\n                src=\"https://images.unsplash.com/photo-1611532736579-6b16e2b50449?w=1200&h=675&fit=crop\"\n                alt=\"Trading platform\"\n                className=\"w-full h-full object-cover\"\n              />\n              <div className=\"absolute inset-0 bg-black/30 group-hover:bg-black/40 transition-all duration-300\" />\n\n              <Button\n                size=\"icon\"\n                className=\"video-play-button absolute h-20 w-20 rounded-full bg-primary hover:bg-primary/90\"\n                data-testid=\"button-play-video\"\n              >\n                <Play className=\"h-8 w-8 fill-white\" />\n              </Button>\n            </div>\n\n            {isPlaying && (\n              <div\n                className=\"fixed inset-0 bg-black/80 flex items-center justify-center z-50\"\n                onClick={() => setIsPlaying(false)}\n                data-testid=\"video-modal\"\n              >\n                <div\n                  className=\"bg-black rounded-lg w-11/12 max-w-4xl aspect-video\"\n                  onClick={(e) => e.stopPropagation()}\n                >\n                  <iframe\n                    width=\"100%\"\n                    height=\"100%\"\n                    src=\"https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=1\"\n                    title=\"Leed Academy Introduction\"\n                    frameBorder=\"0\"\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                    allowFullScreen\n                    className=\"rounded-lg\"\n                  ></iframe>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-12 grid md:grid-cols-3 gap-6\">\n            {[\"liveSessions\", \"mentors\", \"support\"].map((key, index) => (\n              <div key={index} className=\"text-center\" data-testid={`video-benefit-${index}`}>\n                <h3 className=\"text-xl font-bold mb-3\">{t(`landing.video.benefits.${key}`)}</h3>\n                <p className=\"text-sm text-muted-foreground\">\n                  {t(`landing.video.benefits.${key}Desc`)}\n                </p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n}\n",
            "size_bytes": 4464
        },
        "client/src/components/dashboard/tabs/ReferralTab.tsx": {
            "content": "import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Copy, Check, Gift, Users, Wallet, Send, ArrowDown } from \"lucide-react\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\n\ninterface ReferralStats {\n  code: string;\n  count: number;\n  earnings: string;\n  referrals: Array<{\n    id: string;\n    firstName: string;\n    lastName: string;\n    email: string;\n    subscriptionStatus: string;\n    createdAt: string;\n  }>;\n  transactions: Array<{\n    id: string;\n    referredUserId: string;\n    amount: string;\n    status: string;\n    createdAt: string;\n  }>;\n}\n\ninterface WithdrawalRequest {\n  id: string;\n  amount: string;\n  walletAddress: string;\n  chain: string;\n  status: string;\n  createdAt: string;\n}\n\nconst withdrawalSchema = z.object({\n  amount: z.string().min(1, \"Amount is required\"),\n  walletAddress: z.string().min(1, \"Wallet address is required\"),\n  chain: z.string().min(1, \"Chain is required\"),\n});\n\ntype WithdrawalFormData = z.infer<typeof withdrawalSchema>;\n\nconst chains = [\n  { value: \"ethereum\", label: \"Ethereum\" },\n  { value: \"polygon\", label: \"Polygon\" },\n  { value: \"bsc\", label: \"Binance Smart Chain\" },\n  { value: \"arbitrum\", label: \"Arbitrum\" },\n  { value: \"optimism\", label: \"Optimism\" },\n];\n\nexport default function ReferralTab() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  const [copied, setCopied] = useState(false);\n  const [showWithdrawalForm, setShowWithdrawalForm] = useState(false);\n\n  const form = useForm<WithdrawalFormData>({\n    resolver: zodResolver(withdrawalSchema),\n    defaultValues: {\n      amount: \"\",\n      walletAddress: \"\",\n      chain: \"\",\n    },\n  });\n\n  const { data: stats, isLoading } = useQuery<ReferralStats>({\n    queryKey: [\"/api/referral/stats\"],\n  });\n\n  const { data: withdrawals = [] } = useQuery<WithdrawalRequest[]>({\n    queryKey: [\"/api/withdrawals/user\"],\n  });\n\n  const withdrawalMutation = useMutation({\n    mutationFn: async (data: WithdrawalFormData) => {\n      return await apiRequest(\"POST\", \"/api/withdrawals/request\", {\n        amount: parseFloat(data.amount),\n        walletAddress: data.walletAddress,\n        chain: data.chain,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ∑ŸÑÿ®\" : \"Success!\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ŸÇÿØŸäŸÖ ÿ∑ŸÑÿ® ÿßŸÑÿ≥ÿ≠ÿ® ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Withdrawal request submitted successfully\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/withdrawals/user\"] });\n      form.reset();\n      setShowWithdrawalForm(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ∑ŸÑÿ®\" : \"Failed to submit request\"),\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleCopyCode = () => {\n    if (stats?.code) {\n      navigator.clipboard.writeText(stats.code);\n      setCopied(true);\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ\" : \"Copied!\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑŸÉŸàÿØ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Referral code copied to clipboard\",\n      });\n      setTimeout(() => setCopied(false), 2000);\n    }\n  };\n\n  const earningsAmount = parseFloat(stats?.earnings || \"0\");\n  const canWithdraw = earningsAmount >= 100;\n\n  const onSubmit = (data: WithdrawalFormData) => {\n    withdrawalMutation.mutate(data);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"h-32 bg-muted animate-pulse rounded-lg\" />\n        <div className=\"h-64 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"section-referral-tab\">\n      {/* Referral Code Section */}\n      <Card data-testid=\"card-referral-code\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Gift className=\"h-5 w-5\" />\n            {language === \"ar\" ? \"ÿ®ÿ±ŸÜÿßŸÖÿ¨ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ©\" : \"Referral Program\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"bg-muted p-6 rounded-lg\">\n            <p className=\"text-sm text-muted-foreground mb-2\">\n              {language === \"ar\" ? \"ŸÉŸàÿØŸÉ ÿßŸÑŸÅÿ±ŸäÿØ\" : \"Your Unique Code\"}\n            </p>\n            <div className=\"flex items-center gap-3\">\n              <code className=\"text-2xl font-bold font-mono bg-background px-4 py-2 rounded\">\n                {stats?.code || \"---\"}\n              </code>\n              <Button\n                variant=\"outline\"\n                size=\"icon\"\n                onClick={handleCopyCode}\n                data-testid=\"button-copy-code\"\n              >\n                {copied ? (\n                  <Check className=\"h-4 w-4 text-green-500\" />\n                ) : (\n                  <Copy className=\"h-4 w-4\" />\n                )}\n              </Button>\n            </div>\n            <p className=\"text-sm text-muted-foreground mt-3\">\n              {language === \"ar\"\n                ? \"ÿ¥ÿßÿ±ŸÉ Ÿáÿ∞ÿß ÿßŸÑŸÉŸàÿØ ŸÖÿπ ÿ£ÿµÿØŸÇÿßÿ¶ŸÉ. ÿπŸÜÿØŸÖÿß Ÿäÿ≥ÿ¨ŸÑŸàŸÜ ÿ®ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Ÿáÿ∞ÿß ÿßŸÑŸÉŸàÿØ ŸàŸäÿ¥ÿ™ÿ±ŸàŸÜ ÿÆÿ∑ÿ©ÿå ÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ $10\"\n                : \"Share this code with your friends. When they sign up using this code and purchase a plan, you earn $10\"}\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Stats Grid */}\n      <div className=\"grid md:grid-cols-3 gap-4\">\n        <Card data-testid=\"card-referral-count\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm flex items-center gap-2\">\n              <Users className=\"h-4 w-4\" />\n              {language === \"ar\" ? \"ÿßŸÑÿ•ÿ≠ÿßŸÑÿßÿ™\" : \"Referrals\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">{stats?.count || 0}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {language === \"ar\" ? \"ÿ£ÿ¥ÿÆÿßÿµ ŸÇÿßŸÖŸàÿß ÿ®ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ\" : \"People signed up\"}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-earnings\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm flex items-center gap-2\">\n              <Wallet className=\"h-4 w-4\" />\n              {language === \"ar\" ? \"ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠\" : \"Earnings\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">${earningsAmount.toFixed(2)}</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {language === \"ar\" ? \"USDT ŸÅŸä ŸÖÿ≠ŸÅÿ∏ÿ™ŸÉ\" : \"USDT in your wallet\"}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-per-referral\">\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm flex items-center gap-2\">\n              <Gift className=\"h-4 w-4\" />\n              {language === \"ar\" ? \"ŸÑŸÉŸÑ ÿ•ÿ≠ÿßŸÑÿ©\" : \"Per Referral\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-3xl font-bold\">$10</div>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {language === \"ar\" ? \"ÿπŸÜÿØ ÿßŸÑÿ¥ÿ±ÿßÿ° ÿßŸÑÿ£ŸàŸÑ\" : \"On first purchase\"}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Withdrawal Section */}\n      {!showWithdrawalForm && (\n        <Button\n          onClick={() => setShowWithdrawalForm(true)}\n          disabled={!canWithdraw}\n          className=\"w-full\"\n          data-testid=\"button-request-withdrawal\"\n        >\n          <Send className=\"h-4 w-4 mr-2\" />\n          {language === \"ar\" ? \"ÿ∑ŸÑÿ® ÿßŸÑÿ≥ÿ≠ÿ®\" : \"Request Withdrawal\"}\n          {!canWithdraw && (\n            <span className=\"ml-2 text-xs\">\n              ({language === \"ar\" ? `$${100 - earningsAmount} ŸÖÿ™ÿ®ŸÇŸä` : `$${100 - earningsAmount} to go`})\n            </span>\n          )}\n        </Button>\n      )}\n\n      {/* Withdrawal Form */}\n      {showWithdrawalForm && (\n        <Card data-testid=\"card-withdrawal-form\" className=\"border-blue-200 dark:border-blue-800\">\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\" ? \"ÿ∑ŸÑÿ® ÿ≥ÿ≠ÿ® ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠\" : \"Withdrawal Request\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <Form {...form}>\n              <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n                <FormField\n                  control={form.control}\n                  name=\"amount\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>\n                        {language === \"ar\" ? \"ÿßŸÑŸÖÿ®ŸÑÿ∫ (ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ÿØŸÜŸâ $100)\" : \"Amount (Minimum $100)\"}\n                      </FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          placeholder=\"100\"\n                          step=\"0.01\"\n                          max={earningsAmount}\n                          {...field}\n                          data-testid=\"input-withdrawal-amount\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"chain\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>\n                        {language === \"ar\" ? \"ÿßŸÑÿ≥ŸÑÿ≥ŸÑÿ©\" : \"Blockchain Network\"}\n                      </FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-chain\">\n                            <SelectValue placeholder={language === \"ar\" ? \"ÿßÿÆÿ™ÿ± ÿßŸÑÿ≥ŸÑÿ≥ŸÑÿ©\" : \"Select chain\"} />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          {chains.map((chain) => (\n                            <SelectItem key={chain.value} value={chain.value}>\n                              {chain.label}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"walletAddress\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>\n                        {language === \"ar\" ? \"ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ© (USDT)\" : \"Wallet Address (USDT)\"}\n                      </FormLabel>\n                      <FormControl>\n                        <Input\n                          placeholder=\"0x...\"\n                          {...field}\n                          data-testid=\"input-wallet-address\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <div className=\"flex gap-2\">\n                  <Button\n                    type=\"submit\"\n                    disabled={withdrawalMutation.isPending}\n                    className=\"flex-1\"\n                    data-testid=\"button-submit-withdrawal\"\n                  >\n                    {withdrawalMutation.isPending\n                      ? language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ...\" : \"Submitting...\"\n                      : language === \"ar\" ? \"ÿ™ŸÇÿØŸäŸÖ ÿßŸÑÿ∑ŸÑÿ®\" : \"Submit Request\"}\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => {\n                      setShowWithdrawalForm(false);\n                      form.reset();\n                    }}\n                    data-testid=\"button-cancel-withdrawal\"\n                  >\n                    {language === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ°\" : \"Cancel\"}\n                  </Button>\n                </div>\n              </form>\n            </Form>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Withdrawal History */}\n      <Card data-testid=\"card-withdrawal-history\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <ArrowDown className=\"h-5 w-5\" />\n            {language === \"ar\" ? \"ÿ≥ÿ¨ŸÑ ÿßŸÑÿßŸÜÿ≥ÿ≠ÿßÿ®ÿßÿ™\" : \"Withdrawal History\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {withdrawals.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <ArrowDown className=\"h-12 w-12 mx-auto text-muted-foreground mb-4 opacity-50\" />\n              <p className=\"text-muted-foreground mb-2\">\n                {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÜÿ≥ÿ≠ÿßÿ® ÿ®ÿπÿØ\" : \"No withdrawal requests yet\"}\n              </p>\n              <p className=\"text-sm text-muted-foreground\">\n                {language === \"ar\" \n                  ? \"ÿπŸÜÿØŸÖÿß ÿ™ŸÇŸàŸÖ ÿ®ÿ∑ŸÑÿ® ÿ≥ÿ≠ÿ®ÿå ÿ≥Ÿäÿ∏Ÿáÿ± ŸáŸÜÿß\" \n                  : \"When you request a withdrawal, it will appear here\"}\n              </p>\n            </div>\n          ) : (\n            <div className=\"space-y-3\">\n              {withdrawals.map((withdrawal) => (\n                <div\n                  key={withdrawal.id}\n                  className=\"flex items-center justify-between p-3 bg-muted rounded-lg\"\n                  data-testid={`withdrawal-item-${withdrawal.id}`}\n                >\n                  <div>\n                    <p className=\"font-semibold\">${parseFloat(withdrawal.amount).toFixed(2)} - {withdrawal.chain.toUpperCase()}</p>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {new Date(withdrawal.createdAt).toLocaleDateString()}\n                    </p>\n                  </div>\n                  <Badge\n                    variant={\n                      withdrawal.status === \"completed\"\n                        ? \"default\"\n                        : withdrawal.status === \"rejected\"\n                        ? \"destructive\"\n                        : \"secondary\"\n                    }\n                  >\n                    {withdrawal.status === \"pending\"\n                      ? language === \"ar\" ? \"ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±\" : \"Pending\"\n                      : withdrawal.status === \"approved\"\n                      ? language === \"ar\" ? \"ŸÖŸàÿßŸÅŸÇ ÿπŸÑŸäŸá\" : \"Approved\"\n                      : withdrawal.status === \"completed\"\n                      ? language === \"ar\" ? \"ŸÖŸÉÿ™ŸÖŸÑ\" : \"Completed\"\n                      : language === \"ar\" ? \"ŸÖÿ±ŸÅŸàÿ∂\" : \"Rejected\"}\n                  </Badge>\n                </div>\n              ))}\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Referrals List */}\n      {stats?.referrals && stats.referrals.length > 0 && (\n        <Card data-testid=\"card-referrals-list\">\n          <CardHeader>\n            <CardTitle>\n              {language === \"ar\" ? \"ŸÖŸÜ ŸÇÿßŸÖŸàÿß ÿ®ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ\" : \"Your Referrals\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              {stats.referrals.map((referral, index) => (\n                <div\n                  key={referral.id}\n                  className=\"flex items-center justify-between p-3 bg-muted rounded-lg\"\n                  data-testid={`referral-item-${index}`}\n                >\n                  <div className=\"flex-1\">\n                    <p className=\"font-semibold\">\n                      {referral.firstName} {referral.lastName}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground\">{referral.email}</p>\n                  </div>\n                  <Badge\n                    variant={\n                      referral.subscriptionStatus === \"active\" ? \"default\" : \"secondary\"\n                    }\n                  >\n                    {referral.subscriptionStatus === \"active\"\n                      ? language === \"ar\"\n                        ? \"ŸÜÿ¥ÿ∑\"\n                        : \"Active\"\n                      : language === \"ar\"\n                      ? \"ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑\"\n                      : \"Inactive\"}\n                  </Badge>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Empty State */}\n      {!stats?.referrals || stats.referrals.length === 0 ? (\n        <Card data-testid=\"card-empty-referrals\">\n          <CardContent className=\"pt-12 text-center pb-12\">\n            <Users className=\"h-12 w-12 mx-auto text-muted-foreground mb-4 opacity-50\" />\n            <p className=\"text-muted-foreground mb-4\">\n              {language === \"ar\"\n                ? \"ŸÑŸÖ ÿ™ŸÇŸÖ ÿ®ÿ•ÿ≠ÿßŸÑÿ© ÿ£Ÿä ÿ¥ÿÆÿµ ÿ≠ÿ™Ÿâ ÿßŸÑÿ¢ŸÜ\"\n                : \"No referrals yet\"}\n            </p>\n            <p className=\"text-sm text-muted-foreground\">\n              {language === \"ar\"\n                ? \"ÿßÿ®ÿØÿ£ ŸÅŸä ŸÖÿ¥ÿßÿ±ŸÉÿ© ŸÉŸàÿØŸÉ ŸÑŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ£ÿ±ÿ®ÿßÿ≠\"\n                : \"Start sharing your code to earn rewards\"}\n            </p>\n          </CardContent>\n        </Card>\n      ) : null}\n    </div>\n  );\n}\n",
            "size_bytes": 18098
        },
        "client/src/pages/admin/AdminRoles.tsx": {
            "content": "import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Input } from \"@/components/ui/input\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Users, Plus, Edit, Shield, Headphones, Settings, UserPlus, Search, X } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { User } from \"@shared/schema\";\n\nexport default function AdminRoles() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  const [selectedUserId, setSelectedUserId] = useState<string | null>(null);\n  const [roleFilter, setRoleFilter] = useState<string>(\"all\");\n  const [searchQuery, setSearchQuery] = useState<string>(\"\");\n  const [createDialogOpen, setCreateDialogOpen] = useState(false);\n\n  // Create user form state\n  const [createForm, setCreateForm] = useState({\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    password: \"\",\n    phone: \"\",\n    role: \"user\",\n  });\n\n  const { data: users, isLoading } = useQuery<User[]>({\n    queryKey: [\"/api/admin/users\"],\n  });\n\n  const updateRoleMutation = useMutation({\n    mutationFn: async ({ userId, role }: { userId: string; role: string }) => {\n      return await apiRequest(\"PATCH\", `/api/admin/users/${userId}`, { role });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\" : \"Updated\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿØŸàÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\" : \"User role updated successfully\",\n      });\n      setSelectedUserId(null);\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.response?.data?.message || \"Failed to update role\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const createUserMutation = useMutation({\n    mutationFn: async (data: typeof createForm) => {\n      return await apiRequest(\"POST\", \"/api/admin/users/create\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/admin/users\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°\" : \"Created\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"User created successfully\",\n      });\n      setCreateDialogOpen(false);\n      setCreateForm({ firstName: \"\", lastName: \"\", email: \"\", password: \"\", phone: \"\", role: \"user\" });\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.response?.data?.message || \"Failed to create user\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const getRoleBadgeColor = (role: string) => {\n    switch (role) {\n      case \"admin\":\n        return \"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-100\";\n      case \"manager\":\n        return \"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100\";\n      case \"support\":\n        return \"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100\";\n      default:\n        return \"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-100\";\n    }\n  };\n\n  const getRoleIcon = (role: string) => {\n    switch (role) {\n      case \"admin\":\n        return <Shield className=\"h-4 w-4\" />;\n      case \"manager\":\n        return <Settings className=\"h-4 w-4\" />;\n      case \"support\":\n        return <Headphones className=\"h-4 w-4\" />;\n      default:\n        return <Users className=\"h-4 w-4\" />;\n    }\n  };\n\n  const filteredUsers = users?.filter((u) => {\n    const matchesRole = roleFilter === \"all\" || u.role === roleFilter;\n    const matchesSearch = searchQuery.toLowerCase() === \"\" || \n      u.firstName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      u.lastName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      u.email.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesRole && matchesSearch;\n  }) || [];\n\n  const stats = {\n    total: users?.length || 0,\n    admins: users?.filter((u) => u.role === \"admin\").length || 0,\n    managers: users?.filter((u) => u.role === \"manager\").length || 0,\n    support: users?.filter((u) => u.role === \"support\").length || 0,\n    users: users?.filter((u) => u.role === \"user\").length || 0,\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-10 bg-muted rounded w-1/4\" />\n          <div className=\"grid grid-cols-5 gap-4\">\n            {[1, 2, 3, 4, 5].map((i) => (\n              <div key={i} className=\"h-24 bg-muted rounded\" />\n            ))}\n          </div>\n          <div className=\"space-y-2\">\n            {[1, 2, 3, 4, 5].map((i) => (\n              <div key={i} className=\"h-16 bg-muted rounded\" />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8 space-y-8\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-admin-roles-title\">\n            {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿßŸÑÿ£ÿØŸàÿßÿ± ŸàÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ\" : \"Role & User Management\"}\n          </h1>\n          <p className=\"text-sm text-muted-foreground mt-2\">\n            {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿ£ÿØŸàÿßÿ± ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ŸàÿßŸÑÿµŸÑÿßÿ≠Ÿäÿßÿ™\" : \"Manage user roles and permissions\"}\n          </p>\n        </div>\n        <Dialog open={createDialogOpen} onOpenChange={setCreateDialogOpen}>\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-create-user\" className=\"gap-2\">\n              <Plus className=\"h-4 w-4\" />\n              {language === \"ar\" ? \"ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ≥ÿ™ÿÆÿØŸÖ\" : \"Create User\"}\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-md\" data-testid=\"dialog-create-user\">\n            <DialogHeader>\n              <DialogTitle>\n                {language === \"ar\" ? \"ÿ•ŸÜÿ¥ÿßÿ° ŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿ¨ÿØŸäÿØ\" : \"Create New User\"}\n              </DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-3\">\n                <Input\n                  placeholder={language === \"ar\" ? \"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ŸàŸÑ\" : \"First Name\"}\n                  value={createForm.firstName}\n                  onChange={(e) => setCreateForm({ ...createForm, firstName: e.target.value })}\n                  data-testid=\"input-first-name\"\n                />\n                <Input\n                  placeholder={language === \"ar\" ? \"ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑÿ£ÿÆŸäÿ±\" : \"Last Name\"}\n                  value={createForm.lastName}\n                  onChange={(e) => setCreateForm({ ...createForm, lastName: e.target.value })}\n                  data-testid=\"input-last-name\"\n                />\n              </div>\n              <Input\n                type=\"email\"\n                placeholder={language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}\n                value={createForm.email}\n                onChange={(e) => setCreateForm({ ...createForm, email: e.target.value })}\n                data-testid=\"input-email\"\n              />\n              <Input\n                type=\"password\"\n                placeholder={language === \"ar\" ? \"ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±\" : \"Password\"}\n                value={createForm.password}\n                onChange={(e) => setCreateForm({ ...createForm, password: e.target.value })}\n                data-testid=\"input-password\"\n              />\n              <Input\n                placeholder={language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ\" : \"Phone\"}\n                value={createForm.phone}\n                onChange={(e) => setCreateForm({ ...createForm, phone: e.target.value })}\n                data-testid=\"input-phone\"\n              />\n              <Select value={createForm.role} onValueChange={(role) => setCreateForm({ ...createForm, role })}>\n                <SelectTrigger data-testid=\"select-role\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"user\" data-testid=\"option-role-user\">\n                    {language === \"ar\" ? \"ŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿπÿßÿØŸä\" : \"Regular User\"}\n                  </SelectItem>\n                  <SelectItem value=\"support\" data-testid=\"option-role-support\">\n                    {language === \"ar\" ? \"ÿØÿπŸÖ\" : \"Support\"}\n                  </SelectItem>\n                  <SelectItem value=\"manager\" data-testid=\"option-role-manager\">\n                    {language === \"ar\" ? \"ŸÖÿØŸäÿ±\" : \"Manager\"}\n                  </SelectItem>\n                  <SelectItem value=\"admin\" data-testid=\"option-role-admin\">\n                    {language === \"ar\" ? \"ŸÖÿ≥ÿ§ŸàŸÑ\" : \"Admin\"}\n                  </SelectItem>\n                </SelectContent>\n              </Select>\n              <Button\n                onClick={() => createUserMutation.mutate(createForm)}\n                disabled={createUserMutation.isPending || !createForm.firstName || !createForm.email || !createForm.password}\n                className=\"w-full\"\n                data-testid=\"button-submit-create\"\n              >\n                {createUserMutation.isPending ? (language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°...\" : \"Creating...\") : language === \"ar\" ? \"ÿ•ŸÜÿ¥ÿßÿ°\" : \"Create\"}\n              </Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n        <Card data-testid=\"stat-total\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">{language === \"ar\" ? \"ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä\" : \"Total\"}</p>\n                <p className=\"text-2xl font-bold text-foreground\">{stats.total}</p>\n              </div>\n              <Users className=\"h-8 w-8 text-muted-foreground opacity-50\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-red-200 dark:border-red-900\" data-testid=\"stat-admins\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">{language === \"ar\" ? \"ŸÖÿ≥ÿ§ŸàŸÑŸàŸÜ\" : \"Admins\"}</p>\n                <p className=\"text-2xl font-bold text-red-600\">{stats.admins}</p>\n              </div>\n              <Shield className=\"h-8 w-8 text-red-200\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-blue-200 dark:border-blue-900\" data-testid=\"stat-managers\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">{language === \"ar\" ? \"ŸÖÿØŸäÿ±ŸàŸÜ\" : \"Managers\"}</p>\n                <p className=\"text-2xl font-bold text-blue-600\">{stats.managers}</p>\n              </div>\n              <Settings className=\"h-8 w-8 text-blue-200\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"border-green-200 dark:border-green-900\" data-testid=\"stat-support\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">{language === \"ar\" ? \"ÿØÿπŸÖ\" : \"Support\"}</p>\n                <p className=\"text-2xl font-bold text-green-600\">{stats.support}</p>\n              </div>\n              <Headphones className=\"h-8 w-8 text-green-200\" />\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"stat-users\">\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">{language === \"ar\" ? \"ŸÖÿ≥ÿ™ÿÆÿØŸÖŸàŸÜ\" : \"Users\"}</p>\n                <p className=\"text-2xl font-bold text-foreground\">{stats.users}</p>\n              </div>\n              <UserPlus className=\"h-8 w-8 text-muted-foreground opacity-50\" />\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Users List with Filtering */}\n      <div className=\"space-y-4\">\n        {/* Search Bar */}\n        <div className=\"relative\" data-testid=\"search-users-container\">\n          <div className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\">\n            <Search className=\"h-4 w-4\" />\n          </div>\n          <Input\n            placeholder={language === \"ar\" ? \"ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ...\" : \"Search users by name or email...\"}\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-10 pr-10\"\n            data-testid=\"input-search-users\"\n          />\n          {searchQuery && (\n            <button\n              onClick={() => setSearchQuery(\"\")}\n              className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors\"\n              data-testid=\"button-clear-search\"\n            >\n              <X className=\"h-4 w-4\" />\n            </button>\n          )}\n        </div>\n\n        {/* Role Filter Tabs */}\n        <Tabs value={roleFilter} onValueChange={setRoleFilter}>\n          <TabsList className=\"w-full justify-start\" data-testid=\"tabs-role-filter\">\n            <TabsTrigger value=\"all\" data-testid=\"tab-all\">\n              {language === \"ar\" ? \"ÿßŸÑÿ¨ŸÖŸäÿπ\" : \"All\"} ({stats.total})\n            </TabsTrigger>\n            <TabsTrigger value=\"admin\" data-testid=\"tab-admin\">\n              <Shield className=\"h-3 w-3 mr-1\" />\n              {language === \"ar\" ? \"ŸÖÿ≥ÿ§ŸàŸÑŸàŸÜ\" : \"Admins\"} ({stats.admins})\n            </TabsTrigger>\n            <TabsTrigger value=\"manager\" data-testid=\"tab-manager\">\n              <Settings className=\"h-3 w-3 mr-1\" />\n              {language === \"ar\" ? \"ŸÖÿØŸäÿ±ŸàŸÜ\" : \"Managers\"} ({stats.managers})\n            </TabsTrigger>\n            <TabsTrigger value=\"support\" data-testid=\"tab-support\">\n              <Headphones className=\"h-3 w-3 mr-1\" />\n              {language === \"ar\" ? \"ÿØÿπŸÖ\" : \"Support\"} ({stats.support})\n            </TabsTrigger>\n            <TabsTrigger value=\"user\" data-testid=\"tab-user\">\n              <Users className=\"h-3 w-3 mr-1\" />\n              {language === \"ar\" ? \"ŸÖÿ≥ÿ™ÿÆÿØŸÖŸàŸÜ\" : \"Users\"} ({stats.users})\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value={roleFilter} className=\"space-y-3\">\n            {searchQuery && (\n              <div className=\"text-sm text-muted-foreground mb-4\">\n                {language === \"ar\" \n                  ? `ÿπÿ±ÿ∂ ${filteredUsers.length} ŸÖŸÜ ${stats.total} ŸÜÿ™Ÿäÿ¨ÿ© ŸÑŸÑÿ®ÿ≠ÿ´: \"${searchQuery}\"`\n                  : `Showing ${filteredUsers.length} of ${stats.total} results for: \"${searchQuery}\"`\n                }\n              </div>\n            )}\n            {filteredUsers.length > 0 ? (\n              filteredUsers.map((user) => (\n                <Card key={user.id} className=\"hover-elevate transition-all\" data-testid={`card-user-${user.id}`}>\n                  <CardContent className=\"p-5\">\n                    <div className=\"flex items-center justify-between gap-4\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-3 mb-2\">\n                          <div className=\"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                            {getRoleIcon(user.role)}\n                          </div>\n                          <div>\n                            <p className=\"font-medium text-foreground\" data-testid={`text-user-name-${user.id}`}>\n                              {user.firstName} {user.lastName}\n                            </p>\n                            <p className=\"text-xs text-muted-foreground\">{user.email}</p>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-3\">\n                        <Badge className={getRoleBadgeColor(user.role)} data-testid={`badge-role-${user.id}`}>\n                          {user.role}\n                        </Badge>\n                        {selectedUserId === user.id ? (\n                          <div className=\"flex gap-2\">\n                            <Select\n                              defaultValue={user.role}\n                              onValueChange={(role) =>\n                                updateRoleMutation.mutate({ userId: user.id, role })\n                              }\n                            >\n                              <SelectTrigger className=\"w-32\" data-testid={`select-role-${user.id}`}>\n                                <SelectValue />\n                              </SelectTrigger>\n                              <SelectContent>\n                                <SelectItem value=\"user\">User</SelectItem>\n                                <SelectItem value=\"support\">Support</SelectItem>\n                                <SelectItem value=\"manager\">Manager</SelectItem>\n                                <SelectItem value=\"admin\">Admin</SelectItem>\n                              </SelectContent>\n                            </Select>\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => setSelectedUserId(null)}\n                              data-testid=\"button-cancel-role\"\n                            >\n                              {language === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ°\" : \"Cancel\"}\n                            </Button>\n                          </div>\n                        ) : (\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => setSelectedUserId(user.id)}\n                            data-testid={`button-edit-role-${user.id}`}\n                            className=\"gap-1\"\n                          >\n                            <Edit className=\"h-3 w-3\" />\n                            {language === \"ar\" ? \"ÿ™ÿπÿØŸäŸÑ\" : \"Edit\"}\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))\n            ) : (\n              <Card>\n                <CardContent className=\"p-8 text-center\">\n                  <Users className=\"h-12 w-12 mx-auto text-muted-foreground opacity-50 mb-3\" />\n                  <p className=\"text-muted-foreground\">\n                    {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ≥ÿ™ÿÆÿØŸÖŸàŸÜ ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑÿØŸàÿ±\" : \"No users in this role\"}\n                  </p>\n                </CardContent>\n              </Card>\n            )}\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n}\n",
            "size_bytes": 19601
        },
        "client/src/pages/admin/AdminLogs.tsx": {
            "content": "import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar } from \"lucide-react\";\nimport type { AdminLog } from \"@shared/schema\";\nimport { format } from \"date-fns\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\nexport default function AdminLogs() {\n  const { language } = useLanguage();\n  const { user, isAuthenticated, isLoading } = useAuth();\n  const [startDate, setStartDate] = useState(new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]);\n  const [endDate, setEndDate] = useState(new Date().toISOString().split('T')[0]);\n  const [actionFilter, setActionFilter] = useState<string>(\"all\");\n  const [pageFilter, setPageFilter] = useState<string>(\"all\");\n  const [userSearch, setUserSearch] = useState<string>(\"\");\n\n  // Debug logs\n  console.log(\"üì± [AdminLogs] Component mounted/re-rendered\", {\n    isAuthenticated,\n    userRole: user?.role,\n    startDate,\n    endDate,\n  });\n\n  const { data: logs, isLoading: logsLoading } = useQuery<AdminLog[]>({\n    queryKey: [\"/api/admin/logs\", startDate, endDate],\n    enabled: isAuthenticated && user?.role === \"admin\",\n  });\n\n  // Debug API response\n  console.log(\"üîç [AdminLogs] Query status:\", {\n    logsLoading,\n    logsCount: logs?.length || 0,\n    logs: logs?.slice(0, 2),\n  });\n\n  // Filter logs\n  const filteredLogs = logs?.filter((log) => {\n    const matchAction = actionFilter === \"all\" || log.action === actionFilter;\n    const matchPage = pageFilter === \"all\" || log.page === pageFilter;\n    const searchLower = userSearch.toLowerCase();\n    const matchUser =\n      !userSearch ||\n      log.adminName.toLowerCase().includes(searchLower) ||\n      log.adminEmail.toLowerCase().includes(searchLower);\n    return matchAction && matchPage && matchUser;\n  });\n\n  // Debug filtered logs\n  console.log(\"üìä [AdminLogs] Filtered logs:\", {\n    totalLogs: logs?.length || 0,\n    filteredCount: filteredLogs?.length || 0,\n    filters: { actionFilter, pageFilter, userSearch },\n    filtered: filteredLogs?.slice(0, 2),\n  });\n\n  // Get unique actions and pages for filter dropdowns\n  const uniqueActions = [...new Set(logs?.map((l) => l.action) || [])];\n  const uniquePages = [...new Set(logs?.map((l) => l.page) || [])];\n\n  const getActionColor = (action: string) => {\n    if (action.includes(\"create\")) return \"bg-green-100 text-green-800\";\n    if (action.includes(\"delete\")) return \"bg-red-100 text-red-800\";\n    if (action.includes(\"approve\")) return \"bg-blue-100 text-blue-800\";\n    if (action.includes(\"reject\")) return \"bg-orange-100 text-orange-800\";\n    return \"bg-gray-100 text-gray-800\";\n  };\n\n  // Admin-only access check\n  if (isLoading || !isAuthenticated || user?.role !== \"admin\") {\n    return (\n      <div className=\"p-8\">\n        <Card>\n          <CardContent className=\"p-8 text-center\">\n            <p className=\"text-destructive\">\n              {language === \"ar\" ? \"Ÿäÿ≥ŸÖÿ≠ ŸÅŸÇÿ∑ ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑŸäŸÜ\" : \"Only admins can access this page\"}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (logsLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-8 bg-muted rounded w-1/4\" />\n          <div className=\"space-y-2\">\n            {[1, 2, 3, 4, 5].map((i) => (\n              <div key={i} className=\"h-16 bg-muted rounded\" />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-heading font-bold text-foreground mb-4\" data-testid=\"text-admin-logs-title\">\n          {language === \"ar\" ? \"ÿ≥ÿ¨ŸÑÿßÿ™ ÿßŸÑÿ•ÿØÿßÿ±ÿ©\" : \"Admin Logs\"}\n        </h1>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6\">\n          <div>\n            <label className=\"text-sm font-medium\">{language === \"ar\" ? \"ŸÖŸÜ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ\" : \"From Date\"}</label>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n              <Input type=\"date\" value={startDate} onChange={(e) => setStartDate(e.target.value)} data-testid=\"input-start-date\" />\n            </div>\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">{language === \"ar\" ? \"ÿ•ŸÑŸâ ÿßŸÑÿ™ÿßÿ±ŸäÿÆ\" : \"To Date\"}</label>\n            <div className=\"flex items-center gap-2 mt-1\">\n              <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n              <Input type=\"date\" value={endDate} onChange={(e) => setEndDate(e.target.value)} data-testid=\"input-end-date\" />\n            </div>\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">{language === \"ar\" ? \"ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°\" : \"Action\"}</label>\n            <Select value={actionFilter} onValueChange={setActionFilter}>\n              <SelectTrigger data-testid=\"select-action-filter\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">{language === \"ar\" ? \"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™\" : \"All Actions\"}</SelectItem>\n                {uniqueActions.map((action) => (\n                  <SelectItem key={action} value={action}>{action}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">{language === \"ar\" ? \"ÿßŸÑÿµŸÅÿ≠ÿ©\" : \"Page\"}</label>\n            <Select value={pageFilter} onValueChange={setPageFilter}>\n              <SelectTrigger data-testid=\"select-page-filter\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">{language === \"ar\" ? \"ÿ¨ŸÖŸäÿπ ÿßŸÑÿµŸÅÿ≠ÿßÿ™\" : \"All Pages\"}</SelectItem>\n                {uniquePages.map((page) => (\n                  <SelectItem key={page} value={page}>{page}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n          <div>\n            <label className=\"text-sm font-medium\">{language === \"ar\" ? \"ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\" : \"Search User\"}</label>\n            <Input \n              placeholder={language === \"ar\" ? \"ÿßÿ≥ŸÖ ÿ£Ÿà ÿ®ÿ±ŸäÿØ ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Name or email...\"}\n              value={userSearch}\n              onChange={(e) => setUserSearch(e.target.value)}\n              data-testid=\"input-user-search\"\n            />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-3\">\n        {filteredLogs?.map((log) => (\n          <Card key={log.id} className=\"hover-elevate\" data-testid={`card-log-${log.id}`}>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center justify-between gap-4\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <Badge className={getActionColor(log.action)} data-testid={`badge-action-${log.id}`}>\n                      {log.action}\n                    </Badge>\n                    <Badge variant=\"outline\" data-testid={`badge-page-${log.id}`}>\n                      {log.page}\n                    </Badge>\n                    <span className=\"text-xs text-muted-foreground\">\n                      {log.createdAt && format(new Date(log.createdAt), \"MMM dd, yyyy HH:mm:ss\")}\n                    </span>\n                  </div>\n                  <p className=\"text-sm text-foreground\" data-testid={`text-description-${log.id}`}>\n                    {log.description || \"No description\"}\n                  </p>\n                  <div className=\"flex gap-4 mt-2 text-xs text-muted-foreground\">\n                    <span data-testid={`text-admin-name-${log.id}`}>{language === \"ar\" ? \"ÿ®Ÿàÿßÿ≥ÿ∑ÿ©:\" : \"By:\"} {log.adminName}</span>\n                    <span data-testid={`text-admin-email-${log.id}`}>{log.adminEmail}</span>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {filteredLogs?.length === 0 && (\n        <Card>\n          <CardContent className=\"p-8 text-center\">\n            <p className=\"text-muted-foreground\">\n              {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≥ÿ¨ŸÑÿßÿ™\" : \"No logs found\"}\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n",
            "size_bytes": 8734
        },
        "seed-test-user.ts": {
            "content": "import { db } from \"./server/db\";\nimport { users } from \"@shared/schema\";\nimport { eq } from \"drizzle-orm\";\nimport bcrypt from \"bcrypt\";\nimport { randomBytes } from \"crypto\";\n\nasync function seedTestUser() {\n  try {\n    // Check if user exists\n    const existingUser = await db\n      .select()\n      .from(users)\n      .where(eq(users.email, \"contactmeyassin@gmail.com\"))\n      .limit(1);\n\n    if (existingUser.length > 0) {\n      // Update existing user with $100 referral earnings\n      await db\n        .update(users)\n        .set({\n          referralEarnings: \"100\",\n          referralCount: 10,\n        })\n        .where(eq(users.email, \"contactmeyassin@gmail.com\"));\n\n      console.log(\"‚úÖ User updated with $100 referral earnings!\");\n      console.log(`Referral Code: ${existingUser[0].referralCode}`);\n      return existingUser[0];\n    }\n\n    // Generate referral code\n    const referralCode = randomBytes(4)\n      .toString(\"hex\")\n      .toUpperCase()\n      .slice(0, 8);\n\n    // Hash password\n    const passwordHash = await bcrypt.hash(\"TestPassword123!\", 10);\n\n    // Create new user with $100 referral earnings\n    const [newUser] = await db\n      .insert(users)\n      .values({\n        email: \"contactmeyassin@gmail.com\",\n        passwordHash,\n        firstName: \"Test\",\n        lastName: \"User\",\n        phone: \"+966123456789\",\n        role: \"user\",\n        referralCode,\n        referralEarnings: \"100\",\n        referralCount: 10,\n        subscriptionStatus: \"active\",\n      })\n      .returning();\n\n    console.log(\"‚úÖ Test user created successfully!\");\n    console.log(`Email: contactmeyassin@gmail.com`);\n    console.log(`Password: TestPassword123!`);\n    console.log(`Referral Code: ${newUser.referralCode}`);\n    console.log(`Referral Earnings: $100`);\n\n    return newUser;\n  } catch (error) {\n    console.error(\"Error seeding user:\", error);\n    throw error;\n  }\n}\n\nseedTestUser()\n  .then(() => {\n    console.log(\"\\n‚úÖ Seed completed!\");\n    process.exit(0);\n  })\n  .catch((error) => {\n    console.error(\"Seed failed:\", error);\n    process.exit(1);\n  });\n",
            "size_bytes": 2078
        },
        "client/src/pages/admin/AdminWithdrawals.tsx": {
            "content": "import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { useState } from \"react\";\nimport { Check, X, AlertCircle, DollarSign, TrendingUp, Clock, CheckCircle } from \"lucide-react\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\ninterface AdminWithdrawalRequest {\n  id: string;\n  userId: string;\n  amount: string;\n  walletAddress: string;\n  chain: string;\n  status: string;\n  adminNotes?: string;\n  createdAt: string;\n  approvedAt?: string;\n  userName: string;\n  userEmail: string;\n  referralCode: string;\n  referralCount: number;\n  referralEarnings: string;\n  phone?: string;\n  subscriptionStatus?: string;\n}\n\nexport default function AdminWithdrawals() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  const [selectedWithdrawal, setSelectedWithdrawal] = useState<string | null>(null);\n  const [adminNotes, setAdminNotes] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState<\"all\" | \"pending\" | \"completed\" | \"rejected\">(\"all\");\n\n  const { data: withdrawals = [], isLoading, refetch } = useQuery<AdminWithdrawalRequest[]>({\n    queryKey: [\"/api/withdrawals/admin\"],\n  });\n\n  // Calculate statistics\n  const stats = {\n    totalAmount: withdrawals.reduce((sum, w) => sum + parseFloat(w.amount), 0),\n    pendingAmount: withdrawals\n      .filter((w) => w.status === \"pending\")\n      .reduce((sum, w) => sum + parseFloat(w.amount), 0),\n    completedAmount: withdrawals\n      .filter((w) => w.status === \"completed\")\n      .reduce((sum, w) => sum + parseFloat(w.amount), 0),\n    rejectedAmount: withdrawals\n      .filter((w) => w.status === \"rejected\")\n      .reduce((sum, w) => sum + parseFloat(w.amount), 0),\n    pendingCount: withdrawals.filter((w) => w.status === \"pending\").length,\n    completedCount: withdrawals.filter((w) => w.status === \"completed\").length,\n    rejectedCount: withdrawals.filter((w) => w.status === \"rejected\").length,\n  };\n\n  // Filter withdrawals based on status\n  const filteredWithdrawals = statusFilter === \"all\" \n    ? withdrawals \n    : withdrawals.filter((w) => w.status === statusFilter);\n\n  const approveMutation = useMutation({\n    mutationFn: async (withdrawalId: string) => {\n      return await apiRequest(\"POST\", `/api/withdrawals/${withdrawalId}/approve`, {\n        adminNotes,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑŸÇÿ®ŸàŸÑ\" : \"Approved!\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ŸÇÿ®ŸàŸÑ ÿ∑ŸÑÿ® ÿßŸÑÿ≥ÿ≠ÿ®\" : \"Withdrawal request approved\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/withdrawals/admin\"] });\n      setSelectedWithdrawal(null);\n      setAdminNotes(\"\");\n      refetch();\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ÿßŸÑŸÇÿ®ŸàŸÑ\" : \"Failed to approve\"),\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const rejectMutation = useMutation({\n    mutationFn: async (withdrawalId: string) => {\n      return await apiRequest(\"POST\", `/api/withdrawals/${withdrawalId}/reject`, {\n        adminNotes,\n      });\n    },\n    onSuccess: () => {\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ±ŸÅÿ∂\" : \"Rejected!\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ±ŸÅÿ∂ ÿ∑ŸÑÿ® ÿßŸÑÿ≥ÿ≠ÿ®\" : \"Withdrawal request rejected\",\n      });\n      queryClient.invalidateQueries({ queryKey: [\"/api/withdrawals/admin\"] });\n      setSelectedWithdrawal(null);\n      setAdminNotes(\"\");\n      refetch();\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.message || (language === \"ar\" ? \"ŸÅÿ¥ŸÑ ÿßŸÑÿ±ŸÅÿ∂\" : \"Failed to reject\"),\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const pendingRequests = filteredWithdrawals.filter((w) => w.status === \"pending\");\n  const processedRequests = filteredWithdrawals.filter((w) => w.status !== \"pending\");\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <div className=\"h-32 bg-muted animate-pulse rounded-lg\" />\n        <div className=\"h-96 bg-muted animate-pulse rounded-lg\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\" data-testid=\"section-admin-withdrawals\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-3xl font-bold\">\n          {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ≥ÿ≠ÿ®\" : \"Manage Withdrawals\"}\n        </h1>\n        <p className=\"text-muted-foreground mt-2\">\n          {language === \"ar\" ? \"ŸÇÿ®ŸàŸÑ ÿ£Ÿà ÿ±ŸÅÿ∂ ÿ∑ŸÑÿ®ÿßÿ™ ÿ≥ÿ≠ÿ® ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠\" : \"Approve or reject withdrawal requests\"}\n        </p>\n      </div>\n\n      {/* Statistics Cards */}\n      <div className=\"grid md:grid-cols-4 gap-4\">\n        <Card data-testid=\"card-total-withdrawn\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <DollarSign className=\"h-4 w-4 text-green-600\" />\n              {language === \"ar\" ? \"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿßŸÑŸÖÿ≥ÿ≠Ÿàÿ®ÿ©\" : \"Total Withdrawn\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold text-green-600\">${stats.totalAmount.toFixed(2)}</p>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {language === \"ar\" ? \"ÿ¨ŸÖŸäÿπ ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™\" : \"All requests\"}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-pending-withdrawn\" className=\"border-yellow-200 dark:border-yellow-800\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <Clock className=\"h-4 w-4 text-yellow-600\" />\n              {language === \"ar\" ? \"ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿßŸÑŸÖÿπŸÑŸÇÿ©\" : \"Pending Amount\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold text-yellow-600\">${stats.pendingAmount.toFixed(2)}</p>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {stats.pendingCount} {language === \"ar\" ? \"ÿ∑ŸÑÿ®\" : \"requests\"}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-completed-withdrawn\" className=\"border-green-200 dark:border-green-800\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <CheckCircle className=\"h-4 w-4 text-green-600\" />\n              {language === \"ar\" ? \"ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©\" : \"Completed Amount\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold text-green-600\">${stats.completedAmount.toFixed(2)}</p>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {stats.completedCount} {language === \"ar\" ? \"ÿ∑ŸÑÿ®\" : \"requests\"}\n            </p>\n          </CardContent>\n        </Card>\n\n        <Card data-testid=\"card-rejected-withdrawn\" className=\"border-red-200 dark:border-red-800\">\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\n              <X className=\"h-4 w-4 text-red-600\" />\n              {language === \"ar\" ? \"ÿßŸÑŸÖÿ®ÿßŸÑÿ∫ ÿßŸÑŸÖÿ±ŸÅŸàÿ∂ÿ©\" : \"Rejected Amount\"}\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-3xl font-bold text-red-600\">${stats.rejectedAmount.toFixed(2)}</p>\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              {stats.rejectedCount} {language === \"ar\" ? \"ÿ∑ŸÑÿ®\" : \"requests\"}\n            </p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-sm\">\n            {language === \"ar\" ? \"ÿ™ÿµŸÅŸäÿ© ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™\" : \"Filter Requests\"}\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-wrap gap-2\">\n            {[\"all\", \"pending\", \"completed\", \"rejected\"].map((status) => (\n              <Button\n                key={status}\n                variant={statusFilter === status ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => setStatusFilter(status as any)}\n                data-testid={`button-filter-${status}`}\n              >\n                {status === \"all\"\n                  ? language === \"ar\" ? \"ÿßŸÑŸÉŸÑ\" : \"All\"\n                  : status === \"pending\"\n                  ? language === \"ar\" ? \"ÿßŸÑŸÖÿπŸÑŸÇÿ©\" : \"Pending\"\n                  : status === \"completed\"\n                  ? language === \"ar\" ? \"ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©\" : \"Completed\"\n                  : language === \"ar\" ? \"ÿßŸÑŸÖÿ±ŸÅŸàÿ∂ÿ©\" : \"Rejected\"}\n              </Button>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Pending Requests */}\n      <div>\n        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\n          <AlertCircle className=\"h-5 w-5\" />\n          {language === \"ar\" ? \"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπŸÑŸÇÿ©\" : \"Pending Requests\"}\n          <Badge>{pendingRequests.length}</Badge>\n        </h2>\n\n        {pendingRequests.length === 0 ? (\n          <Card>\n            <CardContent className=\"pt-12 text-center pb-12\">\n              <p className=\"text-muted-foreground\">\n                {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ŸÖÿπŸÑŸÇÿ©\" : \"No pending requests\"}\n              </p>\n            </CardContent>\n          </Card>\n        ) : (\n          <div className=\"grid gap-4\">\n            {pendingRequests.map((withdrawal) => (\n              <Card\n                key={withdrawal.id}\n                data-testid={`card-withdrawal-${withdrawal.id}`}\n                className=\"border-yellow-200 dark:border-yellow-800\"\n              >\n                <CardHeader>\n                  <div className=\"flex justify-between items-start\">\n                    <div>\n                      <CardTitle className=\"text-lg\">\n                        {withdrawal.userName}\n                      </CardTitle>\n                      <p className=\"text-sm text-muted-foreground mt-1\">\n                        {language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ:\" : \"Email:\"} {withdrawal.userEmail}\n                      </p>\n                    </div>\n                    <Badge variant=\"secondary\">\n                      {withdrawal.status === \"pending\"\n                        ? language === \"ar\" ? \"ŸÇŸäÿØ ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±\" : \"Pending\"\n                        : language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©\" : \"Processed\"}\n                    </Badge>\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {/* Withdrawal Details */}\n                  <div className=\"grid md:grid-cols-4 gap-4\">\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"ar\" ? \"ÿßŸÑŸÉŸàÿØ ÿßŸÑŸÖÿ±ÿ¨ÿπŸä\" : \"Referral Code\"}\n                      </p>\n                      <p className=\"font-mono font-bold text-lg\">{withdrawal.referralCode}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"ar\" ? \"ÿßŸÑŸÖÿ®ŸÑÿ∫\" : \"Withdrawal Amount\"}\n                      </p>\n                      <p className=\"font-bold text-lg text-green-600\">${parseFloat(withdrawal.amount).toFixed(2)}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"ar\" ? \"ÿßŸÑÿ≥ŸÑÿ≥ŸÑÿ©\" : \"Blockchain\"}\n                      </p>\n                      <p className=\"font-semibold\">{withdrawal.chain.toUpperCase()}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {language === \"ar\" ? \"ÿßŸÑÿ™ÿßÿ±ŸäÿÆ\" : \"Requested Date\"}\n                      </p>\n                      <p className=\"text-sm\">{new Date(withdrawal.createdAt).toLocaleDateString()}</p>\n                    </div>\n                  </div>\n\n                  {/* Referral Stats */}\n                  <div className=\"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800\">\n                    <h4 className=\"font-semibold mb-3 text-sm\">\n                      {language === \"ar\" ? \"ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑÿ•ÿ≠ÿßŸÑÿ©\" : \"Referral Statistics\"}\n                    </h4>\n                    <div className=\"grid md:grid-cols-3 gap-3\">\n                      <div>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {language === \"ar\" ? \"ÿπÿØÿØ ÿßŸÑÿ•ÿ≠ÿßŸÑÿßÿ™\" : \"Total Referrals\"}\n                        </p>\n                        <p className=\"text-2xl font-bold text-blue-600\">{withdrawal.referralCount}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {language === \"ar\" ? \"ÿ•ÿ¨ŸÖÿßŸÑŸä ÿßŸÑÿ£ÿ±ÿ®ÿßÿ≠\" : \"Total Earnings\"}\n                        </p>\n                        <p className=\"text-2xl font-bold text-blue-600\">\n                          ${parseFloat(withdrawal.referralEarnings).toFixed(2)}\n                        </p>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {language === \"ar\" ? \"ÿ≠ÿßŸÑÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\" : \"Subscription Status\"}\n                        </p>\n                        <Badge variant={withdrawal.subscriptionStatus === \"active\" ? \"default\" : \"secondary\"}>\n                          {withdrawal.subscriptionStatus === \"active\"\n                            ? language === \"ar\" ? \"ŸÜÿ¥ÿ∑\" : \"Active\"\n                            : language === \"ar\" ? \"ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑\" : \"Inactive\"}\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Contact Info */}\n                  <div className=\"border-t pt-4\">\n                    <h4 className=\"font-semibold text-sm mb-3\">\n                      {language === \"ar\" ? \"ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ\" : \"User Contact Information\"}\n                    </h4>\n                    <div className=\"grid md:grid-cols-2 gap-3\">\n                      <div>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {language === \"ar\" ? \"ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ\" : \"Phone\"}\n                        </p>\n                        <p className=\"text-sm font-medium\">{withdrawal.phone || (language === \"ar\" ? \"ŸÑŸÖ Ÿäÿ™ŸÖ ÿ™ŸÇÿØŸäŸÖŸá\" : \"Not provided\")}</p>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {language === \"ar\" ? \"ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä\" : \"Email\"}\n                        </p>\n                        <p className=\"text-sm font-medium break-all\">{withdrawal.userEmail}</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Wallet Address */}\n                  <div className=\"border-t pt-4\">\n                    <h4 className=\"font-semibold text-sm mb-2\">\n                      {language === \"ar\" ? \"ÿπŸÜŸàÿßŸÜ ÿßŸÑŸÖÿ≠ŸÅÿ∏ÿ©\" : \"Wallet Details\"}\n                    </h4>\n                    <p className=\"text-xs text-muted-foreground mb-2\">\n                      {language === \"ar\" ? \"ÿπŸÜŸàÿßŸÜ USDT\" : \"USDT Wallet Address\"}\n                    </p>\n                    <p className=\"font-mono text-sm break-all bg-muted p-3 rounded border\">\n                      {withdrawal.walletAddress}\n                    </p>\n                  </div>\n\n                  {selectedWithdrawal === withdrawal.id && (\n                    <div className=\"space-y-3 pt-4 border-t\">\n                      <div>\n                        <label className=\"text-sm font-medium\">\n                          {language === \"ar\" ? \"ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ ÿ•ÿØÿßÿ±Ÿäÿ© (ÿßÿÆÿ™Ÿäÿßÿ±Ÿäÿ©)\" : \"Admin Notes (Optional)\"}\n                        </label>\n                        <Textarea\n                          placeholder={language === \"ar\" ? \"ÿ£ÿ∂ŸÅ ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™...\" : \"Add notes...\"}\n                          value={adminNotes}\n                          onChange={(e) => setAdminNotes(e.target.value)}\n                          className=\"mt-2\"\n                          data-testid=\"textarea-admin-notes\"\n                        />\n                      </div>\n\n                      <div className=\"flex gap-2\">\n                        <Button\n                          onClick={() => approveMutation.mutate(withdrawal.id)}\n                          disabled={approveMutation.isPending}\n                          className=\"flex-1 bg-green-600 hover:bg-green-700\"\n                          data-testid=\"button-approve-withdrawal\"\n                        >\n                          <Check className=\"h-4 w-4 mr-2\" />\n                          {approveMutation.isPending\n                            ? language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä...\" : \"Processing...\"\n                            : language === \"ar\" ? \"ŸÇÿ®ŸàŸÑ\" : \"Approve\"}\n                        </Button>\n                        <Button\n                          onClick={() => rejectMutation.mutate(withdrawal.id)}\n                          disabled={rejectMutation.isPending}\n                          className=\"flex-1 bg-red-600 hover:bg-red-700\"\n                          data-testid=\"button-reject-withdrawal\"\n                        >\n                          <X className=\"h-4 w-4 mr-2\" />\n                          {rejectMutation.isPending\n                            ? language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä...\" : \"Processing...\"\n                            : language === \"ar\" ? \"ÿ±ŸÅÿ∂\" : \"Reject\"}\n                        </Button>\n                        <Button\n                          onClick={() => {\n                            setSelectedWithdrawal(null);\n                            setAdminNotes(\"\");\n                          }}\n                          variant=\"outline\"\n                          data-testid=\"button-cancel-action\"\n                        >\n                          {language === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ°\" : \"Cancel\"}\n                        </Button>\n                      </div>\n                    </div>\n                  )}\n\n                  {selectedWithdrawal !== withdrawal.id && (\n                    <div className=\"flex gap-2 pt-4 border-t\">\n                      <Button\n                        onClick={() => setSelectedWithdrawal(withdrawal.id)}\n                        className=\"flex-1\"\n                        data-testid=\"button-select-withdrawal\"\n                      >\n                        {language === \"ar\" ? \"ŸÖÿπÿßŸÑÿ¨ÿ©\" : \"Process\"}\n                      </Button>\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Processed Requests */}\n      {processedRequests.length > 0 && (\n        <div>\n          <h2 className=\"text-xl font-bold mb-4\">\n            {language === \"ar\" ? \"ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©\" : \"Processed Requests\"}\n          </h2>\n          <div className=\"grid gap-3\">\n            {processedRequests.map((withdrawal) => (\n              <Card key={withdrawal.id} data-testid={`card-processed-${withdrawal.id}`}>\n                <CardContent className=\"pt-4\">\n                  <div className=\"flex justify-between items-center\">\n                    <div>\n                      <p className=\"font-semibold\">{withdrawal.userName}</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {withdrawal.referralCode} ‚Ä¢ ${parseFloat(withdrawal.amount).toFixed(2)}\n                      </p>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Badge\n                        variant={\n                          withdrawal.status === \"completed\"\n                            ? \"default\"\n                            : withdrawal.status === \"rejected\"\n                            ? \"destructive\"\n                            : \"secondary\"\n                        }\n                      >\n                        {withdrawal.status === \"completed\"\n                          ? language === \"ar\" ? \"ŸÖŸÉÿ™ŸÖŸÑ\" : \"Completed\"\n                          : withdrawal.status === \"rejected\"\n                          ? language === \"ar\" ? \"ŸÖÿ±ŸÅŸàÿ∂\" : \"Rejected\"\n                          : language === \"ar\" ? \"ŸÖŸàÿßŸÅŸÇ ÿπŸÑŸäŸá\" : \"Approved\"}\n                      </Badge>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {new Date(withdrawal.approvedAt || withdrawal.createdAt).toLocaleDateString()}\n                      </p>\n                    </div>\n                  </div>\n                  {withdrawal.adminNotes && (\n                    <p className=\"text-sm text-muted-foreground mt-2 pt-2 border-t\">\n                      {language === \"ar\" ? \"ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™:\" : \"Notes:\"} {withdrawal.adminNotes}\n                    </p>\n                  )}\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n",
            "size_bytes": 21835
        },
        "client/src/pages/admin/AdminPricing.tsx": {
            "content": "import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useLanguage } from \"@/lib/i18n\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\nimport { Plus, Edit, Trash2, Star, X } from \"lucide-react\";\nimport type { SubscriptionPlan } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\n\nexport default function AdminPricing() {\n  const { language } = useLanguage();\n  const { toast } = useToast();\n  const [dialogOpen, setDialogOpen] = useState(false);\n  const [editingPlan, setEditingPlan] = useState<SubscriptionPlan | null>(null);\n  \n  // Form fields\n  const [nameEn, setNameEn] = useState(\"\");\n  const [nameAr, setNameAr] = useState(\"\");\n  const [descriptionEn, setDescriptionEn] = useState(\"\");\n  const [descriptionAr, setDescriptionAr] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const [durationDays, setDurationDays] = useState(\"30\");\n  const [isPopular, setIsPopular] = useState(false);\n  const [featureEnInput, setFeatureEnInput] = useState(\"\");\n  const [featureArInput, setFeatureArInput] = useState(\"\");\n  const [featuresEn, setFeaturesEn] = useState<string[]>([]);\n  const [featuresAr, setFeaturesAr] = useState<string[]>([]);\n\n  const { data: plans, isLoading } = useQuery<SubscriptionPlan[]>({\n    queryKey: [\"/api/subscription-plans\"],\n  });\n\n  const createPlanMutation = useMutation({\n    mutationFn: async () => {\n      if (!nameEn || !nameAr || !price || !durationDays) {\n        throw new Error(\"Please fill in all required fields\");\n      }\n      return await apiRequest(\"POST\", \"/api/admin/subscription-plans\", {\n        nameEn,\n        nameAr,\n        descriptionEn,\n        descriptionAr,\n        price: parseFloat(price),\n        durationDays: parseInt(durationDays),\n        featuresEn,\n        featuresAr,\n        isPopular,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/subscription-plans\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°\" : \"Created\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿÆÿ∑ÿ© ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Plan created successfully\",\n      });\n      resetForm();\n      setDialogOpen(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.response?.data?.message || error.message || \"Failed to create plan\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updatePlanMutation = useMutation({\n    mutationFn: async () => {\n      if (!editingPlan) throw new Error(\"No plan selected\");\n      if (!nameEn || !nameAr || !price || !durationDays) {\n        throw new Error(\"Please fill in all required fields\");\n      }\n      return await apiRequest(\"PATCH\", `/api/admin/subscription-plans/${editingPlan.id}`, {\n        nameEn,\n        nameAr,\n        descriptionEn,\n        descriptionAr,\n        price: parseFloat(price),\n        durationDays: parseInt(durationDays),\n        featuresEn,\n        featuresAr,\n        isPopular,\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/subscription-plans\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´\" : \"Updated\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿÆÿ∑ÿ© ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Plan updated successfully\",\n      });\n      resetForm();\n      setDialogOpen(false);\n    },\n    onError: (error: any) => {\n      toast({\n        title: language === \"ar\" ? \"ÿÆÿ∑ÿ£\" : \"Error\",\n        description: error.response?.data?.message || error.message || \"Failed to update plan\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deletePlanMutation = useMutation({\n    mutationFn: async (planId: string) => {\n      return await apiRequest(\"DELETE\", `/api/admin/subscription-plans/${planId}`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/subscription-plans\"] });\n      toast({\n        title: language === \"ar\" ? \"ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ\" : \"Deleted\",\n        description: language === \"ar\" ? \"ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿÆÿ∑ÿ© ÿ®ŸÜÿ¨ÿßÿ≠\" : \"Plan deleted successfully\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setNameEn(\"\");\n    setNameAr(\"\");\n    setDescriptionEn(\"\");\n    setDescriptionAr(\"\");\n    setPrice(\"\");\n    setDurationDays(\"30\");\n    setIsPopular(false);\n    setFeaturesEn([]);\n    setFeaturesAr([]);\n    setFeatureEnInput(\"\");\n    setFeatureArInput(\"\");\n    setEditingPlan(null);\n  };\n\n  const openEditDialog = (plan: SubscriptionPlan) => {\n    setEditingPlan(plan);\n    setNameEn(plan.nameEn);\n    setNameAr(plan.nameAr);\n    setDescriptionEn(plan.descriptionEn || \"\");\n    setDescriptionAr(plan.descriptionAr || \"\");\n    setPrice(plan.price.toString());\n    setDurationDays(plan.durationDays.toString());\n    setFeaturesEn(plan.featuresEn || []);\n    setFeaturesAr(plan.featuresAr || []);\n    setIsPopular(plan.isPopular || false);\n    setDialogOpen(true);\n  };\n\n  const addFeatureEn = () => {\n    if (featureEnInput.trim()) {\n      setFeaturesEn([...featuresEn, featureEnInput.trim()]);\n      setFeatureEnInput(\"\");\n    }\n  };\n\n  const addFeatureAr = () => {\n    if (featureArInput.trim()) {\n      setFeaturesAr([...featuresAr, featureArInput.trim()]);\n      setFeatureArInput(\"\");\n    }\n  };\n\n  const removeFeatureEn = (index: number) => {\n    setFeaturesEn(featuresEn.filter((_, i) => i !== index));\n  };\n\n  const removeFeatureAr = (index: number) => {\n    setFeaturesAr(featuresAr.filter((_, i) => i !== index));\n  };\n\n  const closeDialog = () => {\n    setDialogOpen(false);\n    resetForm();\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"p-8\">\n        <div className=\"animate-pulse space-y-4\">\n          <div className=\"h-8 bg-muted rounded w-1/4\" />\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {[1, 2, 3].map((i) => (\n              <div key={i} className=\"h-64 bg-muted rounded\" />\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-8\">\n      <div className=\"flex items-center justify-between mb-8\">\n        <h1 className=\"text-3xl font-heading font-bold text-foreground\" data-testid=\"text-admin-pricing-title\">\n          {language === \"ar\" ? \"ÿ•ÿØÿßÿ±ÿ© ÿÆÿ∑ÿ∑ ÿßŸÑÿßÿ¥ÿ™ÿ±ÿßŸÉ\" : \"Manage Subscription Plans\"}\n        </h1>\n        <Dialog open={dialogOpen} onOpenChange={(open) => { if (open) resetForm(); setDialogOpen(open); }}>\n          <DialogTrigger asChild>\n            <Button data-testid=\"button-create-plan\" onClick={() => setDialogOpen(true)}>\n              <Plus className=\"h-4 w-4 mr-2\" />\n              {language === \"ar\" ? \"ÿ•ŸÜÿ¥ÿßÿ° ÿÆÿ∑ÿ©\" : \"Create Plan\"}\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n            <DialogHeader>\n              <DialogTitle>\n                {editingPlan\n                  ? language === \"ar\"\n                    ? \"ÿ™ÿ≠ÿ±Ÿäÿ± ÿßŸÑÿÆÿ∑ÿ©\"\n                    : \"Edit Plan\"\n                  : language === \"ar\"\n                  ? \"ÿ•ŸÜÿ¥ÿßÿ° ÿÆÿ∑ÿ© ÿ¨ÿØŸäÿØÿ©\"\n                  : \"Create New Plan\"}\n              </DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium\">Name (English)</label>\n                  <Input value={nameEn} onChange={(e) => setNameEn(e.target.value)} placeholder=\"e.g., Starter\" data-testid=\"input-name-en\" />\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Name (Arabic)</label>\n                  <Input value={nameAr} onChange={(e) => setNameAr(e.target.value)} placeholder=\"ŸÖÿ´ÿßŸÑ: ÿ£ÿ≥ÿßÿ≥Ÿä\" data-testid=\"input-name-ar\" />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium\">Price ($)</label>\n                  <Input type=\"number\" step=\"0.01\" value={price} onChange={(e) => setPrice(e.target.value)} data-testid=\"input-price\" />\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Duration (days)</label>\n                  <Input type=\"number\" value={durationDays} onChange={(e) => setDurationDays(e.target.value)} data-testid=\"input-duration\" />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"text-sm font-medium\">Description (English)</label>\n                  <Textarea value={descriptionEn} onChange={(e) => setDescriptionEn(e.target.value)} data-testid=\"input-desc-en\" />\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Description (Arabic)</label>\n                  <Textarea value={descriptionAr} onChange={(e) => setDescriptionAr(e.target.value)} data-testid=\"input-desc-ar\" />\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <label className=\"text-sm font-medium\">{language === \"ar\" ? \"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ (ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä)\" : \"Features (English)\"}</label>\n                <div className=\"flex gap-2\">\n                  <Input value={featureEnInput} onChange={(e) => setFeatureEnInput(e.target.value)} placeholder=\"Add a feature\" data-testid=\"input-feature-en\" />\n                  <Button onClick={addFeatureEn} size=\"sm\" data-testid=\"button-add-feature-en\">\n                    <Plus className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {featuresEn.map((feature, i) => (\n                    <Badge key={i} variant=\"secondary\" className=\"flex items-center gap-1\" data-testid={`badge-feature-en-${i}`}>\n                      {feature}\n                      <button onClick={() => removeFeatureEn(i)} className=\"ml-1 hover:opacity-70\">\n                        <X className=\"h-3 w-3\" />\n                      </button>\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <label className=\"text-sm font-medium\">{language === \"ar\" ? \"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™ (ÿπÿ±ÿ®Ÿä)\" : \"Features (Arabic)\"}</label>\n                <div className=\"flex gap-2\">\n                  <Input value={featureArInput} onChange={(e) => setFeatureArInput(e.target.value)} placeholder=\"ÿ£ÿ∂ŸÅ ŸÖŸäÿ≤ÿ©\" data-testid=\"input-feature-ar\" />\n                  <Button onClick={addFeatureAr} size=\"sm\" data-testid=\"button-add-feature-ar\">\n                    <Plus className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n                <div className=\"flex flex-wrap gap-2\">\n                  {featuresAr.map((feature, i) => (\n                    <Badge key={i} variant=\"secondary\" className=\"flex items-center gap-1\" data-testid={`badge-feature-ar-${i}`}>\n                      {feature}\n                      <button onClick={() => removeFeatureAr(i)} className=\"ml-1 hover:opacity-70\">\n                        <X className=\"h-3 w-3\" />\n                      </button>\n                    </Badge>\n                  ))}\n                </div>\n              </div>\n\n              <label className=\"flex items-center gap-2\">\n                <input type=\"checkbox\" checked={isPopular} onChange={(e) => setIsPopular(e.target.checked)} data-testid=\"input-is-popular\" className=\"w-4 h-4\" />\n                <span className=\"text-sm font-medium\">{language === \"ar\" ? \"ÿÆÿ∑ÿ© ÿ¥ŸáŸäÿ±ÿ©\" : \"Mark as popular\"}</span>\n              </label>\n\n              <div className=\"flex gap-2\">\n                <Button onClick={() => (editingPlan ? updatePlanMutation.mutate() : createPlanMutation.mutate())} className=\"flex-1\" disabled={createPlanMutation.isPending || updatePlanMutation.isPending} data-testid=\"button-save-plan\">\n                  {createPlanMutation.isPending || updatePlanMutation.isPending ? language === \"ar\" ? \"ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ≠ŸÅÿ∏...\" : \"Saving...\" : language === \"ar\" ? \"ÿ≠ŸÅÿ∏\" : \"Save\"}\n                </Button>\n                <Button onClick={closeDialog} variant=\"outline\" data-testid=\"button-cancel-plan\">\n                  {language === \"ar\" ? \"ÿ•ŸÑÿ∫ÿßÿ°\" : \"Cancel\"}\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {plans?.map((plan) => (\n          <Card key={plan.id} className=\"hover-elevate transition-all relative\" data-testid={`card-plan-${plan.id}`}>\n            {plan.isPopular && (\n              <div className=\"absolute top-4 right-4\">\n                <Badge className=\"bg-primary text-primary-foreground flex gap-1\" data-testid={`badge-popular-${plan.id}`}>\n                  <Star className=\"h-3 w-3\" />\n                  {language === \"ar\" ? \"ÿ¥ŸáŸäÿ±\" : \"Popular\"}\n                </Badge>\n              </div>\n            )}\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-xl\">{language === \"ar\" ? plan.nameAr : plan.nameEn}</CardTitle>\n              <p className=\"text-sm text-muted-foreground\">{language === \"ar\" ? plan.descriptionAr : plan.descriptionEn}</p>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <div className=\"text-3xl font-bold text-foreground\">\n                  ${plan.price}\n                  <span className=\"text-sm text-muted-foreground font-normal\">\n                    {\" \"}\n                    {language === \"ar\" ? \"ŸÑŸÖÿØÿ©\" : \"for\"} {plan.durationDays}{\" \"}\n                    {language === \"ar\" ? \"ŸäŸàŸÖ\" : \"days\"}\n                  </span>\n                </div>\n              </div>\n\n              {(plan.featuresEn?.length || 0) > 0 && (\n                <div className=\"space-y-1\">\n                  <p className=\"text-xs font-medium text-muted-foreground\">{language === \"ar\" ? \"ÿßŸÑŸÖŸÖŸäÿ≤ÿßÿ™\" : \"Features\"}</p>\n                  <div className=\"flex flex-wrap gap-1\">\n                    {(language === \"ar\" ? plan.featuresAr : plan.featuresEn)?.map((feature, i) => (\n                      <Badge key={i} variant=\"outline\" className=\"text-xs\">\n                        {feature}\n                      </Badge>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              <div className=\"flex gap-2\">\n                <Button variant=\"outline\" size=\"sm\" onClick={() => openEditDialog(plan)} className=\"flex-1\" data-testid={`button-edit-plan-${plan.id}`}>\n                  <Edit className=\"h-4 w-4 mr-1\" />\n                  {language === \"ar\" ? \"ÿ™ÿ≠ÿ±Ÿäÿ±\" : \"Edit\"}\n                </Button>\n                <Button variant=\"outline\" size=\"sm\" onClick={() => deletePlanMutation.mutate(plan.id)} className=\"flex-1\" data-testid={`button-delete-plan-${plan.id}`}>\n                  <Trash2 className=\"h-4 w-4 mr-1 text-destructive\" />\n                  {language === \"ar\" ? \"ÿ≠ÿ∞ŸÅ\" : \"Delete\"}\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {plans?.length === 0 && (\n        <Card>\n          <CardContent className=\"p-8 text-center\">\n            <p className=\"text-muted-foreground\">\n              {language === \"ar\" ? \"ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿÆÿ∑ÿ∑ ÿßÿ¥ÿ™ÿ±ÿßŸÉ\" : \"No subscription plans yet\"}\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n",
            "size_bytes": 16004
        },
        "server/hlsUtils.ts": {
            "content": "import fs from \"fs\";\nimport path from \"path\";\nimport { exec } from \"child_process\";\nimport { promisify } from \"util\";\n\nconst execAsync = promisify(exec);\n\ninterface HLSConfig {\n  videoPath: string;\n  outputDir: string;\n  segmentDuration?: number;\n  encryptionKey?: string;\n}\n\nexport class HLSConverter {\n  // Generate AES-128 encryption key (16 bytes = 128 bits)\n  static generateEncryptionKey(): string {\n    return require(\"crypto\").randomBytes(16).toString(\"hex\");\n  }\n\n  // Convert MP4 to HLS format with encryption (optimized for speed)\n  static async convertToHLS(config: HLSConfig): Promise<string> {\n    const { videoPath, outputDir, segmentDuration = 4, encryptionKey } = config;\n\n    // Create output directory\n    if (!fs.existsSync(outputDir)) {\n      fs.mkdirSync(outputDir, { recursive: true });\n    }\n\n    const manifestPath = path.join(outputDir, \"playlist.m3u8\");\n    const keyPath = path.join(outputDir, \"encryption.key\");\n    const keyInfoPath = path.join(outputDir, \"key.info\");\n\n    // Skip if already converted\n    if (fs.existsSync(manifestPath)) {\n      return manifestPath;\n    }\n\n    // Write encryption key to file\n    if (encryptionKey) {\n      fs.writeFileSync(keyPath, Buffer.from(encryptionKey, \"hex\"));\n      fs.writeFileSync(keyInfoPath, `file://${keyPath}\\n`);\n    }\n\n    try {\n      // Optimized FFmpeg command for faster conversion\n      let ffmpegCmd = `ffmpeg -i \"${videoPath}\" -c:v libx264 -preset fast -crf 28 -c:a aac -b:a 128k -hls_time ${segmentDuration} -hls_list_size 0`;\n\n      if (encryptionKey) {\n        ffmpegCmd += ` -hls_key_info_file \"${keyInfoPath}\"`;\n      }\n\n      ffmpegCmd += ` -hls_segment_type mpegts \"${manifestPath}\" -y -v quiet`;\n\n      // Run conversion\n      console.log(`Converting video to HLS: ${videoPath}`);\n      await execAsync(ffmpegCmd, { maxBuffer: 50 * 1024 * 1024, timeout: 300000 });\n      console.log(`Conversion complete: ${manifestPath}`);\n\n      return manifestPath;\n    } catch (error: any) {\n      console.error(\"HLS conversion error:\", error.message);\n      throw new Error(`Failed to convert video to HLS: ${error.message}`);\n    }\n  }\n\n  // Get HLS manifest content with encryption key info\n  static getManifestWithKey(\n    manifestPath: string,\n    encryptionKey?: string,\n    keyUrl?: string\n  ): string {\n    let manifest = fs.readFileSync(manifestPath, \"utf-8\");\n\n    // Inject encrypted key URL if encryption is enabled\n    if (encryptionKey && keyUrl) {\n      manifest = manifest.replace(\n        /#EXT-X-KEY:METHOD=AES-128,URI=\"[^\"]*\"/,\n        `#EXT-X-KEY:METHOD=AES-128,URI=\"${keyUrl}\"`\n      );\n    }\n\n    return manifest;\n  }\n\n  // Clean up HLS segments for a lesson\n  static cleanup(outputDir: string): void {\n    try {\n      if (fs.existsSync(outputDir)) {\n        const files = fs.readdirSync(outputDir);\n        files.forEach((file) => {\n          fs.unlinkSync(path.join(outputDir, file));\n        });\n        fs.rmdirSync(outputDir);\n      }\n    } catch (error) {\n      console.error(\"HLS cleanup error:\", error);\n    }\n  }\n\n  // Check if HLS segments already exist\n  static hasSegments(outputDir: string): boolean {\n    return fs.existsSync(path.join(outputDir, \"playlist.m3u8\"));\n  }\n}\n",
            "size_bytes": 3192
        },
        "client/src/components/landing/MarketTicker.tsx": {
            "content": "import { useEffect, useRef } from \"react\";\n\ndeclare global {\n  interface Window {\n    TradingView: any;\n  }\n}\n\nexport function MarketTicker() {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const scriptRef = useRef<HTMLScriptElement | null>(null);\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    // Clear any existing content\n    containerRef.current.innerHTML = `\n      <div class=\"tradingview-widget-container\" style=\"height: 44px;\">\n        <div class=\"tradingview-widget-container__widget\" style=\"height: 100%;\"></div>\n      </div>\n    `;\n\n    // Load TradingView script\n    if (!scriptRef.current) {\n      scriptRef.current = document.createElement(\"script\");\n      scriptRef.current.src =\n        \"https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js\";\n      scriptRef.current.async = true;\n\n      scriptRef.current.onload = () => {\n        if (window.TradingView && window.TradingView.widget) {\n          try {\n            new window.TradingView.widget({\n              symbols: [\n                { proName: \"CRYPTOCAP:BTC\", title: \"Bitcoin\" },\n                { proName: \"CRYPTOCAP:ETH\", title: \"Ethereum\" },\n                { proName: \"BINANCE:BNBUSDT\", title: \"BNB\" },\n                { proName: \"NASDAQ:AAPL\", title: \"Apple\" },\n                { proName: \"NASDAQ:GOOGL\", title: \"Google\" },\n                { proName: \"NASDAQ:MSFT\", title: \"Microsoft\" },\n                { proName: \"TVC:GOLD\", title: \"Gold\" },\n                { proName: \"FX_IDC:EURUSD\", title: \"EUR/USD\" },\n                { proName: \"FX_IDC:GBPUSD\", title: \"GBP/USD\" },\n                { proName: \"FX_IDC:USDJPY\", title: \"USD/JPY\" },\n              ],\n              showSymbolLogo: true,\n              isTransparent: true,\n              displayMode: \"compact\",\n              locale: \"en\",\n              largeChartUrl: \"\",\n            });\n          } catch (error) {\n            console.error(\"TradingView widget error:\", error);\n          }\n        }\n      };\n\n      containerRef.current.appendChild(scriptRef.current);\n    }\n\n    return () => {\n      if (scriptRef.current && containerRef.current && scriptRef.current.parentNode === containerRef.current) {\n        containerRef.current.removeChild(scriptRef.current);\n        scriptRef.current = null;\n      }\n    };\n  }, []);\n\n  return (\n    <div className=\"w-full bg-muted/40 border-y border-border py-0\">\n      <div className=\"w-full px-0\" ref={containerRef} style={{ minHeight: \"44px\" }} />\n    </div>\n  );\n}\n",
            "size_bytes": 2488
        },
        "client/src/i18n/config.ts": {
            "content": "import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport enTranslations from \"./locales/en.json\";\nimport arTranslations from \"./locales/ar.json\";\n\nconst resources = {\n  en: { translation: enTranslations },\n  ar: { translation: arTranslations },\n};\n\nif (!i18n.isInitialized) {\n  i18n.use(initReactI18next).init({\n    resources,\n    lng: localStorage.getItem(\"language\") || \"en\",\n    fallbackLng: \"en\",\n    interpolation: { escapeValue: false },\n    react: { useSuspense: false },\n  });\n}\n\nexport default i18n;\n",
            "size_bytes": 537
        },
        "client/src/components/landing/WhoWeAre.tsx": {
            "content": "import { useEffect, useRef } from \"react\";\nimport gsap from \"gsap\";\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\nimport { Card } from \"@/components/ui/card\";\nimport { Award, Users, Zap, Target } from \"lucide-react\";\nimport { useTranslation } from \"react-i18next\";\n\ngsap.registerPlugin(ScrollTrigger);\n\nconst valueIcons = [Award, Users, Zap, Target];\n\nexport function WhoWeAre() {\n  const { t } = useTranslation();\n  const sectionRef = useRef<HTMLDivElement>(null);\n  const cardsRef = useRef<HTMLDivElement[]>([]);\n\n  const values = [\n    {\n      key: \"excellence\",\n      icon: Award,\n    },\n    {\n      key: \"community\",\n      icon: Users,\n    },\n    {\n      key: \"innovation\",\n      icon: Zap,\n    },\n    {\n      key: \"results\",\n      icon: Target,\n    },\n  ];\n\n  useEffect(() => {\n    if (!sectionRef.current) return;\n\n    const ctx = gsap.context(() => {\n      gsap.fromTo(\n        \".who-we-are-title\",\n        { opacity: 0, y: 30 },\n        {\n          opacity: 1,\n          y: 0,\n          duration: 0.8,\n          scrollTrigger: {\n            trigger: sectionRef.current,\n            start: \"top 60%\",\n          },\n        }\n      );\n\n      cardsRef.current.forEach((el, index) => {\n        gsap.fromTo(\n          el,\n          { opacity: 0, y: 20 },\n          {\n            opacity: 1,\n            y: 0,\n            duration: 0.6,\n            delay: index * 0.1,\n            scrollTrigger: {\n              trigger: sectionRef.current,\n              start: \"top 50%\",\n            },\n          }\n        );\n      });\n    }, sectionRef);\n\n    return () => ctx.revert();\n  }, []);\n\n  return (\n    <section ref={sectionRef} className=\"py-20 bg-background\" data-testid=\"section-who-we-are\">\n      <div className=\"container mx-auto px-6\">\n        <div className=\"max-w-3xl mx-auto mb-16 text-center\">\n          <h2 className=\"who-we-are-title text-4xl md:text-5xl font-bold mb-6\">\n            {t(\"landing.whoWeAre\")}\n          </h2>\n          <p className=\"text-lg text-muted-foreground\">\n            {t(\"landing.description\")}\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-6\">\n          {values.map((value, index) => {\n            const Icon = value.icon;\n            return (\n              <div\n                key={index}\n                ref={(el) => {\n                  if (el) cardsRef.current[index] = el;\n                }}\n              >\n                <Card className=\"p-6 h-full hover-elevate text-center\" data-testid={`value-card-${index}`}>\n                  <Icon className=\"h-12 w-12 mx-auto mb-4 text-primary\" />\n                  <h3 className=\"text-xl font-bold mb-4\">{t(`landing.values.${value.key}`)}</h3>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {t(`landing.values.${value.key}Desc`)}\n                  </p>\n                </Card>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </section>\n  );\n}\n",
            "size_bytes": 2952
        },
        "client/src/components/landing/EnhancedTestimonials.tsx": {
            "content": "import { useEffect, useRef } from \"react\";\nimport gsap from \"gsap\";\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\nimport { Card } from \"@/components/ui/card\";\nimport { Star } from \"lucide-react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useTranslation } from \"react-i18next\";\n\ngsap.registerPlugin(ScrollTrigger);\n\nconst testimonialsData = [\n  {\n    name: \"Ahmed Hassan\",\n    ar_name: \"ÿ£ÿ≠ŸÖÿØ ÿ≠ÿ≥ŸÜ\",\n    role: \"Forex Trader\",\n    ar_role: \"ŸÖÿ™ÿØÿßŸàŸÑ ŸÅŸàÿ±ŸÉÿ≥\",\n    content:\n      \"Leed Academy transformed my trading journey. The strategies taught here are practical and profitable.\",\n    ar_content:\n      \"ÿ≠ŸàŸÑÿ™ ÿ£ŸÉÿßÿØŸäŸÖŸäÿ© ŸÑŸäÿØ ÿ±ÿ≠ŸÑÿ™Ÿä ŸÅŸä ÿßŸÑÿ™ÿØÿßŸàŸÑ. ÿßŸÑÿßÿ≥ÿ™ÿ±ÿßÿ™Ÿäÿ¨Ÿäÿßÿ™ ÿßŸÑŸÖÿØÿ±ÿ≥ÿ© ŸáŸÜÿß ÿπŸÖŸÑŸäÿ© ŸàŸÖÿ±ÿ®ÿ≠ÿ©.\",\n    rating: 5,\n    image: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop\",\n    initials: \"AH\",\n  },\n  {\n    name: \"Sarah Johnson\",\n    ar_name: \"ÿ≥ÿßÿ±ÿ© ÿ¨ŸàŸÜÿ≥ŸàŸÜ\",\n    role: \"Crypto Investor\",\n    ar_role: \"ŸÖÿ≥ÿ™ÿ´ŸÖÿ± ÿπŸÖŸÑÿßÿ™ ÿ±ŸÇŸÖŸäÿ©\",\n    content:\n      \"Best investment in my trading education. The mentors are exceptional and supportive.\",\n    ar_content:\n      \"ÿ£ŸÅÿ∂ŸÑ ÿßÿ≥ÿ™ÿ´ŸÖÿßÿ± ŸÅŸä ÿ™ÿπŸÑŸäŸÖŸä ŸÑŸÑÿ™ÿØÿßŸàŸÑ. ÿßŸÑŸÖÿØÿ±ÿ®ŸàŸÜ ÿßÿ≥ÿ™ÿ´ŸÜÿßÿ¶ŸäŸàŸÜ ŸàÿØÿßÿπŸÖŸàŸÜ ÿ¨ÿØÿß.\",\n    rating: 5,\n    image: \"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop\",\n    initials: \"SJ\",\n  },\n  {\n    name: \"Mohammed Ali\",\n    ar_name: \"ŸÖÿ≠ŸÖÿØ ÿπŸÑŸä\",\n    role: \"Stock Trader\",\n    ar_role: \"ŸÖÿ™ÿØÿßŸàŸÑ ÿßŸÑÿ£ÿ≥ŸáŸÖ\",\n    content:\n      \"Clear explanations, real-world examples, and consistent profits. Highly recommended!\",\n    ar_content:\n      \"ÿ¥ÿ±Ÿàÿ≠ÿßÿ™ Ÿàÿßÿ∂ÿ≠ÿ© Ÿàÿ£ŸÖÿ´ŸÑÿ© ÿ≠ŸÇŸäŸÇŸäÿ© Ÿàÿ£ÿ±ÿ®ÿßÿ≠ ŸÖÿ≥ÿ™ŸÖÿ±ÿ©. ÿ£ŸÜÿµÿ≠ ÿ®Ÿáÿß ÿ®ÿ¥ÿØÿ©!\",\n    rating: 5,\n    image: \"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop\",\n    initials: \"MA\",\n  },\n  {\n    name: \"Emily Chen\",\n    ar_name: \"ÿ•ŸäŸÖŸäŸÑŸä ÿ™ÿ¥ŸäŸÜ\",\n    role: \"Professional Trader\",\n    ar_role: \"ŸÖÿ™ÿØÿßŸàŸÑ ŸÖÿ≠ÿ™ÿ±ŸÅ\",\n    content:\n      \"The community aspect is amazing. Learning together with other traders accelerates growth.\",\n    ar_content:\n      \"ÿ¨ÿßŸÜÿ® ÿßŸÑŸÖÿ¨ÿ™ŸÖÿπ ÿ±ÿßÿ¶ÿπ ÿ¨ÿØÿß. ÿßŸÑÿ™ÿπŸÑŸÖ ŸÖÿπ ŸÖÿ™ÿØÿßŸàŸÑŸäŸÜ ÿ¢ÿÆÿ±ŸäŸÜ Ÿäÿ≥ÿ±ÿπ ÿßŸÑŸÜŸÖŸà.\",\n    rating: 4.5,\n    image: \"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop\",\n    initials: \"EC\",\n  },\n];\n\nexport function EnhancedTestimonials() {\n  const { t } = useTranslation();\n  const sectionRef = useRef<HTMLDivElement>(null);\n  const cardsRef = useRef<HTMLDivElement[]>([]);\n\n  if (!testimonialsData || testimonialsData.length === 0) {\n    return null;\n  }\n\n  const testimonials = Array.isArray(testimonialsData) ? testimonialsData : [];\n\n  useEffect(() => {\n    if (!sectionRef.current) return;\n\n    const ctx = gsap.context(() => {\n      gsap.fromTo(\n        \".testimonials-title\",\n        { opacity: 0, y: 30 },\n        {\n          opacity: 1,\n          y: 0,\n          duration: 0.8,\n          scrollTrigger: {\n            trigger: sectionRef.current,\n            start: \"top 60%\",\n          },\n        }\n      );\n\n      cardsRef.current.forEach((el, index) => {\n        gsap.fromTo(\n          el,\n          { opacity: 0, y: 20 },\n          {\n            opacity: 1,\n            y: 0,\n            duration: 0.6,\n            delay: index * 0.1,\n            scrollTrigger: {\n              trigger: sectionRef.current,\n              start: \"top 50%\",\n            },\n          }\n        );\n      });\n    }, sectionRef);\n\n    return () => ctx.revert();\n  }, []);\n\n  return (\n    <section\n      ref={sectionRef}\n      className=\"py-20 bg-muted/30\"\n      data-testid=\"section-enhanced-testimonials\"\n    >\n      <div className=\"container mx-auto px-6\">\n        <div className=\"text-center mb-16\">\n          <h2 className=\"testimonials-title text-4xl md:text-5xl font-bold mb-6\">\n            {t(\"landing.testimonials.title\")}\n          </h2>\n          <p className=\"text-lg text-muted-foreground max-w-2xl mx-auto\">\n            {t(\"landing.testimonials.subtitle\")}\n          </p>\n        </div>\n\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {testimonials.map((testimonial, index) => (\n            <div\n              key={index}\n              ref={(el) => {\n                if (el) cardsRef.current[index] = el;\n              }}\n            >\n              <Card\n                className=\"p-6 h-full hover-elevate flex flex-col\"\n                data-testid={`testimonial-${index}`}\n              >\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <Avatar>\n                      <AvatarImage src={testimonial.image} />\n                      <AvatarFallback>{testimonial.initials}</AvatarFallback>\n                    </Avatar>\n                    <div>\n                      <h3 className=\"font-bold text-foreground\">\n                        {testimonial.name}\n                      </h3>\n                      <p className=\"text-xs text-muted-foreground\">\n                        {testimonial.role}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex gap-1 mb-3\">\n                  {Array.from({ length: 5 }).map((_, i) => (\n                    <Star\n                      key={i}\n                      className={`h-4 w-4 ${\n                        i < Math.floor(testimonial.rating)\n                          ? \"fill-yellow-400 text-yellow-400\"\n                          : i < testimonial.rating\n                            ? \"fill-yellow-400 text-yellow-400 opacity-50\"\n                            : \"text-muted-foreground\"\n                      }`}\n                    />\n                  ))}\n                </div>\n\n                <p className=\"text-foreground mb-3 flex-grow\">\n                  \"{testimonial.content}\"\n                </p>\n              </Card>\n            </div>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n",
            "size_bytes": 6165
        },
        "client/src/components/landing/StatsSection.tsx": {
            "content": "import { useEffect, useRef } from \"react\";\nimport gsap from \"gsap\";\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\nimport { useTranslation } from \"react-i18next\";\n\ngsap.registerPlugin(ScrollTrigger);\n\nexport function StatsSection() {\n  const { t } = useTranslation();\n  const containerRef = useRef<HTMLDivElement>(null);\n  const numbersRef = useRef<HTMLDivElement[]>([]);\n\n  const stats = [\n    { number: 5000, key: \"students\", decimals: 0 },\n    { number: 150, key: \"hours\", decimals: 0 },\n    { number: 98, key: \"successRate\", decimals: 0 },\n    { number: 4.9, key: \"rating\", decimals: 1 },\n  ];\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    const ctx = gsap.context(() => {\n      numbersRef.current.forEach((el, index) => {\n        const target = stats[index];\n        const finalNumber = target.number;\n\n        gsap.fromTo(\n          { value: 0 },\n          { value: finalNumber, duration: 3, ease: \"power2.out\" },\n          {\n            scrollTrigger: {\n              trigger: containerRef.current,\n              start: \"top center\",\n              toggleActions: \"play none none reverse\",\n            },\n            onUpdate: function () {\n              if (el) {\n                el.textContent = target.decimals\n                  ? this.targets()[0].value.toFixed(target.decimals)\n                  : Math.round(this.targets()[0].value).toString();\n              }\n            },\n          }\n        );\n      });\n    }, containerRef);\n\n    return () => ctx.revert();\n  }, []);\n\n  return (\n    <section\n      ref={containerRef}\n      className=\"py-20 bg-gradient-to-r from-primary/10 via-accent/10 to-primary/10\"\n      data-testid=\"section-stats\"\n    >\n      <div className=\"container mx-auto px-6\">\n        <div className=\"grid md:grid-cols-4 gap-8 text-center\">\n          {stats.map((stat, index) => (\n            <div key={index} data-testid={`stat-${index}`}>\n              <div className=\"mb-3\">\n                <div\n                  ref={(el) => {\n                    if (el) numbersRef.current[index] = el;\n                  }}\n                  className=\"text-5xl font-bold text-primary\"\n                >\n                  0\n                </div>\n                <span className=\"text-primary text-3xl\">+</span>\n              </div>\n              <p className=\"text-lg font-semibold text-foreground\">\n                {t(`landing.stats.${stat.key}`)}\n              </p>\n            </div>\n          ))}\n        </div>\n      </div>\n    </section>\n  );\n}\n",
            "size_bytes": 2495
        }
    },
    "version": 2
}